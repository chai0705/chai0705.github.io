<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta name="description" content="永远年轻，永远热泪盈眶" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>工作记录((6月第4个星期) |  热爱学习的未来酱</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="热爱学习的未来酱" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-06_工作记录/18_工作记录(六月第4个星期)"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  工作记录((6月第4个星期)
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/06/04/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/18_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(%E5%85%AD%E6%9C%88%E7%AC%AC4%E4%B8%AA%E6%98%9F%E6%9C%9F)/" class="article-date">
  <time datetime="2024-06-04T13:26:56.000Z" itemprop="datePublished">2024-06-04</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/">工作记录</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">4.6k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">17 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="工作记录星期二"><a class="markdownIt-Anchor" href="#工作记录星期二"></a> 工作记录(星期二)</h1>
<p>==摆脱一份幻觉比发现一个真理更能使人明智==</p>
<p>==当你在凝视深渊的时候，深渊也在凝视你==</p>
<hr />
<p>自从修改了追求之后，就变的好了一点，陷入精神内耗的时间确实大大的减少了，但是好像也有不好的地方，在之前的时候会读书来解决问题，但是现在呢，睡觉的时间确实是多了，工作中的效率确实也提高了很多，但是在下班之后、早晨清醒之后的学习时间也大大的降低了，而之前是怎样的呢？是一天的时间都不好，工作效率低、早起不做正经事情、完善陷入盲目的奶头乐之中，不是吗？而现在呢，在工作中的效率极大的提高了，目前有问题的地方就在于中午一个小时的时间，这段时间确实也可以很好的利用一下，就跟我刚来工作的时候，那时候就真的很让人怀念呀，现在反而有些束手束脚了，瞻前顾后，没有那时候的朝气了，这一点我认为就挺不好的，之前中午的时候还看一会儿书，现在也看不下去了，主要还是内心不宁静了，虽然认可开卷有益这个道理，但是现在却无法静下来了，有得到就有失去是吗,但我也见过那些厉害的人，为什么人可以做到别人做不到事情呢？不是很理解，故天将降大任于是人也，必先苦其心志，劳其筋骨，增益其所不能，是这样吗，那些伟大的人，也是这样的吗，要想做到其他人做不到的事情，就必须有超人的毅力与品性，如果连这些都做不到，更何况其他呢？你说是吗。就像我，连最简单的直播都克服不了，更何况其他了。</p>
<p>后来我发现，其实直播也不是必然的，我甚至可以将他换为一些教程，我可以听着一些教程睡觉，今天晚上可以试一下，并不是非得看直播才行，就一步一步的适应自己呗。然后开始后续内容的规划了，怎么说呢，女生确实有问题，不论是苹果还是田，都一样的菜，还笨，田是不愿意学习，没有人逼迫着就不学习，走一步看一步，而苹果就是单纯的笨，不懂得总结和规划，今天犯得毛病，明天还会犯，而且听不进去别人的建议，不论是好亦或者不好都不会改变，除非有极强大的外力，否则都不会改变的，以人为镜，可以明得失，我只希望我不会这样，我只需要按照我自己的想法来就行了，其他的其实倒也无所谓了。</p>
<p>目前摆在我面前的大致是有两条路，一条是C系统编程的外设案例，这一点我其实并不是很能理解，还是不能理解法师真正的想表达什么，亦或者说最终的目标是什么，不是很理解他的新路历程，这一点不理解后面的路程必然也走不通，亦或者四处乱逛，然后回到原点，法师是从客户的方向出发的，他想的是客户能很快的将这些外设用起来，而现在的情况是怎样的呢？写了很多的测试手册，但是只停留在了表面上，真的是这样吗？在开会的时候说的是什么？我记得有个WIFI，wifi的作用是什么，是联网，然后让用户进行使用，那他说的是什么？是如何写一个联网的应用程序吗？如果说要研究一下，不应该研究一下开发板上的多设备网络连接吗，这个是对的吧。为什么有线网和4g同时连接的时候会有问题呢，为什么只能有一个网络能正常上网，不能ping通另一个局域网下的IP，这些才是问题，反正我认为这个是不合理的，现在总结的跟我最初开会的时候是一样的，除了网络之外就是其他的外设了，485、串口这些如果想要在应用中用起来，还是很简单的，我的系统编程手册里有写，法师的串口驱动里面也有它，虽然我还没看串口，相信应该不是很难，苹果写的串口手册，看不看吧，没有任何价值，看了之后还会有不好的情绪，还是算了吧，真的影响观感，再然后是CAN，这个确实可以看一下，这个CAN，但是法师目前在录制的课程就是CAN，就比如CAN的协议、CAN的一些基本知识，我并不知道，当然如果让我自己去学习也不是不行，但是现在的话已经有了SPI、I2C的前车之鉴，也就不再想要学习了，哦对，除了这个之外还有摄像头，这个确实也不容易呀，就比如什么RKISP、RKAIQ等等等，问题很大，反正就目前来看的话，这个外设相关的手册我不晓得怎么写，现在来分析一下NPU相关的内容要如何写。</p>
<p>目前NPU的问题在哪里，例程确实很少，之前的例程也就只有我做的那三个，python做的肯定是有问题的，也不可能要由python来做，这肯定是不对的，现在的追求是如何做的美观，而且能将我自己讲明白，了解其中的原理，做的任何事情都应该有理有据，之前并没有涉及到训练相关的，但我想肯定是不难的，一个训练的环境而已，无论是什么模型，都可以分为模型的训练、电脑端的推理、嵌入式设备部署，前两个到底该不该嵌入式工程师的工作呢，不是很理解，但是如果想要进行嵌入式部署，肯定是需要有模型的吧，而且有的模型它的前处理也是需要改的，这就矛盾了其实。</p>
<p>其实瑞芯微已经给了很多的模型，我认为只要将瑞芯微的这些模型都跑通，就很好了，还有它的这一系列的值又是怎么出来的，都有深究的必要，而当这些都能跑通之后再来研究具体的那些优化，就比如mpp，编解码、推流等等，还有关于图形界面相关的内容，这些都先放放，就先搞NPU。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/airockchip/rknn_model_zoo">https://github.com/airockchip/rknn_model_zoo</a></p>
<p>其实这些的测试都很简单，都先跑通，然后找个好的测试方法,最先要做的呢，先对rknn_model_zoo进行一些学习，具体应该如何使用，等真正的学会使用之后再来分析手册应该怎样写。</p>
<p>因为默认情况下的rknn_model_zoo这个代码里面是没有模型的，所以还需要进行模型转换，而每个板子都不一样，所以瑞芯微没提供模型，我现在要做的是先进行模型转换</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda create -n rknn python=3.8</span><br><span class="line">conda activate rknn</span><br></pre></td></tr></table></figure>
<p>测试清华源会失败，华为源是没有问题的</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install rknn_toolkit2-2.0.0b17+a7d83749-cp38-cp38-linux_x86_64.whl -i https://repo.huaweicloud.com/repository/pypi/simple/</span><br></pre></td></tr></table></figure>
<p>==测试发现conda环境也会加载到ssh，所以可以放心用SSH进行开发==</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">第一个deeplab模型</span></span><br><span class="line">python3 convert.py ../model/deeplab-v3-plus-mobilenet-v2.pb rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251655394.png" alt="image-20240625165551111" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">第二个lite-transformer模型</span></span><br><span class="line">python3 convert.py ../model/lite-transformer-encoder-16.onnx rk3568 fp</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251655263.png" alt="image-20240625165533117" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">第三个lprnet模型</span></span><br><span class="line">python3 convert.py ../model/lprnet.onnx rk3568 fp</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251702661.png" alt="image-20240625170258469" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第四个mobilenet模型</span>  </span><br><span class="line">python3 mobilenet.py</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251711512.png" alt="image-20240625171123337" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这里有些问题，在第二个模型里</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第五个PPOCR模型</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">PPOCR-Det</span></span><br><span class="line">python convert.py ../model/ppocrv4_det.onnx rk3568 i8</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">PPOCR-Rec</span></span><br><span class="line"> python convert.py ../model/ppocrv4_rec.onnx rk3568 fp</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">PPOCR-System</span></span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251713368.png" alt="image-20240625171341224" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第六个ppseg模型</span>   </span><br><span class="line"> python convert.py ../model/pp_liteseg_cityscapes.onnx rk3568 fp</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251720075.png" alt="image-20240625172000974" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第七个ppyoloe模型</span>  </span><br><span class="line">python convert.py ../model/ppyoloe_s.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251721577.png" alt="image-20240625172138401" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第八个resnet模型</span>   </span><br><span class="line">python resnet.py ../model/resnet50-v2-7.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251723228.png" alt="image-20240625172357020" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第九个RetinaFace模型</span>   </span><br><span class="line">python convert.py ../model/RetinaFace_mobile320.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251725163.png" alt="image-20240625172552009" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第十个yolov5模型</span>  </span><br><span class="line">python convert.py ../model/yolov5s_relu.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251729279.png" alt="image-20240625172929155" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第十二个yolov5_seg模型</span> </span><br><span class="line">python convert.py ../model/yolov5s-seg.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251733877.png" alt="image-20240625173347712" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第十三个yolov6模型</span>   </span><br><span class="line">python convert.py ../model/yolov6n.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251736833.png" alt="image-20240625173601667" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第十四个yolov7模型</span> </span><br><span class="line">python convert.py ../model/yolov7-tiny.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251737089.png" alt="image-20240625173740964" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第十五个yolov8模型</span>   </span><br><span class="line">python convert.py ../model/yolov8n.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251740421.png" alt="image-20240625174013238" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第十六个yolov8_seg模型</span> </span><br><span class="line">python convert.py ../model/yolov8s-seg.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251743263.png" alt="image-20240625174321069" /></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第十七个yolox模型</span> </span><br><span class="line">python convert.py ../model/yolox_s.onnx rk3568 i8</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202406251745984.png" alt="image-20240625174551878" /></p>
<h1 id="626-工作记录星期三"><a class="markdownIt-Anchor" href="#626-工作记录星期三"></a> 6.26 工作记录(星期三)</h1>
<p>==当你在凝视深渊的时候，深渊也在凝视你==</p>
<p>==认清一份幻觉比发现一个真理更能使人明智==</p>
<hr />
<p>昨天小小的研究了一下rknn_model_zoo，确实已经沧海桑田，一年前的我和现在的我确实有些区别，差不多一年前吗，现在也差不多将视频录制完成了，但是不可否认的是，当时的理解跟现在的理解确实也差不多，至少我当时的认知都是对的，现在我在思考可不可以将这些提升一个维度，目前的想法是搞一个测试手册，中间有着三个步骤，分别是模型的转换、模型连扳推理测试，模型的C++测试，可如果只是测试的话，是不是可以简单点，但大体的逻辑肯定是要保持没问题的呀，我是不可能看正点原子的手册的，每次看了都会说抄、抄、抄，真的无语，我现在肯定是要想一个方法的。</p>
<p>首先要先想一个名字，再确定里面的内容，还是感觉有点费劲，因为有些东西已经讲解过了，我要重新讲解一遍吗，不是很愿意讲，但之前的手册是苹果写的，不是很喜欢她的风格，研究看看吧，最终应该还是要重写才对，不是很喜欢，现在运行最基本的肯定是没问题了，重要的是如何讲出来，以及文档应该是用怎样的流程讲解出来，才不那么让人突兀，还要让我自己明白。</p>
<p>当然写必然不是盲目的写的，最起码可以让人不觉得很突兀。</p>
<blockquote>
<p>​	1.必然不讲安卓，安卓的内容都先剔除掉，只讲Linux NPU相关的内容</p>
<p>​	2.重新讲解一下RKNN Toolkit2 RKNN Toolkit lite2</p>
<p>​	3.讲解RKNN model zoo的使用</p>
</blockquote>
<p>不知道名字起啥了，如果要起测试手册，也太突兀了，又不仅仅是测试，但也不是不行，只是内容就有点花里胡哨了，并不仅仅是测试的内容了就，但也还行。必须把整体的内容框架，以及每章的具体内容搞出来，其中还要写一下可能遇到的内容，否则就不开始写了，不然写的时候也是遇到一堆问题。</p>
<p>第一章 我打算对瑞芯微原厂资料进行一下介绍，很多人对瑞芯微原厂资料并不是很熟悉，甚至可以说是很不熟悉，甚至呢，瑞芯微自身对这个也乱乱的，并没有讲的很明白，从而导致苹果写的手册也是乱乱的，我最开始接触的时候就踩了一个非常非常大的坑，直到我真正开始录视频的时候，才有了一定的了解，我视频里面讲的确实是很可以的，我现在要如何在已经有的资料的基础上，添加新内容呢，之前的东西我又不想删，主要是里面有安卓相关的内容我不想要重写一遍了，一看见安卓就来气，一看见是苹果写的更来气。</p>
<p>其实瑞芯微这样搞确实写不出来让人能看的懂得手册，因为他的产品面太广了，如果每个产品都要写一个手册的话，那真的太难 。</p>
<p>还是有问题，之前的话RKNPU2和RKNN Toolkit2 是两个，而现在的话他们合并了，都归到了RKNN Toolkit2里面，所以讲解的时候要如何解释呢,我的建议还是尽可能地讲解地详细一点，只是不再进行相应地例子测试了。</p>
<p>第1章 瑞芯微原厂NPU资料介绍</p>
<blockquote>
<p>先介绍RKNPU2和RKNPU1的区别</p>
</blockquote>
<p>RKNPU2 SDK</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://meta.zbox.filez.com/v/link/view/ef37a9687973439f94f5b06837f12527">https://meta.zbox.filez.com/v/link/view/ef37a9687973439f94f5b06837f12527</a>  提取码：RKNN</p>
</blockquote>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gcc-9-aarch64-linux-gnu g++-9-aarch64-linux-gnu cmake</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="627-工作记录"><a class="markdownIt-Anchor" href="#627-工作记录"></a> 6.27 工作记录</h1>
<p>==摆脱一份幻觉比发现一个真理更能使人明智==</p>
<p>==当你在凝视深渊的时候，深渊也在凝视你==</p>
<hr />
<p>昨天莫名的有些累，也不知道是为什么，有些小问题，今天应该是没啥问题了，继续之前的规划，虽然还是有疑问的吧，就比如新增加的特性是啥意思，也没有好好的研究看看，但也无关大雅，都是小问题，讲解rknn model zoo的话可以很快的迁移到其他的开发板上，所以我的方向其实是没错的。</p>
<blockquote>
<p>1.官方资料介绍</p>
<p>​	总共有四个资料可以介绍，Toolkit2、Toolkit lite2、 RKNPU2、 rknn model zoo</p>
<p>2.环境搭建</p>
<p>​	这个环境搭建确实可以讲解一下，总共三种方法，因为现在提供了很多版本的安装包，所以其实也无所谓了，但每种方法还是要讲解的。</p>
<p>3.讲解一个 rknn model zoo具体演示示例</p>
<p>4.进行实际的测试(每个都进行测试一下)</p>
</blockquote>
<p>下面是整理后的表格，包含了每个文件和文件夹的作用：</p>
<table>
<thead>
<tr>
<th>文件/文件夹名</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>autosparsity</td>
<td>为 PyTorch 模型启用稀疏训练和推理（==目前用不到，如果后续有使用在进行详细的讲解==）</td>
</tr>
<tr>
<td>doc</td>
<td>包含项目的文档和手册，用于指导用户如何使用项目</td>
</tr>
<tr>
<td>rknn-toolkit2</td>
<td>PC端(X86架构)运行的工具套件，调用Python接口，用于 RKNN 模型的转换、部署和推理的工具</td>
</tr>
<tr>
<td>rknn-toolkit-lite2</td>
<td>rknn-toolkit2的阉割版，开发板端(arm架构)运行的工具套件，调用Python接口，==不可进行RKNN模型的转换==，只能用于 RKNN 模型的部署和推理</td>
</tr>
<tr>
<td>rknpu2</td>
<td>开发板端(arm架构)运行的工具套件，调用C++接口，==不可进行RKNN模型的转换==，只能用于 RKNN 模型的部署和推理</td>
</tr>
</tbody>
</table>
<p>这张表格描述了每个文件和文件夹在项目中的作用及其内容用途。</p>
<table>
<thead>
<tr>
<th>文件夹名</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>examples</td>
<td>存放了dynamic_shape、resnet18两个模型部署推理例程</td>
</tr>
<tr>
<td>packages</td>
<td>存放了各个python版本的rknn_toolkit_lite2  whl文件</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th></th>
<th>rknn-toolkit2</th>
<th style="text-align:center">rknn-toolkit-lite2</th>
<th>rknpu2</th>
</tr>
</thead>
<tbody>
<tr>
<td>运行平台</td>
<td>X86架构的Linux系统（开发使用的实体机）</td>
<td style="text-align:center">arm架构的Linux系统（开发板）</td>
<td>arm架构的Linux系统（开发板）</td>
</tr>
<tr>
<td>使用语言</td>
<td>Python</td>
<td style="text-align:center">Python</td>
<td>C++</td>
</tr>
<tr>
<td>模型推理</td>
<td>支持</td>
<td style="text-align:center">支持</td>
<td>支持</td>
</tr>
<tr>
<td>模型转换</td>
<td>支持</td>
<td style="text-align:center">不支持</td>
<td>不支持</td>
</tr>
<tr>
<td>性能评估</td>
<td>支持</td>
<td style="text-align:center">不支持</td>
<td>不支持</td>
</tr>
<tr>
<td>内存评估</td>
<td>支持</td>
<td style="text-align:center">不支持</td>
<td>不支持</td>
</tr>
<tr>
<td>量化精度分析</td>
<td>支持</td>
<td style="text-align:center">不支持</td>
<td>不支持</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>文件夹名</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>examples</td>
<td>存放了C API编写的一些模型部署推理例程</td>
</tr>
<tr>
<td>runtime</td>
<td>存放运行时库，以及编写C 例程要用到的头文件和对应的so动态库</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Linux环境版本</th>
<th>对应的Python版本号</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ubuntu20</td>
<td>3.8</td>
</tr>
<tr>
<td>Buildroot/Ubuntu22</td>
<td>3.10</td>
</tr>
<tr>
<td>Debian11</td>
<td>3.9</td>
</tr>
<tr>
<td>Debian12</td>
<td>3.11</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements_cp38<span class="number">-2.0</span><span class="number">.0b</span>0.txt -i https:<span class="comment">//repo.huaweicloud.com/repository/pypi/simple/</span></span><br><span class="line">pip install rknn_toolkit2<span class="number">-2.0</span><span class="number">.0b</span>17+a7d83749-cp38-cp38-linux_x86_64.whl -i https:<span class="comment">//repo.huaweicloud.com/repository/pypi/simple/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://install.1panel.live/docker-install -o docker-install &amp;&amp; sudo bash ./docker-install &amp;&amp; rm -f ./docker-install</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">&quot;registry-mirrors&quot;: [&quot;https://docker.m.daocloud.io&quot;,&quot;https://docker.086181.xyz&quot;,&quot;https://docker.salty.eu.org&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -t -i --privileged -v /dev/bus/usb:/dev/bus/usb -v /home/topeet/work/rknn-toolkit2/rknn-toolkit2/examples/:/examples rknn-toolkit2:2.0.0b0-cp38 /bin/bash</span><br></pre></td></tr></table></figure>
<ol>
<li><code>docker run</code>
<ul>
<li>这个命令用于启动一个新的 Docker 容器实例。</li>
</ul>
</li>
<li><code>-t</code>
<ul>
<li>这个参数为容器分配一个伪终端(tty)。</li>
</ul>
</li>
<li><code>-i</code>
<ul>
<li>这个参数让容器的标准输入保持打开状态,允许您与容器进行交互。</li>
</ul>
</li>
<li><code>--privileged</code>
<ul>
<li>这个参数赋予容器操作系统级别权限,以便能够访问主机的 USB 设备。</li>
</ul>
</li>
<li><code>-v /dev/bus/usb:/dev/bus/usb</code>
<ul>
<li>这个参数将主机的 <code>/dev/bus/usb</code> 目录挂载到容器的 <code>/dev/bus/usb</code> 目录。</li>
<li>这样容器就可以访问主机上的 USB 设备。</li>
</ul>
</li>
<li><code>-v /home/topeet/work/rknn-toolkit2/rknn-toolkit2/examples/:/examples</code>
<ul>
<li>这个参数将主机的 <code>/home/topeet/work/rknn-toolkit2/rknn-toolkit2/examples/</code> 目录挂载到容器的 <code>/examples</code> 目录。</li>
<li>这允许容器访问主机上的 RKNN 工具包示例代码。</li>
</ul>
</li>
<li><code>rknn-toolkit2:2.0.0b0-cp38</code>
<ul>
<li>这是要运行的 Docker 镜像的名称和标签。</li>
<li>在本例中,它指的是 RKNN 工具包 2.0.0b0 版本,支持 Python 3.8。</li>
</ul>
</li>
<li><code>/bin/bash</code>
<ul>
<li>这是在容器中要执行的命令,即启动 Bash shell。</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left">文件/文件夹</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>build-android.sh</code></td>
<td style="text-align:left">用于编译针对 Android 平台的代码</td>
</tr>
<tr>
<td style="text-align:left"><code>build-linux.sh</code></td>
<td style="text-align:left">用于编译针对 Linux 平台的代码</td>
</tr>
<tr>
<td style="text-align:left"><code>CMakeLists.txt</code></td>
<td style="text-align:left">CMake 构建系统的配置文件,定义了整个项目的构建过程</td>
</tr>
<tr>
<td style="text-align:left"><code>model</code></td>
<td style="text-align:left">存放各个SOC对应的RKNN模型和要推理的图片</td>
</tr>
<tr>
<td style="text-align:left"><code>src</code></td>
<td style="text-align:left">使用rknpu2 C API编写的推理代码</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>-t</code> (target)</td>
<td style="text-align:left">指定目标平台的 SoC 型号，支持 <code>rk3566</code>、<code>rk3568</code>、<code>rk3562</code>、<code>rk3576</code> 和 <code>rk3568</code></td>
</tr>
<tr>
<td style="text-align:left"><code>-a</code> (arch)</td>
<td style="text-align:left">指定目标平台的硬件架构，支持 <code>aarch64</code>(64位 ARM) 和 <code>armhf</code>(32位 ARM)</td>
</tr>
<tr>
<td style="text-align:left"><code>-b</code> (build_type)</td>
<td style="text-align:left">指定构建的类型，支持 <code>Debug</code>(调试版) 和 <code>Release</code>(发行版)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>pb_model_path</code></td>
<td style="text-align:left">输入的要转换模型的文件路径</td>
</tr>
<tr>
<td style="text-align:left"><code>[platform]</code></td>
<td style="text-align:left">目标平台,可选择 <code>rk3562</code>、<code>rk3566</code>、<code>rk3568</code>、<code>rk3568</code>、<code>rk1808</code>、<code>rv1109</code> 或 <code>rv1126</code></td>
</tr>
<tr>
<td style="text-align:left"><code>[dtype(optional)]</code></td>
<td style="text-align:left">目标数据类型,可选择: <br> - <code>i8</code> 或 <code>fp</code> 适用于 <code>rk3562</code>、<code>rk3566</code>、<code>rk3568</code>、<code>rk3568</code> <br> - <code>u8</code> 或 <code>fp</code> 适用于 <code>rk1808</code>、<code>rv1109</code>、<code>rv1126</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2024/06/04/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/18_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(%E5%85%AD%E6%9C%88%E7%AC%AC4%E4%B8%AA%E6%98%9F%E6%9C%9F)/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2024/07/01/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/19_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(%E4%B8%83%E6%9C%88%E7%AC%AC1%E4%B8%AA%E6%98%9F%E6%9C%9F)/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            工作记录((7月第1个星期)
          
        </div>
      </a>
    
    
      <a href="/2024/06/03/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/17_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(%E5%85%AD%E6%9C%88%E7%AC%AC3%E4%B8%AA%E6%98%9F%E6%9C%9F)/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">工作记录((6月第3个星期)</div>
      </a>
    
  </nav>

  
   
  
   
    <script src="https://cdn.staticfile.org/twikoo/1.4.18/twikoo.all.min.js"></script>
    <div id="twikoo" class="twikoo"></div>
    <script>
        twikoo.init({
            envId: ""
        })
    </script>
 
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2024
        <i class="ri-heart-fill heart_icon"></i> chai
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="热爱学习的未来酱"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E7%94%9F%E6%B4%BB">生活</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E7%91%9E%E8%8A%AF%E5%BE%AE">瑞芯微</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/Linux%E5%AD%A6%E4%B9%A0">Linux学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E8%AF%BB%E4%B9%A6">读书</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/C%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7%E5%AD%A6%E4%B9%A0">C语言高级学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95">工作记录</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7">小技巧</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/shell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0">shell编程学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/PCB%E5%AD%A6%E4%B9%A0">PCB学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%AD%A6%E4%B9%A0">音视频学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=22707008&auto=0&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
    

  </div>
</body>

</html>