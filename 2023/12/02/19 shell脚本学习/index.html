<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>shell脚本学习 | 热爱学习的未来酱</title><meta name="author" content="chai"><meta name="copyright" content="chai"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="shell脚本学习"><meta name="application-name" content="shell脚本学习"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="shell脚本学习"><meta property="og:url" content="http://example.com/2023/12/02/19%20shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/index.html"><meta property="og:site_name" content="热爱学习的未来酱"><meta property="og:description" content="一、shell 入门简介  1.1 什么是shell 什么是shell 网上有很多shell 的概念介绍，其实都很官方化，如果你对linux 命令很熟悉，那么编写shell 就不是一个难事，shell 本质上是 linux 命令，一条一条命令组合在一起，实现某一个目的，就变成了shell脚本。它从"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="chai"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="一、shell 入门简介  1.1 什么是shell 什么是shell 网上有很多shell 的概念介绍，其实都很官方化，如果你对linux 命令很熟悉，那么编写shell 就不是一个难事，shell 本质上是 linux 命令，一条一条命令组合在一起，实现某一个目的，就变成了shell脚本。它从"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2023/12/02/19%20shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: chai","link":"链接: ","source":"来源: 热爱学习的未来酱","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '热爱学习的未来酱',
  title: 'shell脚本学习',
  postAI: '',
  pageFillDescription: ' 一、shell 入门简介,  1.1 什么是shell,  1.2 shell 编程注意事项,  1.3 第一个shell 脚本 hello world,  二、shell 环境变量讲解,  2.1 shell 变量详解,  2.2 shell 系统变量 介绍,  2.3  shell 环境变量介绍,  2.4 shell 用户环境变量 介绍,  2.4.1 自定义shell环境变量,  2.4.2 shell 中彩色输出 helloworld,  三、shell 编程流程控制语句,  3.1 if 条件语句介绍,  3.1.1 常用的单/双分支,  3.1.2 if 常见判断逻辑运算符详解,  3.1.3 使用单分支语句判断crond 进程是否在运行—案例,  3.1.4 判断系统目录是否存在 —案例,  3.1.5 多个条件判断学生分数等级 — 案例,  3.2 for 循环语句介绍,  3.3 while 循环语句介绍,  3.3.1 break和continue,  3.3.2  While循环求1-100的总和 —案例,  3.3.3 每10秒循环判断一次 hbs用户是否登录系统,  3.4 case 选择语句介绍,  3.5 Select选择语句,  3.6 Shell函数,  3.7 shell数组一入门简介什么是什么是网上有很多的概念介绍其实都很官方化如果你对命令很熟悉那么编写就不是一个难事本质上是命令一条一条命令组合在一起实现某一个目的就变成了脚本它从一定程度上减轻了工作量提高了工作效率官方化的介绍也称为命令行解释器或命令行外壳是计算机操作系统中提供与用户交互的一种用户界面它允许用户通过键入文本命令来与操作系统进行通信和控制接受用户输入的命令并将其解释为操作系统可以理解和执行的指令是一个命令解释器它可以解释和执行用户输入的命令它提供了一种方式使用户能够直接与计算机的操作系统进行交互而无需依赖图形用户界面或其他可视化工具的主要功能包括命令执行接受用户输入的命令并将其传递给操作系统执行这些命令可以是操作文件管理进程执行系统命令编译代码等环境控制可以设置和管理操作系统的环境变量路径和其他系统配置用户可以使用来自定义其工作环境和行为脚本编写提供了一种脚本编写的能力用户可以编写一系列的命令和操作以便自动化任务批处理处理数据执行复杂的操作流程等输入输出重定向允许用户将命令的输入和输出重定向到不同的文件或设备这使得用户可以通过管道和重定向等技术将一个命令的输出作为另一个命令的输入或将输出保存到文件中常见的有哪些或最常用的是也就是由于易用和免费在日常工作中被广泛使用也是大多数操作系统默认的环境编程注意事项当进行编程时有一些注意事项需要注意以下是一些常见的编程注意事项脚本命名脚本的文件名通常应该使用英文可以使用大写或小写字母并以作为后缀避免使用特殊符号和空格以确保脚本的可读性和可执行性为了清晰明了建议在命名中体现脚本的功能和用途脚本文件的首行脚本文件的首行应该以开头这是指定脚本使用的解释器为的约定写法这样操作系统会根据该行指定的解释器来执行脚本变量命名当在脚本中声明变量时需要遵循一些规则变量名不能以数字或特殊符号开头但可以使用下划线变量名最好使用有意义的描述性的命名以便在代码中可以清晰地理解和使用这些变量避免使用破折号因为它可能会与的参数传递语法产生冲突引用变量在使用变量时最好将变量用双引号包围起来以避免由于变量值中的空格或特殊字符而导致的意外行为例如使用而不是文件权限在使用脚本时要注意给予脚本文件执行权限可以使用命令来修改文件权限使其可执行例如错误处理为了编写健壮的脚本应该考虑错误处理和错误消息的输出可以使用条件语句和错误处理机制来捕获和处理脚本中可能出现的错误情况注释使用注释来解释代码的作用和逻辑以提高代码的可读性在脚本中使用符号开头的行被视为注释不会被执行调试在开发过程中可以使用命令输出变量值或调试信息以帮助跟踪代码执行路径和调试潜在问题第一个脚本创建一个文件编辑文件赋予执行权限运行脚本二环境变量讲解变量详解变量是在编程中用于存储数据的一种机制它们允许我们将值赋给一个名称并在脚本中引用该名称来获取或修改存储的值变量可以存储各种类型的数据例如文本数字文件路径等在编程中常见的变量分为以下三种类型系统变量系统变量是由程序或操作系统预先定义的变量用于提供有关系统环境和配置的信息这些变量通常以大写字母命名例如等系统变量的值可以在脚本中读取和使用但通常不允许更改环境变量环境变量是用户定义的变量它们在整个会话中持久存在并可以在不同的脚本之间共享环境变量的值可以在脚本中读取修改和设置常见的环境变量包括等可以使用命令将用户变量导出为环境变量例如用户变量用户变量是在脚本中由用户自行定义的变量它们用于存储临时数据中间结果或用户自定义配置用户变量的名称由用户自行指定遵循变量命名规则用户变量的值可以在脚本中进行赋值和修改并在需要时进行引用例如定义了一个名为的用户变量并将其赋值为在编程中可以使用以下方式来操作变量赋值使用等号将值赋给变量例如引用在脚本中使用符号加上变量名来引用变量的值例如将打印出变量的值修改通过重新赋值来修改变量的值例如删除使用命令来删除变量例如会将变量从内存中删除特殊变量还提供了一些特殊的系统变量如表示当前用户的主目录表示当前工作目录表示可执行程序的搜索路径等系统变量介绍系统变量在编程中扮演着重要的角色用于提供关于脚本执行环境和参数的信息下面是常见的系统变量及其详细介绍当前脚本的名称它保存了当前正在执行的脚本的文件名可以通过来获取脚本文件的名称包括路径如果有的话当前脚本的第个参数的取值范围为到用于获取脚本在执行时传递的命令行参数例如表示第一个参数表示第二个参数以此类推当前脚本的所有参数不包括程序本身它表示所有传递给脚本的命令行参数的列表可以使用来获取所有参数的字符串参数之间使用空格分隔当前脚本的参数个数不包括程序本身它表示传递给脚本的命令行参数的数量可以使用来获取参数的个数前一个命令或程序执行完后的状态它保存了上一个命令或程序执行完毕后的返回状态码一般情况下返回表示执行成功非零值表示执行失败可以通过检查的值来判断前一个命令或程序是否成功执行程序本身的号进程它保存了当前脚本或程序的进程可以使用来获取当前脚本的进程环境变量介绍环境变量在编程中起着重要的作用它们是用户自定义的变量用于设置和存储与会话和程序执行环境相关的信息下面是常见的环境变量及其详细介绍命令所示路径以冒号为分隔它是一个包含可执行程序的搜索路径的列表当在中执行一个命令时会根据变量中所列出的路径依次搜索命令的可执行文件如果命令在中的某个路径下找到则可以直接执行打印用户家目录它保存了当前用户的主目录路径许多程序会使用变量来确定用户的个人文件和配置存放的位置显示当前类型它保存了当前正在使用的的类型例如表示表示等打印当前用户名它保存了当前登录用户的用户名打印当前用户信息它包含了当前用户的用户组等相关信息显示当前所在路径它保存了当前工作目录的路径即当前所在的路径打印当前终端类型它保存了当前终端的类型或终端仿真器的名称显示当前主机名它保存了当前主机的名称定义主机命令提示符它用于设置命令行的提示符可以自定义提示符的格式和内容历史命令大小它确定了历史记录中保存的命令的数量可以通过设置变量来调整历史命令的大小随机生成一个至的整数它保存了一个随机生成的整数可以用于在脚本中生成随机数打印当前脚本的名称当前脚本的名称打印位置参数的数量和列表位置参数的数量位置参数的列表作为单个字符串位置参数的列表作为多个独立字符串打印上一个命令的退出状态上一个命令的退出状态打印当前进程的和后台进程的当前脚本的进程后台进程的打印当前用户的用户名和主目录路径当前用户的用户名当前用户的主目录路径打印可执行文件的搜索路径和当前工作目录的路径可执行文件的搜索路径当前工作目录的路径上一个工作目录的路径打印给定路径的文件名和目录部分给定路径的文件名部分给定路径的目录部分打印正在执行的当前行的行号和当前正在执行的函数的名称正在执行的当前行的行号当前正在执行的函数的名称打印版本号和随机整数版本号随机整数运行结果如下所示当前脚本的名称位置参数的数量位置参数的列表作为单个字符串位置参数的列表作为多个独立字符串上一个命令的退出状态当前脚本的进程后台进程的当前用户的用户名当前用户的主目录路径可执行文件的搜索路径当前工作目录的路径上一个工作目录的路径给定路径的文件名部分给定路径的目录部分正在执行的当前行的行号当前正在执行的函数的名称版本号随机整数用户环境变量介绍自定义环境变量常见的变量之三用户变量用户变量又称为局部变量主要用在脚本内部或者临时局部使用系统变量详解如下自定义变量自定义变量自定义变量自定义变量中彩色输出字体颜色背景颜色显示方式三编程流程控制语句条件语句介绍常用的单双分支条件语句条件判断语句语句是编程中用于根据条件执行不同代码块的结构语句通常以开头以结尾可以包含和的缩写来实现多条件判断下面是对不同类型的语句进行详细的讲解单分支语句比较大小条件表达式语句在单分支语句中根据条件表达式的结果真或假如果条件为真则执行语句否则跳过整个语句双分支语句表达式语句语句在双分支语句中根据表达式的结果如果表达式为真则执行语句如果表达式为假则执行语句多支条件语句判断成绩表达式语句表达式语句表达式语句在多支条件语句中根据每个表达式的结果按照顺序依次判断条件并执行相应的语句如果表达式为真则执行语句如果表达式为假且表达式为真则执行语句如果表达式和表达式都为假且表达式为真则执行语句如果所有条件都为假则跳过整个语句在语句中条件表达式可以使用各种比较运算符如等来比较数字也可以使用字符串比较运算符如等来比较字符串可以使用逻辑运算符如组合多个条件需要注意的是语句中的语句块可以是单个命令也可以是包含多个命令的代码块在代码块中可以执行任意需要的命令和逻辑通过使用条件判断语句我们可以根据不同的条件执行不同的代码逻辑实现程序的流程控制和条件分支它在脚本中非常常用可用于控制程序的逻辑流程处理不同的错误情况根据条件执行不同的操作等常见判断逻辑运算符详解判断文件是否存在例如会检查是否为一个存在的文件判断目录是否存在例如会检查是否为一个存在的目录等于用于整数比较例如会判断变量和是否相等不等于用于整数比较例如会判断变量和是否不相等小于用于整数比较例如会判断变量是否小于大于用于整数比较例如会判断变量是否大于小于或等于用于整数比较例如会判断变量是否小于等于大于或等于用于整数比较例如会判断变量是否大于等于逻辑与表示双方都成立例如会检查和是否同时成立逻辑或表示单方成立例如会检查和是否有一个成立空字符串判断一个字符串是否为空例如会判断变量是否为空字符串是否具有可执行权限判断文件是否有可执行权限例如会判断是否具有可执行权限逻辑或表示单方成立例如会执行如果执行失败则执行逻辑与表示双方都成立例如会执行如果执行成功则执行使用单分支语句判断进程是否在运行案例定义一个变量名判断系统目录是否存在案例多个条件判断学生分数等级案例语句可以直接对命令状态进行判断就省去了获取这一步如果第一个条件符合就不再向下匹配循环语句介绍脚本中的循环语句它的一般格式如下或者可以写成变量名取值列表语句下面是对这个循环语句的详细介绍或变量名循环变量的名称可以是任意合法的变量名在每次循环迭代中该变量将被赋予取值列表中的一个值关键字用于指定取值列表的开始或取值列表一个或多个值用空格分隔这些值将依次赋给循环变量循环将针对每个值执行一次或语句在每次循环迭代中执行的命令列表可以包含任意数量的命令和语句循环的工作原理是在每次循环迭代时将取值列表中的一个值赋给循环变量然后执行中的命令列表每次迭代完成后循环变量将更新为取值列表中的下一个值直到所有的值都被处理完毕以下是一个例子来说明循环的使用在上述例子中循环变量依次被赋值为和然后执行语句打印出相应的结果循环将重复执行这个过程直到处理完所有的值输出结果循环在脚本中经常用于遍历数组文件列表或指定的取值范围并对每个元素执行相同的操作它提供了一种方便且简洁的方式来处理重复的任务循环语句介绍循环语句是脚本中用于重复执行一组命令或语句的一种循环结构它的一般格式如下表达式语句下面是对循环语句的详细介绍表达式一个条件表达式用于判断是否继续执行循环如果表达式的值为真非零则循环会一直执行如果表达式的值为假零则循环结束语句在每次循环迭代中执行的命令列表可以包含任意数量的命令和语句循环的工作原理是首先对表达式进行求值如果表达式的值为真则执行语句中的命令列表执行完语句后再次对表达式进行求值如果仍然为真则继续执行语句以此类推直到表达式的值为假时循环结束程序将跳出循环并继续执行循环之后的代码以下是一个例子来说明循环的使用在上述例子中变量初始值为循环会判断的条件表达式如果为真则执行语句打印出当前的值并将的值递增循环将重复执行这个过程直到的值大于等于时循环结束输出结果循环可用于对条件进行判断并在满足条件时反复执行一组命令或语句它提供了一种灵活的方式来处理需要重复执行的任务直到满足某个条件才停止循环和和是在循环中使用的控制语句可以对循环的执行进行控制语句用于终止当前所在的循环跳出循环体继续执行循环之后的代码它通常用于满足某个条件时提前结束循环在示例中的代码中当的值等于时执行了语句终止了循环的执行语句用于跳过当前循环迭代的剩余代码直接进行下一次循环迭代它通常用于在特定情况下跳过某些循环迭代在示例中的代码中当的值等于时执行了语句跳过了语句直接进行下一次循环迭代以下是一个示例演示如何使用和语句在上述示例中循环从到打印数字使用了语句来跳过偶数使用了语句来终止循环当数字大于时输出结果为到的奇数总结用于终止当前循环并跳出循环体用于跳过当前循环迭代的剩余代码直接进行下一次循环迭代循环求的总和案例这是一个使用循环求解到的总和的案例在这个案例中我们使用了两个变量和其中用于循环计数用于存储求和的结果以下是代码示例在循环开始之前我们将变量初始化为变量初始化为然后使用循环来迭代从到的所有数字在每次循环迭代中我们将当前的数值加到变量上以累积求和的结果然后通过递增的值来更新循环计数当的值大于时循环终止最后我们使用语句输出求和的结果运行该脚本将会输出到的总和因此通过使用循环和累加操作我们成功求得了到的总和每秒循环判断一次用户是否登录系统这是一个每秒循环判断用户是否登录系统的案例在这个案例中我们使用了一个无限循环来进行循环判断以下是代码示例在循环开始之前我们将要检查的用户名定义为变量这里设置为可以根据需要修改然后使用来创建一个无限循环表示每秒进行一次判断在每次循环迭代中我们首先使用命令输出当前时间然后通过命令获取当前登录的用户信息并使用命令过滤出包含指定用户名的行使用命令统计满足条件的行数将结果保存在变量中接下来我们使用条件语句判断是否大于等于如果是则输出相应的提示信息表示该用户已登录系统最后使用命令使脚本暂停秒然后继续下一次循环运行该脚本将会每秒判断一次用户是否登录系统并在登录时输出相应的提示信息选择语句介绍选择语句是一种用于对多个选择条件进行匹配输出的语句它类似于语句结构通常在脚本中用于根据输入参数的不同情况打印输出结果和内容选择语句的语法格式如下模式名模式命令模式命令不符合以上模式时执行的命令在这个语法格式中模式名是要匹配的值或表达式可以是变量或常量每个模式使用圆括号和括起来并以双冒号结束在每个模式下面可以写入相应的命令当模式名与某个模式匹配时对应的命令将被执行如果没有匹配任何模式将执行下的命令它表示不符合以上模式时要执行的命令以下是一个示例演示了选择语句的用法在这个示例中我们定义了一个变量并将其值设置为然后使用选择语句来匹配的值如果的值与某个模式匹配将执行相应的命令在这个示例中的值为因此第一个模式被匹配命令将被执行输出如果将的值改为那么第二个模式将被匹配输出结果将是如果的值不匹配任何模式将执行下的命令输出选择语句选择语句是一种类似于循环的语句用于创建选择菜单它通常与结合使用用于打印菜单的输出信息选择语句的语法格式如下变量名表达式语句在这个语法格式中变量名用于保存用户选择的值表达式可以是一个列表数组或命令的输出结果在每次循环迭代中会打印出一个带有选择索引的菜单用户可以根据提示选择其中一个选项当用户进行选择后选择的值将会保存在变量名中并执行相应的语句以下是一个示例演示了选择语句的用法在这个示例中我们首先定义了一个变量用于提示用户选择一个数字然后使用选择语句创建了一个菜单菜单选项是和在每次循环迭代中会打印出菜单并等待用户的选择根据用户的选择使用选择语句执行相应的命令如果选择了则输出如果选择了则输出如果选择了则退出脚本如果选择了其他值输出函数函数是一组命令或语句的可重用块可以在脚本中定义一次然后随时调用避免了重复编写相同的代码块函数的语法格式是以开始以结束在编程中默认情况下无法将参数传递给函数的括号内部而是通过调用函数名称时传递参数例如下面是一个示例的脚本其中定义了一个名为的函数函数内部计算了一个变量的值并使用语句返回该值然后调用该函数并打印返回的值通过运行命令将执行上述脚本调用函数并打印返回的值数组在编程中数组是一组按照特定顺序排列的相同类型元素的集合以下是关于数组的一些常见用法和语法初始化数组使用小括号将元素括起来并使用空格分隔元素格式元素元素元素例如这样就创建了一个包含元素和的数组新建数组并添加元素使用下标来为数组分配元素格式下标元素例如这样就创建了一个包含元素和的数组将命令输出作为数组元素使用命令的输出结果作为数组的元素格式例如这样就将命令的输出结果作为数组的元素请注意数组的下标从开始计数可以使用下标来访问数组的元素例如表示数组的第一个元素以下是一个示例展示了如何定义和使用数组使用小括号初始化数组数组的第一个元素数组的第二个元素数组的第三个元素新建一个空数组添加第一个元素添加第二个元素添加第三个元素新数组的元素将命令的输出作为数组元素命令输出作为数组元素通过运行上述脚本您将看到输出结果显示了数组的元素和命令输出作为数组元素的情况',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-10 15:22:41',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="热爱学习的未来酱" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://chai0705.github.io/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">热爱学习的未来酱</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url">学习</a></span><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">shell脚本学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-12-02T07:01:21.000Z" title="发表于 2023-12-02 15:01:21">2023-12-02</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-12-10T07:22:41.091Z" title="更新于 2023-12-10 15:22:41">2023-12-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为保定"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>保定</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2023/12/02/19%20shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/"><header><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url">学习</a><h1 id="CrawlerTitle" itemprop="name headline">shell脚本学习</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">chai</span><time itemprop="dateCreated datePublished" datetime="2023-12-02T07:01:21.000Z" title="发表于 2023-12-02 15:01:21">2023-12-02</time><time itemprop="dateCreated datePublished" datetime="2023-12-10T07:22:41.091Z" title="更新于 2023-12-10 15:22:41">2023-12-10</time></header><h1 id="一-shell-入门简介"><a class="markdownIt-Anchor" href="#一-shell-入门简介"></a> 一、shell 入门简介</h1>
<h2 id="11-什么是shell"><a class="markdownIt-Anchor" href="#11-什么是shell"></a> 1.1 什么是shell</h2>
<p><strong>什么是shell</strong></p>
<p>网上有很多shell 的概念介绍，其实都很官方化，如果你对linux 命令很熟悉，那么编写shell 就不是一个难事，shell 本质上是 linux 命令，一条一条命令组合在一起，实现某一个目的，就变成了shell脚本。它从一定程度上 减轻了工作量，提高了工作效率。</p>
<p><strong>官方化的shell 介绍</strong></p>
<p>Shell（也称为命令行解释器或命令行外壳）是计算机操作系统中提供与用户交互的一种用户界面。它允许用户通过键入文本命令来与操作系统进行通信和控制。Shell接受用户输入的命令并将其解释为操作系统可以理解和执行的指令。</p>
<p>Shell是一个命令解释器，它可以解释和执行用户输入的命令。它提供了一种方式，使用户能够直接与计算机的操作系统进行交互，而无需依赖图形用户界面（GUI）或其他可视化工具。</p>
<p>Shell的主要功能包括：</p>
<ol>
<li>命令执行：Shell接受用户输入的命令，并将其传递给操作系统执行。这些命令可以是操作文件、管理进程、执行系统命令、编译代码等。</li>
<li>环境控制：Shell可以设置和管理操作系统的环境变量、路径和其他系统配置。用户可以使用Shell来自定义其工作环境和行为。</li>
<li>脚本编写：Shell提供了一种脚本编写的能力，用户可以编写一系列的命令和操作，以便自动化任务、批处理处理数据、执行复杂的操作流程等。</li>
<li>输入/输出重定向：Shell允许用户将命令的输入和输出重定向到不同的文件或设备。这使得用户可以通过管道（pipe）和重定向（redirection）等技术，将一个命令的输出作为另一个命令的输入，或将输出保存到文件中。</li>
</ol>
<p><strong>常见的shell 有哪些</strong></p>
<pre><code>Bourne Shell（/usr/bin/sh或/bin/sh）
Bourne Again Shell（/bin/bash）
C Shell（/usr/bin/csh）
K Shell（/usr/bin/ksh）
Shell for Root（/sbin/sh）
</code></pre>
<p>最常用的shell是Bash，也就是Bourne Again Shell。Bash由于易用和免费，在日常工作中被广泛使用，也是大多数Linux操作系统默认的Shell环境。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312042108406.png" alt="在这里插入图片描述" /></p>
<h2 id="12-shell-编程注意事项"><a class="markdownIt-Anchor" href="#12-shell-编程注意事项"></a> 1.2 shell 编程注意事项</h2>
<p>当进行Shell编程时，有一些注意事项需要注意。以下是一些常见的Shell编程注意事项：</p>
<ol>
<li>Shell脚本命名：Shell脚本的文件名通常应该使用英文，可以使用大写或小写字母，并以<code>.sh</code>作为后缀。避免使用特殊符号和空格，以确保脚本的可读性和可执行性。为了清晰明了，建议在命名中体现脚本的功能和用途。</li>
<li>脚本文件的首行：Shell脚本文件的首行应该以<code>#!/bin/bash</code>开头，这是指定脚本使用的Shell解释器为Bash的约定写法。这样操作系统会根据该行指定的解释器来执行脚本。</li>
<li>变量命名：当在Shell脚本中声明变量时，需要遵循一些规则。变量名不能以数字或特殊符号开头，但可以使用下划线。变量名最好使用有意义的、描述性的命名，以便在代码中可以清晰地理解和使用这些变量。避免使用破折号 <code>-</code>，因为它可能会与Shell的参数传递语法产生冲突。</li>
<li>引用变量：在使用变量时，最好将变量用双引号 <code>&quot;</code> 包围起来，以避免由于变量值中的空格或特殊字符而导致的意外行为。例如，使用<code>&quot;$variable&quot;</code>而不是<code>$variable</code>。</li>
<li>文件权限：在使用Shell脚本时，要注意给予脚本文件执行权限。可以使用<code>chmod</code>命令来修改文件权限，使其可执行，例如：<code>chmod +x script.sh</code>。</li>
<li>错误处理：为了编写健壮的Shell脚本，应该考虑错误处理和错误消息的输出。可以使用条件语句和错误处理机制来捕获和处理脚本中可能出现的错误情况。</li>
<li>注释：使用注释来解释代码的作用和逻辑，以提高代码的可读性。在Shell脚本中使用<code>#</code>符号开头的行被视为注释，不会被执行。</li>
<li>调试：在开发过程中，可以使用<code>echo</code>命令输出变量值或调试信息，以帮助跟踪代码执行路径和调试潜在问题。</li>
</ol>
<h2 id="13-第一个shell-脚本-hello-world"><a class="markdownIt-Anchor" href="#13-第一个shell-脚本-hello-world"></a> 1.3 第一个shell 脚本 hello world</h2>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建一个Helloword.sh 文件</span></span><br><span class="line">topeet@ubuntu:~/shell$ touch Helloword.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑Helloword.sh 文件</span></span><br><span class="line">topeet@ubuntu:~/shell$ vim Helloword.sh</span><br><span class="line">topeet@ubuntu:~/shell$ ll Helloword.sh</span><br><span class="line">-rw-rw-r-- 1 topeet topeet 31 Dec  3 20:44 Helloword.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">赋予执行权限</span></span><br><span class="line">topeet@ubuntu:~/shell$ chmod o+x Helloword.sh</span><br><span class="line">topeet@ubuntu:~/shell$ ./Helloword.sh</span><br><span class="line">-bash: ./Helloword.sh: Permission denied</span><br><span class="line">topeet@ubuntu:~/shell$ ls</span><br><span class="line">Helloword.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">运行helloword.sh 脚本</span></span><br><span class="line">topeet@ubuntu:~/shell$ sudo ./Helloword.sh</span><br><span class="line">[sudo] password for topeet: </span><br><span class="line">hello world</span><br><span class="line">topeet@ubuntu:~/shell$ </span><br></pre></td></tr></table></figure>
<h1 id="二-shell-环境变量讲解"><a class="markdownIt-Anchor" href="#二-shell-环境变量讲解"></a> 二、shell 环境变量讲解</h1>
<h2 id="21-shell-变量详解"><a class="markdownIt-Anchor" href="#21-shell-变量详解"></a> 2.1 shell 变量详解</h2>
<p>变量是在Shell编程中用于存储数据的一种机制。它们允许我们将值赋给一个名称，并在脚本中引用该名称来获取或修改存储的值。变量可以存储各种类型的数据，例如文本、数字、文件路径等。</p>
<p>在Shell编程中，常见的变量分为以下三种类型：</p>
<ol>
<li>系统变量：系统变量是由Shell程序或操作系统预先定义的变量，用于提供有关系统环境和配置的信息。这些变量通常以大写字母命名，例如<code>PATH</code>、<code>HOME</code>等。系统变量的值可以在Shell脚本中读取和使用，但通常不允许更改。</li>
<li>环境变量：环境变量是用户定义的变量，它们在整个Shell会话中持久存在，并可以在不同的Shell脚本之间共享。环境变量的值可以在Shell脚本中读取、修改和设置。常见的环境变量包括<code>USER</code>、<code>LANG</code>、<code>PWD</code>等。可以使用<code>export</code>命令将用户变量导出为环境变量，例如<code>export MY_VAR=value</code>。</li>
<li>用户变量：用户变量是在Shell脚本中由用户自行定义的变量。它们用于存储临时数据、中间结果或用户自定义配置。用户变量的名称由用户自行指定，遵循变量命名规则。用户变量的值可以在Shell脚本中进行赋值和修改，并在需要时进行引用。例如，<code>name=&quot;John&quot;</code>定义了一个名为<code>name</code>的用户变量，并将其赋值为<code>John</code>。</li>
</ol>
<p>在Shell编程中，可以使用以下方式来操作变量：</p>
<ul>
<li>赋值：使用等号（=）将值赋给变量，例如<code>var=value</code>。</li>
<li>引用：在脚本中使用<code>$</code>符号加上变量名来引用变量的值，例如<code>echo $var</code>将打印出变量<code>var</code>的值。</li>
<li>修改：通过重新赋值来修改变量的值，例如<code>var=new_value</code>。</li>
<li>删除：使用<code>unset</code>命令来删除变量，例如<code>unset var</code>会将变量<code>var</code>从内存中删除。</li>
<li>特殊变量：Shell还提供了一些特殊的系统变量，如<code>$HOME</code>表示当前用户的主目录，<code>$PWD</code>表示当前工作目录，<code>$PATH</code>表示可执行程序的搜索路径等。</li>
</ul>
<h2 id="22-shell-系统变量-介绍"><a class="markdownIt-Anchor" href="#22-shell-系统变量-介绍"></a> 2.2 shell 系统变量 介绍</h2>
<p>系统变量在Shell编程中扮演着重要的角色，用于提供关于脚本执行环境和参数的信息。下面是常见的系统变量及其详细介绍：</p>
<ol>
<li><code>$0</code>: 当前脚本的名称。它保存了当前正在执行的Shell脚本的文件名。可以通过<code>$0</code>来获取脚本文件的名称，包括路径（如果有的话）。</li>
<li><code>$n</code>: 当前脚本的第n个参数。<code>n</code>的取值范围为1到9，用于获取脚本在执行时传递的命令行参数。例如，<code>$1</code>表示第一个参数，<code>$2</code>表示第二个参数，以此类推。</li>
<li><code>$*</code>: 当前脚本的所有参数（不包括程序本身）。它表示所有传递给脚本的命令行参数的列表。可以使用<code>$*</code>来获取所有参数的字符串，参数之间使用空格分隔。</li>
<li><code>$#</code>: 当前脚本的参数个数（不包括程序本身）。它表示传递给脚本的命令行参数的数量。可以使用<code>$#</code>来获取参数的个数。</li>
<li><code>$?</code>: 前一个命令或程序执行完后的状态。它保存了上一个命令或程序执行完毕后的返回状态码。一般情况下，返回0表示执行成功，非零值表示执行失败。可以通过检查<code>$?</code>的值来判断前一个命令或程序是否成功执行。</li>
<li><code>$$</code>: 程序本身的PID号（进程ID）。它保存了当前Shell脚本或程序的进程ID。可以使用<code>$$</code>来获取当前脚本的进程ID。</li>
</ol>
<h2 id="23-shell-环境变量介绍"><a class="markdownIt-Anchor" href="#23-shell-环境变量介绍"></a> 2.3  shell 环境变量介绍</h2>
<p>环境变量在Shell编程中起着重要的作用，它们是用户自定义的变量，用于设置和存储与Shell会话和程序执行环境相关的信息。下面是常见的环境变量及其详细介绍：</p>
<ol>
<li><code>PATH</code>: 命令所示路径，以冒号为分隔。它是一个包含可执行程序的搜索路径的列表。当在Shell中执行一个命令时，会根据<code>PATH</code>变量中所列出的路径依次搜索命令的可执行文件。如果命令在<code>PATH</code>中的某个路径下找到，则可以直接执行。</li>
<li><code>HOME</code>: 打印用户家目录。它保存了当前用户的主目录路径。许多程序会使用<code>HOME</code>变量来确定用户的个人文件和配置存放的位置。</li>
<li><code>SHELL</code>: 显示当前Shell类型。它保存了当前正在使用的Shell的类型，例如<code>/bin/bash</code>表示Bash Shell，<code>/bin/sh</code>表示Bourne Shell等。</li>
<li><code>USER</code>: 打印当前用户名。它保存了当前登录用户的用户名。</li>
<li><code>ID</code>: 打印当前用户ID信息。它包含了当前用户的用户ID（UID）、组ID（GID）等相关信息。</li>
<li><code>PWD</code>: 显示当前所在路径。它保存了当前工作目录的路径，即Shell当前所在的路径。</li>
<li><code>TERM</code>: 打印当前终端类型。它保存了当前终端的类型或终端仿真器的名称。</li>
<li><code>HOSTNAME</code>: 显示当前主机名。它保存了当前主机的名称。</li>
<li><code>PS1</code>: 定义主机命令提示符。它用于设置Shell命令行的提示符，可以自定义提示符的格式和内容。</li>
<li><code>HISTSIZE</code>: 历史命令大小。它确定了Shell历史记录中保存的命令的数量。可以通过设置<code>HISTSIZE</code>变量来调整历史命令的大小。</li>
<li><code>RANDOM</code>: 随机生成一个0至32767的整数。它保存了一个随机生成的整数，可以用于在Shell脚本中生成随机数。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印当前脚本的名称</span></span><br><span class="line">echo &quot;当前脚本的名称：$0&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印位置参数的数量和列表</span></span><br><span class="line">echo &quot;位置参数的数量：$#&quot;</span><br><span class="line">echo &quot;位置参数的列表（作为单个字符串）：$*&quot;</span><br><span class="line">echo &quot;位置参数的列表（作为多个独立字符串）：$@&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印上一个命令的退出状态</span></span><br><span class="line">echo &quot;上一个命令的退出状态：$?&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印当前进程的 ID 和后台进程的 ID</span></span><br><span class="line">echo &quot;当前脚本的进程 ID：$$&quot;</span><br><span class="line">sleep 5 &amp;</span><br><span class="line">echo &quot;后台进程的 ID：$!&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印当前用户的用户名和主目录路径</span></span><br><span class="line">echo &quot;当前用户的用户名：$USER&quot;</span><br><span class="line">echo &quot;当前用户的主目录路径：$HOME&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印可执行文件的搜索路径和当前工作目录的路径</span></span><br><span class="line">echo &quot;可执行文件的搜索路径：$PATH&quot;</span><br><span class="line">echo &quot;当前工作目录的路径：$PWD&quot;</span><br><span class="line">echo &quot;上一个工作目录的路径：$OLDPWD&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印给定路径的文件名和目录部分</span></span><br><span class="line">path=&quot;/path/to/somefile.txt&quot;</span><br><span class="line">echo &quot;给定路径的文件名部分：$(basename $path)&quot;</span><br><span class="line">echo &quot;给定路径的目录部分：$(dirname $path)&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印正在执行的当前行的行号和当前正在执行的函数的名称</span></span><br><span class="line">echo &quot;正在执行的当前行的行号：$LINENO&quot;</span><br><span class="line">echo &quot;当前正在执行的函数的名称：$FUNCNAME&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印 Bash 版本号和随机整数</span></span><br><span class="line">echo &quot;Bash 版本号：$BASH_VERSION&quot;</span><br><span class="line">echo &quot;随机整数：$RANDOM&quot;</span><br></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">COPY./01_special_variables.sh  111 222 333</span><br><span class="line">COPY当前脚本的名称：./01_special_variables.sh</span><br><span class="line">位置参数的数量：3</span><br><span class="line">位置参数的列表（作为单个字符串）：111 222 333</span><br><span class="line">位置参数的列表（作为多个独立字符串）：111 222 333</span><br><span class="line">上一个命令的退出状态：0</span><br><span class="line">当前脚本的进程 ID：77749</span><br><span class="line">后台进程的 ID：77750</span><br><span class="line">当前用户的用户名：topeet</span><br><span class="line">当前用户的主目录路径：/home/topeet</span><br><span class="line">可执行文件的搜索路径：/home/topeet/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin</span><br><span class="line">当前工作目录的路径：/home/topeet/shell</span><br><span class="line">上一个工作目录的路径：/home/topeet</span><br><span class="line">给定路径的文件名部分：somefile.txt</span><br><span class="line">给定路径的目录部分：/path/to</span><br><span class="line">正在执行的当前行的行号：34</span><br><span class="line">当前正在执行的函数的名称：</span><br><span class="line">Bash 版本号：5.0.17(1)-release</span><br><span class="line">随机整数：2591</span><br></pre></td></tr></table></figure>
<h2 id="24-shell-用户环境变量-介绍"><a class="markdownIt-Anchor" href="#24-shell-用户环境变量-介绍"></a> 2.4 shell 用户环境变量 介绍</h2>
<h3 id="241-自定义shell环境变量"><a class="markdownIt-Anchor" href="#241-自定义shell环境变量"></a> 2.4.1 自定义shell环境变量</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">常见的变量之三用户变量，用户变量又称为局部变量，主要用在Shell脚本内部或者临时局部使用，系统变量详解如下：</span></span><br><span class="line">a=rivers 				       自定义变量A；</span><br><span class="line">Httpd_sort=httpd-2.4.6-97.tar  自定义变量N_SOFT；</span><br><span class="line">BACK_DIR=/data/backup/         自定义变量BACK_DIR；</span><br><span class="line">IPaddress=10.0.0.1			   自定义变量IP1；</span><br></pre></td></tr></table></figure>
<h3 id="242-shell-中彩色输出-helloworld"><a class="markdownIt-Anchor" href="#242-shell-中彩色输出-helloworld"></a> 2.4.2 shell 中彩色输出 helloworld</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is <span class="built_in">echo</span> color shell</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers 2021.09-23</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">字体颜色</span></span><br><span class="line">for i in &#123;31..37&#125;; do</span><br><span class="line">echo -e &quot;\033[$i;40mHello world!\033[0m&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">背景颜色</span></span><br><span class="line">for i in &#123;41..47&#125;; do</span><br><span class="line">echo -e &quot;\033[47;$&#123;i&#125;mHello world!\033[0m&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">显示方式</span></span><br><span class="line">for i in &#123;1..8&#125;; do</span><br><span class="line">echo -e &quot;\033[$i;31;40mHello world!\033[0m&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312042108748.png" alt="image-20231204125418612" /></p>
<h1 id="三-shell-编程流程控制语句"><a class="markdownIt-Anchor" href="#三-shell-编程流程控制语句"></a> 三、shell 编程流程控制语句</h1>
<h2 id="31-if-条件语句介绍"><a class="markdownIt-Anchor" href="#31-if-条件语句介绍"></a> 3.1 if 条件语句介绍</h2>
<h3 id="311-常用的单双分支"><a class="markdownIt-Anchor" href="#311-常用的单双分支"></a> 3.1.1 常用的单/双分支</h3>
<ul>
<li>
<p><strong>if 条件语句</strong></p>
</li>
<li>
<p>条件判断语句（if语句）是Shell编程中用于根据条件执行不同代码块的结构。if语句通常以<code>if</code>开头，以<code>fi</code>结尾，可以包含<code>else</code>和<code>elif</code>（else if的缩写）来实现多条件判断。下面是对不同类型的if语句进行详细的讲解：</p>
<ol>
<li>单分支语句（比较大小）:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件表达式 ]; then</span><br><span class="line">    语句1</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>在单分支语句中，根据条件表达式的结果（真或假），如果条件为真，则执行语句1，否则跳过整个if语句。</p>
<ol>
<li>双分支if语句:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if [ 表达式 ]; then</span><br><span class="line">    语句1</span><br><span class="line">else</span><br><span class="line">    语句2</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>在双分支if语句中，根据表达式的结果，如果表达式为真，则执行语句1；如果表达式为假，则执行语句2。</p>
<ol>
<li>多支条件语句（判断成绩）:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if [ 表达式1 ]; then</span><br><span class="line">    语句1</span><br><span class="line">elif [ 表达式2 ]; then</span><br><span class="line">    语句2</span><br><span class="line">elif [ 表达式3 ]; then</span><br><span class="line">    语句3</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>在多支条件语句中，根据每个表达式的结果，按照顺序依次判断条件，并执行相应的语句。如果表达式1为真，则执行语句1；如果表达式1为假且表达式2为真，则执行语句2；如果表达式1和表达式2都为假且表达式3为真，则执行语句3。如果所有条件都为假，则跳过整个if语句。</p>
<p>在if语句中，条件表达式可以使用各种比较运算符（如<code>-eq</code>、<code>-ne</code>、<code>-lt</code>、<code>-gt</code>等）来比较数字，也可以使用字符串比较运算符（如<code>=</code>、<code>!=</code>、<code>-z</code>、<code>-n</code>等）来比较字符串。可以使用逻辑运算符（如<code>&amp;&amp;</code>、<code>||</code>）组合多个条件。</p>
<p>需要注意的是，if语句中的语句块可以是单个命令，也可以是包含多个命令的代码块。在代码块中，可以执行任意需要的Shell命令和逻辑。</p>
<p>通过使用条件判断语句，我们可以根据不同的条件执行不同的代码逻辑，实现程序的流程控制和条件分支。它在Shell脚本中非常常用，可用于控制程序的逻辑流程、处理不同的错误情况、根据条件执行不同的操作等。</p>
</li>
</ul>
<h3 id="312-if-常见判断逻辑运算符详解"><a class="markdownIt-Anchor" href="#312-if-常见判断逻辑运算符详解"></a> 3.1.2 if 常见判断逻辑运算符详解</h3>
<ul>
<li><code>-f</code>：判断文件是否存在。例如，<code>if [ -f filename ]</code>会检查<code>filename</code>是否为一个存在的文件。</li>
<li><code>-d</code>：判断目录是否存在。例如，<code>if [ -d dir ]</code>会检查<code>dir</code>是否为一个存在的目录。</li>
<li><code>-eq</code>：等于，用于整数比较。例如，<code>if [ &quot;$a&quot; -eq &quot;$b&quot; ]</code>会判断变量<code>a</code>和<code>b</code>是否相等。</li>
<li><code>-ne</code>：不等于，用于整数比较。例如，<code>if [ &quot;$a&quot; -ne &quot;$b&quot; ]</code>会判断变量<code>a</code>和<code>b</code>是否不相等。</li>
<li><code>-lt</code>：小于，用于整数比较。例如，<code>if [ &quot;$a&quot; -lt &quot;$b&quot; ]</code>会判断变量<code>a</code>是否小于<code>b</code>。</li>
<li><code>-gt</code>：大于，用于整数比较。例如，<code>if [ &quot;$a&quot; -gt &quot;$b&quot; ]</code>会判断变量<code>a</code>是否大于<code>b</code>。</li>
<li><code>-le</code>：小于或等于，用于整数比较。例如，<code>if [ &quot;$a&quot; -le &quot;$b&quot; ]</code>会判断变量<code>a</code>是否小于等于<code>b</code>。</li>
<li><code>-ge</code>：大于或等于，用于整数比较。例如，<code>if [ &quot;$a&quot; -ge &quot;$b&quot; ]</code>会判断变量<code>a</code>是否大于等于<code>b</code>。</li>
<li><code>-a</code>：逻辑与，表示双方都成立。例如，<code>if [ condition1 -a condition2 ]</code>会检查<code>condition1</code>和<code>condition2</code>是否同时成立。</li>
<li><code>-o</code>：逻辑或，表示单方成立。例如，<code>if [ condition1 -o condition2 ]</code>会检查<code>condition1</code>和<code>condition2</code>是否有一个成立。</li>
<li><code>-z</code>：空字符串，判断一个字符串是否为空。例如，<code>if [ -z &quot;$string&quot; ]</code>会判断变量<code>string</code>是否为空字符串。</li>
<li><code>-x</code>：是否具有可执行权限，判断文件是否有可执行权限。例如，<code>if [ -x filename ]</code>会判断<code>filename</code>是否具有可执行权限。</li>
<li><code>||</code>：逻辑或，表示单方成立。例如，<code>command1 || command2</code>会执行<code>command1</code>，如果<code>command1</code>执行失败，则执行<code>command2</code>。</li>
<li><code>&amp;&amp;</code>：逻辑与，表示双方都成立。例如，<code>command1 &amp;&amp; command2</code>会执行<code>command1</code>，如果<code>command1</code>执行成功，则执行<code>command2</code>。</li>
</ul>
<h3 id="313-使用单分支语句判断crond-进程是否在运行案例"><a class="markdownIt-Anchor" href="#313-使用单分支语句判断crond-进程是否在运行案例"></a> 3.1.3 使用单分支语句判断crond 进程是否在运行—案例</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">this is check crond</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers on 2021-9.23</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">定义一个变量名</span></span><br><span class="line">name=crond</span><br><span class="line">num=$(ps -ef|grep $name|grep -vc grep)</span><br><span class="line">if [ $num -eq 1 ];then</span><br><span class="line">    echo &quot;$num running!&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;$num is not running!&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h3 id="314-判断系统目录是否存在-案例"><a class="markdownIt-Anchor" href="#314-判断系统目录是否存在-案例"></a> 3.1.4 判断系统目录是否存在 —案例</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">this is check directory</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers on 2021-9.27</span> </span><br><span class="line"> if  [  !  -d  /data/rivers  -a  !  -d  /tmp/rivers  ]；then</span><br><span class="line"> mkdir  -p  /data/rivers  f</span><br><span class="line"> i</span><br></pre></td></tr></table></figure>
<h3 id="315-多个条件判断学生分数等级-案例"><a class="markdownIt-Anchor" href="#315-多个条件判断学生分数等级-案例"></a> 3.1.5 多个条件判断学生分数等级 — 案例</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">if</span> 语句可以直接对命令状态进行判断，就省去了获取$?这一步！</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">如果第一个条件符合就不再向下匹配</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">this check grade shell</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">by author rivers on 2021-09-27</span></span><br><span class="line">  </span><br><span class="line">  grade=$1</span><br><span class="line">  if [ $grade -gt 90 ];then</span><br><span class="line">    echo &quot;Is&#x27;s very good!&quot;</span><br><span class="line">  elif [ $grade -gt 70 ];then</span><br><span class="line">    echo &quot;Is&#x27;s is good!&quot;</span><br><span class="line">  </span><br><span class="line">  elif [ $grade -ge 60 ];then</span><br><span class="line">    echo &quot;pass&quot;</span><br><span class="line">  </span><br><span class="line">  else</span><br><span class="line">    echo &quot;no pass&quot;</span><br><span class="line">  fi</span><br></pre></td></tr></table></figure>
<h2 id="32-for-循环语句介绍"><a class="markdownIt-Anchor" href="#32-for-循环语句介绍"></a> 3.2 for 循环语句介绍</h2>
<p>Shell脚本中的<code>for</code>循环语句。它的一般格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for name [ in [ word ... ] ] ; do</span><br><span class="line">  list</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>或者可以写成：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for 变量名 in 取值列表; do</span><br><span class="line">  语句 1</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>下面是对这个<code>for</code>循环语句的详细介绍：</p>
<ul>
<li><code>name</code>或<code>变量名</code>：循环变量的名称，可以是任意合法的变量名。在每次循环迭代中，该变量将被赋予<code>取值列表</code>中的一个值。</li>
<li><code>in</code>：关键字，用于指定<code>取值列表</code>的开始。</li>
<li><code>word</code>或<code>取值列表</code>：一个或多个值，用空格分隔。这些值将依次赋给循环变量，循环将针对每个值执行一次。</li>
<li><code>list</code>或<code>语句 1</code>：在每次循环迭代中执行的命令列表。可以包含任意数量的命令和语句。</li>
</ul>
<p><code>for</code>循环的工作原理是，在每次循环迭代时，将<code>取值列表</code>中的一个值赋给循环变量，然后执行<code>list</code>中的命令列表。每次迭代完成后，循环变量将更新为<code>取值列表</code>中的下一个值，直到所有的值都被处理完毕。</p>
<p>以下是一个例子来说明<code>for</code>循环的使用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for fruit in apple banana cherry</span><br><span class="line">do</span><br><span class="line">  echo &quot;I like $fruit&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>在上述例子中，循环变量<code>fruit</code>依次被赋值为<code>apple</code>、<code>banana</code>和<code>cherry</code>，然后执行<code>echo</code>语句打印出相应的结果。循环将重复执行这个过程，直到处理完所有的值。</p>
<p>输出结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I like apple</span><br><span class="line">I like banana</span><br><span class="line">I like cherry</span><br></pre></td></tr></table></figure>
<p><code>for</code>循环在Shell脚本中经常用于遍历数组、文件列表或指定的取值范围，并对每个元素执行相同的操作。它提供了一种方便且简洁的方式来处理重复的任务。</p>
<h2 id="33-while-循环语句介绍"><a class="markdownIt-Anchor" href="#33-while-循环语句介绍"></a> 3.3 while 循环语句介绍</h2>
<p><code>while</code>循环语句是Shell脚本中用于重复执行一组命令或语句的一种循环结构。它的一般格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while 表达式</span><br><span class="line">do</span><br><span class="line">  语句1</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>下面是对<code>while</code>循环语句的详细介绍：</p>
<ul>
<li><code>表达式</code>：一个条件表达式，用于判断是否继续执行循环。如果表达式的值为真（非零），则循环会一直执行；如果表达式的值为假（零），则循环结束。</li>
<li><code>语句1</code>：在每次循环迭代中执行的命令列表。可以包含任意数量的命令和语句。</li>
</ul>
<p><code>while</code>循环的工作原理是，首先对<code>表达式</code>进行求值，如果表达式的值为真，则执行<code>语句1</code>中的命令列表。执行完<code>语句1</code>后，再次对<code>表达式</code>进行求值，如果仍然为真，则继续执行<code>语句1</code>，以此类推。直到<code>表达式</code>的值为假时，循环结束，程序将跳出循环并继续执行循环之后的代码。</p>
<p>以下是一个例子来说明<code>while</code>循环的使用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count=0</span><br><span class="line">while [ $count -lt 5 ]</span><br><span class="line">do</span><br><span class="line">  echo &quot;Count: $count&quot;</span><br><span class="line">  count=$((count+1))</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>在上述例子中，<code>count</code>变量初始值为0。<code>while</code>循环会判断<code>$count -lt 5</code>的条件表达式，如果为真，则执行<code>echo</code>语句打印出当前的<code>count</code>值，并将<code>count</code>的值递增1。循环将重复执行这个过程，直到<code>count</code>的值大于等于5时，循环结束。</p>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Count: 0</span><br><span class="line">Count: 1</span><br><span class="line">Count: 2</span><br><span class="line">Count: 3</span><br><span class="line">Count: 4</span><br></pre></td></tr></table></figure>
<p><code>while</code>循环可用于对条件进行判断，并在满足条件时反复执行一组命令或语句。它提供了一种灵活的方式来处理需要重复执行的任务，直到满足某个条件才停止循环。</p>
<h3 id="331-break和continue"><a class="markdownIt-Anchor" href="#331-break和continue"></a> 3.3.1 break和continue</h3>
<p><code>break</code>和<code>continue</code>是在循环中使用的控制语句，可以对循环的执行进行控制。</p>
<ul>
<li><code>break</code>语句用于终止当前所在的循环，跳出循环体，继续执行循环之后的代码。它通常用于满足某个条件时提前结束循环。在示例1中的代码中，当<code>$N</code>的值等于5时，执行了<code>break</code>语句，终止了<code>while</code>循环的执行。</li>
<li><code>continue</code>语句用于跳过当前循环迭代的剩余代码，直接进行下一次循环迭代。它通常用于在特定情况下跳过某些循环迭代。在示例2中的代码中，当<code>$N</code>的值等于3时，执行了<code>continue</code>语句，跳过了<code>echo</code>语句，直接进行下一次循环迭代。</li>
</ul>
<p>以下是一个示例，演示如何使用<code>break</code>和<code>continue</code>语句：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">i=0</span><br><span class="line">while ((i&lt;=100))</span><br><span class="line">do</span><br><span class="line">    if ((i % 2 == 0))</span><br><span class="line">    then</span><br><span class="line">        i=$((i+1))</span><br><span class="line">        continue</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    if ((i &gt; 50))</span><br><span class="line">    then</span><br><span class="line">        break</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    echo $i</span><br><span class="line">    i=$((i+1))</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>在上述示例中，循环从0到100打印数字。使用了<code>continue</code>语句来跳过偶数，使用了<code>break</code>语句来终止循环当数字大于50时。输出结果为1到49的奇数。</p>
<p>总结：</p>
<ul>
<li><code>break</code>用于终止当前循环，并跳出循环体。</li>
<li><code>continue</code>用于跳过当前循环迭代的剩余代码，直接进行下一次循环迭代。</li>
</ul>
<h3 id="332-while循环求1-100的总和-案例"><a class="markdownIt-Anchor" href="#332-while循环求1-100的总和-案例"></a> 3.3.2  While循环求1-100的总和 —案例</h3>
<p>这是一个使用<code>while</code>循环求解1到100的总和的案例。在这个案例中，我们使用了两个变量<code>i</code>和<code>j</code>，其中<code>i</code>用于循环计数，<code>j</code>用于存储求和的结果。</p>
<p>以下是代码示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers on 2021-9-27</span></span><br><span class="line"></span><br><span class="line">j=0</span><br><span class="line">i=1</span><br><span class="line">while ((i&lt;=100))</span><br><span class="line">do</span><br><span class="line">    j=$((j+i))</span><br><span class="line">    ((i++))</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo $j</span><br></pre></td></tr></table></figure>
<p>在循环开始之前，我们将变量<code>j</code>初始化为0，变量<code>i</code>初始化为1。然后，使用<code>while</code>循环来迭代从1到100的所有数字。</p>
<p>在每次循环迭代中，我们将当前的数值<code>i</code>加到变量<code>j</code>上，以累积求和的结果。然后，通过递增<code>i</code>的值来更新循环计数。</p>
<p>当<code>i</code>的值大于100时，循环终止。最后，我们使用<code>echo</code>语句输出求和的结果<code>j</code>。</p>
<p>运行该脚本，将会输出1到100的总和：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5050</span><br></pre></td></tr></table></figure>
<p>因此，通过使用<code>while</code>循环和累加操作，我们成功求得了1到100的总和。</p>
<h3 id="333-每10秒循环判断一次-hbs用户是否登录系统"><a class="markdownIt-Anchor" href="#333-每10秒循环判断一次-hbs用户是否登录系统"></a> 3.3.3 每10秒循环判断一次 hbs用户是否登录系统</h3>
<p>这是一个每10秒循环判断用户是否登录系统的案例。在这个案例中，我们使用了一个无限循环<code>while true</code>来进行循环判断。</p>
<p>以下是代码示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Check File to change.</span> </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">By author rivers 2021-9-27</span></span><br><span class="line"></span><br><span class="line">USERS=&quot;hbs&quot;</span><br><span class="line">while true</span><br><span class="line">do</span><br><span class="line">    echo &quot;The Time is `date +%F-%T`&quot;</span><br><span class="line">    sleep 10</span><br><span class="line">    NUM=`who|grep &quot;$USERS&quot;|wc -l`</span><br><span class="line">    if [[ $NUM -ge 1 ]];then</span><br><span class="line">        echo &quot;The $USERS is login in system.&quot;</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>在循环开始之前，我们将要检查的用户名定义为变量<code>USERS</code>，这里设置为&quot;hbs&quot;，可以根据需要修改。</p>
<p>然后，使用<code>while true</code>来创建一个无限循环，表示每10秒进行一次判断。</p>
<p>在每次循环迭代中，我们首先使用<code>date</code>命令输出当前时间。</p>
<p>然后，通过<code>who</code>命令获取当前登录的用户信息，并使用<code>grep</code>命令过滤出包含指定用户名的行。使用<code>wc -l</code>命令统计满足条件的行数，将结果保存在变量<code>NUM</code>中。</p>
<p>接下来，我们使用条件语句<code>if</code>判断<code>NUM</code>是否大于等于1，如果是，则输出相应的提示信息，表示该用户已登录系统。</p>
<p>最后，使用<code>sleep 10</code>命令使脚本暂停10秒，然后继续下一次循环。</p>
<p>运行该脚本，将会每10秒判断一次用户&quot;hbs&quot;是否登录系统，并在登录时输出相应的提示信息。</p>
<h2 id="34-case-选择语句介绍"><a class="markdownIt-Anchor" href="#34-case-选择语句介绍"></a> 3.4 case 选择语句介绍</h2>
<p>Case选择语句是一种用于对多个选择条件进行匹配输出的语句。它类似于if-elif语句结构，通常在脚本中用于根据输入参数的不同情况打印输出结果和内容。</p>
<p>Case选择语句的语法格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">case 模式名 in</span><br><span class="line">  模式1)</span><br><span class="line">    命令1</span><br><span class="line">    ;;</span><br><span class="line">  模式2)</span><br><span class="line">    命令2</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    不符合以上模式时执行的命令</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>在这个语法格式中，<code>模式名</code>是要匹配的值或表达式，可以是变量或常量。</p>
<p>每个模式使用圆括号<code>(</code>和<code>)</code>括起来，并以双冒号<code>;;</code>结束。在每个模式下面，可以写入相应的命令。</p>
<p>当<code>模式名</code>与某个模式匹配时，对应的命令将被执行。如果没有匹配任何模式，将执行<code>*)</code>下的命令，它表示不符合以上模式时要执行的命令。</p>
<p>以下是一个示例，演示了Case选择语句的用法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">fruit=&quot;apple&quot;</span><br><span class="line"></span><br><span class="line">case $fruit in</span><br><span class="line">  &quot;apple&quot;)</span><br><span class="line">    echo &quot;Selected fruit: Apple&quot;</span><br><span class="line">    ;;</span><br><span class="line">  &quot;banana&quot;)</span><br><span class="line">    echo &quot;Selected fruit: Banana&quot;</span><br><span class="line">    ;;</span><br><span class="line">  &quot;orange&quot;)</span><br><span class="line">    echo &quot;Selected fruit: Orange&quot;</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    echo &quot;Unknown fruit&quot;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>在这个示例中，我们定义了一个变量<code>fruit</code>，并将其值设置为&quot;apple&quot;。</p>
<p>然后，使用Case选择语句来匹配<code>fruit</code>的值。如果<code>fruit</code>的值与某个模式匹配，将执行相应的命令。</p>
<p>在这个示例中，<code>fruit</code>的值为&quot;apple&quot;，因此第一个模式被匹配，命令<code>echo &quot;Selected fruit: Apple&quot;</code>将被执行，输出&quot;Selected fruit: Apple&quot;。</p>
<p>如果将<code>fruit</code>的值改为&quot;banana&quot;，那么第二个模式将被匹配，输出结果将是&quot;Selected fruit: Banana&quot;。</p>
<p>如果<code>fruit</code>的值不匹配任何模式，将执行<code>*)</code>下的命令，输出&quot;Unknown fruit&quot;。</p>
<h2 id="35-select选择语句"><a class="markdownIt-Anchor" href="#35-select选择语句"></a> 3.5 Select选择语句</h2>
<p>Select选择语句是一种类似于for循环的语句，用于创建选择菜单。它通常与PS3结合使用，用于打印菜单的输出信息。</p>
<p>Select选择语句的语法格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select 变量名 in 表达式</span><br><span class="line">do</span><br><span class="line">  语句</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>在这个语法格式中，<code>变量名</code>用于保存用户选择的值。<code>表达式</code>可以是一个列表、数组或命令的输出结果。</p>
<p>在每次循环迭代中，会打印出一个带有选择索引的菜单，用户可以根据提示选择其中一个选项。</p>
<p>当用户进行选择后，选择的值将会保存在<code>变量名</code>中，并执行相应的语句。</p>
<p>以下是一个示例，演示了Select选择语句的用法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers on 2021-9-27</span></span><br><span class="line"></span><br><span class="line">PS3=&quot;Select a number: &quot;</span><br><span class="line">while true; do</span><br><span class="line">  select mysql_version in 5.1 5.6 quit;</span><br><span class="line">  do</span><br><span class="line">    case $mysql_version in</span><br><span class="line">      5.1)</span><br><span class="line">        echo &quot;mysql 5.1&quot;</span><br><span class="line">        break</span><br><span class="line">        ;;</span><br><span class="line">      5.6)</span><br><span class="line">        echo &quot;mysql 5.6&quot;</span><br><span class="line">        break</span><br><span class="line">        ;;</span><br><span class="line">      quit)</span><br><span class="line">        exit</span><br><span class="line">        ;;</span><br><span class="line">      *)</span><br><span class="line">        echo &quot;Input error, Please enter again!&quot;</span><br><span class="line">        break</span><br><span class="line">    esac</span><br><span class="line">  done</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>在这个示例中，我们首先定义了一个PS3变量，用于提示用户选择一个数字。</p>
<p>然后，使用select选择语句创建了一个菜单，菜单选项是&quot;5.1&quot;、“5.6&quot;和&quot;quit”。</p>
<p>在每次循环迭代中，会打印出菜单，并等待用户的选择。</p>
<p>根据用户的选择，使用case选择语句执行相应的命令。如果选择了&quot;5.1&quot;，则输出&quot;mysql 5.1&quot;；如果选择了&quot;5.6&quot;，则输出&quot;mysql 5.6&quot;；如果选择了&quot;quit&quot;，则退出脚本；如果选择了其他值，输出&quot;Input error, Please enter again!&quot;。</p>
<h2 id="36-shell函数"><a class="markdownIt-Anchor" href="#36-shell函数"></a> 3.6 Shell函数</h2>
<p>Shell函数是一组命令或语句的可重用块，可以在Shell脚本中定义一次，然后随时调用，避免了重复编写相同的代码块。函数的语法格式是以&quot;function name()“开始，以”}&quot;结束。</p>
<p>在Shell编程中，默认情况下无法将参数传递给函数的括号内部，而是通过调用函数名称时传递参数，例如&quot;func arg1 arg2&quot;。</p>
<p>下面是一个示例的Shell脚本，其中定义了一个名为&quot;func&quot;的函数，函数内部计算了一个变量的值，并使用&quot;return&quot;语句返回该值。然后，调用该函数并打印返回的值。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">func() &#123;</span><br><span class="line">    VAR=$((1+1))</span><br><span class="line">    return $VAR</span><br><span class="line">    echo &quot;This is a function.&quot;</span><br><span class="line">&#125;</span><br><span class="line">func</span><br><span class="line">echo $?</span><br></pre></td></tr></table></figure>
<p>通过运行&quot;bash <a target="_blank" rel="noopener" href="http://test.sh">test.sh</a>&quot;命令，将执行上述脚本，调用&quot;func&quot;函数，并打印返回的值。</p>
<h2 id="37-shell数组"><a class="markdownIt-Anchor" href="#37-shell数组"></a> 3.7 shell数组</h2>
<p>在Shell编程中，数组是一组按照特定顺序排列的相同类型元素的集合。以下是关于数组的一些常见用法和语法：</p>
<ol>
<li>初始化数组：
<ul>
<li>使用小括号将元素括起来，并使用空格分隔元素。</li>
<li>格式：array=(元素1 元素2 元素3 …)</li>
<li>例如：array=(“a” “b” “c”)，这样就创建了一个包含元素 “a”、“b” 和 “c” 的数组。</li>
</ul>
</li>
<li>新建数组并添加元素：
<ul>
<li>使用下标来为数组分配元素。</li>
<li>格式：array[下标]=元素</li>
<li>例如：array[0]=“a”，array[1]=“b”，array[2]=“c”，这样就创建了一个包含元素 “a”、“b” 和 “c” 的数组。</li>
</ul>
</li>
<li>将命令输出作为数组元素：
<ul>
<li>使用命令的输出结果作为数组的元素。</li>
<li>格式：array=($(command))</li>
<li>例如：array=($(ls))，这样就将 “ls” 命令的输出结果作为数组的元素。</li>
</ul>
</li>
</ol>
<p>请注意，数组的下标从0开始计数。可以使用下标来访问数组的元素，例如 ${array[0]} 表示数组的第一个元素。</p>
<p>以下是一个示例，展示了如何定义和使用数组：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">array=(&quot;a&quot; &quot;b&quot; &quot;c&quot;)  # 使用小括号初始化数组</span><br><span class="line">echo &quot;数组的第一个元素：$&#123;array[0]&#125;&quot;</span><br><span class="line">echo &quot;数组的第二个元素：$&#123;array[1]&#125;&quot;</span><br><span class="line">echo &quot;数组的第三个元素：$&#123;array[2]&#125;&quot;</span><br><span class="line"></span><br><span class="line">new_array=()  # 新建一个空数组</span><br><span class="line">new_array[0]=&quot;x&quot;  # 添加第一个元素</span><br><span class="line">new_array[1]=&quot;y&quot;  # 添加第二个元素</span><br><span class="line">new_array[2]=&quot;z&quot;  # 添加第三个元素</span><br><span class="line">echo &quot;新数组的元素：$&#123;new_array[@]&#125;&quot;</span><br><span class="line"></span><br><span class="line">command_output=($(ls))  # 将 ls 命令的输出作为数组元素</span><br><span class="line">echo &quot;命令输出作为数组元素：$&#123;command_output[@]&#125;&quot;</span><br></pre></td></tr></table></figure>
<p>通过运行上述脚本，您将看到输出结果显示了数组的元素和命令输出作为数组元素的情况。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">chai</div><div class="post-copyright__author_desc">热爱学习</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2023/12/02/19%20shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2023/12/02/19%20shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/')">shell脚本学习</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2023/12/02/19%20shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=shell脚本学习&amp;url=http://example.com/2023/12/02/19%20shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">热爱学习的未来酱</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/12/02/16-%E9%A6%99%E6%A9%99%E6%B4%BE%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%9E%84%E5%BB%BA%E8%84%9A%E6%9C%AC%E5%88%86%E6%9E%90/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">香橙派文件系统构建脚本分析</div></div></a></div><div class="next-post pull-right"><a href="/2023/12/03/20%20ubuntu%E5%92%8Cdebian%E6%BA%90/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">ubuntu和debian源</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">永远年轻，永远热泪盈眶</div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-shell-%E5%85%A5%E9%97%A8%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text"> 一、shell 入门简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E4%BB%80%E4%B9%88%E6%98%AFshell"><span class="toc-number">1.1.</span> <span class="toc-text"> 1.1 什么是shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-shell-%E7%BC%96%E7%A8%8B%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.2.</span> <span class="toc-text"> 1.2 shell 编程注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E7%AC%AC%E4%B8%80%E4%B8%AAshell-%E8%84%9A%E6%9C%AC-hello-world"><span class="toc-number">1.3.</span> <span class="toc-text"> 1.3 第一个shell 脚本 hello world</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-shell-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E8%AE%B2%E8%A7%A3"><span class="toc-number">2.</span> <span class="toc-text"> 二、shell 环境变量讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-shell-%E5%8F%98%E9%87%8F%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.1.</span> <span class="toc-text"> 2.1 shell 变量详解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-shell-%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F-%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.2.</span> <span class="toc-text"> 2.2 shell 系统变量 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-shell-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.3.</span> <span class="toc-text"> 2.3  shell 环境变量介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-shell-%E7%94%A8%E6%88%B7%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.4.</span> <span class="toc-text"> 2.4 shell 用户环境变量 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#241-%E8%87%AA%E5%AE%9A%E4%B9%89shell%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">2.4.1.</span> <span class="toc-text"> 2.4.1 自定义shell环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#242-shell-%E4%B8%AD%E5%BD%A9%E8%89%B2%E8%BE%93%E5%87%BA-helloworld"><span class="toc-number">2.4.2.</span> <span class="toc-text"> 2.4.2 shell 中彩色输出 helloworld</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-shell-%E7%BC%96%E7%A8%8B%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.</span> <span class="toc-text"> 三、shell 编程流程控制语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31-if-%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.1.</span> <span class="toc-text"> 3.1 if 条件语句介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#311-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8D%95%E5%8F%8C%E5%88%86%E6%94%AF"><span class="toc-number">3.1.1.</span> <span class="toc-text"> 3.1.1 常用的单&#x2F;双分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#312-if-%E5%B8%B8%E8%A7%81%E5%88%A4%E6%96%AD%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6%E8%AF%A6%E8%A7%A3"><span class="toc-number">3.1.2.</span> <span class="toc-text"> 3.1.2 if 常见判断逻辑运算符详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#313-%E4%BD%BF%E7%94%A8%E5%8D%95%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5%E5%88%A4%E6%96%ADcrond-%E8%BF%9B%E7%A8%8B%E6%98%AF%E5%90%A6%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%A1%88%E4%BE%8B"><span class="toc-number">3.1.3.</span> <span class="toc-text"> 3.1.3 使用单分支语句判断crond 进程是否在运行—案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#314-%E5%88%A4%E6%96%AD%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8-%E6%A1%88%E4%BE%8B"><span class="toc-number">3.1.4.</span> <span class="toc-text"> 3.1.4 判断系统目录是否存在 —案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#315-%E5%A4%9A%E4%B8%AA%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E5%AD%A6%E7%94%9F%E5%88%86%E6%95%B0%E7%AD%89%E7%BA%A7-%E6%A1%88%E4%BE%8B"><span class="toc-number">3.1.5.</span> <span class="toc-text"> 3.1.5 多个条件判断学生分数等级 — 案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-for-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.2.</span> <span class="toc-text"> 3.2 for 循环语句介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33-while-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.3.</span> <span class="toc-text"> 3.3 while 循环语句介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#331-break%E5%92%8Ccontinue"><span class="toc-number">3.3.1.</span> <span class="toc-text"> 3.3.1 break和continue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#332-while%E5%BE%AA%E7%8E%AF%E6%B1%821-100%E7%9A%84%E6%80%BB%E5%92%8C-%E6%A1%88%E4%BE%8B"><span class="toc-number">3.3.2.</span> <span class="toc-text"> 3.3.2  While循环求1-100的总和 —案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#333-%E6%AF%8F10%E7%A7%92%E5%BE%AA%E7%8E%AF%E5%88%A4%E6%96%AD%E4%B8%80%E6%AC%A1-hbs%E7%94%A8%E6%88%B7%E6%98%AF%E5%90%A6%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.3.3.</span> <span class="toc-text"> 3.3.3 每10秒循环判断一次 hbs用户是否登录系统</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-case-%E9%80%89%E6%8B%A9%E8%AF%AD%E5%8F%A5%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.4.</span> <span class="toc-text"> 3.4 case 选择语句介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#35-select%E9%80%89%E6%8B%A9%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.5.</span> <span class="toc-text"> 3.5 Select选择语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#36-shell%E5%87%BD%E6%95%B0"><span class="toc-number">3.6.</span> <span class="toc-text"> 3.6 Shell函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#37-shell%E6%95%B0%E7%BB%84"><span class="toc-number">3.7.</span> <span class="toc-text"> 3.7 shell数组</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/31/%E8%A7%84%E7%9F%A9/" title="规矩">规矩</a><time datetime="2024-12-31T14:15:56.000Z" title="发表于 2024-12-31 22:15:56">2024-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/31/%E5%8F%8D%E6%80%9D/" title="反思">反思</a><time datetime="2024-12-31T13:26:56.000Z" title="发表于 2024-12-31 21:26:56">2024-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/11/24%20%E8%AF%BB%E5%90%8E%E6%84%9F/" title="读后感">读后感</a><time datetime="2024-12-10T22:50:19.000Z" title="发表于 2024-12-11 06:50:19">2024-12-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/12/11/23%20%E5%B5%8C%E5%85%A5%E5%BC%8FC%E8%AF%AD%E8%A8%80%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/" title="嵌入式C语言的自我修养">嵌入式C语言的自我修养</a><time datetime="2023-12-10T22:50:19.000Z" title="发表于 2023-12-11 06:50:19">2023-12-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/12/10/22%20tabby%E7%9A%84%E4%BD%BF%E7%94%A8/" title="tabby的使用">tabby的使用</a><time datetime="2023-12-10T04:50:19.000Z" title="发表于 2023-12-10 12:50:19">2023-12-10</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2023 By <a class="footer-bar-link" href="/" title="chai" target="_blank">chai</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">3</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://chai0705.github.io/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 chai 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>