<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta name="description" content="永远年轻，永远热泪盈眶" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>shell脚本学习 |  热爱学习的未来酱</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="热爱学习的未来酱" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-19 shell脚本学习"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  shell脚本学习
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/12/02/19%20shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time datetime="2023-12-02T07:01:21.000Z" itemprop="datePublished">2023-12-02</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">8.3k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">31 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一、shell-入门简介"><a href="#一、shell-入门简介" class="headerlink" title="一、shell 入门简介"></a>一、shell 入门简介</h3><h2 id="1-1-什么是shell"><a href="#1-1-什么是shell" class="headerlink" title="1.1 什么是shell"></a>1.1 什么是shell</h2><p><strong>什么是shell</strong></p>
<p>网上有很多shell 的概念介绍，其实都很官方化，如果你对linux 命令很熟悉，那么编写shell 就不是一个难事，shell 本质上是 linux 命令，一条一条命令组合在一起，实现某一个目的，就变成了shell脚本。它从一定程度上 减轻了工作量，提高了工作效率。</p>
<p><strong>官方化的shell 介绍</strong></p>
<p>Shell（也称为命令行解释器或命令行外壳）是计算机操作系统中提供与用户交互的一种用户界面。它允许用户通过键入文本命令来与操作系统进行通信和控制。Shell接受用户输入的命令并将其解释为操作系统可以理解和执行的指令。</p>
<p>Shell是一个命令解释器，它可以解释和执行用户输入的命令。它提供了一种方式，使用户能够直接与计算机的操作系统进行交互，而无需依赖图形用户界面（GUI）或其他可视化工具。</p>
<p>Shell的主要功能包括：</p>
<ol>
<li>命令执行：Shell接受用户输入的命令，并将其传递给操作系统执行。这些命令可以是操作文件、管理进程、执行系统命令、编译代码等。</li>
<li>环境控制：Shell可以设置和管理操作系统的环境变量、路径和其他系统配置。用户可以使用Shell来自定义其工作环境和行为。</li>
<li>脚本编写：Shell提供了一种脚本编写的能力，用户可以编写一系列的命令和操作，以便自动化任务、批处理处理数据、执行复杂的操作流程等。</li>
<li>输入&#x2F;输出重定向：Shell允许用户将命令的输入和输出重定向到不同的文件或设备。这使得用户可以通过管道（pipe）和重定向（redirection）等技术，将一个命令的输出作为另一个命令的输入，或将输出保存到文件中。</li>
</ol>
<p><strong>常见的shell 有哪些</strong></p>
<pre><code>Bourne Shell（/usr/bin/sh或/bin/sh）
Bourne Again Shell（/bin/bash）
C Shell（/usr/bin/csh）
K Shell（/usr/bin/ksh）
Shell for Root（/sbin/sh）
</code></pre>
<p>最常用的shell是Bash，也就是Bourne Again Shell。Bash由于易用和免费，在日常工作中被广泛使用，也是大多数Linux操作系统默认的Shell环境。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312042108406.png" alt="在这里插入图片描述"></p>
<h2 id="1-2-shell-编程注意事项"><a href="#1-2-shell-编程注意事项" class="headerlink" title="1.2 shell 编程注意事项"></a>1.2 shell 编程注意事项</h2><p>当进行Shell编程时，有一些注意事项需要注意。以下是一些常见的Shell编程注意事项：</p>
<ol>
<li>Shell脚本命名：Shell脚本的文件名通常应该使用英文，可以使用大写或小写字母，并以<code>.sh</code>作为后缀。避免使用特殊符号和空格，以确保脚本的可读性和可执行性。为了清晰明了，建议在命名中体现脚本的功能和用途。</li>
<li>脚本文件的首行：Shell脚本文件的首行应该以<code>#!/bin/bash</code>开头，这是指定脚本使用的Shell解释器为Bash的约定写法。这样操作系统会根据该行指定的解释器来执行脚本。</li>
<li>变量命名：当在Shell脚本中声明变量时，需要遵循一些规则。变量名不能以数字或特殊符号开头，但可以使用下划线。变量名最好使用有意义的、描述性的命名，以便在代码中可以清晰地理解和使用这些变量。避免使用破折号 <code>-</code>，因为它可能会与Shell的参数传递语法产生冲突。</li>
<li>引用变量：在使用变量时，最好将变量用双引号 <code>&quot;</code> 包围起来，以避免由于变量值中的空格或特殊字符而导致的意外行为。例如，使用<code>&quot;$variable&quot;</code>而不是<code>$variable</code>。</li>
<li>文件权限：在使用Shell脚本时，要注意给予脚本文件执行权限。可以使用<code>chmod</code>命令来修改文件权限，使其可执行，例如：<code>chmod +x script.sh</code>。</li>
<li>错误处理：为了编写健壮的Shell脚本，应该考虑错误处理和错误消息的输出。可以使用条件语句和错误处理机制来捕获和处理脚本中可能出现的错误情况。</li>
<li>注释：使用注释来解释代码的作用和逻辑，以提高代码的可读性。在Shell脚本中使用<code>#</code>符号开头的行被视为注释，不会被执行。</li>
<li>调试：在开发过程中，可以使用<code>echo</code>命令输出变量值或调试信息，以帮助跟踪代码执行路径和调试潜在问题。</li>
</ol>
<h2 id="1-3-第一个shell-脚本-hello-world"><a href="#1-3-第一个shell-脚本-hello-world" class="headerlink" title="1.3 第一个shell 脚本 hello world"></a>1.3 第一个shell 脚本 hello world</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建一个Helloword.sh 文件</span></span><br><span class="line">topeet@ubuntu:~/shell$ touch Helloword.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑Helloword.sh 文件</span></span><br><span class="line">topeet@ubuntu:~/shell$ vim Helloword.sh</span><br><span class="line">topeet@ubuntu:~/shell$ ll Helloword.sh</span><br><span class="line">-rw-rw-r-- 1 topeet topeet 31 Dec  3 20:44 Helloword.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">赋予执行权限</span></span><br><span class="line">topeet@ubuntu:~/shell$ chmod o+x Helloword.sh</span><br><span class="line">topeet@ubuntu:~/shell$ ./Helloword.sh</span><br><span class="line">-bash: ./Helloword.sh: Permission denied</span><br><span class="line">topeet@ubuntu:~/shell$ ls</span><br><span class="line">Helloword.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">运行helloword.sh 脚本</span></span><br><span class="line">topeet@ubuntu:~/shell$ sudo ./Helloword.sh</span><br><span class="line">[sudo] password for topeet: </span><br><span class="line">hello world</span><br><span class="line">topeet@ubuntu:~/shell$ </span><br></pre></td></tr></table></figure>

<h1 id="二、shell-环境变量讲解"><a href="#二、shell-环境变量讲解" class="headerlink" title="二、shell 环境变量讲解"></a>二、shell 环境变量讲解</h1><h2 id="2-1-shell-变量详解"><a href="#2-1-shell-变量详解" class="headerlink" title="2.1 shell 变量详解"></a>2.1 shell 变量详解</h2><p>变量是在Shell编程中用于存储数据的一种机制。它们允许我们将值赋给一个名称，并在脚本中引用该名称来获取或修改存储的值。变量可以存储各种类型的数据，例如文本、数字、文件路径等。</p>
<p>在Shell编程中，常见的变量分为以下三种类型：</p>
<ol>
<li>系统变量：系统变量是由Shell程序或操作系统预先定义的变量，用于提供有关系统环境和配置的信息。这些变量通常以大写字母命名，例如<code>PATH</code>、<code>HOME</code>等。系统变量的值可以在Shell脚本中读取和使用，但通常不允许更改。</li>
<li>环境变量：环境变量是用户定义的变量，它们在整个Shell会话中持久存在，并可以在不同的Shell脚本之间共享。环境变量的值可以在Shell脚本中读取、修改和设置。常见的环境变量包括<code>USER</code>、<code>LANG</code>、<code>PWD</code>等。可以使用<code>export</code>命令将用户变量导出为环境变量，例如<code>export MY_VAR=value</code>。</li>
<li>用户变量：用户变量是在Shell脚本中由用户自行定义的变量。它们用于存储临时数据、中间结果或用户自定义配置。用户变量的名称由用户自行指定，遵循变量命名规则。用户变量的值可以在Shell脚本中进行赋值和修改，并在需要时进行引用。例如，<code>name=&quot;John&quot;</code>定义了一个名为<code>name</code>的用户变量，并将其赋值为<code>John</code>。</li>
</ol>
<p>在Shell编程中，可以使用以下方式来操作变量：</p>
<ul>
<li>赋值：使用等号（&#x3D;）将值赋给变量，例如<code>var=value</code>。</li>
<li>引用：在脚本中使用<code>$</code>符号加上变量名来引用变量的值，例如<code>echo $var</code>将打印出变量<code>var</code>的值。</li>
<li>修改：通过重新赋值来修改变量的值，例如<code>var=new_value</code>。</li>
<li>删除：使用<code>unset</code>命令来删除变量，例如<code>unset var</code>会将变量<code>var</code>从内存中删除。</li>
<li>特殊变量：Shell还提供了一些特殊的系统变量，如<code>$HOME</code>表示当前用户的主目录，<code>$PWD</code>表示当前工作目录，<code>$PATH</code>表示可执行程序的搜索路径等。</li>
</ul>
<h2 id="2-2-shell-系统变量-介绍"><a href="#2-2-shell-系统变量-介绍" class="headerlink" title="2.2 shell 系统变量 介绍"></a>2.2 shell 系统变量 介绍</h2><p>系统变量在Shell编程中扮演着重要的角色，用于提供关于脚本执行环境和参数的信息。下面是常见的系统变量及其详细介绍：</p>
<ol>
<li><code>$0</code>: 当前脚本的名称。它保存了当前正在执行的Shell脚本的文件名。可以通过<code>$0</code>来获取脚本文件的名称，包括路径（如果有的话）。</li>
<li><code>$n</code>: 当前脚本的第n个参数。<code>n</code>的取值范围为1到9，用于获取脚本在执行时传递的命令行参数。例如，<code>$1</code>表示第一个参数，<code>$2</code>表示第二个参数，以此类推。</li>
<li><code>$*</code>: 当前脚本的所有参数（不包括程序本身）。它表示所有传递给脚本的命令行参数的列表。可以使用<code>$*</code>来获取所有参数的字符串，参数之间使用空格分隔。</li>
<li><code>$#</code>: 当前脚本的参数个数（不包括程序本身）。它表示传递给脚本的命令行参数的数量。可以使用<code>$#</code>来获取参数的个数。</li>
<li><code>$?</code>: 前一个命令或程序执行完后的状态。它保存了上一个命令或程序执行完毕后的返回状态码。一般情况下，返回0表示执行成功，非零值表示执行失败。可以通过检查<code>$?</code>的值来判断前一个命令或程序是否成功执行。</li>
<li><code>$$</code>: 程序本身的PID号（进程ID）。它保存了当前Shell脚本或程序的进程ID。可以使用<code>$$</code>来获取当前脚本的进程ID。</li>
</ol>
<h2 id="2-3-shell-环境变量介绍"><a href="#2-3-shell-环境变量介绍" class="headerlink" title="2.3  shell 环境变量介绍"></a>2.3  shell 环境变量介绍</h2><p>环境变量在Shell编程中起着重要的作用，它们是用户自定义的变量，用于设置和存储与Shell会话和程序执行环境相关的信息。下面是常见的环境变量及其详细介绍：</p>
<ol>
<li><code>PATH</code>: 命令所示路径，以冒号为分隔。它是一个包含可执行程序的搜索路径的列表。当在Shell中执行一个命令时，会根据<code>PATH</code>变量中所列出的路径依次搜索命令的可执行文件。如果命令在<code>PATH</code>中的某个路径下找到，则可以直接执行。</li>
<li><code>HOME</code>: 打印用户家目录。它保存了当前用户的主目录路径。许多程序会使用<code>HOME</code>变量来确定用户的个人文件和配置存放的位置。</li>
<li><code>SHELL</code>: 显示当前Shell类型。它保存了当前正在使用的Shell的类型，例如<code>/bin/bash</code>表示Bash Shell，<code>/bin/sh</code>表示Bourne Shell等。</li>
<li><code>USER</code>: 打印当前用户名。它保存了当前登录用户的用户名。</li>
<li><code>ID</code>: 打印当前用户ID信息。它包含了当前用户的用户ID（UID）、组ID（GID）等相关信息。</li>
<li><code>PWD</code>: 显示当前所在路径。它保存了当前工作目录的路径，即Shell当前所在的路径。</li>
<li><code>TERM</code>: 打印当前终端类型。它保存了当前终端的类型或终端仿真器的名称。</li>
<li><code>HOSTNAME</code>: 显示当前主机名。它保存了当前主机的名称。</li>
<li><code>PS1</code>: 定义主机命令提示符。它用于设置Shell命令行的提示符，可以自定义提示符的格式和内容。</li>
<li><code>HISTSIZE</code>: 历史命令大小。它确定了Shell历史记录中保存的命令的数量。可以通过设置<code>HISTSIZE</code>变量来调整历史命令的大小。</li>
<li><code>RANDOM</code>: 随机生成一个0至32767的整数。它保存了一个随机生成的整数，可以用于在Shell脚本中生成随机数。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印当前脚本的名称</span></span><br><span class="line">echo &quot;当前脚本的名称：$0&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印位置参数的数量和列表</span></span><br><span class="line">echo &quot;位置参数的数量：$#&quot;</span><br><span class="line">echo &quot;位置参数的列表（作为单个字符串）：$*&quot;</span><br><span class="line">echo &quot;位置参数的列表（作为多个独立字符串）：$@&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印上一个命令的退出状态</span></span><br><span class="line">echo &quot;上一个命令的退出状态：$?&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印当前进程的 ID 和后台进程的 ID</span></span><br><span class="line">echo &quot;当前脚本的进程 ID：$$&quot;</span><br><span class="line">sleep 5 &amp;</span><br><span class="line">echo &quot;后台进程的 ID：$!&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印当前用户的用户名和主目录路径</span></span><br><span class="line">echo &quot;当前用户的用户名：$USER&quot;</span><br><span class="line">echo &quot;当前用户的主目录路径：$HOME&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印可执行文件的搜索路径和当前工作目录的路径</span></span><br><span class="line">echo &quot;可执行文件的搜索路径：$PATH&quot;</span><br><span class="line">echo &quot;当前工作目录的路径：$PWD&quot;</span><br><span class="line">echo &quot;上一个工作目录的路径：$OLDPWD&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印给定路径的文件名和目录部分</span></span><br><span class="line">path=&quot;/path/to/somefile.txt&quot;</span><br><span class="line">echo &quot;给定路径的文件名部分：$(basename $path)&quot;</span><br><span class="line">echo &quot;给定路径的目录部分：$(dirname $path)&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印正在执行的当前行的行号和当前正在执行的函数的名称</span></span><br><span class="line">echo &quot;正在执行的当前行的行号：$LINENO&quot;</span><br><span class="line">echo &quot;当前正在执行的函数的名称：$FUNCNAME&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打印 Bash 版本号和随机整数</span></span><br><span class="line">echo &quot;Bash 版本号：$BASH_VERSION&quot;</span><br><span class="line">echo &quot;随机整数：$RANDOM&quot;</span><br></pre></td></tr></table></figure>

<p>运行结果如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">COPY./01_special_variables.sh  111 222 333</span><br><span class="line">COPY当前脚本的名称：./01_special_variables.sh</span><br><span class="line">位置参数的数量：3</span><br><span class="line">位置参数的列表（作为单个字符串）：111 222 333</span><br><span class="line">位置参数的列表（作为多个独立字符串）：111 222 333</span><br><span class="line">上一个命令的退出状态：0</span><br><span class="line">当前脚本的进程 ID：77749</span><br><span class="line">后台进程的 ID：77750</span><br><span class="line">当前用户的用户名：topeet</span><br><span class="line">当前用户的主目录路径：/home/topeet</span><br><span class="line">可执行文件的搜索路径：/home/topeet/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin</span><br><span class="line">当前工作目录的路径：/home/topeet/shell</span><br><span class="line">上一个工作目录的路径：/home/topeet</span><br><span class="line">给定路径的文件名部分：somefile.txt</span><br><span class="line">给定路径的目录部分：/path/to</span><br><span class="line">正在执行的当前行的行号：34</span><br><span class="line">当前正在执行的函数的名称：</span><br><span class="line">Bash 版本号：5.0.17(1)-release</span><br><span class="line">随机整数：2591</span><br></pre></td></tr></table></figure>

<h2 id="2-4-shell-用户环境变量-介绍"><a href="#2-4-shell-用户环境变量-介绍" class="headerlink" title="2.4 shell 用户环境变量 介绍"></a>2.4 shell 用户环境变量 介绍</h2><h3 id="2-4-1-自定义shell环境变量"><a href="#2-4-1-自定义shell环境变量" class="headerlink" title="2.4.1 自定义shell环境变量"></a>2.4.1 自定义shell环境变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">常见的变量之三用户变量，用户变量又称为局部变量，主要用在Shell脚本内部或者临时局部使用，系统变量详解如下：</span></span><br><span class="line">a=rivers 				       自定义变量A；</span><br><span class="line">Httpd_sort=httpd-2.4.6-97.tar  自定义变量N_SOFT；</span><br><span class="line">BACK_DIR=/data/backup/         自定义变量BACK_DIR；</span><br><span class="line">IPaddress=10.0.0.1			   自定义变量IP1；</span><br></pre></td></tr></table></figure>

<h3 id="2-4-2-shell-中彩色输出-helloworld"><a href="#2-4-2-shell-中彩色输出-helloworld" class="headerlink" title="2.4.2 shell 中彩色输出 helloworld"></a>2.4.2 shell 中彩色输出 helloworld</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is <span class="built_in">echo</span> color shell</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers 2021.09-23</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">字体颜色</span></span><br><span class="line">for i in &#123;31..37&#125;; do</span><br><span class="line">echo -e &quot;\033[$i;40mHello world!\033[0m&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">背景颜色</span></span><br><span class="line">for i in &#123;41..47&#125;; do</span><br><span class="line">echo -e &quot;\033[47;$&#123;i&#125;mHello world!\033[0m&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">显示方式</span></span><br><span class="line">for i in &#123;1..8&#125;; do</span><br><span class="line">echo -e &quot;\033[$i;31;40mHello world!\033[0m&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312042108748.png" alt="image-20231204125418612"></p>
<h1 id="三、shell-编程流程控制语句"><a href="#三、shell-编程流程控制语句" class="headerlink" title="三、shell 编程流程控制语句"></a>三、shell 编程流程控制语句</h1><h2 id="3-1-if-条件语句介绍"><a href="#3-1-if-条件语句介绍" class="headerlink" title="3.1 if 条件语句介绍"></a>3.1 if 条件语句介绍</h2><h3 id="3-1-1-常用的单-双分支"><a href="#3-1-1-常用的单-双分支" class="headerlink" title="3.1.1 常用的单&#x2F;双分支"></a>3.1.1 常用的单&#x2F;双分支</h3><ul>
<li><p><strong>if 条件语句</strong></p>
</li>
<li><p>条件判断语句（if语句）是Shell编程中用于根据条件执行不同代码块的结构。if语句通常以<code>if</code>开头，以<code>fi</code>结尾，可以包含<code>else</code>和<code>elif</code>（else if的缩写）来实现多条件判断。下面是对不同类型的if语句进行详细的讲解：</p>
<ol>
<li>单分支语句（比较大小）:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件表达式 ]; then</span><br><span class="line">    语句1</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>在单分支语句中，根据条件表达式的结果（真或假），如果条件为真，则执行语句1，否则跳过整个if语句。</p>
<ol>
<li>双分支if语句:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if [ 表达式 ]; then</span><br><span class="line">    语句1</span><br><span class="line">else</span><br><span class="line">    语句2</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>在双分支if语句中，根据表达式的结果，如果表达式为真，则执行语句1；如果表达式为假，则执行语句2。</p>
<ol>
<li>多支条件语句（判断成绩）:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if [ 表达式1 ]; then</span><br><span class="line">    语句1</span><br><span class="line">elif [ 表达式2 ]; then</span><br><span class="line">    语句2</span><br><span class="line">elif [ 表达式3 ]; then</span><br><span class="line">    语句3</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>在多支条件语句中，根据每个表达式的结果，按照顺序依次判断条件，并执行相应的语句。如果表达式1为真，则执行语句1；如果表达式1为假且表达式2为真，则执行语句2；如果表达式1和表达式2都为假且表达式3为真，则执行语句3。如果所有条件都为假，则跳过整个if语句。</p>
<p>在if语句中，条件表达式可以使用各种比较运算符（如<code>-eq</code>、<code>-ne</code>、<code>-lt</code>、<code>-gt</code>等）来比较数字，也可以使用字符串比较运算符（如<code>=</code>、<code>!=</code>、<code>-z</code>、<code>-n</code>等）来比较字符串。可以使用逻辑运算符（如<code>&amp;&amp;</code>、<code>||</code>）组合多个条件。</p>
<p>需要注意的是，if语句中的语句块可以是单个命令，也可以是包含多个命令的代码块。在代码块中，可以执行任意需要的Shell命令和逻辑。</p>
<p>通过使用条件判断语句，我们可以根据不同的条件执行不同的代码逻辑，实现程序的流程控制和条件分支。它在Shell脚本中非常常用，可用于控制程序的逻辑流程、处理不同的错误情况、根据条件执行不同的操作等。</p>
</li>
</ul>
<h3 id="3-1-2-if-常见判断逻辑运算符详解"><a href="#3-1-2-if-常见判断逻辑运算符详解" class="headerlink" title="3.1.2 if 常见判断逻辑运算符详解"></a>3.1.2 if 常见判断逻辑运算符详解</h3><ul>
<li><code>-f</code>：判断文件是否存在。例如，<code>if [ -f filename ]</code>会检查<code>filename</code>是否为一个存在的文件。</li>
<li><code>-d</code>：判断目录是否存在。例如，<code>if [ -d dir ]</code>会检查<code>dir</code>是否为一个存在的目录。</li>
<li><code>-eq</code>：等于，用于整数比较。例如，<code>if [ &quot;$a&quot; -eq &quot;$b&quot; ]</code>会判断变量<code>a</code>和<code>b</code>是否相等。</li>
<li><code>-ne</code>：不等于，用于整数比较。例如，<code>if [ &quot;$a&quot; -ne &quot;$b&quot; ]</code>会判断变量<code>a</code>和<code>b</code>是否不相等。</li>
<li><code>-lt</code>：小于，用于整数比较。例如，<code>if [ &quot;$a&quot; -lt &quot;$b&quot; ]</code>会判断变量<code>a</code>是否小于<code>b</code>。</li>
<li><code>-gt</code>：大于，用于整数比较。例如，<code>if [ &quot;$a&quot; -gt &quot;$b&quot; ]</code>会判断变量<code>a</code>是否大于<code>b</code>。</li>
<li><code>-le</code>：小于或等于，用于整数比较。例如，<code>if [ &quot;$a&quot; -le &quot;$b&quot; ]</code>会判断变量<code>a</code>是否小于等于<code>b</code>。</li>
<li><code>-ge</code>：大于或等于，用于整数比较。例如，<code>if [ &quot;$a&quot; -ge &quot;$b&quot; ]</code>会判断变量<code>a</code>是否大于等于<code>b</code>。</li>
<li><code>-a</code>：逻辑与，表示双方都成立。例如，<code>if [ condition1 -a condition2 ]</code>会检查<code>condition1</code>和<code>condition2</code>是否同时成立。</li>
<li><code>-o</code>：逻辑或，表示单方成立。例如，<code>if [ condition1 -o condition2 ]</code>会检查<code>condition1</code>和<code>condition2</code>是否有一个成立。</li>
<li><code>-z</code>：空字符串，判断一个字符串是否为空。例如，<code>if [ -z &quot;$string&quot; ]</code>会判断变量<code>string</code>是否为空字符串。</li>
<li><code>-x</code>：是否具有可执行权限，判断文件是否有可执行权限。例如，<code>if [ -x filename ]</code>会判断<code>filename</code>是否具有可执行权限。</li>
<li><code>||</code>：逻辑或，表示单方成立。例如，<code>command1 || command2</code>会执行<code>command1</code>，如果<code>command1</code>执行失败，则执行<code>command2</code>。</li>
<li><code>&amp;&amp;</code>：逻辑与，表示双方都成立。例如，<code>command1 &amp;&amp; command2</code>会执行<code>command1</code>，如果<code>command1</code>执行成功，则执行<code>command2</code>。</li>
</ul>
<h3 id="3-1-3-使用单分支语句判断crond-进程是否在运行—案例"><a href="#3-1-3-使用单分支语句判断crond-进程是否在运行—案例" class="headerlink" title="3.1.3 使用单分支语句判断crond 进程是否在运行—案例"></a>3.1.3 使用单分支语句判断crond 进程是否在运行—案例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">this is check crond</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers on 2021-9.23</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">定义一个变量名</span></span><br><span class="line">name=crond</span><br><span class="line">num=$(ps -ef|grep $name|grep -vc grep)</span><br><span class="line">if [ $num -eq 1 ];then</span><br><span class="line">    echo &quot;$num running!&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;$num is not running!&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="3-1-4-判断系统目录是否存在-—案例"><a href="#3-1-4-判断系统目录是否存在-—案例" class="headerlink" title="3.1.4 判断系统目录是否存在 —案例"></a>3.1.4 判断系统目录是否存在 —案例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">this is check directory</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers on 2021-9.27</span> </span><br><span class="line"> if  [  !  -d  /data/rivers  -a  !  -d  /tmp/rivers  ]；then</span><br><span class="line"> mkdir  -p  /data/rivers  f</span><br><span class="line"> i</span><br></pre></td></tr></table></figure>

<h3 id="3-1-5-多个条件判断学生分数等级-—-案例"><a href="#3-1-5-多个条件判断学生分数等级-—-案例" class="headerlink" title="3.1.5 多个条件判断学生分数等级 — 案例"></a>3.1.5 多个条件判断学生分数等级 — 案例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">if</span> 语句可以直接对命令状态进行判断，就省去了获取$?这一步！</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">如果第一个条件符合就不再向下匹配</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">this check grade shell</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">by author rivers on 2021-09-27</span></span><br><span class="line">  </span><br><span class="line">  grade=$1</span><br><span class="line">  if [ $grade -gt 90 ];then</span><br><span class="line">    echo &quot;Is&#x27;s very good!&quot;</span><br><span class="line">  elif [ $grade -gt 70 ];then</span><br><span class="line">    echo &quot;Is&#x27;s is good!&quot;</span><br><span class="line">  </span><br><span class="line">  elif [ $grade -ge 60 ];then</span><br><span class="line">    echo &quot;pass&quot;</span><br><span class="line">  </span><br><span class="line">  else</span><br><span class="line">    echo &quot;no pass&quot;</span><br><span class="line">  fi</span><br></pre></td></tr></table></figure>

<h2 id="3-2-for-循环语句介绍"><a href="#3-2-for-循环语句介绍" class="headerlink" title="3.2 for 循环语句介绍"></a>3.2 for 循环语句介绍</h2><p>Shell脚本中的<code>for</code>循环语句。它的一般格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for name [ in [ word ... ] ] ; do</span><br><span class="line">  list</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>或者可以写成：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for 变量名 in 取值列表; do</span><br><span class="line">  语句 1</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>下面是对这个<code>for</code>循环语句的详细介绍：</p>
<ul>
<li><code>name</code>或<code>变量名</code>：循环变量的名称，可以是任意合法的变量名。在每次循环迭代中，该变量将被赋予<code>取值列表</code>中的一个值。</li>
<li><code>in</code>：关键字，用于指定<code>取值列表</code>的开始。</li>
<li><code>word</code>或<code>取值列表</code>：一个或多个值，用空格分隔。这些值将依次赋给循环变量，循环将针对每个值执行一次。</li>
<li><code>list</code>或<code>语句 1</code>：在每次循环迭代中执行的命令列表。可以包含任意数量的命令和语句。</li>
</ul>
<p><code>for</code>循环的工作原理是，在每次循环迭代时，将<code>取值列表</code>中的一个值赋给循环变量，然后执行<code>list</code>中的命令列表。每次迭代完成后，循环变量将更新为<code>取值列表</code>中的下一个值，直到所有的值都被处理完毕。</p>
<p>以下是一个例子来说明<code>for</code>循环的使用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for fruit in apple banana cherry</span><br><span class="line">do</span><br><span class="line">  echo &quot;I like $fruit&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>在上述例子中，循环变量<code>fruit</code>依次被赋值为<code>apple</code>、<code>banana</code>和<code>cherry</code>，然后执行<code>echo</code>语句打印出相应的结果。循环将重复执行这个过程，直到处理完所有的值。</p>
<p>输出结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I like apple</span><br><span class="line">I like banana</span><br><span class="line">I like cherry</span><br></pre></td></tr></table></figure>

<p><code>for</code>循环在Shell脚本中经常用于遍历数组、文件列表或指定的取值范围，并对每个元素执行相同的操作。它提供了一种方便且简洁的方式来处理重复的任务。</p>
<h2 id="3-3-while-循环语句介绍"><a href="#3-3-while-循环语句介绍" class="headerlink" title="3.3 while 循环语句介绍"></a>3.3 while 循环语句介绍</h2><p><code>while</code>循环语句是Shell脚本中用于重复执行一组命令或语句的一种循环结构。它的一般格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while 表达式</span><br><span class="line">do</span><br><span class="line">  语句1</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>下面是对<code>while</code>循环语句的详细介绍：</p>
<ul>
<li><code>表达式</code>：一个条件表达式，用于判断是否继续执行循环。如果表达式的值为真（非零），则循环会一直执行；如果表达式的值为假（零），则循环结束。</li>
<li><code>语句1</code>：在每次循环迭代中执行的命令列表。可以包含任意数量的命令和语句。</li>
</ul>
<p><code>while</code>循环的工作原理是，首先对<code>表达式</code>进行求值，如果表达式的值为真，则执行<code>语句1</code>中的命令列表。执行完<code>语句1</code>后，再次对<code>表达式</code>进行求值，如果仍然为真，则继续执行<code>语句1</code>，以此类推。直到<code>表达式</code>的值为假时，循环结束，程序将跳出循环并继续执行循环之后的代码。</p>
<p>以下是一个例子来说明<code>while</code>循环的使用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count=0</span><br><span class="line">while [ $count -lt 5 ]</span><br><span class="line">do</span><br><span class="line">  echo &quot;Count: $count&quot;</span><br><span class="line">  count=$((count+1))</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>在上述例子中，<code>count</code>变量初始值为0。<code>while</code>循环会判断<code>$count -lt 5</code>的条件表达式，如果为真，则执行<code>echo</code>语句打印出当前的<code>count</code>值，并将<code>count</code>的值递增1。循环将重复执行这个过程，直到<code>count</code>的值大于等于5时，循环结束。</p>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Count: 0</span><br><span class="line">Count: 1</span><br><span class="line">Count: 2</span><br><span class="line">Count: 3</span><br><span class="line">Count: 4</span><br></pre></td></tr></table></figure>

<p><code>while</code>循环可用于对条件进行判断，并在满足条件时反复执行一组命令或语句。它提供了一种灵活的方式来处理需要重复执行的任务，直到满足某个条件才停止循环。</p>
<h3 id="3-3-1-break和continue"><a href="#3-3-1-break和continue" class="headerlink" title="3.3.1 break和continue"></a>3.3.1 break和continue</h3><p><code>break</code>和<code>continue</code>是在循环中使用的控制语句，可以对循环的执行进行控制。</p>
<ul>
<li><code>break</code>语句用于终止当前所在的循环，跳出循环体，继续执行循环之后的代码。它通常用于满足某个条件时提前结束循环。在示例1中的代码中，当<code>$N</code>的值等于5时，执行了<code>break</code>语句，终止了<code>while</code>循环的执行。</li>
<li><code>continue</code>语句用于跳过当前循环迭代的剩余代码，直接进行下一次循环迭代。它通常用于在特定情况下跳过某些循环迭代。在示例2中的代码中，当<code>$N</code>的值等于3时，执行了<code>continue</code>语句，跳过了<code>echo</code>语句，直接进行下一次循环迭代。</li>
</ul>
<p>以下是一个示例，演示如何使用<code>break</code>和<code>continue</code>语句：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">i=0</span><br><span class="line">while ((i&lt;=100))</span><br><span class="line">do</span><br><span class="line">    if ((i % 2 == 0))</span><br><span class="line">    then</span><br><span class="line">        i=$((i+1))</span><br><span class="line">        continue</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    if ((i &gt; 50))</span><br><span class="line">    then</span><br><span class="line">        break</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    echo $i</span><br><span class="line">    i=$((i+1))</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>在上述示例中，循环从0到100打印数字。使用了<code>continue</code>语句来跳过偶数，使用了<code>break</code>语句来终止循环当数字大于50时。输出结果为1到49的奇数。</p>
<p>总结：</p>
<ul>
<li><code>break</code>用于终止当前循环，并跳出循环体。</li>
<li><code>continue</code>用于跳过当前循环迭代的剩余代码，直接进行下一次循环迭代。</li>
</ul>
<h3 id="3-3-2-While循环求1-100的总和-—案例"><a href="#3-3-2-While循环求1-100的总和-—案例" class="headerlink" title="3.3.2  While循环求1-100的总和 —案例"></a>3.3.2  While循环求1-100的总和 —案例</h3><p>这是一个使用<code>while</code>循环求解1到100的总和的案例。在这个案例中，我们使用了两个变量<code>i</code>和<code>j</code>，其中<code>i</code>用于循环计数，<code>j</code>用于存储求和的结果。</p>
<p>以下是代码示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers on 2021-9-27</span></span><br><span class="line"></span><br><span class="line">j=0</span><br><span class="line">i=1</span><br><span class="line">while ((i&lt;=100))</span><br><span class="line">do</span><br><span class="line">    j=$((j+i))</span><br><span class="line">    ((i++))</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo $j</span><br></pre></td></tr></table></figure>

<p>在循环开始之前，我们将变量<code>j</code>初始化为0，变量<code>i</code>初始化为1。然后，使用<code>while</code>循环来迭代从1到100的所有数字。</p>
<p>在每次循环迭代中，我们将当前的数值<code>i</code>加到变量<code>j</code>上，以累积求和的结果。然后，通过递增<code>i</code>的值来更新循环计数。</p>
<p>当<code>i</code>的值大于100时，循环终止。最后，我们使用<code>echo</code>语句输出求和的结果<code>j</code>。</p>
<p>运行该脚本，将会输出1到100的总和：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5050</span><br></pre></td></tr></table></figure>

<p>因此，通过使用<code>while</code>循环和累加操作，我们成功求得了1到100的总和。</p>
<h3 id="3-3-3-每10秒循环判断一次-hbs用户是否登录系统"><a href="#3-3-3-每10秒循环判断一次-hbs用户是否登录系统" class="headerlink" title="3.3.3 每10秒循环判断一次 hbs用户是否登录系统"></a>3.3.3 每10秒循环判断一次 hbs用户是否登录系统</h3><p>这是一个每10秒循环判断用户是否登录系统的案例。在这个案例中，我们使用了一个无限循环<code>while true</code>来进行循环判断。</p>
<p>以下是代码示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Check File to change.</span> </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">By author rivers 2021-9-27</span></span><br><span class="line"></span><br><span class="line">USERS=&quot;hbs&quot;</span><br><span class="line">while true</span><br><span class="line">do</span><br><span class="line">    echo &quot;The Time is `date +%F-%T`&quot;</span><br><span class="line">    sleep 10</span><br><span class="line">    NUM=`who|grep &quot;$USERS&quot;|wc -l`</span><br><span class="line">    if [[ $NUM -ge 1 ]];then</span><br><span class="line">        echo &quot;The $USERS is login in system.&quot;</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>在循环开始之前，我们将要检查的用户名定义为变量<code>USERS</code>，这里设置为”hbs”，可以根据需要修改。</p>
<p>然后，使用<code>while true</code>来创建一个无限循环，表示每10秒进行一次判断。</p>
<p>在每次循环迭代中，我们首先使用<code>date</code>命令输出当前时间。</p>
<p>然后，通过<code>who</code>命令获取当前登录的用户信息，并使用<code>grep</code>命令过滤出包含指定用户名的行。使用<code>wc -l</code>命令统计满足条件的行数，将结果保存在变量<code>NUM</code>中。</p>
<p>接下来，我们使用条件语句<code>if</code>判断<code>NUM</code>是否大于等于1，如果是，则输出相应的提示信息，表示该用户已登录系统。</p>
<p>最后，使用<code>sleep 10</code>命令使脚本暂停10秒，然后继续下一次循环。</p>
<p>运行该脚本，将会每10秒判断一次用户”hbs”是否登录系统，并在登录时输出相应的提示信息。</p>
<h2 id="3-4-case-选择语句介绍"><a href="#3-4-case-选择语句介绍" class="headerlink" title="3.4 case 选择语句介绍"></a>3.4 case 选择语句介绍</h2><p>Case选择语句是一种用于对多个选择条件进行匹配输出的语句。它类似于if-elif语句结构，通常在脚本中用于根据输入参数的不同情况打印输出结果和内容。</p>
<p>Case选择语句的语法格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">case 模式名 in</span><br><span class="line">  模式1)</span><br><span class="line">    命令1</span><br><span class="line">    ;;</span><br><span class="line">  模式2)</span><br><span class="line">    命令2</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    不符合以上模式时执行的命令</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>在这个语法格式中，<code>模式名</code>是要匹配的值或表达式，可以是变量或常量。</p>
<p>每个模式使用圆括号<code>(</code>和<code>)</code>括起来，并以双冒号<code>;;</code>结束。在每个模式下面，可以写入相应的命令。</p>
<p>当<code>模式名</code>与某个模式匹配时，对应的命令将被执行。如果没有匹配任何模式，将执行<code>*)</code>下的命令，它表示不符合以上模式时要执行的命令。</p>
<p>以下是一个示例，演示了Case选择语句的用法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">fruit=&quot;apple&quot;</span><br><span class="line"></span><br><span class="line">case $fruit in</span><br><span class="line">  &quot;apple&quot;)</span><br><span class="line">    echo &quot;Selected fruit: Apple&quot;</span><br><span class="line">    ;;</span><br><span class="line">  &quot;banana&quot;)</span><br><span class="line">    echo &quot;Selected fruit: Banana&quot;</span><br><span class="line">    ;;</span><br><span class="line">  &quot;orange&quot;)</span><br><span class="line">    echo &quot;Selected fruit: Orange&quot;</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    echo &quot;Unknown fruit&quot;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>在这个示例中，我们定义了一个变量<code>fruit</code>，并将其值设置为”apple”。</p>
<p>然后，使用Case选择语句来匹配<code>fruit</code>的值。如果<code>fruit</code>的值与某个模式匹配，将执行相应的命令。</p>
<p>在这个示例中，<code>fruit</code>的值为”apple”，因此第一个模式被匹配，命令<code>echo &quot;Selected fruit: Apple&quot;</code>将被执行，输出”Selected fruit: Apple”。</p>
<p>如果将<code>fruit</code>的值改为”banana”，那么第二个模式将被匹配，输出结果将是”Selected fruit: Banana”。</p>
<p>如果<code>fruit</code>的值不匹配任何模式，将执行<code>*)</code>下的命令，输出”Unknown fruit”。</p>
<h2 id="3-5-Select选择语句"><a href="#3-5-Select选择语句" class="headerlink" title="3.5 Select选择语句"></a>3.5 Select选择语句</h2><p>Select选择语句是一种类似于for循环的语句，用于创建选择菜单。它通常与PS3结合使用，用于打印菜单的输出信息。</p>
<p>Select选择语句的语法格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select 变量名 in 表达式</span><br><span class="line">do</span><br><span class="line">  语句</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>在这个语法格式中，<code>变量名</code>用于保存用户选择的值。<code>表达式</code>可以是一个列表、数组或命令的输出结果。</p>
<p>在每次循环迭代中，会打印出一个带有选择索引的菜单，用户可以根据提示选择其中一个选项。</p>
<p>当用户进行选择后，选择的值将会保存在<code>变量名</code>中，并执行相应的语句。</p>
<p>以下是一个示例，演示了Select选择语句的用法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">by author rivers on 2021-9-27</span></span><br><span class="line"></span><br><span class="line">PS3=&quot;Select a number: &quot;</span><br><span class="line">while true; do</span><br><span class="line">  select mysql_version in 5.1 5.6 quit;</span><br><span class="line">  do</span><br><span class="line">    case $mysql_version in</span><br><span class="line">      5.1)</span><br><span class="line">        echo &quot;mysql 5.1&quot;</span><br><span class="line">        break</span><br><span class="line">        ;;</span><br><span class="line">      5.6)</span><br><span class="line">        echo &quot;mysql 5.6&quot;</span><br><span class="line">        break</span><br><span class="line">        ;;</span><br><span class="line">      quit)</span><br><span class="line">        exit</span><br><span class="line">        ;;</span><br><span class="line">      *)</span><br><span class="line">        echo &quot;Input error, Please enter again!&quot;</span><br><span class="line">        break</span><br><span class="line">    esac</span><br><span class="line">  done</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>在这个示例中，我们首先定义了一个PS3变量，用于提示用户选择一个数字。</p>
<p>然后，使用select选择语句创建了一个菜单，菜单选项是”5.1”、”5.6”和”quit”。</p>
<p>在每次循环迭代中，会打印出菜单，并等待用户的选择。</p>
<p>根据用户的选择，使用case选择语句执行相应的命令。如果选择了”5.1”，则输出”mysql 5.1”；如果选择了”5.6”，则输出”mysql 5.6”；如果选择了”quit”，则退出脚本；如果选择了其他值，输出”Input error, Please enter again!”。</p>
<h2 id="3-6-Shell函数"><a href="#3-6-Shell函数" class="headerlink" title="3.6 Shell函数"></a>3.6 Shell函数</h2><p>Shell函数是一组命令或语句的可重用块，可以在Shell脚本中定义一次，然后随时调用，避免了重复编写相同的代码块。函数的语法格式是以”function name()”开始，以”}”结束。</p>
<p>在Shell编程中，默认情况下无法将参数传递给函数的括号内部，而是通过调用函数名称时传递参数，例如”func arg1 arg2”。</p>
<p>下面是一个示例的Shell脚本，其中定义了一个名为”func”的函数，函数内部计算了一个变量的值，并使用”return”语句返回该值。然后，调用该函数并打印返回的值。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">func() &#123;</span><br><span class="line">    VAR=$((1+1))</span><br><span class="line">    return $VAR</span><br><span class="line">    echo &quot;This is a function.&quot;</span><br><span class="line">&#125;</span><br><span class="line">func</span><br><span class="line">echo $?</span><br></pre></td></tr></table></figure>

<p>通过运行”bash test.sh”命令，将执行上述脚本，调用”func”函数，并打印返回的值。</p>
<h2 id="3-7-shell数组"><a href="#3-7-shell数组" class="headerlink" title="3.7 shell数组"></a>3.7 shell数组</h2><p>在Shell编程中，数组是一组按照特定顺序排列的相同类型元素的集合。以下是关于数组的一些常见用法和语法：</p>
<ol>
<li>初始化数组：<ul>
<li>使用小括号将元素括起来，并使用空格分隔元素。</li>
<li>格式：array&#x3D;(元素1 元素2 元素3 …)</li>
<li>例如：array&#x3D;(“a” “b” “c”)，这样就创建了一个包含元素 “a”、”b” 和 “c” 的数组。</li>
</ul>
</li>
<li>新建数组并添加元素：<ul>
<li>使用下标来为数组分配元素。</li>
<li>格式：array[下标]&#x3D;元素</li>
<li>例如：array[0]&#x3D;”a”，array[1]&#x3D;”b”，array[2]&#x3D;”c”，这样就创建了一个包含元素 “a”、”b” 和 “c” 的数组。</li>
</ul>
</li>
<li>将命令输出作为数组元素：<ul>
<li>使用命令的输出结果作为数组的元素。</li>
<li>格式：array&#x3D;($(command))</li>
<li>例如：array&#x3D;($(ls))，这样就将 “ls” 命令的输出结果作为数组的元素。</li>
</ul>
</li>
</ol>
<p>请注意，数组的下标从0开始计数。可以使用下标来访问数组的元素，例如 ${array[0]} 表示数组的第一个元素。</p>
<p>以下是一个示例，展示了如何定义和使用数组：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">array=(&quot;a&quot; &quot;b&quot; &quot;c&quot;)  # 使用小括号初始化数组</span><br><span class="line">echo &quot;数组的第一个元素：$&#123;array[0]&#125;&quot;</span><br><span class="line">echo &quot;数组的第二个元素：$&#123;array[1]&#125;&quot;</span><br><span class="line">echo &quot;数组的第三个元素：$&#123;array[2]&#125;&quot;</span><br><span class="line"></span><br><span class="line">new_array=()  # 新建一个空数组</span><br><span class="line">new_array[0]=&quot;x&quot;  # 添加第一个元素</span><br><span class="line">new_array[1]=&quot;y&quot;  # 添加第二个元素</span><br><span class="line">new_array[2]=&quot;z&quot;  # 添加第三个元素</span><br><span class="line">echo &quot;新数组的元素：$&#123;new_array[@]&#125;&quot;</span><br><span class="line"></span><br><span class="line">command_output=($(ls))  # 将 ls 命令的输出作为数组元素</span><br><span class="line">echo &quot;命令输出作为数组元素：$&#123;command_output[@]&#125;&quot;</span><br></pre></td></tr></table></figure>

<p>通过运行上述脚本，您将看到输出结果显示了数组的元素和命令输出作为数组元素的情况。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2023/12/02/19%20shell%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2023/12/03/20%20ubuntu%E5%92%8Cdebian%E6%BA%90/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            ubuntu和debian源
          
        </div>
      </a>
    
    
      <a href="/2023/12/02/16-%E9%A6%99%E6%A9%99%E6%B4%BE%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%9E%84%E5%BB%BA%E8%84%9A%E6%9C%AC%E5%88%86%E6%9E%90/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">香橙派文件系统构建脚本分析</div>
      </a>
    
  </nav>

  
   
  
   
    <script src="https://cdn.staticfile.org/twikoo/1.4.18/twikoo.all.min.js"></script>
    <div id="twikoo" class="twikoo"></div>
    <script>
        twikoo.init({
            envId: ""
        })
    </script>
 
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2023
        <i class="ri-heart-fill heart_icon"></i> chai
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="热爱学习的未来酱"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E7%91%9E%E8%8A%AF%E5%BE%AE">瑞芯微</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E5%AD%A6%E4%B9%A0">学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E7%94%9F%E6%B4%BB">生活</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=22707008&auto=0&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
    

  </div>
</body>

</html>