<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta name="description" content="永远年轻，永远热泪盈眶" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> 热爱学习的未来酱</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="热爱学习的未来酱" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/1.png" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">热爱学习的未来酱</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['我希望用一生的时间不断学习和深入电子计算机相关的一切知识，并将其整理成网络，分享出来，与更多志同道合的朋友一起进步', '无论你最终要成为一个怎样的人，千万要记住，时间在飞逝。', ''],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  <article class="articles">
    
    
    
    
    <article
  id="post-01_生活/03_反思(2月第3个星期)"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/02/19/01_%E7%94%9F%E6%B4%BB/03_%E5%8F%8D%E6%80%9D(2%E6%9C%88%E7%AC%AC3%E4%B8%AA%E6%98%9F%E6%9C%9F)/"
    >反思(2月第三个星期)</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/02/19/01_%E7%94%9F%E6%B4%BB/03_%E5%8F%8D%E6%80%9D(2%E6%9C%88%E7%AC%AC3%E4%B8%AA%E6%98%9F%E6%9C%9F)/" class="article-date">
  <time datetime="2024-02-18T22:26:56.000Z" itemprop="datePublished">2024-02-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  Here's something encrypted, password is required to continue reading. 
      <a class="article-more-link" href="/2024/02/19/01_%E7%94%9F%E6%B4%BB/03_%E5%8F%8D%E6%80%9D(2%E6%9C%88%E7%AC%AC3%E4%B8%AA%E6%98%9F%E6%9C%9F)/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-04_读书/01 心流"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/02/18/04_%E8%AF%BB%E4%B9%A6/01%20%E5%BF%83%E6%B5%81/"
    >心流</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/02/18/04_%E8%AF%BB%E4%B9%A6/01%20%E5%BF%83%E6%B5%81/" class="article-date">
  <time datetime="2024-02-17T23:50:19.000Z" itemprop="datePublished">2024-02-18</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BB%E4%B9%A6/">读书</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>​	在昨天巧合之下发现了一位宝藏up主，他讲解的心流正是目前我所探寻的，给了我很多的思考，现在我打算自己来读一下心流。</p>
<p>​	up的视频：</p>
<p>​	<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1tD4y1r7HZ/?spm_id_from=333.788&amp;vd_source=f06237b57d9754575c93eaa6db881c53">心流1</a></p>
<p>​	<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1uV4y1V7oL/?spm_id_from=333.788&amp;vd_source=f06237b57d9754575c93eaa6db881c53">心流2</a></p>
<p>​	<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1BM411k7Vf/?spm_id_from=333.788&amp;vd_source=f06237b57d9754575c93eaa6db881c53">心流3</a></p>
<p>​	<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1v84y1r7H7/?spm_id_from=333.337.search-card.all.click&amp;vd_source=f06237b57d9754575c93eaa6db881c53">心流4</a></p>
<p>​	up的文字稿：</p>
<p>​	<a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv19345945">心流1</a></p>
<p>​	<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg5OTk1Nzc1MQ==&amp;mid=2247490837&amp;idx=6&amp;sn=18550ff6cf581e0a8fb7f2f605221c80&amp;chksm=c04a0b8df73d829b5b31ae3d318a4d4b27d615e2a1dc3c3f5a5aa35d8a7058e76ff507a99b71&amp;token=938128463&amp;lang=zh_CN&amp;scene=21#wechat_redirect">心流2</a></p>
<p>​	<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg5OTk1Nzc1MQ==&amp;mid=2247490837&amp;idx=7&amp;sn=c01f0248e37131e0684e31d4ddf5be69&amp;chksm=c04a0b8df73d829b52df8601dcbf480228cbc43b38f4d3282f8b7230afdd622528cffcf1202b&amp;token=938128463&amp;lang=zh_CN&amp;scene=21#wechat_redirect">心流3</a></p>
<p>​	<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg5OTk1Nzc1MQ==&amp;mid=2247490837&amp;idx=8&amp;sn=51e34adeb18de51fa7c0fa47776c785a&amp;chksm=c04a0b8df73d829b5481c86542bdb1590605b31b11cc029d3fabfb01509fb05ca49665f0a0b5&amp;token=938128463&amp;lang=zh_CN&amp;scene=21#wechat_redirect">心流4</a></p>
<p>​</p>
<p>​	先来说一下我的目的，也就是我为什么会看到这个视频，或者为了这一系列的视频而请了一天假，在我之前的观念里，请假是让我所不齿的，无论什么事情，都应该是以上班为第一要义，并且之前我也确实挺喜欢上班的，当然我现在也喜欢上班，只是有点迷失方向了，人山人海里，起起伏伏，熙熙攘攘，真的让我很迷茫、很迷茫，无论是上班的过程，还是在家休息的过程，都让我感到很忧伤，我认为我能做到的不仅仅是这样，不是在公司一坐坐一天，更不是在摸鱼、偷懒中度过白天上班的那段时间，上班期待着下班，下班后将时间都堆砌在那些垃圾娱乐上，而那些垃圾娱乐带来的又会是什么呢，是在当下有了沉浸感，但是在后面没有满足感，在处于垃圾娱乐的那段时间里，无可否认你会是在心流里，但是心流的状态并不是永远保持的，当你从心流的状态退出之后，你又该如何呢？会陷入悔恨和自卑，因为唯有自己不会欺骗自己，有没有成为一个更好的自己，才是一个真正的评判标准。当你晚上在床上躺下，开始反思一天的生活，你是否能心安理得的说出，今天我过的很不错，假如明天给我再来一次的机会，我会很高兴的度过今天这一天，这就是我们真正要努力到达的。</p>
<p>​	然而，我仍旧有问题，上面说的是我的宏观感受，那具体到个人的行为呢？要如何进行改变呢？毕竟我真正要改变的是自己呀，上面这些东西虽然提高了我心灵上的境界，但是在实际行为上并没有给我带来很大的帮助，所以仍旧需要我自己去探索。</p>
<p>​	先来分析上班时影响我进入心流状态的一些事情，首先是技术支持，你永远不知道客户问的都是一些怎样的问题，而且因为在技术支持的时候有着一天一百块的奖金，事实上，即使没有这一百块的奖金，我也是会很努力的回答的，我认为这是我的职责，是我的应该要尽的责任，但也正是因为这一点，就导致了我不能将身心全部投入到具体的一件事情上，有必要写一个工作时的一个行为准则。</p>
<ol>
<li>
<p>技术支持进行切片，无论是谁的技术支持，每半个小时都要花费五分钟的时间来进行客户答疑，即每小时的前五分钟和半小时之后的时间进行技术支持，作为奖励可以在这五分钟内听听音乐，注意这时候只能看着qq，也不需要你去做其他的事情，如果仅仅只是 在一个小时浪费十分钟的时间，其余的五十分钟都能很好的利用那也是很高的利用率了。</p>
</li>
<li>
<p>关于传输相关的问题，很多时候都要远程服务器进行百度网盘的上传等等，要传输的地方太多了，nas、两个备份，这中间要经过的步骤都是很繁琐的，即使我现在已经有了编译脚本，但传输的速度仍旧是很慢的，而我又不能时时刻刻的看它，而且这个东西在上传的时候总会让我分神，就比如它是不是突然暂停了，等一系列其他原因的出现。本来我想的是在我的百度网盘里直接上传完，然后在那个电脑上只需要分享一下即可，后来发现这样还是不太行，之前的计算方法其实不对，虽然现在的上传速度相较于之前快了很多很多，但是除此之外还有文件的上传速度，也就是说一个文件的上传时间有两份，以后尽可能的将时间乘以二分之三，也就是1.5倍，在这段时间内，不需要去管它。</p>
</li>
<li>
<p>手机问题，本来是有打算带着另一个手机上班的，现在看来，就是在痴心妄想，甚至就算是这个手机我也不是很想要留在身边，上一周试了一下，手机不在身边效率真的是大大的提高了。</p>
</li>
<li>
<p>另一个是关于QQ的问题，是不是可以考虑离线的状态，也就是这四天的非技术支持的时间，QQ是不是可以在5分钟之外的其他时间保持离线的状态，这样也就不会有一直想看QQ的心理了。</p>
<hr />
<p>总结完了，你看看工作的时候其实要注意的也就只有这些，但是关于生活呢，要做的肯定远远不止这些，有很多的诱惑需要摒弃，有很多的细节需要追寻，有很多的心理也需要剖析。</p>
</li>
</ol>
<p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识， 并将其整理成网络，分享出来，与更多志同道合的朋友一起进步。==</p>
<hr />
<h1 id="老岁月摘记"><a class="markdownIt-Anchor" href="#老岁月摘记"></a> 老岁月摘记</h1>
<h2 id="心流1"><a class="markdownIt-Anchor" href="#心流1"></a> 心流1</h2>
<p>​	发达的神经系统，可以让人类感知和获取更多的外界信息，当我们进食的时候，也有余力关注周围有没有值得交配的异性，或者担忧明天突然降温怎么办，毫无疑问，这有利于人们在自然环境中生存，我们依靠神经系统带来的强大算力获取更多信息，进行更多思考、研磨石器、组成部落、群体狩猎、驯化动植物，改善生存条件，但是命运馈赠的礼物总有价格，当我们不再为了基本的需求绞尽脑汁时，神经系统的负面作用开始显现，感知和思考的能力是不能被关闭的，所以人类很难活在当下、生活在简单快乐中。这就是人类痛苦的来源。</p>
<p>​	我们所处的这个世界从来不是为快乐而设计的，不要为自己的不快乐而烦恼，每个人都有不快乐的时候，但我们仍旧需要积极寻找解决方法，我们需要知道这一点，快感和外在秩序并不能带来长久稳定的快乐，因为其根本目的是驱动我们的行为，但并不是思想上的，这些只是基因和外在秩序给予我们的，基因和外在秩序给我们带来的舒适感受， 从其本质上来讲就是难以持续，转瞬即逝的，将自己的人生目标定义为一种转瞬即逝的舒适又怎么会快乐呢？我们就像是那个接飞盘的狗，接到飞盘之后会奖励培根，但是当这个狗已经吃了足够的培根之后他还去接飞盘吗，这不正是当前的我们吗，舒适感都是转瞬即逝的，你看那个人，好像一条狗呀。</p>
<h2 id="心流2"><a class="markdownIt-Anchor" href="#心流2"></a> 心流2</h2>
<h2 id="心流3"><a class="markdownIt-Anchor" href="#心流3"></a> 心流3</h2>
<h2 id="心流4"><a class="markdownIt-Anchor" href="#心流4"></a> 心流4</h2>
<h1 id="序言"><a class="markdownIt-Anchor" href="#序言"></a> 序言</h1>
<p>​		自然选择出的生理机制只是服务于人类的繁衍，并没有增加人类幸福快乐的考虑。</p>
<p>​	幸福是你全身心的投入某件事情，达到忘我的程度。并由此获得内心秩序和宁静时的状态。</p>
<p>​	寻求快乐是基因因为物种延续而设置的一种即时反射，其目的非关个人利益，进食的快乐是为了确保身体得到充足的营养，性爱的快乐是鼓励生殖的手段，他们的实用价值凌驾于一切之上，但是实际上，他们的兴趣只不过是肉眼看不见的基因的布局，完全在操纵之中，如果无法抗拒食物或者酒精的诱惑，或无时无刻不欲念缠身的人，就无法自由控制内在的心灵。跟随基因的反应并没有什么不好，但我们更应该认清事实真相。</p>
<p>​	好的生存状态要兼容生理满足和精神系统的秩序。</p>
<p>​	==所以我现在不再盲目的禁欲了，如果想要去发生性行为就去呗，当然是在有限制的条件下，无论是要做什么都要有相应的准则去约束，不然会乱套的，不能与基因作对，在顺应基因的大前提下，做有利于自己，让自己幸福的事情==</p>
<p>​		成因和特征：</p>
<ol>
<li>​	注意力：心流的快乐是严格的自律，集中注意力换来的。</li>
<li>有一个他为之奋斗的目标，那个目标是什么不要紧，但是需要将目标的注意力集中于此。</li>
<li>有即时的回馈</li>
<li>全神贯注于此</li>
<li>达到忘我的状态</li>
</ol>
<p>​	越来越完美的自我控制，产生一种痛快的感觉，你不断逼迫自己的身体发挥所有的极限，知道全身隐隐作痛，然后你会满怀敬畏的回顾自我，回顾你所做的一切，那种佩服的感觉简直无法形容，他会给你带来一种狂喜，一种自我满足，只要能在这种战役中胜过自己，人生的其他战场的挑战，也就变得容易多了。</p>
<p>​	==这不是正如我今天的早起吗，四点起床，这何尝不是一种挑战呢？让我自己想一想，我都能四点起床了，那么五点起床我还能多睡了一个小时，六点起床就是多睡了两个小时，以后还有什么事情可以困住你呢？==</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-01_生活/01_反思(2月上)"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/02/16/01_%E7%94%9F%E6%B4%BB/01_%E5%8F%8D%E6%80%9D(2%E6%9C%88%E4%B8%8A)/"
    >反思(2月上)</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/02/16/01_%E7%94%9F%E6%B4%BB/01_%E5%8F%8D%E6%80%9D(2%E6%9C%88%E4%B8%8A)/" class="article-date">
  <time datetime="2024-02-16T13:26:56.000Z" itemprop="datePublished">2024-02-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  Here's something encrypted, password is required to continue reading. 
      <a class="article-more-link" href="/2024/02/16/01_%E7%94%9F%E6%B4%BB/01_%E5%8F%8D%E6%80%9D(2%E6%9C%88%E4%B8%8A)/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-06_工作记录/03_工作记录(2月第4个星期)"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/02/04/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/03_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(2%E6%9C%88%E7%AC%AC4%E4%B8%AA%E6%98%9F%E6%9C%9F)/"
    >工作记录((2月第4个星期)</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/02/04/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/03_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(2%E6%9C%88%E7%AC%AC4%E4%B8%AA%E6%98%9F%E6%9C%9F)/" class="article-date">
  <time datetime="2024-02-04T13:26:56.000Z" itemprop="datePublished">2024-02-04</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/">工作记录</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402281118582.png" alt="image-20240228111830553" /></p>
<h1 id="226-工作记录星期一"><a class="markdownIt-Anchor" href="#226-工作记录星期一"></a> 2.26 工作记录(星期一)</h1>
<p>今天是2月最后一个星期上班的最后一天，今天和明天又是技术支持，是挑战也是机遇，上个星期关于如何提高在上班时间的注意力，所得到的结果并不好，所以今天和明天又是两天可以深入观察自己习惯的好机会，早上四点醒了，但是很困很困，我好像都忘记了早上做了什么，哦对，早上起来看了看赵世子相关的，但是现在来看的话，这些跟我有什么关系呢？完全没必要呀，你说是吧，所以那个章北海的锐评跟我实际上也是一点关系都没有，所以我也没必要关注它，过度消耗我的注意力而已，所以还是取关吧。</p>
<p>然后是今天的技术支持活动，我这时候就在想既然一定是要看QQ的，那我可以不消耗电脑上的注意力，电脑上面的注意力就仍旧需要靠时钟来监督，只在规定的时间来看QQ，本来想的是有任务栏，这样有人给我发消息的时候，我会立刻看到，而我能看到的消息证明一定是重要的消息，我一般也会即时的回复，目前仅限于苏姐姐、果姐姐和法师，其他人就算了吧，其他人默认在正点进行回复，目前的想法就这样，然后开始今天的学习了，今天的目标是写完全部的手册，明天是进行整理，将markdown里的内容整理到word。</p>
<p>星期一任务：写完全部的驱动14期手册</p>
<p>星期二任务：将写完的markdown手册整理到word，然后交给苏醒排版。</p>
<p>果姐姐那个地方怎么说呢？有点像我之前那样，眼高手低，有些东西，有些事情，肯定是不可能一蹴而就的，越难的事情就越是如此，要充分的认清楚自己所在的层次，梦想是要有的，但更重要的是注意眼前、脚下和心间。</p>
<p>有些事情，肯定是不可能一蹴而就的，越难的事情就越是如此，梦想是要有的，但更重要的是注意眼前、脚下和心间。</p>
<hr />
<p>任务细分：</p>
<p>​	目前已经看完了第一遍的视频，而且也做好了相应的记录，目前欠缺的就是一定的逻辑性，然后承上启下的内容，而且我还没想好应该怎样写对应的手册，每个章节应该写怎样的内容，这里应该先写，写完之后才开始具体内容的编写。今天希望尽可能的编写完成。</p>
<p>编写完成之后就简单多了，所以重难点都集中在手册编写的步骤</p>
<hr />
<p>内容陈述和后续内容介绍：</p>
<ol>
<li>
<p>内容的整体介绍，要我的话我也会这样讲解</p>
</li>
<li>
<p>什么是单总线。讲解了单总线的定义、介绍和一些应用</p>
</li>
<li>
<p>讲解DS18B20温湿度传感器，包括了芯片概述、基本性能、应用场景以及内部结构，这里要关注的就是内部结构，包括一个9位的内部存储ROM和一个EEPROM这一个存储器，其中ROM相当于内存，掉电内容丢失，而EEPROM的作用就是保留配置信息。</p>
<p>还是写不出来，还是根据具体的章节内容来进行写吧。</p>
</li>
</ol>
<hr />
<ol>
<li>
<p>DS18B20驱动写时序编写</p>
<p>讲解一下写时序，然后编写一下对应的驱动，最后在测试的最后，贴上逻辑分析仪的图进行讲解</p>
</li>
<li>
<p>DS18B20驱动读时序编写</p>
<p>讲解一下读时序，然后编写一下对应的驱动，但这个章节没有对应的测试</p>
</li>
<li>
<p>DS18B20驱动读温度代码编写 	<br />
讲解一下温度的读取，然后编写一下对应的驱动，最后编写测试APP，通过逻辑分析仪进行分析</p>
</li>
<li>
<p>使用ioctl设置分辨率功能编写</p>
<p>讲解一下分辨率设置，然后编写一下对应的驱动，最后编写测试APP</p>
</li>
<li>
<p>使用ioctl读取分辨率功能编写</p>
<p>讲解一下分辨率读取，然后编写一下对应的驱动，最后编写测试APP</p>
</li>
</ol>
<p>先来分析一下果姐姐是怎样写的手册，我后面的内容，其实就是她的复制、复制再复制，但当然也不能全是复制的，也需要有自己的想法、理解和看法，</p>
<h1 id="227-工作记录星期二"><a class="markdownIt-Anchor" href="#227-工作记录星期二"></a> 2.27 工作记录(星期二)</h1>
<p>​	今天肯定是不困了，但今天这件事是不是给我提了一个很重要的建议呢？是不是可以改变一下思路呢，适当的睡个回笼觉当午睡也不是不可以呀，一个小时的时间，这样感觉到也还不错，但那样的话好像也有点问题，不然以后就这样吧，七点到八点回床上睡一觉，睡醒了就去喝豆浆，喝完豆浆就去上班，一般情况下是八点半左右到，提前开始技术支持或者学习也挺好的。昨天晚上真的很困了，所以睡觉睡的很早，八点就爬上床了，九点多就睡着了，这睡眠时间感觉很可以了都，但是效率还是太低，或者说没有将时间花在我认为正确的事情上，我认为什么事情是正确的事情呢？是工作？是学习？在上班的时间内，工作当然是最正确的事情，可是在家里就有些迟疑了，我当时的想法是在家里我当然是根据我自己的喜好来进行呀，可是我的喜好又是什么呢，老岁月的视频吗，我当然不会翻脸不认人，它的一些思想和看法真的帮我走出了阴霾和幻境，但目前的我迈进了转型期，这种转换并不是一朝一夕就能完成的，目前我需要的是深刻认识自己的内心，真正的知行合一。</p>
<p>所以现在再去看那些理论知识，是不对的，并不能说知识不对，而是现在的我看的时机不对，我应该要做的是认识自己的内心，有一套成熟的有逻辑的行为方式，而不是漫无目的的接收信心的输入，所以你说我说的对吗。</p>
<p>昨天的工作中，仍旧是没有静下心来，现在总结下来是内心的不宁静，要不把果姐姐也静音得了，恰当的时间回复果姐姐就可以了，苏姐姐就仍留外面，耳机就一直戴在耳朵上面了，这样等烦躁的时候或者一般工作的时候就放放音乐，当需要进行写东西的工作的时候，就需要专注注意力了，然后我将时间关闭了，但是保留了定时弹窗的功能，我取消了桌面下方的菜单栏，这样也就不会被干扰了，并且我取消了QQ的快捷按键，给QQ的查看制造一些困难，目前看来还行，等继续多尝试尝试。行了开始今天的任务了。</p>
<hr />
<p>本来我的想法是每天中午的时候看看哔哩哔哩的，当时的目的是想让晚上的时候可以少看一会儿哔哩哔哩，从而花费更多的时间去学习，但是目前看来这是不可能的了，所以目前中午的这段时间也就用出去呗，一个小时的时间，其实足够你做很多事情了，当然有些时候你也说过，不积小流无以成江河，不积跬步无以至千里，只要你付出了足够多的时间，积累到了足够的知识，从而厚积薄发，一飞冲天。</p>
<h1 id="228-工作记录-星期三"><a class="markdownIt-Anchor" href="#228-工作记录-星期三"></a> 2.28 工作记录 星期三</h1>
<p>​	昨天晚上努力了一下，也不算是努力吧，其实也就是仅仅十几分钟而已，但做完确实算是解决了一件事情，今天早上也说了要尽可能的提高效率而不是延长时间，在规定的时间内做好规定的事情，历经了四天的技术支持，真的是身心俱疲，但是也总算是有所收获，至少有了音乐的陪伴，知道了如何缓解自己的心情，知道了以后不带手机出门，知道了专心。，虽然上面还有待实验，但总算是有了一种自己的想法，今天也不用技术支持了，所以将时间调整成为了整点和半点，就让他们去发愁吧，帅哥我不奉陪了。其他要写的就没了，然后就开始写后面课程的那些整理了。</p>
<p>首先确保逻辑的正确性，然后才是内容的正确性，当这些都结束的时候才能真正的开始课程的录制，首先来回顾一下前六节课程都讲了哪些知识，以及在讲解前六节课程的时候又有了哪些认知，从整体上来看，前六节可以称之为第一部分，也就是最基础的那一部分，讲解了Linux的由来，讲解了为什么要使用虚拟机，讲解了vmware虚拟机软件的安装，然后是讲解了Linux系统的获取和安装，而在ubuntu22 安装完成之后又将英文修改为了中文，我个人认为其实还是中文更适合初学者，而至于那些错误打印的，都是扯淡，最后讲解了一个终端软件tabby，但莫名其妙的就讲解终端软件当然是不现实的，所以先讲解的是什么是终端，然后才是终端软件的讲解，讲解终端软件的目的就是为了让人们尽可能的摆脱终端界面，然后讲解了SSH，串口终端以及字体调节以及快捷键，至此我认为真正讲解Linux之前的铺垫就已经做完了，接下来要做的就是迈进Linux的大门，而不是只停留在安装上，而这时候问题就来了，下一部分我要讲什么呢？</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402280924355.png" alt="image-20240228092404325" /></p>
<p>先说面几点原则性问题：</p>
<p>首先一定要讲的细致，讲解一个东西尽可能的从因果性讲起，那就是先问自己下面这几个问题==我为什么要讲解这个知识点？讲解这个知识点是不是必要的？如果我不讲这个内容的话会有什么后果？还能不能保持讲解内容的严密性。==</p>
<p>然后是一定要代入初学者的身份，回答下面这几个问题，==如果我是初学者，在看了视频之后是不是有了自己的见解？视频能否让我这个新入门的小白听懂？==，网上的很多视频，其实就是幸存者偏差，有一个评论就非常的正确，说人们就是会藏着掖着，其实我认为不是这样的，其实还是人们不用心，不舍得花费心血在这个上面，也并没有真正的做到与初学者共情，他们以为自己的低位已经放的足够低，可事实上仍旧高高在上，仿若神明，他们默认以为那些前置知识都简单，他们默认的只是他们自己默认的，跟真正的初学者并没有关系。</p>
<p>目前能想到的就这么多，整理一下问自己的问题，然后就可以可以继续向下进行了。</p>
<p><strong><code>第一部分</code></strong>:</p>
<ol>
<li>我为什么要讲解这个知识点？</li>
<li>讲解这个知识点是不是必要的？</li>
<li>如果我不讲这个内容的话会有什么后果？还能不能保持讲解内容的严密性。</li>
</ol>
<p><strong><code>第二部分</code></strong>:</p>
<ol>
<li>如果我是初学者，在看了视频之后是不是有了自己的见解？</li>
<li>视频能否让我这个新入门的小白听懂？</li>
</ol>
<hr />
<p>我的建议是由远及近，从大到小，应该先讲整体的内容整理一遍，也就是在Linux基础中都要讲解哪些内容，先说一下最终的目的吧，讲解这个视频的目的其实早就总结过了，目的是==形成一个完整的框架，补全现有的短板==，之前法师讲解的那些其实就很有问题，在我的角度看的话，问题是很大的，我的意思是不如我讲的好，当然那已经是五年前的事情了，法师那时候的认知水平和知识储备都不是很好，我现在其实就算是站在了巨人的肩膀上，看什么都不屑一顾，当然未来的我终究也会成为一个巨人，也会有人站在我的肩膀上，我也终究会被淹没在历史的潮水中，所以这是无可避免的事情,然后来补全一下下面的这个框图。</p>
<table>
<thead>
<tr>
<th>第一部分</th>
<th>Linux的历史、虚拟机软件的安装、ubuntu的安装、终端的安装，这些是后面一切的基础。</th>
</tr>
</thead>
<tbody>
<tr>
<td>第二部分</td>
<td>第二部分主要讲解Linux命令，在讲解Linux命令的同时必然会有很多引申出来的知识点，这时候问题来了，我到底是因为这些命令来讲解的这些知识点呢，还是因为这些知识点讲解的命令呢？这个问题很重要</td>
</tr>
<tr>
<td>第三部分</td>
<td>我认为第三部分应该是SHELL编程，也算是Linux命令的一种扩展，并且这一部分的内容很是重要，以后用到的频率会非常非常高。</td>
</tr>
<tr>
<td>第四部分</td>
<td>第五部分肯定是系统编程，这一点是毋庸置疑的，可能Makefile不是必然的，但是系统编程肯定是又饿，目前能想到的就这四部分要讲的内容</td>
</tr>
</tbody>
</table>
<p>我记得之前还有说过，如果不知道未来的路要走向何处，不用担忧，只要走好眼前的这一步路程就行了，路在脚下，路也在心间。总结就先到这个地方，接下来是对第二部分的内容进行补充。</p>
<hr />
<p>上面提到了一个问题，请问你是根据知识点讲解的命令呢？还是根据命令讲解的知识点呢？如果是之前我可能会毫不犹豫的选择第一个，但是现在看来就肤浅了很多，类比一下，也就是说是为了工作而去赚钱，还是为了赚钱而去工作呢，这里的逻辑其实是反了的，这不就刷的一下，思想境界就提高了一大截吗，在第二部分，其实也不只是第二部分，后面全部的内容都应该是为了知识点而去讲解内容，懂了吗，现在基本可以确定了，Linux基础这个部分也就分为三个部分就行了，第一部分的介绍留在开篇第一节内容介绍，而后面的每个部分都应该有自己的介绍才对，来讲解第二部分完整的内容，当然也会有第三部分内容，当前的逻辑和层次结构就已经确定了。</p>
<p>这是之前确定的，现在看来之前的想法还行，虽然那个时候的认知并没有现在的好，但现在返回去看，确实还可以，并没有为了讲而讲，反而是有一定的逻辑在里面，目前看起来还不错，现在就根据之前写的为蓝图重新规划和整理一下在第二部分中要讲解的内容。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402281118376.png" alt="" /></p>
<p>今天的任务是完善内容框架，一天的时间说什么也够了，先确定都要讲解的内容，内容要怎样确定呢？目前想的是继续看一下黑马的视频，亦或者我根据逻辑向后推。</p>
<p>假如我是一个小白，在安装完软件之后，我应该要学习什么呢？毋庸置疑肯定是先来学习目录结构，想好了中心之后，后面就是要怎么讲，讲什么，唯有分析好了一个才能有下一步的分析，万丈高楼平地起，没有搭建好这一层的台阶，又怎么看到下一层的风景呢，你说是吗，有些人说要有远见，可有些人又说看眼前的得失，没有任何一种想法是完全正确的，任何人去做任何事情，只有找到最适合自己的方法才是最优解，而对于我来说，走了这么长的弯路，总是要总结出来一定的收获的，写出来的手册可以不用注意非常多的严谨性，但是讲出来的视频就需要，手册是根据视频而生的，我这里的情况跟法师那里的情况还有些区别，法师是现有的视频，再写的手册，而我这里呢，是先有的手册，再有的视频，所以我有时间、有机会、有可能在后面进行弥补，但是法师不行，所以我认为我的合理性比法师的更强。</p>
<p>第七节视频的内容肯定是第二部分的总结，但是第二部分的内容还并没有结束，甚至说还并没有开始，这里应该有个第二部分的划分吗，可以有，好像也可以没有，还是没有吧，没有第几部分、第几部分的划分，这些其实都属于Linux基础知识篇，不对，还是感觉要有个部分来进行划分。</p>
<p>第一部分：环境搭建篇</p>
<p>第二部分：Linux基础知识篇</p>
<p>第三部分：Shell脚本编程篇</p>
<p>当所有的课程录制完成之后，会有一个第0篇，在第0篇，第0篇他会是一个整体性的总结，部分肯定是会划分的，但是不能在明面上，而是在内容里，或多或少的进行一下讲解。但这也是之后的事情了，这些先不急好吧，这些都是录视频之后的事情了，这样吧，反正最终目标已经定下了，先来完成手册ok不。当然在此之前先来看看其他人是怎样讲解的，都讲解了哪些内容，这里就直接二倍速来看了。</p>
<p>==现在只看了两分钟，但是我感觉我看的时候发现我静下心来了，所以唯有行动起来，抛开空想，才是解决问题。==</p>
<p>这时候多说两句，不是不反对空想，或者实际的反思，而是不能一直反思，而是将更多的时间放在实际的行动上，即使这个行动可能并不对，但却可以在行动的时候有自己的想法，并且这个想法肯定是比空想的时候的想法好很多的，因为这个想法是通过自己的实际行动验证得到的，就算不好，也为自己提供了一种思路，你说对吗，以后规定一下，早晨的反思时间不能超过30分钟，每天早上来公司写的反思也不能超过30分钟，正好手机到了，可以在明天的时候通过手机来记录一下，以及相应的睡觉时间。行了回去继续写。</p>
<hr />
<p>还是有问题，现在的话就是莫名奇妙的会进入无心学习的状态，这样可不行，但是我找不到问题的原因呀，这可太奇怪了，最大的问题就是没法静心，得找一个切实可行，而且效率高一点的整套方法，从整体上看，是不是还是内心的信念不够呢，世界观、人生观、价值观，这些想的还是不对，你还是没能想明白自己要做什么，没有想清楚自己的人生价值，下面这段话重新带给你：</p>
<p>==我们要先理性的、冷静的、全面的、谨慎的思考自己的痛苦和快乐，反思自己这辈子应该怎样度过，你至少应该确认一个支点，你这辈子必须要完成的事情，或者想要拥有的品质，你清楚的知道，如果做不到这点，你永远都不会快乐==</p>
<p>我们要先理性的、冷静的、全面的、谨慎的思考自己的痛苦和快乐，反思自己这辈子应该怎样度过，你至少应该确认一个一个支点，你这辈子必须要完成的事情，或者想要拥有的品质，你清楚的知道，如果做不到这一点，你永远都不会快乐。</p>
<p>终于又重新面对了这个问题，之前的想法好像已经被我给抛弃了，也就是==我希望用一生的时间去学习电子嵌入式相关的知识，整理成相应的知识体系，并分享出去，与更多志同道合的朋友一起进步==，这一点是最重要的，你应该坚信，如果做不到这一点，你永远不会快乐，这是一件持续一生的事情，如果你在做与之相关的事情，你就会快乐。拥有一个指点，从而撑起整个人生。</p>
<hr />
<p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，将其整理成网络，并分享出去，与更多志同道合的朋友共同进步==</p>
<p>==无论你最终要成为一个怎样的人，请千万记住，时光在飞逝==</p>
<p>先说一下当前的追求吧，那就是无论是在公司还是在家，都可以保持一个很高的效率，知道自己应该做什么，知道自己要做的事情对于自己有哪些意义，当然是有意义的了，前面的六节内容你也看到了，在你讲解的时候会有很多的知识点，更灵活了，你对于此的认识也更深刻了，现在所作的任何一件事情都是在你的定立的支点上不断的前行，不是吗。</p>
<p>其实这是一个连锁反应，当你焦虑的时候，会不由自主的寻找能消磨时间的东西，就比如音乐、短视频、聊QQ，这些无不在侵蚀着你的内心，那个时钟还是不能关闭，不能等待着时钟自动弹出来，现在将QQ也改变了一种形式，现在只允许打开一个弹窗，而且不会看到后面的信息了，希望这样能有点用，明天再继续尝试了。</p>
<h1 id="229-星期四-工作记录"><a class="markdownIt-Anchor" href="#229-星期四-工作记录"></a> 2.29 星期四 工作记录</h1>
<p>==我们要先理性的、冷静的、全面的、谨慎的思考自己的痛苦和快乐，反思自己这辈子应该怎样度过，你至少应该确认一个支点，你这辈子必须要完成的事情，或者想要拥有的品质，你清楚的知道，如果做不到这点，你永远都不会快乐==</p>
<p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，将其整理成网络，并分享出去，与更多志同道合的人共同进步==</p>
<p>==无论你最终要成为一个怎样的人，请千万记住，时光在飞逝==</p>
<hr />
<p>写完反思的时间：54分48秒91，花费的时间长了，主要是花时间看了一下3588S的复用关系，中断了，所以就导致时间长了。</p>
<hr />
<p>半小时内分析一下昨天的所作所为还有今天要做到的事情，昨天就有很大的问题，上午可能还行，但是在下午的时候就出问题了，又一次陷入了迷茫期，从大的方面来看的话是缺少了人生的支点，所以我又一次寻找回来了自己的初心，然后在小的方面其实是一系列细节引起的，其中最有问题的地方有三个地方，分别是电脑QQ、手机以及音乐的问题，电脑QQ的查看方法还是有问题，昨天的想法是通过手表来获取消息，获取消息之后立刻进行查看，但是这样又会存在问题，总是会被一些无关的信息扰乱了心智，不由自主的就想要一直看下去，我发现这个东西就跟毒品上瘾一样，只要陷入进去，就会永远出不来，只要有第一次，无可避免的就会有第二次、第三次、第四次，所以第一次极其重要，我发现好多其他的事情也是第一次的问题，就比如中午的时候看短视频、只要看了第一次，就肯定会接着看第二个、第三个、第四个，所以请把握好第一次，你应该相信你自己的自控力真的很差，我希望这也是你做其他一切事情的前提。</p>
<p>第二个是手机的问题，我其实是希望手机不进入工位的，但是呢，这也有问题，有问题的地方在于不入工位你也会带着它出去吃饭，等你回来了你也就不由自主的继续看手机，然后就再也停不下来了，所以我认为这是一个很严重的问题，如果没事的话手机就关机吧，我靠，这一点没想到呀，这次坑了，分开来的手机还是很有用的，打算买个专门用来接电话的手机，好像再来个小6也够用了，将作用都分开来，目前感觉很不错，一百块钱足矣，但好像又没有什么必要，还是算了，一般情况下也不会只用那个手机，所以一定要先看看是什么样的情况，这样才对。多了也并不一定是好事，如果像是今天这种平常情况就关机，如果有快递的话就开着，或者提前联系顺丰也挺好的，只要善于想，办法总比困难多。</p>
<p>第三个是音乐的问题，昨天的时候一天都在戴着耳机，只能说有一些压抑，有的时候就想要听一听外面的声音，而有的时候就想要陷入自己的世界里，这里很困惑，因为你也不知道自己要处于一个怎样的状态呀，这个记录一下好吧。这算是什么呢？算是一种状态吧。而且不能强制的来进行，就比如半个小时戴耳塞、半个小时戴耳机、半个小时什么都不戴，这肯定是不对的，因为你的情绪和想法是一直在变化的，你现在要做的就是记录自己在什么状态下应该用怎样方式。</p>
<p>关于记录时间，唯有十五分钟到了再开始回复，十五分钟不到就不可以，给手机提供一个新的价值，严格遵守好吧。</p>
<hr />
<p>上班第一个小时，天气晴朗，阳光明媚，心情还算可以，很是安静，不带耳塞和耳机，就很自然。</p>
<p>下午两点半，天气晴朗，有一点点的热，心情还算可以，较为安静，想戴上耳机变的更宁静一点，记录时间半小时，半小时之内不允许看QQ，不允许戴耳机，只允许戴着耳塞，专心，要有效率。</p>
<hr />
<p>然后开始今天的工作了，昨天算是整理了一下自己的心情，以及后面做事情的步骤和方法，今天就继续昨天没有完成的工作。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402290950910.png" alt="image-20240229095036877" /></p>
<p>现在要完成这件事所需要的步骤，昨天实验的是一个小节一个小节的来，目前来看这个是非常非常的失败的，因为你个人的注意力完全集中不了在你认为非常简单非常简单的事情上，而为了维持心流，从而提高整体的工作效率，目前最正确的办法是从整体上入手，不能专注于一个，先将手册上的内容写好，而后面的视频呢，就完全是后面的事情，这都是要分阶段的好吧，行了，继续吧。</p>
<p>现在对内容整理阶段这一大任务进行分析，先看全部的吧，全部的任务总共也就两个，分别是内容整理和视频录制，在内容整理里面要做的事情其实只有一件事，那就是写好手册，其他的一切事情都是围绕写好手册来服务的，而后续的视频录制里面涉及到的步骤有些多，就比如最终效果、稿子和录制视频，但这些都是后面要想的事情了，目前只需要关注手册的编写即可，聚焦于==手册的编写==，其他一切都是浮云。</p>
<hr />
<p>手册的编写上面也提出来了广义里的实行步骤，关于内容的修改这里肯定是不能保持怀疑了，而是想方设法的保持上述内容的连贯性、因果性，并对此有合理的解释，这也是一切的前提。</p>
<p>目录结构中昨天也已经看了其他家里所讲解的内容，这里要注意的是，手册有的内容，视频中可以不讲解出来，而视频中的内容也不一定全是手册中的内容，这个范围和尺度你自己灵活的把握，突然感觉这个标题名称不太对了，这一小节要讲解的内容我来陈述一下，首先是先讲解windows的目录结构，然后是通过对比的方法讲解Linux的目录，那你说是这种方法好呢，还是直接就讲解cd pwd ls命令呢，然后通过命令的方式再将这些知识点引出来，我认为我说的这种方式更为正确，而不是像黑马的那样。</p>
<p>挺好的，想明白了就行，这一天的时间就没白费，只要心意畅通，心流的体验，那么后续的一切都不是问题。</p>
<p>所以也就没有了目录结构这个问题了，现在要做的是重构一下。我靠，我又被带偏了，我之前的想法是对的，贴图如下</p>
<blockquote>
<p>7 文件和目录操作命令_1：ls、cd 、pwd</p>
</blockquote>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402291041037.png" alt="image-20240229104137959" /></p>
<blockquote>
<p>7 Linux目录相关命令</p>
<p>​	7.1 命令的格式</p>
<p>​		由于是第一次正式讲解命令，所以这里先来讲解命令的格式。</p>
<p>​	7.2 列出文件和目录：ls命令</p>
<p>​	7.3 切换目录：cd命令</p>
<p>​	7.4 打印当前工作目录：pwd命令</p>
<p>8 Linux目录结构</p>
<p>​	8.1 Linux目录结构</p>
<p>​	8.2  Linux路径描述方式</p>
<p>​	8.3 相对路径绝对路径</p>
<p>​	8.4 特殊路径符</p>
</blockquote>
<p>不错，就先写这些，然后是每个小节的介绍，先说明，如果这样的方式确认没问题，后面的也就这样定下来了，有了一个确认可行的方法之后，剩下的就是不断完善了。</p>
<hr />
<p>今天这感觉不错呀，目前已经写完了手册了，我发现还是手册好写呀，当然这只是大致的手册模板，后面肯定是要继续改的，当然改也是在录课的时候改了，那我现在是要如何呢？是继续向后写呢还是要如何呢？</p>
<p>好像都有一定的道理，这样吧，先用非常快的速度将下面的手册填充完成，然后再从上到下一点点的写稿子，写最终效果，在写最终效果的过程中肯定会产生一定的思考，也会对之前写的内容进行部分微调，这样有目的的完成任务，总比现在似的像个无头苍蝇一般，四处乱闯好的多，那样的话有心的支持，现在这样你孤立无援，甚至就连你的大脑都不会支援你，从而弱则越弱，强则越强。</p>
<h1 id="31星期五-工作记录"><a class="markdownIt-Anchor" href="#31星期五-工作记录"></a> 3.1星期五 工作记录</h1>
<p>==我们要先理性的、冷静的、全面的、谨慎的思考自己的痛苦和快乐，反思自己这辈子应该怎样度过，你至少应该确认一个支点，你这辈子必须要完成的事情，或者想要拥有的品质，你清楚的知道，如果做不到这点，你永远都不会快乐==</p>
<p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，将其整理成网络，并分享出去，与更多志同道合的人共同进步==</p>
<p>==无论你最终要成为一个怎样的人，请千万记住，时光在飞逝==</p>
<hr />
<p>昨天一天的状态还是很好的，如果今天上班时候的状态能根昨天一样的话，我会很高兴的，昨天晚上的时候将手册重新更新了一下，今天的任务仍旧是内容整理，但是时间只剩下一个星期了，一个星期之后就要开始第二部分内容的录制了，目前的想法跟昨天的相匹配，一点点的优化其中的内容，先使用chatgpt来写好每个小章节要讲解的部分，然后就是你的一点点修缮其中的内容，当然内容的修缮并不是一朝一夕的或者很快完成的事情，后面肯定会继续修改的，而具体修改什么，这个要具体问题具体分析，我当然也还没有写到后面，也不知道那时候的思想跟现在的思想有什么问题。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403010908974.png" alt="image-20240301090808941" /></p>
<table>
<thead>
<tr>
<th>内容</th>
<th>完成程度</th>
</tr>
</thead>
<tbody>
<tr>
<td>步骤1:使用chatgpt整理完初步的手册</td>
<td>√</td>
</tr>
<tr>
<td>步骤2:对手册进行第一次的修缮和填充</td>
<td></td>
</tr>
<tr>
<td>步骤3:确认手册没问题了就开始视频最终效果稿子的整理，在整理过程中必然会有新的思考和想法</td>
<td></td>
</tr>
<tr>
<td>步骤4:视频的录制</td>
<td></td>
</tr>
</tbody>
</table>
<p>​	第一步在昨天已经完成了，现在开始第二步，对手册进行修缮和填充，这里还是要提醒一下，手册里面的内容不等于最终录制时候的内容，可以比视频里面的内容多也可以比视频里要讲解的内容少，这些呀其实是无所谓的，目前的想法，修缮和填充昨天搞好的手册。</p>
<p>目前这一步应该算是走的差不多了，至少将该补充的图片是都补充上了，至于具体的内容这个还不知道，我现在倒想去听听课，这样吧，三倍的速度，然后听完今天下午，如果有想要记录的地方就记录一下。</p>
<hr />
<p>问题1 什么是命令、什么是命令行，之前讲解了终端，那还有没有讲解一些命令行呢？</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011525750.png" alt="image-20240301152542515" /></p>
<p>问题2：命令基础格式</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011529914.png" alt="image-20240301152906751" /></p>
<p>问题3 ls命令图形化和终端的对比</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011531655.png" alt="image-20240301153115470" /></p>
<p>问题4 pwd命令讲解的时候是不是应该讲解一下家目录呢？</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011533031.png" alt="image-20240301153313890" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011534355.png" alt="image-20240301153425247" /></p>
<p>5.根目录讲解的时候是否需要终端和图形化界面对照？</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011536298.png" alt="image-20240301153642198" /></p>
<p>6.截图是不是需要 加上详细的讲解呢？<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011607854.png" alt="image-20240301160721644" /></p>
<p>7.是不是应该在第七章最后一小节加上相对路径和绝对路径的知识点？</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011609520.png" alt="image-20240301160923288" /></p>
<p>8.在讲解cd命令的适合，有一些特殊路径符，能不能根据…上一级目录这个特殊路径符，来引出来最上级目录是根目录。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011625219.png" alt="image-20240301162542182" /></p>
<p>9.有没有必要在讲解的最后留下几道联系题呢，然后根据练习题进行讲解一下，我发现黑马的这个课程安排很是优秀。</p>
<p>10.尽可能的将所有的命令都能找到它的英文单词，一个命令的命名或者它的参数选项必定经过了很多人、很多年的推敲，并不是平白无故就写出来的，这里一定要刨根问底。</p>
<p>11.是不是也可以像黑马这样并不是边讲解边演示呢？而是讲解完成之后再演示?</p>
<p>12.这里的*号通配符是不是需要找地方讲解一下呢?</p>
<p>13.find学习里面通过星号通配符来查找，这个内容要加上</p>
<p>14.把学生当成傻子哈哈，我其实也想做到这个样子：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403011741739.png" alt="image-20240301174150497" /></p>
<h1 id="32日工作记录星期六"><a class="markdownIt-Anchor" href="#32日工作记录星期六"></a> 3.2日工作记录(星期六)</h1>
<p>==我们要先理性的、冷静的、全面的、谨慎的思考自己的痛苦和快乐，反思自己这辈子应该怎样度过，你至少应该确认一个支点，你这辈子必须要完成的事情，或者想要拥有的品质，你清楚的知道，如果做不到这点，你将永远都不会快乐==</p>
<p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，将其整理成网络，并分享出去，与更多志同道合的人共同进步==</p>
<p>==无论你最终要成为一个怎样的人，请千万记住，时光在飞逝==</p>
<hr />
<p>昨天在我看来有些问题，但是从整体上看是好的，白天的时候因为担心小乔的面试，所以就一直看了看手机，这是我的问题，今天肯定就不会这样，其实仍旧只需要记住一句话就行了，永远不要相信一个背叛了的人，就跟家暴一样，有第一次就一定会有第二次，这是原则、也是底线，在工作时间内，这里的第一次可以是看QQ、也可以是看百度热搜、可以是看知乎热搜、也可以是看手机，如果是放在家里就可以类比成看直播、看小说，看直播目前还没办法去掉，但是看小说确实要改掉，目前的做法是，晚上九点半之前手机被限制了，灰色的屏幕，而且手机日常状态下是关机，只要手机是关机状态，那么问题其实并不大，每次当你想看手机的时候你会想现在这个时间是不是正确的时间，每次当你想看小说的时候就会想，小说真的值得你看吗，当未来的自己和现在的自己相视一笑，你又该如何选择呢？我当时是坚定的选择拥抱未来，牺牲当下，我们都是陷入在时间里的囚徒，但我们心意相通，我也坚信未来的我会做出跟我一样的选择。</p>
<p>昨天可能是不断的在碰触底线，所以一直处于焦躁之中，最终的效率也变的很差，目前怀疑的是睡眠问题，最终还是要有八小时睡眠，而像今天这样的十个小时睡眠可真的太完蛋了，以后可以适当的有但是不能过于频繁，试一试今天的工作效率如何。先将昨天的视频看完，仍旧是以三倍速进行观看，继续寻找自己的问题。</p>
<p>以后每小时都要换上耳机来听音乐了，听一首音乐思考一下自己过去的一个小时是否过的正确，一首歌的时间来思考自己的一个小时时间，我认为这都是值得的，吾日三省吾身</p>
<hr />
<p>15.是不是应该将这种图进行详细的描述，我发现加入图片的话比纯文字要好一点，具体如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403020945198.png" alt="image-20240302094503037" /></p>
<p>16.用户和用户组对于嵌入式设备树这些并不重要，一般情况下只会有两个用户，一个是root用户一个是个人普通用户，就比如topeet，所以这个用户组权限其实并不重要，在我讲解的时候这里应该委婉的说一声。也就是这个地方：，但是对于其他用户还是需要讲解一下的，就不如root的其他用户是topeet， 这里需要讲解一下<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403021015455.png" alt="image-20240302101500202" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403021016518.png" alt="image-20240302101656335" /></p>
<p>17.这里的权限讲解需要好好的揣摩一下：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403021042515.png" alt="image-20240302104205378" /></p>
<p>18.以硬链接和软链接为例，一定要从实际的使用出发，虽然内容肯定是要讲的，但必须要注意每个内容的重要性，没用重要性那万物平等，这肯定也是不合理的。==软链接肯定是方便你用户或者程序在同一个工作目录下调用其他程序啊==，这是听课的人所说出来的问题，黑马的这个讲解好像只是讲解了内容，内容确实是没问题，但是他少了很多的目的性，我学完了这一节课，我也确实是会了，但是呢这个我要用来做什么呢？我认为这个很重要。</p>
<p>19.Linux中的环境变量，这个有没有必要讲解一下，还是放在第三部分的shell脚本中，感觉不能放在第三部分中，还是应该放第二个部分中，但具体怎样讲就要看我自己的努力了。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403021102028.png" alt="image-20240302110225607" /></p>
<p>19.sz和rz两个命令的讲解，用来进行文件的传输，除此之外还有scp。</p>
<p>20.压缩解压，是不是我说的太简单了，只是讲解了tar是不是应该讲解一下zip呢</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403021115656.png" alt="image-20240302111507511" /></p>
<p>21.尚硅谷的就很有问题，它的逻辑性就很差，首先讲解的很不细致，没有讲解这个命令的时候就使用了该命令讲解其他的知识点，这个问题就很严重，我必然不可能这样做。具体如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403021128553.png" alt="image-20240302112825455" /></p>
<p>22.是不是应该将每个测试都分目录，就比如01_ls,02_cd，03_pwd这种是不是更好呢？这个想法还算不错，可以考虑试试。</p>
<p>23.history 命令和上下的快捷按键，这里也可以讲一下，但是要怎样讲呢，讲解的契机有要如何把握呢，这里要注意一下。</p>
<p>24.是不是应该讲解一下什么是shell，也就是在讲解命令的格式之前，野火的这个逻辑也不对吧~~，真的有必要讲解shell吗？</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202403021543687.png" alt="image-20240302154350660" /></p>
<p>25.关于shell这个我还是不是很懂，晚上的时候可以看一下那个视频，手把手构建一个shell解析器</p>
<p>26.是不是应该讲解一下man命令，这个man命令我认为应该放在最后面，讲解完全部之后，再用man来升华一下，哦对一般情况下每个命令还有–help命令，可以在最前面的时候讲解一下，要有自己的想法。</p>
<p>27 磁盘管理挂载命令这个有点重要呀，这个我感觉需要讲一下，df du mount umount</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-06_工作记录/02_工作记录(2月第3个星期)"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/02/03/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/02_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(2%E6%9C%88%E7%AC%AC3%E4%B8%AA%E6%98%9F%E6%9C%9F)/"
    >工作记录((2月第3个星期)</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/02/03/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/02_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(2%E6%9C%88%E7%AC%AC3%E4%B8%AA%E6%98%9F%E6%9C%9F)/" class="article-date">
  <time datetime="2024-02-03T13:26:56.000Z" itemprop="datePublished">2024-02-03</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/">工作记录</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402220923698.png" alt="image-20240222092333634" /></p>
<h1 id="218工作记录"><a class="markdownIt-Anchor" href="#218工作记录"></a> 2.18工作记录</h1>
<p>==骑车到公司所花的时间：11分1秒==</p>
<p>==第一次技术支持花费的时间：32分17秒==</p>
<p>==写总结规划的时间：13分08秒==</p>
<hr />
<p>今天除了技术支持要完成的还有驱动手册13期的编写，这里的编写不仅仅是markdown形式的手册，除此之外还有word形式的手册要写，果姐姐明天回来，这是一定要完成的。技术支持今天是第一天除了最开始的时候人数问题还多一点点，但是后面的基本就没啥了，现在就是半个小时看一下，整点和半点看一下就行，现在开始写手册了。</p>
<p>早上四点的时候起床已经将手册的大体框架写的差不多了，现在要做的就是从前到后一点点的将markdown版本的手册写完，这里的要求仅仅是写完，当写完之后就开始迁移了，将markdown的文字迁移到word上，在迁移的过程中读一遍，正好进行检查，现在开始。</p>
<h1 id="219工作记录"><a class="markdownIt-Anchor" href="#219工作记录"></a> 2.19工作记录</h1>
<p>==骑车到公司所花的时间：12分45秒==</p>
<p>==第一次技术支持花费的时间：0秒==</p>
<p>==写总结规划的时间：13分08秒==</p>
<hr />
<p>昨天终于是将13期的驱动写完了，不容易不容易，昨天早起的行为很高兴,有一种正反馈，而从今天开始就要开始真正的录课了，还是那句早上已经写过的话，当你遇到一个摇摆不定的事情的时候，那就努力的去做呗，反正只要不做就永远没有成功的可能。</p>
<p>当然这只是一个大的目标，一个大目标之下必然要有一系列的小目标，每天的规划已经挺好了，这就是要完成的事情，具体内容如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402190928579.png" alt="image-20240219092830557" /></p>
<p>十点之前是不能去那个录视频的屋子里的，在十点的时候他们会开会，而我也有一个小时的时间进行整理内容，写今天的规划等等。</p>
<p>上面的是一个大目标，除此之外还有一个大目标呀，那就是解决工作时间QQ带来的问题，目前仍旧是想要按照时间来进行管理和区分的，只要能克制住看QQ的这个有损注意力的这个习惯，上班的效率真的会大大提高，幸福程度也会大大提升，现在的做法是找一个小工具，每过20分钟，或者每个小时的25分和55分用来提醒我看QQ，非技术支持的时间就跟着这个指示来，目前对我有影响的是想要看有没有人跟我说话，跟我说话的人我能注意的，而且想回复的不多，只有三四个人，法师、果姐姐、苏姐姐、棒棒糖，然后对上面这些人的回复进行分析，法师那个地方主要是工作和一些任务和工作上的事情，现在来统计一下法师跟我发的消息频率，2月的天数太少了，现在来统计1月的，3天，在一月的30天中，法师有6天跟我说过话，在月初的时候会有个工资确认，有两天是关于房子的事情，2天是因为工作的事情，法师找我的频率可太低了，而且一般情况下找我的都是月初以及确认相关的事宜，其他一些情况基本都是口头描述的，还是口语交际比较多，根据大数定律，法师不会找我，所以法师这一条就过去了。</p>
<p>然后来分析苏姐姐，苏姐姐一般都是关于B站客户问的问题的，其他的都是属于我主动想聊天找的了，这里的优先级很小，甚至可以说是完全不着急，所以这些完全可以之后时间到了的时候再回复。</p>
<p>再次重申一下，在25到30 55到整点的时候，是可以聊天的，以及回复客户的问题，这时候QQ可以一直保持在明面上，那个时钟也会尽可能的保持五分钟的显示时间，目前想着的到也还行，看看具体的实践吧。</p>
<p>现在来分析果姐姐，果姐姐这里问题可真的太大了，只要一有事就去找果姐姐，无论是大事、小事、工作上的事情还是其他的事情，都是要找果姐姐，这其实是不对的，你也不能一直这样，在打开QQ之前满心欢喜的以为果姐姐会来回个话，而大多情况下是没有的，而说话说的多了之后难免就有不一样的想法，想法又会产生矛盾，这是必然的事情，而对于果姐姐的那些问题还有任务，也并不是及时的，换句话来说，这些并不需要很高的实时性，有什么着急的事情，自然而然的就会通过口头表达的形式来找我，完全没有必要在QQ上，而且你每次回复果姐姐回复的这么快，也差不多算是秒回吧，但是反过来呢，果姐姐基本上从来不是秒回你，有很多时候甚至是过去了好久了，都没有回复你，可能恰好看到，也可能恰好心情好，这才真正回复了你，这样你懂了吗，而果姐姐敲键盘的时候，你甚至都以为是在给你发消息，这时候再想想你自己，你也在飞速的敲键盘呀，但你在敲键盘的时候都是在跟人说话吗，绝大多数都不是吧，我觉大多是的时间都是写手册和写记录，除了技术支持的时候说话比较多之外，其他时候都是正常，所以果姐姐这个地方也可以过了，在非技术支持的时候也是跟其他人一样。</p>
<p>而至于其他人，就没啥可说的了，棒棒糖太懒了，也不知道什么时候能有一定的认知，而田田太笨了，也可能是我有偏见~~，这没办法，有对象的同龄人和没对象的同龄人也只能区别对待呀，这些的回复都不着急。</p>
<p>行了，综上来看全部的人的回复都不需要即使了，也就是秒回，其实就算是秒回又能代表什么呢？其实什么都没有，客户那里完全没有感激，带给你自己的却是很严重的问题，损己而不利人，你说这是何必呢？所以这种没有价值的责任心都该丢掉，这里是责任心了，那正常上班，完成其他的工作就不是任务了吗，当然不是，你这里的责任心有了，那里的责任心就没有了，你能说这是有责任心的表现吗，不能吧，是你技术支持的时候就好好的技术支持，不是你技术支持的时候就安安心心的钻研问题、无论是写手册、录视频、钻研问题等等，都不应该是看QQ，因小而失大，就目前上面提出的挺好的。就先这样。</p>
<hr />
<p>上面的这个问题不是一天两天就能搞定的，这个问题需要长时间的去积累、去解决，根据随机性原则，总有一条方法是最适合我的，但需要时间去遍历，这些就放在后台呗，现在要开始今天的主线任务了，今天要录完两节视频，如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402191027048.png" alt="image-20240219102758027" /></p>
<p>分别是视频的第一节和第二节，其实在前面还应该有个第0节，但是那个呢是要在最后，全部的内容都讲完之后的一个总结，告诉客户这个整套视频要学习的是哪些，之前我还想直接总览全局，现在看来这是不可能的，不论是法师还是王老师，他们的视频你会发现都是在最后才进行总结的，难道你没有发现吗，都有先驱者或者说是巨人给你探路了，那你就不用犹豫了，跟着他们的路继续向前走就行了。</p>
<p>都十点半了，也不知道他们咋还没有开会，不清楚，但没啥关系，我可以多多总结一会儿，也就剩下了一个小时了，我要去体验一下设备吗，思考一下，去吧，现在也不知道苹果用的录课软件是什么，伤脑筋，我最终的截图软件不出意外肯定是QQ截图了，怎么好用怎么来呗，这个无所谓了。剪辑软件就用哔哩哔哩的那个必剪，录屏的话我肯定是用我最熟悉的Ocam。</p>
<p>这时候就在想要不要创建两个用户呢？自己用自己的用户就行了，事情还少，好像也是一个不错的选择。</p>
<h1 id="220-星期二-工作记录"><a class="markdownIt-Anchor" href="#220-星期二-工作记录"></a> 2.20 星期二 工作记录</h1>
<p>今天的任务是这四小节，确实挺简单的，一般很快就过去了，我认为这四节没啥问题，因为都是一些常识性的讲解和安装，所以也不会花费过多的时间，而且后面的框架很不容易，我认为目前的我还没有认识到后面那些章节的关键点，所以目前认为明天需要花费一天的时间整理对应的框架。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402200911616.png" alt="image-20240220091100582" /></p>
<p>也不仅仅于此，因为当时的想法还不太成熟，现在这样讲解的话，在实现之前的效果是很繁琐的，整理一下步骤.</p>
<p>第一步，首先肯定是要自己学会才能真正的讲解出来的，所以自己学会并理解是所有的第一步，这是无论如何都绕不过去的一个步骤。</p>
<p>在自己理解了之后，然后就是尽可能的写出来，将你学习到的东西，整理成markdown的形式，这次肯定不会提供word形式的手册了，当也不一定，其实转换成word形式的手册也不是难事，只不过有些麻烦罢了，需要一点一点的进行复制，但我认为这个视频所要起到的作用是宣传，弥补我们在这个反面的短板，所以最适合初学者用户的才是最好的，只要用户看的舒服，最终的形式其实都无所谓了。其实在学习的过程中进行适当的笔记记录，后面的成册的手册，也只是最终的书面化的效果而已。</p>
<p>在确定逻辑和内容没问题之后，第三个步骤就是整理对应的稿子和最终效果，出现在视频里面的结果必然是经过很多次的尝试之后才确定下来的内容，所以一定会有相对应的稿子和最终效果的，其实在这个阶段可以将这两个整合在一起，就像昨天的录课时候的那种效果，分段样式的进行稿子和最终效果，对想的没错，但具体的实施效果肯定也不会这样一起的，最终还是要分开，整理的时候可以合一起。</p>
<p>所以整理内容真的并不简单，虽然只是简单的四个字，但是却包含了学习知识、整理内容成手册的形式、完成稿子和最终效果，虽然感觉有些困难，但还是要尽可能的努力呀，最近这些天我认为过的不错，在早上或者晚上的时候整理自己的思想，重新塑造自己的世界观，从第一次看这个up的视频开始到现在已经过去了一个月了，从最开始的迷茫到过年时候的迷失，再到目前的有所得，当然在未来的某一天，你可能意识到现在做的事情的价值观仍旧是有问题的，但是至少从现在的角度出发，你现在的所思所想就是最正确的事情。当目前的这些思想塑造完成之后，剩下的就是尽可能的去努力了，其实现在也差不多了，虽然时间过了仅仅三天，但是每次我能成功起床，看到外面的天还黑着，人们都在沉睡，而只有我或者很少的一部分人在努力，我就感觉良好，我终于又一次站在了命运的面前，平起平坐。</p>
<hr />
<p>今天要录制的是四节视频，先把昨天剩下的视频剪掉，剪辑完成了，昨天的两节仅仅只是试水，今天要讲解的内容和昨天要讲解的内容还有些区别，趁着上午还有一个小时的时间研究一下下午的课程要怎样讲，如果是按照之前的方式，那就是单纯的实际操作了，但是并没有截图的过程，所以我这里应该要有昨天的那种步骤和截图吗。我认为是需要的，如果只是照着文档来念一遍，或者单纯的操作一遍，其实也是有问题的，虽然这样可以很快的结束战斗，可以很快的将视频给录完，但是这样录完的视频真的符合现在录制视频的价值观吗，与这个视频的整体初衷就相背离了，其实直到今天也没有真正清楚的认识到这个视频的初衷是什么，做这个视频的意义是跟黑马那样，做一个真正适合初学者的，并且精致，能让初学者真正学到东西的视频。</p>
<p>==核心：做一个真正适合嵌入式Linux初学者的，精致并且能让初学者学到东西的视频==</p>
<p>而我的做法是怎样的呢，也就是最终的实现效果，在我的观点里（==先去看看狂神老师是怎样讲解软件安装的==），这次是以git视频为例进行观看的，但是这次看的不是内容，而是老师的讲解方法和技巧。</p>
<p>狂神的讲解方法是根据手册进行讲解，其实跟我的这种方式是相同的，但又有些不同，狂神在讲解一般内容的时候尤其是docker那节最让我深刻，但我认为他也是提前写好了一个手册，最终又将手册转化为了最终效果，但我又不是很想破坏我的手册，所以目前想到的折中方案仍旧是使用两个手册，我想想啊，总感觉还是有些不对，没有问题，这样做是对的，按照你想的来呗，同样的，也是一个是手册，一个是板书，这两个不是冲突的，我最开始的想法是对的，也不用非要跟人家是一样的效果，而且我认为我这样的效果更好呢？</p>
<p>但是那就有些地方需要推敲了，因为现在的稿子和最终效果里面是没有写这里相关的内容的，之前想的是这几个章节不需要有这些内容，直接跟着手册，操作一遍就能通过了，但是经过昨天第一节和第二节视频的录制，以及今天上午的整理和学习，认为这个地方需要改进，怎样让用户更好接受怎么来？所以下午需要先整理好最终效果，这样修改的话，稿子也要修改，也不是一件简单的工程，尽可能的快点吧。</p>
<hr />
<p>中午的午休结束了，现在还有五个小时的时间，目前在思考，是将后面的四节重新写一下稿子，还是录制一节写一节呢？就这么四节了，这样吧，今天录制一节看看情况，然后后面的三节今天应该是录制不到，所以今天只有安装vmware这一小节。</p>
<p>在三点半的时候，终于算是录制完了这一期，我再看一下规划,明天本来的任务是tabby，现在好了又多了一个Ubuntu，但是我认为我可以直接去里面，里面和外面最终要实现的效果是相同的，那我为什么要在外面呢，实际上也能看一下QQ，而且没有效果，所以完全没必要呀。</p>
<p>还是不对，如果不是要录视频还是不要在那个屋子里呆着了，总感觉怪怪的，有两个矛盾的点，那个屋子没人进行监督，如果一个人的话下午很有可能就飞了，然后是有罪恶感，因为没有在录课，如果在这个屋子的话就不会有这种羞愧的感觉，但是看QQ的这个问题还是很严重，要好多种方法一起使用才能其效果，就目前的情况来看，首先是要有一个时钟软件来不断的提醒你，现在的时间在一分一秒的走，而每间隔十五分钟会提醒你该看QQ了，这时候就适当的看一下，但是这时候要分为两种情况，一种是技术支持的时候一种是非技术支持的时候，技术支持的时候每隔十五分钟就看一下，如果没人问问题就直接进行到下一个十五分钟，而有人问问题就回答一下，当非技术支持的时候，仍旧是每隔15分钟看一下，但是这个时候只是看十五分钟到了之后是不是有好友来询问你问题了，如果有问题就看着回复一下，如果没问题就进入下一个十五分钟。除了这个软件之外，还有一个地方很重要，那就是QQ群的状态，在之前的时候QQ群是全部放到群管理里面的，但是这样的话还是会不停的点进去，从而消耗多余的精力，后来尝试了一下解开全部的限制之后，仍旧是存在问题，那就是他会闪烁，也可能那个时候使用的是另一台电脑，所以后面又全部不闪烁，免打扰了，这样就只有好友能闪烁我，除此之外，我发现耳塞也是一个很重要的内容，在没有耳塞的情况下，很容易的就迷失了，一般情况下不是无脑刷网页就是去聊天，没有意义呀。</p>
<hr />
<p>从今天晚上开始就不再看老岁月的视频了，总是需要自己消化和运用的，俗话说的好，贪多嚼不烂，这是很正确的一个观点，规定到周六晚上吧，严谨一点，周六晚上可以看视频，之前就不看了，从今天晚上和明天开始将时间花费.</p>
<hr />
<h1 id="221-星期三-工作记录"><a class="markdownIt-Anchor" href="#221-星期三-工作记录"></a> 2.21 星期三 工作记录</h1>
<p>​	今天的任务是录完后面三节的视频，但是在录完之前还有很多要修改的地方，就比如手册、稿子、最终效果，等等，任意一点完不成都将无法进行录制的工作，上午打算的是写完上面说的这些，然后下午的话是完成录制的工作。</p>
<p>​	先分析一下昨天，有些规定要修改，不然禁受不住，以后星期中的那一次就取消了，以后就是换到星期六晚，其他要说的就没了，这只是一个小插曲，之前的睡眠也都清零，明天四点起床，要做的事情不多，就是写稿子，继续向下学习，其他的就没啥要总结的了，关于三观的确立，目前就先这样，总要花费一些时间去慢慢的体会，不论什么事情都是要有一个理解的过程。</p>
<hr />
<p>然后开始今天的工作，昨天在写稿子的时候遇到了一个很严重的问题，在之前的时候同样也遇到了，那就是在写稿子以及手册的时候无法真正的静心，或者这样说，他无法真正的进入到这种心流的状态，不能全身心的投入，而是陷入了一种低效率的工作，这时候你能说没有在工作吗，不是，肯定是在工作的，但是无论是从行为上还是心理上都没有协调配合，事实上都在默默的排斥这种行为，分析一下原因吧?</p>
<p>难道是因为写稿子并没有什么意义吗？这肯定不是呀，如果没有稿子你就无法正常的录制视频，当然你也想像法师那样直接说出来，但经过推理和尝试，你发现那种方式是不适合你的，或者说我认为他的这种方式是不对的，经不起推敲，当然我也并不能说出来，我只是对我现在这种讲解方式有着高度的自信而已，所以说了这么多，稿子是很重要的一环，你可能认为他枯燥、乏味，但这个步骤永远不可缺少，它的地位无可撼动。</p>
<p>为什么你会认为他枯燥乏味呢？其实任何要做的事情，你认为枯燥乏味，其实就是没有进入心流的状态？而心流是怎样进入的呢？是技巧也可以说是能力和要做事情的难易程度形成了一个差不多的平衡，这时候你做起事情来会很投入，完全感受不到时间的流失，而关于写稿子和手册这个地方同样也是如此，那应该怎样调整呢，可以从两个方面来入手，正是我们所说的技巧和难度，技巧在这个时间点是绝对的，无法更改的，所以能修改的就只有难易程度，那应该如何通过修改难易程度来达到心流状态呢？</p>
<p>我认为写稿子很枯燥，在难易程度上是怎样的呢，原因我也不知道能写多少点，先一个一个来，首先一个就是你没有规定时间，当没有一个截止时间限制的话，那绝对是无法投入的，你会不经意间就分心了，看着时间还很长，他会在你心里不断的向后延期，直到你慢慢悠悠的做完为止。其他的写不出来了，这绝对就是时间的问题了，规定时间内完成正确的事情。</p>
<hr />
<p>然后是QQ的问题了，QQ默认我让他不闪烁了，但是那样不知道有没有人给我发消息，而且我之前还默认将状态栏隐藏掉了，唯有未知的才是你心中神往的，唯有距离才会产生美，既然心流可以用在解决上面的问题上，能不能应用在我看QQ这个上面呢？可以这样想，在规定的时间内不看QQ也是一件要做的事情，同样可以分为技巧和难度，这里的技巧可以量化，而且技巧是限时的，会随着时间而波动，难度其实并不大，所吸引你的无非是看了QQ之后能消除心里的那点神秘感，是不是有人给你说话了，然而事实上，跟你说话的人也确实是不多，昨天也分析过了，所有跟你说话的人都分析了一遍，你会发现任何人都没有即时性，认识到这一点之后，其实就通透多了，现在你懂了吗。行了，现在开始今天的工作。</p>
<hr />
<p>最终效果更新一下，将稿子和最终效果合成一个了，因为我发现在真正录制的时候使用的也是分开的，这样会导致最终会重新整合在一起，既然这样的话，那为什么不直接就整理好呢，而且这样的话也会少打开一些文档，最终也只会保留一个文档，这样何乐而不为，不再那样的眼花缭乱。</p>
<hr />
<p>今天本来是要完成tabby的，但是改了好久的稿子，本来以为改了稿子或者说最终效果很简单很简单，但是在实际讲解下来发现并不是我想象中的那样的，就比如需要作图，还需要重新写稿子，这些都要花费很多的时间和精力，尤其是昨天之前，今天上午的时候正因为这个问题还分析了半天，技巧和难度达不到平衡，而实际上是因为并没有限定时间，现在在想能不能用家里的电脑录呢，我可不可以强制改成1080P大小的，好像并没有意义，我也没必要在家就将完整的视频录制出来，我其实也仅仅只需要写完最终效果就好了，最多在家里演练一下，这个想法是没问题的。现在还有半小时下班，然后想一下tabby要怎样讲解。</p>
<p>首先tabby是一个终端软件，那这个终端是什么呢？我甚至认为这一小节应该讲解一下终端的发展历史，讲解什么是终端。</p>
<h1 id="222-星期四-工作记录"><a class="markdownIt-Anchor" href="#222-星期四-工作记录"></a> 2.22 星期四 工作记录</h1>
<p>​	昨天录完了视频的第四节和第五节，目前与预定的时间差了一天，但有些事情在做着做着的时候就有东西要添加，这也是无可避免的，而录视频的本质就是想要将更好、更精致的内容呈现给客户，虽然现在的这一版本也可以正常实现，但那样又还有什么意义呢？所以遵循主线的原则一定是对的，尽力的去做就行了。</p>
<p>但是在家的效率真的就挺低的，在家的时候花费了一个多小时的时间用来写反思，但反思很有效果，目前认为是值得的，出了问题就解决，有办法就提出，调整之后再尝试，不断的试错罢了，看来以后手机倒计时也应该少用，早晨的时候正是因为手机倒计时才导致分心看了一会儿无用的东西，所以以后只有第一时间洗漱使用倒计时，其他时间就不使用手机倒计时了，而是使用那个定时器的倒计时，这样分心的可能性就会被大幅度的减少，而且我发现一个人长时间的保持一件事情除了陷入心流的状态，其他时间是很难的，虽然你知道做的这件事情是对的，但是一直持续的做这件事情就是不行，可能还是不够热爱吧，现在的想法是让自己变的热爱，先解决这个无法长时间聚集注意力的事情，可以学着上学那样，使用计时器设置一个时间，然后当时间到达之后出去欣赏一两首音乐，然后重新开始新一轮的计时，目前想到的办法是这样的，因为如果直接看电脑来消遣的话，那很容易就跑偏了，行了这些事情晚上再说，现在的话就回归到工作上来，现在继续写对应的手册。</p>
<hr />
<p>重新写一下tabby这个章节应该要讲解哪些内容？首先tabby是一个终端软件，但在此之前并没有介绍终端的概念，所以在第一小节中理所当然的应该介绍终端，什么是终端，以及ubuntu打开终端的方法。在第一节可以稍微提一下远程终端，在第二节讲解tabby软件的下载和安装，第三节来讲解通过ssh远程连接ubuntu，第四节就是字体设置以及快捷键的讲解了。</p>
<p>昨天晚上和早上学习和简单写了一下要讲解的内容，先把手册搞完。</p>
<hr />
<p>哈哈哈，终于搞完了已经写好稿子的这些了，虽然这些内容确实都不难，只能说这是一个初期的尝试，等后面的流程熟悉之后，如果一直像这个星期一样进行反思的话，那也会尽可能的加快脚步的，就比如最开始的时候是最终效果和稿子分开的，在实际操作之后，稿子和最终效果都合成到了最终效果里面，所以现在重新整理一下步骤。</p>
<ol>
<li>学习相关的内容，这里学习的时候一定要注意写笔记，当你学习完成之后可以通过笔记来回忆起学习的内容，其实就类似于在学校时候记录的笔记</li>
<li>整理成相应的手册，这里的手册跟上面的笔记并不一样，上面的笔记是给自己看的，而这个笔记是给用户看的，这是有区别很不一样，我自己的笔记只需要我自己看懂就行了，但是给客户的资料就不能这样，其实很多时候我自己的笔记也都写不好，甚至很多时候都没有，绝大多数情况下，都是文档在推动着我学习，而不是我推着文档的进度。</li>
<li>写最终效果，这里的最终效果是稿子和演示的集合体，稿子是以第二小节的手册为前提来完成的，但是在讲解的时候可以讲解多一些或者忽略一些东西，讲解的和写的内容不完全一样，具体的方向和程度靠自己来把握，当这里完成之后，那就是最终讲解时候看的东西，就是第三步完成的东西，来完成的最终录制。</li>
<li>录制视频：无论是多么牛的人，都会出错，或许真的有人可以一镜到底，但是目前的我是真的做不到，所以我只能通过稿子的方式来实现，并且录制的时候难免会磕磕绊绊，但是通过剪辑和分段，还能算优秀的过去这些，这就是我录视频的全部步骤了。</li>
</ol>
<p>从明天开始就要写驱动视频了，这一周过的真好呀，假如生命中的每一周都能像这一周这样，那该多好呀。</p>
<h1 id="223-星期五-工作记录"><a class="markdownIt-Anchor" href="#223-星期五-工作记录"></a> 2.23 星期五 工作记录</h1>
<p>​	今天是技术支持，今天想要磨砺一下技术支持时间段内的学习注意力，就跟正常时间内看QQ的频率一样就行了，最开始的九点，就是直到什么时候解决完问题，什么时候结束，而后面的时候都是根据具体的事件而来，今天的任务是两节内容，不出意外肯定是完不成的，今天的真正任务是看视频，而且我要完成的任务在后面，所以这里还跟前面的第13期的视频不一样，第十三期我只需要写前面，后面的就不需要看了，因为这样看一遍的效果真的很差，而且实际应用的效果不太行，不如透过现象看本质，去学习一下里面的C语言的内容，但是这里的14期我要写的是后面的内容，肯定是跟前面的内容有联系的，所以要一点一点的向后看视频。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402231037231.png" alt="image-20240223103723198" /></p>
<p>第十四期手册编写步骤：</p>
<ol>
<li>
<p>看全部的14期视频，看的时候不能仅仅只是看，而是需要写非常详细、非常详细的内容，可能还并不止于此，我认为都需要写出来详细的心路例程</p>
</li>
<li>
<p>第一遍视频看完之后，就可以来第二遍了，在第二遍的时候就需要整理总结第一个步骤当中的内容，然后形成最终的手册。</p>
<p>目前就这两条内容，其他要注意的也没啥，然后现在开始呗。</p>
</li>
</ol>
<hr />
<h2 id="步骤一-第一遍学习"><a class="markdownIt-Anchor" href="#步骤一-第一遍学习"></a> 步骤一 第一遍学习</h2>
<blockquote>
<p>1.基础知识</p>
<p>​	什么是单总线</p>
<p>​	外设介绍：ds18b20</p>
<p>2.驱动编写：</p>
<p>​	驱动编写步骤以及涉及到的知识点</p>
<p>​	单总线时许代码编写</p>
<p>​	使用路基分析仪直观认识单总线</p>
<p>3.实践课</p>
<p>​	使用ioctl设置分辨率</p>
<p>​	课后作业</p>
</blockquote>
<p>其实层次还是很分明的，所以这样看起来这章也不是很难，反正目前就是这样看的，我先来讲一下大体的逻辑，因为后面要讲解的都是一系列的协议，而为了在后面的学习中有足够的知识储备，所以需要在这一期的视频里讲解单总线，但如果只是讲解单总线的定义啥的，难免会很空洞，所以肯定要使用一个外设来进行讲解，所以这里选取了ds18b20这个温度传感器来讲。这样第一部分的基础内容的只是就有了，首先介绍一下什么是单总线，然后在第二个章节中简单的介绍一下ds18b20。</p>
<p>既然是实验视频，总是不可能没有实验的，在第一部分只是介绍，第二部分当然是具体的学习步骤了，就比如这个ds18b20 单总线驱动的编写，这个ds18b20是用来获取温度的，但是他是怎样获取的温度呢？我认为是我给他发一段指令，然后他会给我返回一段指令，这段指令里面就包括温度信息，当然这只是我想的，具体是怎样的指令呢？这就需要使用逻辑分析仪来进行逐步分析指令了，目前这是我的理解，现在开始学习。</p>
<h2 id="1什么是单总线"><a class="markdownIt-Anchor" href="#1什么是单总线"></a> 1.什么是单总线？</h2>
<p>单总线是DALLAS公司推出的串行扩展总线技术，与 SPI、I2C等穿行数据通信方式不同，单总线只需要一根信号线，单总线用一根信号线，既可以传输时钟又可以传输数据，而且数据是双向的，所以单总线具有节省IO、结构简单，便于维护和扩展的特点。</p>
<p>常见的单总线器件主要有温湿度传单器DHT11，温度传感器DS18B20。</p>
<p>单总线并不只可以实现一主一丛，也可以一主多从，可以根据地址进行区分，从而体现了便于扩展的有优点。</p>
<blockquote>
<p>单总线的通信步骤：<br />
单总线都是主从结构，当主句呼叫从机时，从机才会应答，所以主机都必须要严格遵循单总线的命令时许，如果命令时序不对，则机器不会相应。</p>
<p>1.初始化</p>
<p>2.ROM操作命令</p>
<p>3.功能命令</p>
</blockquote>
<h2 id="2ds18b20介绍"><a class="markdownIt-Anchor" href="#2ds18b20介绍"></a> 2.DS18B20介绍</h2>
<h3 id="21-芯片概述"><a class="markdownIt-Anchor" href="#21-芯片概述"></a> 2.1 芯片概述</h3>
<blockquote>
<ul>
<li>DS18B20是一种数字温度计，可实现温度测量和报警功能。</li>
<li>DS18B20支持9到12位分辨率的温度测量，可通过可编程非易失性存储单元来设置温度的下限和上限报警。</li>
<li>DS18B20使用单总线协议与上位机进行通信，只需一根信号线和一根地线。</li>
<li>DS18B20的温度测量范围为-55°C至+125°C（-67°F至+257°F），测试精度可达到士0.4°C。</li>
<li>DS18B20可以直接通过信号线供电，无需额外的供电电源。</li>
<li>每个DS18B20具有一个全球唯一的64位序列号，可用于多个DS18B20的组网。</li>
<li>DS18B20可以串联在同一条单总线上，多个DS18B20可以由一个处理器控制。</li>
<li>DS18B20的组网方式适用于HVAC环境控制、建筑、设备、粮情测温、工业测温以及过程监测控制等应用领域。</li>
</ul>
</blockquote>
<h3 id="22-基本性能"><a class="markdownIt-Anchor" href="#22-基本性能"></a> 2.2 基本性能</h3>
<ul>
<li>DS18B20采用单总线接口，只需一个端口引脚进行通信。</li>
<li>每颗DS18B20芯片具有全球唯一的64位序列号。</li>
<li>DS18B20具有最高12位的温度测量精度。</li>
<li>DS18B20的温度转换速度小于750毫秒。</li>
<li>DS18B20具有用户可自定义的非易失性存储器，可设置温度报警。</li>
<li>DS18B20具有多点分布式测温功能，无需外围元器件。</li>
<li>DS18B20支持报警搜索命令，可识别并标记超过设定温度的器件。</li>
<li>DS18B20具有超强的静电保护能力。</li>
<li>DS18B20可通过数据线供电，供电电压范围为2.5V至5.5V。</li>
<li>DS18B20的温度测量范围为-55°C至+125°C（-67°F至+257°F）。</li>
<li>DS18B20提供贴片的MSOP8和SOP8封装，以及3脚的TO-92和TO-92S封装。</li>
<li>DS18B20在-10°C至70°C范围内的精度为±0.4°C。</li>
<li>DS18B20可选的温度分辨率为9位至12位。</li>
</ul>
<h3 id="23-应用场景"><a class="markdownIt-Anchor" href="#23-应用场景"></a> 2.3 应用场景</h3>
<ol>
<li>温度控制：DS18B20可用于各种温度控制系统，包括室内温度控制、恒温设备、温室控制等。</li>
<li>工业系统：DS18B20广泛应用于工业领域，用于监测和控制工业设备、机械、制造过程中的温度。</li>
<li>消费品：DS18B20可用于消费品中的温度监测和控制，例如家电、电子产品、汽车等。</li>
<li>粮情测温：DS18B20被用于农业和粮食储存领域，用于监测和控制粮食仓库、谷物储存设施中的温度。</li>
<li>温度计：DS18B20本身就是一种数字温度计，可用于个人使用、实验室、医疗设备等场景中的温度测量。</li>
<li>任何感热系统：由于DS18B20具有广泛的温度范围和精度，它可以应用于任何需要温度感测和控制的系统。</li>
</ol>
<h3 id="24-ds18b20内部结构"><a class="markdownIt-Anchor" href="#24-ds18b20内部结构"></a> 2.4 DS18B20内部结构</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402231402907.png" alt="image-20240223140232819" /></p>
<p>DS18B20的EEPROM大小为九个字节，具体如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402231403828.png" alt="image-20240223140344746" /></p>
<p>0 1：存放温度的低位和高位</p>
<p>2：存放温度的上限报警</p>
<p>3：存放温度的下限 报警</p>
<p>4：配置寄存器</p>
<p>5：保留位</p>
<p>6 7：存放用户字节</p>
<p>8：CRC校验</p>
<p>上电状态依赖EEPROM中的值</p>
<h2 id="3ds18b20寄存器介绍"><a class="markdownIt-Anchor" href="#3ds18b20寄存器介绍"></a> 3.DS18B20寄存器介绍</h2>
<h3 id="31-配置寄存器"><a class="markdownIt-Anchor" href="#31-配置寄存器"></a> 3.1 配置寄存器</h3>
<p>在上个小节中讲到，DS18B20中有一个E2PROM，他存有9个字节，而12位置用来存放温度的高位和低位，34用来存放报警的温度，6是配置寄存器，6保留，78 存放用户字节，8存放CRC校验，所以这个视频中讲解的就是第4位的配置寄存器，他是1个字节，8位。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402231423150.png" alt="image-20240223142308023" /></p>
<h3 id="32-温度测量寄存器"><a class="markdownIt-Anchor" href="#32-温度测量寄存器"></a> 3.2 温度测量寄存器</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402231438183.png" alt="image-20240223143820061" /></p>
<p>11-15 符号位，如果都为1代表负数，如果都是0代表正数</p>
<p>4-10代表整数部分</p>
<p>0-3代表小数部分</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402231443913.png" alt="image-20240223144324787" /></p>
<h2 id="4-ds18b20指令介绍"><a class="markdownIt-Anchor" href="#4-ds18b20指令介绍"></a> 4 DS18B20指令介绍</h2>
<h3 id="41-rom指令"><a class="markdownIt-Anchor" href="#41-rom指令"></a> 4.1 ROM指令</h3>
<table>
<thead>
<tr>
<th style="text-align:left">指令</th>
<th style="text-align:left">指令代码</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">读ROM</td>
<td style="text-align:left">33H</td>
<td style="text-align:left">用于读取DS18B20芯片中的全球唯一序列号</td>
</tr>
<tr>
<td style="text-align:left">匹配ROM</td>
<td style="text-align:left">55H</td>
<td style="text-align:left">在发送该指令后，接着发送64位序列号，与DS18B20匹配</td>
</tr>
<tr>
<td style="text-align:left">搜索ROM</td>
<td style="text-align:left">FOH</td>
<td style="text-align:left">用于确定挂载在同一个单总线上的DS18B20的数量和序列号</td>
</tr>
<tr>
<td style="text-align:left">跳过ROM</td>
<td style="text-align:left">CCH</td>
<td style="text-align:left">忽略序列号，直接向总线上的DS18B20发送温度转换命令</td>
</tr>
<tr>
<td style="text-align:left">警告搜索</td>
<td style="text-align:left">ECH</td>
<td style="text-align:left">执行后，只有当温度超过设置的上限或下限时，相应的DS18B20才会响应</td>
</tr>
</tbody>
</table>
<h3 id="42-ram指令"><a class="markdownIt-Anchor" href="#42-ram指令"></a> 4.2 RAM指令</h3>
<table>
<thead>
<tr>
<th style="text-align:left">指令</th>
<th style="text-align:left">指令代码</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">温度转换指令</td>
<td style="text-align:left">44H</td>
<td style="text-align:left">将温度转换结果存放在RAM中</td>
</tr>
<tr>
<td style="text-align:left">读暂存器指令</td>
<td style="text-align:left">BEH</td>
<td style="text-align:left">读取暂存器中的内容</td>
</tr>
<tr>
<td style="text-align:left">写暂存器指令</td>
<td style="text-align:left">4EH</td>
<td style="text-align:left">写入暂存器中的内容</td>
</tr>
<tr>
<td style="text-align:left">复制暂存器指令</td>
<td style="text-align:left">48H</td>
<td style="text-align:left">将暂存器中的第3、4字节的内容复制到EEPROM中</td>
</tr>
<tr>
<td style="text-align:left">恢复RAM指令</td>
<td style="text-align:left">ECH</td>
<td style="text-align:left">将EEPROM中的内容恢复到RAM中的第3、4字节中</td>
</tr>
</tbody>
</table>
<h3 id="43操作举例"><a class="markdownIt-Anchor" href="#43操作举例"></a> 4.3操作举例</h3>
<p>当单总线上只有一个DS18B20时，以下是相应操作的顺序及指令：</p>
<ol>
<li>开始进行温度转换：
<ul>
<li>发送复位信号。</li>
<li>发送ROM指令0xCC（跳过搜索）。</li>
<li>发送RAM指令0x44（进行温度转换）。</li>
</ul>
</li>
<li>读取温度：
<ul>
<li>发送复位信号。</li>
<li>发送ROM指令0xCC（跳过搜索）。</li>
<li>发送RAM指令0xBE（读取暂存器）。</li>
</ul>
</li>
<li>设置DS18B20：
<ul>
<li>发送复位信号。</li>
<li>发送ROM指令0xCC（跳过搜索）。</li>
<li>发送RAM指令0x4E（写暂存器）。</li>
<li>发送要写入的数据。</li>
</ul>
</li>
</ol>
<p>当单总线上有多个DS18B20时，以下是相应操作的顺序及指令：</p>
<ol>
<li>开始进行温度转换：
<ul>
<li>发送复位信号。</li>
<li>发送ROM指令0x55（匹配指令）。</li>
<li>发送每个DS18B20的地址。</li>
<li>发送RAM指令0x44（进行温度转换）。</li>
</ul>
</li>
<li>读取温度：
<ul>
<li>发送复位信号。</li>
<li>发送ROM指令0x55（匹配指令）。</li>
<li>发送每个DS18B20的地址。</li>
<li>发送RAM指令0xBE（读取暂存器）。</li>
</ul>
</li>
<li>设置DS18B20：
<ul>
<li>发送复位信号。</li>
<li>发送ROM指令0x55（匹配指令）。</li>
<li>发送每个DS18B20的地址。</li>
<li>发送RAM指令0x4E（写暂存器）。</li>
<li>发送要写入的数据。</li>
</ul>
</li>
</ol>
<hr />
<p>心中的郁结还是没能解开，真的就很服气，我这几天辛辛苦苦打造的世界观、人生观、价值观，就这样被冲击了，虽然嘴上说的不在意、不在意，但是真的不在意吗，那当然是不可能的，借酒消愁是不可能消愁的，最终的结果，也只能是愁更愁，晚上多看分析看看，看看怎样才能解决这个问题，否则还是会一直持续下去的，所以昨天晚上的行为其实是不对的，不对好像也不对，互相矛盾了，今天晚上和明天早上打算是看完视频，并且写完对应的笔记的，明天是周六，而且今天是晚起床了，这不是借口，所以明天是要四点起床的，要是试试三点半起床试试？好像也可以，哈哈，三点半和四点，听起来就只差半小时，但是感觉都不一样了，还是算了把，等先熟悉了四点起床再说了。</p>
<h1 id="224-星期六"><a class="markdownIt-Anchor" href="#224-星期六"></a> 2.24 星期六</h1>
<p>本来打算的是今天早上早起，但是确实有些疲惫，有点困困的，所以上午睡到了七点半，所以也并没有完成定下的目标，也就是看完全部的驱动视频，并且写下完整的笔记，昨天看了差不多一半，其实本来可以看的更多的，但是由于昨天的心情并不好，调整的情绪也并不好，所以昨天有些狂躁、无心工作，今天就完全可以静下心来了，总不能白睡这么长的时间吧，也差不多找到了自己生命的意义，那就是在正确的时间做你认为正确的事情，或许每个时间段的心境并不一样，但是在每个分立的时间段之内，你确实做了你认为正确的事情，而且你认为正确的事情，一定是让你获得极大满足的事情，当然这个满足可能并不会立刻到来，是做这件事情的结果让你满足，中间做这件事情的过程可能是痛苦的，但是它是正确的，只要正确，最终就一定能得到心灵上的满足。</p>
<hr />
<p>今天继续贯彻和测试QQ的查看和测试，昨天可能是因为心情问题有些许的烦躁，所以最终的效果并不是很好，记得善于记录。</p>
<p>看了一下苹果写的手册，我感觉真的好丑呀，难度是我对我自己太自信的原因？可是我真的感觉好丑呀，啊啊啊啊啊。写手册这么多年的果姐姐手册都写的这样难看，这是为什么呢？我竟然还以为手册写的好看而有了优越感，吐血。</p>
<p>其实是我的问题，关于田田的这个，虽然我并不喜欢田田，但是看到人有了对象，就感觉有了一种不一样的感觉，吐血，现在来分析一下为什么会有这样的感觉呢？可能曾经也有希望，而且交集太多的原因，但你这种思想确实是错的，你想的是，这么早就有了对象，从而损失了很多你认为珍贵的东西，但是你自己也说过了，这些只是你认为珍贵的，但是对于其他人来说，就比如田田，更加的喜欢现在的日子，找个喜欢自己的对象，生一个可可爱爱的小娃娃，然后安安稳稳，快快乐乐的度过一生，在你看来，这些并不是你想要追求的，但这也不是你干涉别人的理由呀，你其实连自己都管不住，又何谈管别人呢？</p>
<p>确实现在对于田田的看法，更像是对待一个小妹妹，现在就应该是不管田田做什么，只管支持就行了，不然你还能怎么做呢？其他你什么也做不了好吧，田田现在这样就挺好的，所以你这种过时的想法就抛弃吧。</p>
<p>所以感谢，让我又一次走出思想的误区，哦对明天大哥肯定要开车，不然说什么明天也要喝一个，哈哈。</p>
<hr />
<h2 id="1编写复位时序"><a class="markdownIt-Anchor" href="#1编写复位时序"></a> 1.编写复位时序</h2>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402241024726.png" alt="image-20240224102407650" /></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 复位 DS18B20 温度传感器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ds18b20_reset</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 将 GPIO 方向设置为输出</span></span><br><span class="line">    gpiod_direction_output(ds18b20-&gt;ds18b20_gpio, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将 GPIO 输出设置为低电平</span></span><br><span class="line">    gpiod_set_value(ds18b20-&gt;ds18b20_gpio, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 延时 700 微秒</span></span><br><span class="line">    udelay(<span class="number">700</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将 GPIO 输出设置为高电平</span></span><br><span class="line">    gpiod_set_value(ds18b20-&gt;ds18b20_gpio, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将 GPIO 方向设置为输入</span></span><br><span class="line">    gpiod_direction_input(ds18b20-&gt;ds18b20_gpio);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 等待直到 DS18B20 将总线拉低</span></span><br><span class="line">    <span class="keyword">while</span> (gpiod_get_value(ds18b20-&gt;ds18b20_gpio)) ;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 等待直到 DS18B20 将总线拉高</span></span><br><span class="line">    <span class="keyword">while</span> (!gpiod_get_value(ds18b20-&gt;ds18b20_gpio));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 延时 480 微秒</span></span><br><span class="line">    udelay(<span class="number">480</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2验证复位时序"><a class="markdownIt-Anchor" href="#2验证复位时序"></a> 2.验证复位时序</h2>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402241123068.png" alt="image-20240224112358012" /></p>
<h2 id="3-编写写时序驱动代码"><a class="markdownIt-Anchor" href="#3-编写写时序驱动代码"></a> 3 编写写时序驱动代码</h2>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402261348122.png" alt="image-20240226134819079" /></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向 DS18B20 写入单个位(bit)</span></span><br><span class="line"><span class="comment"> * @param bit 要写入的位(bit)，0 或 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ds18b20_writebit</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> bit)</span> &#123;</span><br><span class="line">    <span class="comment">// 将 GPIO 方向设置为输出</span></span><br><span class="line">    gpiod_direction_output(ds18b20-&gt;ds18b20_gpio, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将 GPIO 输出设置为指定的位(bit)</span></span><br><span class="line">    gpiod_set_value(ds18b20-&gt;ds18b20_gpio, bit);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 若 bit 为 1，则延时 10 微秒</span></span><br><span class="line">    <span class="keyword">if</span> (bit)</span><br><span class="line">        udelay(<span class="number">10</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将 GPIO 方向设置为输出</span></span><br><span class="line">    gpiod_direction_output(ds18b20-&gt;ds18b20_gpio, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 延时 65 微秒</span></span><br><span class="line">    udelay(<span class="number">65</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将 GPIO 方向设置为输出</span></span><br><span class="line">    gpiod_direction_output(ds18b20-&gt;ds18b20_gpio, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 延时 2 微秒</span></span><br><span class="line">    udelay(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向 DS18B20 写入一个字节(byte)数据</span></span><br><span class="line"><span class="comment"> * @param data 要写入的字节数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ds18b20_writebyte</span><span class="params">(<span class="type">int</span> data)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// 逐位写入数据</span></span><br><span class="line">        ds18b20_writebit(data &amp; <span class="number">0x01</span>);</span><br><span class="line">        data = data &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4编写读时序驱动代码"><a class="markdownIt-Anchor" href="#4编写读时序驱动代码"></a> 4.编写读时序驱动代码</h2>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402261348406.png" alt="image-20240226134830343" /></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从 DS18B20 读取单个位(bit)</span></span><br><span class="line"><span class="comment"> * @return 读取到的位(bit)，0 或 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> <span class="title function_">ds18b20_readbit</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> bit;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将 GPIO 方向设置为输出</span></span><br><span class="line">    gpiod_direction_output(ds18b20-&gt;ds18b20_gpio, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将 GPIO 输出设置为低电平</span></span><br><span class="line">    gpiod_set_value(ds18b20-&gt;ds18b20_gpio, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 延时 2 微秒</span></span><br><span class="line">    udelay(<span class="number">2</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将 GPIO 方向设置为输入</span></span><br><span class="line">    gpiod_direction_input(ds18b20-&gt;ds18b20_gpio);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 延时 10 微秒</span></span><br><span class="line">    udelay(<span class="number">10</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读取 GPIO 的值作为位(bit)</span></span><br><span class="line">    bit = gpiod_get_value(ds18b20-&gt;ds18b20_gpio);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 延时 60 微秒</span></span><br><span class="line">    udelay(<span class="number">60</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> bit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从 DS18B20 读取一个字节(byte)数据</span></span><br><span class="line"><span class="comment"> * @return 读取到的字节数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">ds18b20_readbyte</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="type">int</span> data = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// 读取单个位(bit)并根据位的位置进行左移操作</span></span><br><span class="line">        data |= ds18b20_readbit() &lt;&lt; i;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-功能函数编写"><a class="markdownIt-Anchor" href="#5-功能函数编写"></a> 5 功能函数编写</h2>
<p>温度读取</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从 DS18B20 读取温度值</span></span><br><span class="line"><span class="comment"> * @return 读取到的温度值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">ds18b20_readtemp</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="type">int</span> temp_l, temp_h, temp;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 复位 DS18B20</span></span><br><span class="line">    ds18b20_reset();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 发送写入字节命令 0xCC（跳过 ROM）</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xCC</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 发送写入字节命令 0x44（启动温度转换）</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0x44</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 延时 750 毫秒，等待温度转换完成</span></span><br><span class="line">    mdelay(<span class="number">750</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 复位 DS18B20</span></span><br><span class="line">    ds18b20_reset();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 发送写入字节命令 0xCC（跳过 ROM）</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xCC</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 发送写入字节命令 0xBE（读取温度值）</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xBE</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读取温度低位字节</span></span><br><span class="line">    temp_l = ds18b20_readbyte();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读取温度高位字节</span></span><br><span class="line">    temp_h = ds18b20_readbyte();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将温度高位字节左移 8 位</span></span><br><span class="line">    temp_h = temp_h &lt;&lt; <span class="number">8</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 组合温度值</span></span><br><span class="line">    temp = temp_h | temp_l;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>文件操作集的read函数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从 DS18B20 读取温度并将其返回给用户空间</span></span><br><span class="line"><span class="comment"> * @param file 文件指针</span></span><br><span class="line"><span class="comment"> * @param buf 用户空间缓冲区指针</span></span><br><span class="line"><span class="comment"> * @param size 缓冲区大小</span></span><br><span class="line"><span class="comment"> * @param offs 偏移量指针</span></span><br><span class="line"><span class="comment"> * @return 成功读取的字节数或错误代码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">ssize_t</span> <span class="title function_">ds18b20_read</span><span class="params">(<span class="keyword">struct</span> file *file, <span class="type">char</span> __user *buf, <span class="type">size_t</span> size, <span class="type">loff_t</span> *offs)</span> &#123;</span><br><span class="line">    <span class="type">int</span> ds18b20_temp;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 从 DS18B20 读取温度值</span></span><br><span class="line">    ds18b20_temp = ds18b20_readtemp();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将温度值复制到用户空间缓冲区</span></span><br><span class="line">    <span class="keyword">if</span> (copy_to_user(buf, &amp;ds18b20_temp, <span class="keyword">sizeof</span>(ds18b20_temp))) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// 复制失败，返回错误代码</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// 成功读取并复制温度值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6应用程序的编写"><a class="markdownIt-Anchor" href="#6应用程序的编写"></a> 6.应用程序的编写</h2>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ds18b20_get_temp</span><span class="params">(<span class="type">int</span> value, <span class="type">char</span> *sig, <span class="type">float</span> *temp)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((value &gt;&gt; <span class="number">11</span>) &amp; <span class="number">0x01</span>) &#123;</span><br><span class="line">        *sig = <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">        value = ~value + <span class="number">1</span>;  <span class="comment">// 取补码，表示负数</span></span><br><span class="line">        value &amp;= ~(<span class="number">0xF8</span> &lt;&lt; <span class="number">8</span>);  <span class="comment">// 清除高5位，保留低11位</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        *sig = <span class="string">&#x27;+&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    *temp = value * <span class="number">0.0625</span>;  <span class="comment">// 将温度值乘以0.0625，得到实际温度值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> &#123;</span><br><span class="line">    <span class="type">int</span> fd;</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    <span class="type">char</span> sig;</span><br><span class="line">    <span class="type">float</span> temp;</span><br><span class="line"></span><br><span class="line">    fd = open(<span class="string">&quot;/dev/ds18b20&quot;</span>, O_RDWR);  <span class="comment">// 打开设备文件 /dev/ds18b20</span></span><br><span class="line">    <span class="keyword">if</span> (fd &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;打开文件失败！\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (read(fd, &amp;data, <span class="keyword">sizeof</span>(data)) &lt; <span class="number">0</span>) &#123;  <span class="comment">// 从设备文件中读取数据</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;读取数据失败！\n&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ds18b20_get_temp(data, &amp;sig, &amp;temp);  <span class="comment">// 将读取的数据转换为温度值</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;温度为 %c%.4f\n&quot;</span>, sig, temp);  <span class="comment">// 打印温度值</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    close(fd);  <span class="comment">// 关闭设备文件</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7单总线的通讯时序"><a class="markdownIt-Anchor" href="#7单总线的通讯时序"></a> 7.单总线的通讯时序</h2>
<h2 id="8ioctl设置分辨率"><a class="markdownIt-Anchor" href="#8ioctl设置分辨率"></a> 8.ioctl设置分辨率</h2>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION IOW(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;int&#x27;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION_9 9</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION_10 10</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION_11 11</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION_12 12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * DS18B20 温度传感器的 ioctl 函数</span></span><br><span class="line"><span class="comment"> * @param file 文件指针</span></span><br><span class="line"><span class="comment"> * @param cmd 命令</span></span><br><span class="line"><span class="comment"> * @param args 参数</span></span><br><span class="line"><span class="comment"> * @return 返回执行结果，成功返回 0，失败返回 -1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">long</span> <span class="title function_">ds18b20_ioctl</span><span class="params">(<span class="keyword">struct</span> file *file, <span class="type">unsigned</span> <span class="type">int</span> cmd, <span class="type">unsigned</span> <span class="type">long</span> args)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cmd == SET_RESOLUTION) &#123;  <span class="comment">// 判断命令是否为设置分辨率</span></span><br><span class="line">        <span class="keyword">if</span> (args &gt;= SET_RESOLUTION_9 &amp;&amp; args &lt;= SET_RESOLUTION_12) &#123;  <span class="comment">// 判断参数是否在有效的分辨率范围内</span></span><br><span class="line">            set_resolution(args);  <span class="comment">// 调用设置分辨率的函数</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">// 返回成功</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果不匹配 SET_RESOLUTION 或者 args 不在有效范围内，不执行任何操作</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;  <span class="comment">// 返回失败</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 设置 DS18B20 温度传感器的分辨率</span></span><br><span class="line"><span class="comment"> * @param args 分辨率参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">set_resolution</span><span class="params">(<span class="type">int</span> args)</span> &#123;</span><br><span class="line">    ds18b20_reset();  <span class="comment">// 复位 DS18B20 温度传感器</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xCC</span>);  <span class="comment">// 发送跳过 ROM 命令</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0x4E</span>);  <span class="comment">// 发送写配置寄存器命令</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">60</span>);  <span class="comment">// 发送配置字节 1，设置温度上限阈值</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">10</span>);  <span class="comment">// 发送配置字节 2，设置温度下限阈值</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (args) &#123;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_9:  <span class="comment">// 设置分辨率为 9 位</span></span><br><span class="line">            ds18b20_writebyte(<span class="number">0x1F</span>);  <span class="comment">// 发送配置字节 3，设置分辨率为 9 位</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_10:  <span class="comment">// 设置分辨率为 10 位</span></span><br><span class="line">            ds18b20_writebyte(<span class="number">0x3F</span>);  <span class="comment">// 发送配置字节 3，设置分辨率为 10 位</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_11:  <span class="comment">// 设置分辨率为 11 位</span></span><br><span class="line">            ds18b20_writebyte(<span class="number">0x5F</span>);  <span class="comment">// 发送配置字节 3，设置分辨率为 11 位</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_12:  <span class="comment">// 设置分辨率为 12 位</span></span><br><span class="line">            ds18b20_writebyte(<span class="number">0x7F</span>);  <span class="comment">// 发送配置字节 3，设置分辨率为 12 位</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 检查参数的有效性</span></span><br><span class="line"><span class="comment"> * @param args 参数</span></span><br><span class="line"><span class="comment"> * @return 返回执行结果，成功返回 0，失败返回 -1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">check_args</span><span class="params">(<span class="type">int</span> args)</span> &#123;</span><br><span class="line">    <span class="type">int</span> ret = <span class="number">-1</span>;  <span class="comment">// 返回值，默认为失败</span></span><br><span class="line"></span><br><span class="line">    ds18b20_reset();  <span class="comment">// 复位传感器</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xCC</span>);  <span class="comment">// 发送指令字节 0xCC</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xBE</span>);  <span class="comment">// 发送指令字节 0xBE</span></span><br><span class="line">    ds18b20_readbyte();  <span class="comment">// 读取一个字节</span></span><br><span class="line">    ds18b20_readbyte();  <span class="comment">// 读取一个字节</span></span><br><span class="line">    ds18b20_readbyte();  <span class="comment">// 读取一个字节</span></span><br><span class="line">    ds18b20_readbyte();  <span class="comment">// 读取一个字节</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (args) &#123;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_9:</span><br><span class="line">            <span class="keyword">if</span> (ds18b20_readbyte() == <span class="number">0x1F</span>) &#123;  <span class="comment">// 读取一个字节并与 0x1F 进行比较</span></span><br><span class="line">                ret = <span class="number">0</span>;  <span class="comment">// 设置返回值为成功</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_10:</span><br><span class="line">            <span class="keyword">if</span> (ds18b20_readbyte() == <span class="number">0x3F</span>) &#123;  <span class="comment">// 读取一个字节并与 0x3F 进行比较</span></span><br><span class="line">                ret = <span class="number">0</span>;  <span class="comment">// 设置返回值为成功</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_11:</span><br><span class="line">            <span class="keyword">if</span> (ds18b20_readbyte() == <span class="number">0x5F</span>) &#123;  <span class="comment">// 读取一个字节并与 0x5F 进行比较</span></span><br><span class="line">                ret = <span class="number">0</span>;  <span class="comment">// 设置返回值为成功</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_12:</span><br><span class="line">            <span class="keyword">if</span> (ds18b20_readbyte() == <span class="number">0x7F</span>) &#123;  <span class="comment">// 读取一个字节并与 0x7F 进行比较</span></span><br><span class="line">                ret = <span class="number">0</span>;  <span class="comment">// 设置返回值为成功</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret;  <span class="comment">// 返回结果</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>测试app</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/ioctl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION IOW(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, int)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据传感器读取的原始数据计算温度值</span></span><br><span class="line"><span class="comment"> * @param value 传感器读取的原始数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ds18b20_get_temp</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">    <span class="type">char</span> sig;   <span class="comment">// 温度正负号</span></span><br><span class="line">    <span class="type">float</span> temp; <span class="comment">// 温度值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断温度正负号</span></span><br><span class="line">    <span class="keyword">if</span> ((value &gt;&gt; <span class="number">11</span>) &amp; <span class="number">0x01</span>) &#123;</span><br><span class="line">        sig = <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">        value = ~value + <span class="number">1</span>;</span><br><span class="line">        value &amp;= ~(<span class="number">0xf8</span> &lt;&lt; <span class="number">8</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        sig = <span class="string">&#x27;+&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算温度值</span></span><br><span class="line">    temp = value * <span class="number">0.0625</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印温度信息</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;温度为 %c%.4f\n&quot;</span>, sig, temp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> &#123;</span><br><span class="line">    <span class="type">int</span> fd;    <span class="comment">// 文件描述符</span></span><br><span class="line">    <span class="type">int</span> data;  <span class="comment">// 读取的数据</span></span><br><span class="line">    <span class="type">int</span> args;  <span class="comment">// 参数值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打开设备文件</span></span><br><span class="line">    fd = open(<span class="string">&quot;/dev/ds18b20&quot;</span>, O_RDWR);</span><br><span class="line">    <span class="keyword">if</span> (fd &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;打开设备文件出错\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取命令行参数</span></span><br><span class="line">    args = atoi(argv[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;参数值为 %d\n&quot;</span>, args);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查参数范围</span></span><br><span class="line">    <span class="keyword">if</span> (args &lt; <span class="number">9</span> || args &gt; <span class="number">12</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;错误！参数范围应为 9 - 12\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置分辨率</span></span><br><span class="line">    ioctl(fd, SET_RESOLUTION, args);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// 读取数据</span></span><br><span class="line">        read(fd, &amp;data, <span class="keyword">sizeof</span>(data));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理并打印温度信息</span></span><br><span class="line">        ds18b20_get_temp(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-读取当前设置的分辨率"><a class="markdownIt-Anchor" href="#9-读取当前设置的分辨率"></a> 9 读取当前设置的分辨率</h2>
   <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION IOW(<span class="string">&#x27;A&#x27;</span>, 0, <span class="string">&#x27;int&#x27;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GET_RESOLUTION IOR(<span class="string">&#x27;A&#x27;</span>, 1, <span class="string">&#x27;int&#x27;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION_9 9</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION_10 10</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION_11 11</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION_12 12</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ds18b2驱动的自定义ioctl函数。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param file 文件结构指针</span></span><br><span class="line"><span class="comment"> * @param cmd IOCTL命令</span></span><br><span class="line"><span class="comment"> * @param args IOCTL参数</span></span><br><span class="line"><span class="comment"> * @return 成功返回0，失败返回-1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">long</span> <span class="title function_">ds18b2_ioctl</span><span class="params">(<span class="keyword">struct</span> file *file, <span class="type">unsigned</span> <span class="type">int</span> cmd, <span class="type">unsigned</span> <span class="type">long</span> args)</span> &#123;</span><br><span class="line">    <span class="type">int</span> resolution;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查命令是否为SET_RESOLUTION</span></span><br><span class="line">    <span class="keyword">if</span> (cmd == SET_RESOLUTION) &#123;</span><br><span class="line">        <span class="comment">// 检查参数是否在有效范围内</span></span><br><span class="line">        <span class="keyword">if</span> (args &gt;= <span class="number">9</span> &amp;&amp; args &lt;= <span class="number">12</span>) &#123;</span><br><span class="line">            <span class="comment">// 调用set_resolution函数，使用提供的参数设置分辨率</span></span><br><span class="line">            set_resolution(args);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 参数不在有效范围内，返回-1表示失败</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmd == READ_RESOLUTION) &#123;</span><br><span class="line">        <span class="comment">// 读取分辨率</span></span><br><span class="line">        resolution = read_resolution();</span><br><span class="line">        <span class="comment">// 将分辨率的值复制给用户空间的args</span></span><br><span class="line">        <span class="keyword">if</span> (copy_to_user((<span class="type">int</span> *)args, &amp;resolution, <span class="keyword">sizeof</span>(resolution))) &#123;</span><br><span class="line">            <span class="comment">// 复制失败，返回-1表示失败</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回0表示成功</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 设置 DS18B20 温度传感器的分辨率</span></span><br><span class="line"><span class="comment"> * @param args 分辨率参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">set_resolution</span><span class="params">(<span class="type">int</span> args)</span> &#123;</span><br><span class="line">    ds18b20_reset();  <span class="comment">// 复位 DS18B20 温度传感器</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xCC</span>);  <span class="comment">// 发送跳过 ROM 命令</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0x4E</span>);  <span class="comment">// 发送写配置寄存器命令</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">60</span>);  <span class="comment">// 发送配置字节 1，设置温度上限阈值</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">10</span>);  <span class="comment">// 发送配置字节 2，设置温度下限阈值</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (args) &#123;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_9:  <span class="comment">// 设置分辨率为 9 位</span></span><br><span class="line">            ds18b20_writebyte(<span class="number">0x1F</span>);  <span class="comment">// 发送配置字节 3，设置分辨率为 9 位</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_10:  <span class="comment">// 设置分辨率为 10 位</span></span><br><span class="line">            ds18b20_writebyte(<span class="number">0x3F</span>);  <span class="comment">// 发送配置字节 3，设置分辨率为 10 位</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_11:  <span class="comment">// 设置分辨率为 11 位</span></span><br><span class="line">            ds18b20_writebyte(<span class="number">0x5F</span>);  <span class="comment">// 发送配置字节 3，设置分辨率为 11 位</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_12:  <span class="comment">// 设置分辨率为 12 位</span></span><br><span class="line">            ds18b20_writebyte(<span class="number">0x7F</span>);  <span class="comment">// 发送配置字节 3，设置分辨率为 12 位</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 检查参数的有效性</span></span><br><span class="line"><span class="comment"> * @param args 参数</span></span><br><span class="line"><span class="comment"> * @return 返回执行结果，成功返回 0，失败返回 -1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">check_args</span><span class="params">(<span class="type">int</span> args)</span> &#123;</span><br><span class="line">    <span class="type">int</span> ret = <span class="number">-1</span>;  <span class="comment">// 返回值，默认为失败</span></span><br><span class="line"></span><br><span class="line">    ds18b20_reset();  <span class="comment">// 复位传感器</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xCC</span>);  <span class="comment">// 发送指令字节 0xCC</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xBE</span>);  <span class="comment">// 发送指令字节 0xBE</span></span><br><span class="line">    ds18b20_readbyte();  <span class="comment">// 读取一个字节</span></span><br><span class="line">    ds18b20_readbyte();  <span class="comment">// 读取一个字节</span></span><br><span class="line">    ds18b20_readbyte();  <span class="comment">// 读取一个字节</span></span><br><span class="line">    ds18b20_readbyte();  <span class="comment">// 读取一个字节</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (args) &#123;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_9:</span><br><span class="line">            <span class="keyword">if</span> (ds18b20_readbyte() == <span class="number">0x1F</span>) &#123;  <span class="comment">// 读取一个字节并与 0x1F 进行比较</span></span><br><span class="line">                ret = <span class="number">0</span>;  <span class="comment">// 设置返回值为成功</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_10:</span><br><span class="line">            <span class="keyword">if</span> (ds18b20_readbyte() == <span class="number">0x3F</span>) &#123;  <span class="comment">// 读取一个字节并与 0x3F 进行比较</span></span><br><span class="line">                ret = <span class="number">0</span>;  <span class="comment">// 设置返回值为成功</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_11:</span><br><span class="line">            <span class="keyword">if</span> (ds18b20_readbyte() == <span class="number">0x5F</span>) &#123;  <span class="comment">// 读取一个字节并与 0x5F 进行比较</span></span><br><span class="line">                ret = <span class="number">0</span>;  <span class="comment">// 设置返回值为成功</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SET_RESOLUTION_12:</span><br><span class="line">            <span class="keyword">if</span> (ds18b20_readbyte() == <span class="number">0x7F</span>) &#123;  <span class="comment">// 读取一个字节并与 0x7F 进行比较</span></span><br><span class="line">                ret = <span class="number">0</span>;  <span class="comment">// 设置返回值为成功</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret;  <span class="comment">// 返回结果</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取分辨率。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return 分辨率值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">read_resolution</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="type">int</span> ret;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 复位传感器</span></span><br><span class="line">    ds18b20_reset();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发送指令字节0xCC，跳过ROM操作，直接与单个设备通信</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xCC</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发送指令字节0xBE，读取当前设备的配置寄存器</span></span><br><span class="line">    ds18b20_writebyte(<span class="number">0xBE</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取4个字节的数据，但实际上只有最后一个字节是分辨率信息</span></span><br><span class="line">    ds18b20_readbyte();</span><br><span class="line">    ds18b20_readbyte();</span><br><span class="line">    ds18b20_readbyte();</span><br><span class="line">    ds18b20_readbyte();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取最后一个字节，即分辨率信息</span></span><br><span class="line">    ret = ds18b20_readbyte();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回分辨率值</span></span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>app</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/ioctl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SET_RESOLUTION    _IOW(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, int)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> READ_RESOLUTION   _IOR(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, int)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DS18B20_DEVICE    <span class="string">&quot;/dev/ds18b20&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据传感器读取的原始数据计算温度值</span></span><br><span class="line"><span class="comment"> * @param value 传感器读取的原始数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ds18b20_get_temp</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">    <span class="type">char</span> sig;   <span class="comment">// 温度正负号</span></span><br><span class="line">    <span class="type">float</span> temp; <span class="comment">// 温度值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断温度正负号</span></span><br><span class="line">    <span class="keyword">if</span> ((value &gt;&gt; <span class="number">11</span>) &amp; <span class="number">0x01</span>) &#123;</span><br><span class="line">        sig = <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">        value = ~value + <span class="number">1</span>;</span><br><span class="line">        value &amp;= ~(<span class="number">0xf8</span> &lt;&lt; <span class="number">8</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        sig = <span class="string">&#x27;+&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算温度值</span></span><br><span class="line">    temp = value * <span class="number">0.0625</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印温度信息</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;温度为 %c%.4f\n&quot;</span>, sig, temp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据传感器分辨率值打印分辨率信息</span></span><br><span class="line"><span class="comment"> * @param value 传感器分辨率值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ds18b20_get_resolution</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (value) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0x1F</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;分辨率为 9 位\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0x3F</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;分辨率为 10 位\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0x5F</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;分辨率为 11 位\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0x7F</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;分辨率为 12 位\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> &#123;</span><br><span class="line">    <span class="type">int</span> fd;</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    <span class="type">int</span> args;</span><br><span class="line">    <span class="type">int</span> resolution;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打开设备文件</span></span><br><span class="line">    fd = open(DS18B20_DEVICE, O_RDWR);</span><br><span class="line">    <span class="keyword">if</span> (fd &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;无法打开设备文件\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取设置的分辨率参数</span></span><br><span class="line">    args = atoi(argv[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;设置的参数为：%d\n&quot;</span>, args);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查参数范围</span></span><br><span class="line">    <span class="keyword">if</span> (args &lt; <span class="number">9</span> || args &gt; <span class="number">12</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;错误！参数范围为 9 - 12\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置分辨率</span></span><br><span class="line">    ioctl(fd, SET_RESOLUTION, &amp;args);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取分辨率</span></span><br><span class="line">    ioctl(fd, READ_RESOLUTION, &amp;resolution);</span><br><span class="line">    ds18b20_get_resolution(resolution);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// 读取温度数据</span></span><br><span class="line">        read(fd, &amp;data, <span class="keyword">sizeof</span>(data));</span><br><span class="line">        ds18b20_get_temp(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭设备文件</span></span><br><span class="line">    close(fd);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr />
<hr />
<p>行了，终于算是搞完了，然后开始整理自己呢，还是开始整理上面的内容呢？先将后面的内容大体分析一下吧。</p>
<p>今天还是有些浮躁，这是为什么呢?因为今天是周六，还是因为今天的任务导致的呢？亦或者是技术支持导致的呢？都有可能，只能尽可能的去一个个的去排除这些问题，但是这些都是不可复现的，目前大概率来看还是技术支持导致的，问题之前也分析过，因为技术支持要不停的看QQ，所以在技术支持的时候就会无可避免的分心，而只要一分心，就会无法集中注意力，从而让学习的效率大大的降低，这可真的太难了，除此之外，这个还会产生连锁反应，效率低了就让我产生了浮躁的心理，这就会让我不停的看QQ，从而又一次分心，从而变的更加的焦虑。就像下面这样：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402241742515.png" alt="image-20240224174245469" /></p>
<p>​	所以我应该要怎样解决这个问题呢？如果是在一般情况下，也就是没有技术支持的时候，我是没有问题的，这样也就从根本上解决了这些个问题，就正常不看QQ就行了，不看QQ的分析，之前已经写过了，不过分关注QQ即可，但是技术支持的时候呢？我认为这个15分钟看一次的时间频率依然有问题，再改一下，如果是非技术支持的时候，就半小时看一次QQ，技术支持的时候就正常的十五分钟。</p>
<p>目前看起来的话，听音乐，不去听外界的声音就会安静下来，但是我不可能不去听外面的声音的，但是音乐确实能给我救赎，让我的心静下来，考虑一下是不是可以将我的头戴耳机拿来呢，感觉可以试试。我都已经严格的控制了看QQ的次数了，目前为什么仍旧</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-06_工作记录/01_工作记录(二月上之前)"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/02/02/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/01_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(%E4%BA%8C%E6%9C%88%E4%B8%8A%E4%B9%8B%E5%89%8D)/"
    >工作记录(二月之前)</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/02/02/06_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/01_%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95(%E4%BA%8C%E6%9C%88%E4%B8%8A%E4%B9%8B%E5%89%8D)/" class="article-date">
  <time datetime="2024-02-02T13:26:56.000Z" itemprop="datePublished">2024-02-02</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/">工作记录</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="25-工作记录"><a class="markdownIt-Anchor" href="#25-工作记录"></a> 2.5 工作记录</h1>
<p>==不积跬步无以致千里，不积小流无以成江海。==</p>
<hr />
<p>不是很喜欢现在的样子，意识到了问题所在但仍旧是不知悔改的走进去，你不感觉问题很大吗，相较于之前，在之前的时候还从未认识到这个问题，但是现在认识到问题所在了，依然义无反顾的走进去，这是不对的。昨天真的是困困的，所以酒精还是很重要的，当然酸枣仁膏应该也是有用的，年后的时候买一下。</p>
<p>现在的阻碍还是太小了，有些东西的认识还是不全面，虽然黑白手机确实有一定的阻碍作用，但仍旧是无可避免的要沉迷进去，现在都沉迷在哪些地方呢，淘宝和小说，淘宝的问题是有众多的广告，而小说问题可太大了，目前仍旧不知道如何搞，目前想的是看小说可以，但是不能躺着，一定是要坐着，所以就打算买个人体工学椅试试看。但真的很贵呀，啊啊啊啊，真的太贵了，等等看吧，有一点很重要，好像你自己也不知道你想象中的最好的一天应该是怎样过的，身在局中，却永远无法出去。</p>
<hr />
<p>编写最简单的输入设备驱动</p>
<p>4907 基础工资</p>
<p>750 饭补                         15079</p>
<p>900 技术支持                     14279</p>
<p>3593 工资剩余                    10686</p>
<p>1700 年假                       8986</p>
<p>8500 年终奖                    486</p>
<p>500 奖金 0</p>
<h1 id="24-工作记录"><a class="markdownIt-Anchor" href="#24-工作记录"></a> 2.4 工作记录</h1>
<p>==不积跬步无以至千里，不积小流无以成江海。==</p>
<p>昨天晚上十一点前的行为确实很可以，首先是将显示器挪了一个地方，从右边放到了头的上边，就也还行吧，就目前来看的话，我是比较喜欢现在这个样子，更好的样子，目前还没想出来，等后面有机会再看看，算了，就先这样吧，价值太高了，然后就是开始搞远程桌面，在远程桌面上,遇到了很多的问题，最后应该是administrator，这个单词可是真的坑人，哈哈，昨天算是体验到了心流的好处，时间真的刷刷刷的就过去了，当沉浸感和技巧程度叠相差不大的时候，这种体验确实让人沉醉。然后开始今天的工作了。</p>
<hr />
<h2 id="输入子系统框架讲解"><a class="markdownIt-Anchor" href="#输入子系统框架讲解"></a> 输入子系统框架讲解</h2>
<p>先说一下我自己的理解好吧，好像也没啥理解，但是这也是我在看了后面的视频之后才理解的，我应该要如何讲解出来呢？</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402040938670.png" alt="image-20240204093851583" /></p>
<p>其实从最上层的角度来看，不管你要讲解的是什么，都无外乎可以划分这三个，而至于更具体的划分就要看内核源码了。行了，第二遍也看完了，仍旧是说一下看完之后的总结：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402040958629.png" alt="image-20240204095828374" /></p>
<p>整个视频都是围绕这个来的，分别根据逻辑来讲了一下各个层，首先是事件处理层，它是输入子系统的最上层，用户空间的应用通过设备节点来控制硬件设备，那设备节点是怎样来的呢？事件处理层的作用就出现了，然后是设备驱动层，设备驱动层紧挨着各个对应的硬件设备，所以它的作用就是初始化对应的硬件输入设备，并且采集输入设备的输入信息，那采集到的信息要发送传递给哪个对应的设备节点呢？这就是中间核心层的作用了，用来匹配设备驱动层和事件处理层，没了，这节视频就讲了这么多。</p>
<h2 id="输入子系统框架分析"><a class="markdownIt-Anchor" href="#输入子系统框架分析"></a> 输入子系统框架分析</h2>
<p>在上个视频中讲解了输入子系统框架，但是也仅仅只是讲解，这个输入子系统框架是怎	样得出来的呢？这节视频讲解的就是输入子系统框架的由来，我第一次听的时候感觉很乱很乱，现在让我听倒是好多了，但是仍旧不是很好写出来，主要是这个视频跟下个视频的间距感太差了，这节课讲解分析的是代码，下节课也是讲解的这些，那他是怎样分开的呢？</p>
<p>行了，看完了这一节的视频了，这节跟下一节其实是一个，所以这里直接看下一节视频了。</p>
<h2 id="输入子系统关键数据结构之间关系"><a class="markdownIt-Anchor" href="#输入子系统关键数据结构之间关系"></a> 输入子系统关键数据结构之间关系</h2>
<p>上一节课讲到connect了，但也只是讲解了上层的事件处理层的结构体input_handler ，下层的设备驱动层的input_dev，但是他们是怎么连接起来的呢？通过connect函数，函数连接了这两个结构体，最后都整合到了input_handle这个结构体中，还是有些乱乱的，重新看一下，既然已经分析出来了这个input_handle，那为什么还要向后面分析呢？以这个问题为导向，开始重新看一下视频，这两个小节的手册是真的难写呀。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402041706097.png" alt="image-20240204170638015" /></p>
<h1 id="23-工作记录"><a class="markdownIt-Anchor" href="#23-工作记录"></a> 2.3 工作记录</h1>
<p>​	==不积跬步无以至千里，不积小流无以成江海==</p>
<p>昨天晚上的行为还是有问题，不知道换了几天手机了，就目前来看，手机这个东西还是有很大的问题，假如没有了手机，那我的实际行为是不是就有变化了呢？</p>
<p>​	今天做的第一件事情就是将手机换了回来，还是不喜欢安卓，安卓的话真的就是问题太大了，根本没有必要，真的经受不住诱惑的，你懂吗，这些东西真的不是你所能驾驭的，所以这个东西回家之后还是要在那个手机上来买，不然那个手机的作用就没了，等年后重新买三瓶酸枣仁膏，如果有用的话。</p>
<p>但是QQ这个东西还是会妨碍我，现在发现用两个电脑倒是好一点了。</p>
<hr />
<p>早起才能决定早睡，所以以后仍旧是将豆浆放到屋子里来打，嗯，这就对了，也算是找到了一个缘由，至于会不会扰民，这不是扯淡吗，我不信。肯定不会的，那个盒子也打算利用起来，就放在鞋柜里吧，或者有没有在外面放的地方呀，晚上再好好的想一想。</p>
<hr />
<p>firefly</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031019708.png" alt="image-20240203101932535" /></p>
<p>香橙派：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031020929.png" alt="image-20240203102012807" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031038722.png" alt="image-20240203103853677" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031100002.png" alt="image-20240203110002957" /></p>
<hr />
<p>行了，终于算是解决了这个PCIE的问题，这个问题真的困扰了我好久了，就挺不容易的，但所幸是解决了，就还好吧。今天下午的任务肯定是继续学习驱动的，放假之前一定是要写完对应的手册，但在此之仍旧是需要先总结一下，目前发现如果只是编译的话，挂载的编译速度跟平常的编译速度是没有很大的区别的，所以以后我就有多个地方来进行编译了，而且还是速度很快的那种，挂载网络硬盘的方式倒也是挺好的，现在是将QQ完全放到了远程上面，这样的话使用QQ就会有些障碍，而这些障碍呢，又会在你在进行真正的行动前阻碍你，现在你懂了吗，现在想把家里的也这样搞，首先是手机的问题，手机你想要的是拍照和虎牙，拍照肯定是可以，但是虎牙有问题，你买手机当时最大的一个原因，不就是为了拍照和录像吗，所以呀，完全没必要呀。这样，先把苹果手机设置为灰度，其实只要颜色到位了，那其他的东西其实也并没有那么吸引人了，所以回家之后先将手机设置为灰度值，其他的目前先不设置，看看这样的效果如何。</p>
<p>家里的电脑我再思考一些，家里电脑给我的诱惑绝大多数都是哔哩哔哩的诱惑，首先我是将哔哩哔哩的首页内容给全部屏蔽掉的，但是昨天在学习的时候发现youtube也会干扰到我，所以youtube也删掉，以后如果是要看哔哩哔哩的视频以后都通过笔记本电脑来看了，这些网络视频以后都通过笔记本的远程来搞定，仍旧是给自己创造障碍物，如果非常想做一件事情，不能立刻让自己很舒服的做，这样称之为，三思而后行。</p>
<p>在公司的时候我总共设置了十个手表闹钟，当然手表也只能设置这十个闹钟，每半个小时一个闹钟，相较于番茄钟更适合我，这样既能起到定时的作用，也可以收到消息，目前打算搞一个小屏幕，我发现两个27寸的屏幕，在家里是真的大呀，要不拿来给苏醒用用也不是不可以。现在来看的话，还是一大一小比较适合我，公司和家里同步是最好的。</p>
<p>看到了一个百度网盘链接到本地磁盘的方法，现在试一下：<br />
<a target="_blank" rel="noopener" href="https://github.com/alist-org/alist/releases/tag/v3.30.0">软件下载地址</a></p>
<p>下载之后解压到本地，利用cmd打开，输入./alist server</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031359635.png" alt="image-20240203135912571" /></p>
<p>如下图所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031359667.png" alt="image-20240203135942610" /></p>
<p>这是密码Aq0nXPU3，然后打开浏览器输入127.0.0.1:5244,进入下面的界面如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031402543.png" alt="image-20240203140245360" /></p>
<p>账号为admin，密码是上面生成的Aq0nXPU3，登录之后如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031403507.png" alt="image-20240203140341453" /></p>
<p>然后添加硬盘，如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031405377.png" alt="image-20240203140531306" /></p>
<p>要到这里来刷新令牌。<br />
<a target="_blank" rel="noopener" href="https://alist.nn.ci/tool/baidu/callback.html?code=fe5418188acee140e04f2c36691af33d">https://alist.nn.ci/tool/baidu/callback.html?code=fe5418188acee140e04f2c36691af33d</a></p>
<p>这样设置：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031409976.png" alt="image-20240203140913823" /></p>
<p>然后这样raiDriver下载与配置</p>
<p>官网下载地址：<a href="https://link.zhihu.com/?target=https%3A//www.raidrive.com/">RaiDrive</a>， 下载后，傻瓜式一直下一步就好啦。跟我一样配置就oK。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202402031413590.webp" alt="img" /></p>
<p>自启动</p>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Set</span> ws = <span class="built_in">CreateObject</span>(<span class="string">&quot;Wscript.Shell&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">&#x27; 指定目录</span></span><br><span class="line">directory = <span class="string">&quot;D:\07_alist.exe&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&#x27; 切换到目录</span></span><br><span class="line">ws.CurrentDirectory = directory</span><br><span class="line"></span><br><span class="line"><span class="comment">&#x27; 执行命令</span></span><br><span class="line">ws.Run <span class="string">&quot;alist.exe server&quot;</span>, vbHide</span><br></pre></td></tr></table></figure>
<p>行了，又搞了一个好玩的东西，心情不错。</p>
<hr />
<p>1什么是输入子系统?</p>
<p>2确定输入设备对应的设备节点</p>
<p>前两个小节都很简单，我确信现在的已经没问题了。</p>
<hr />
<p>3输入子系统框架讲解</p>
<p>4输入子系统框架分析</p>
<p>在我看来这里真的很难写出来，在我的笔记里面只是写了一个框架图，以及三个层次的介绍</p>
<hr />
<p>5输入子系统数据结构介绍</p>
<p>6.输入子系统数据结构之间关系分析</p>
<p>这里我也是只写了一节，视频里为什么写成了两节，用文字的形式表现出来，还是感觉不对，这里我用poe的chatgpt来些我确实是写了好多，但是我自己看的都云里雾里，当然更不用说是客户了，你说是吗。</p>
<hr />
<p>7.认识内核中输入子系统的源码和裁剪</p>
<p>这一小节直接过，本来也就没啥，但是他这里讲裁剪，心累呀</p>
<hr />
<p>8.编写最简单的设备驱动层代码</p>
<p>几个函数，一个最简单的设备驱动层代码。</p>
<p>9.从最简单的设备驱动代码入手分析匹配规则</p>
<p>最简单的设备驱动层代码并不简单，透过现象看本质，一点点的剖析出来匹配的根本。</p>
<p>10.多对多的匹配关系分析</p>
<p>用joy.c来讲解一个通用的设备驱动层代码</p>
<p>11.完善设备驱动层代码</p>
<p>​	这里也不算是完善吧，之前的一些操作也仅仅是注册了一个输入设备，但是并没有进行任何的上报事件，按道理来看应该是用按键的，但是在rk上面的按键，为了节省IO口，所以就使用了ADC按键，只需要一个adc引脚，就可以控制多个按键，adc后面会讲，</p>
<p>12.通过应用程序获取上报数据</p>
<h1 id="22-工作记录"><a class="markdownIt-Anchor" href="#22-工作记录"></a> 2.2 工作记录</h1>
<p>每过一天都应该知道自己在昨天都做了些什么，又有哪些东西，今天可以吸取昨天的教训，即使不能做到立刻改正，下次遇到的时候也应该惊醒自己。昨天的万恶之源发生在想要热水之后，其实你明明是知道自己抵抗不住小说的诱惑的，但还是下载了下来，所以何必呢?而且现在也忘记了当时的心理活动，但是有一点可以确定，那就是对于我来说，有一些事情根本就不能露头，那些诱惑真的可以比作毒品，只要稍微一接触，就会深深的陷入进去，其实你自己才真的懂你自己呀，就像哔哩哔哩的那些。</p>
<p>中午的时候明明可以去做一些其他的事情的，但是你并没有，你难道就不知道这个是为什么吗？</p>
<p>不管了，先开始写手册了。关掉QQ，与世无争，果然还是关掉QQ最简单，什么都不用想，一个小时之后再见了。</p>
<hr />
<hr />
<p>所以呀，突然有了一些感悟，从心流那里学来的，当一件事情的难易程度与自身的技巧差不多的时候，更容易进入心流的状态，少了这些纷乱繁杂，心也确实能静下来了，所以进入心流的状态又多了一个，那就是心静。</p>
<p>以后看视频也不再倍速观看了，倍速观看视频真的会让人浮躁，当今的时代已经挺浮躁了，所以尽可能的远离、摒弃那些让你焦躁的行为。</p>
<h1 id="21-工作记录"><a class="markdownIt-Anchor" href="#21-工作记录"></a> 2.1 工作记录</h1>
<p>==无论你想成为一个怎样的人，千万要记住，时间在飞逝==</p>
<p>昨天晚上算是尝试的第一天晚上，感觉不错，今天继续，能真切的感受到些许的进步，加油。</p>
<h1 id="131工作记录"><a class="markdownIt-Anchor" href="#131工作记录"></a> 1.31工作记录</h1>
<p>==无论你想成为一个怎样的人，千万要记住，时间在飞逝==</p>
<p>==更重要的是，我们知道不能一直放纵下去，总有一天要停下来，面对放纵之前留下了的烂摊子==</p>
<p>昨天考虑了很久关于QQ的原因，最后也认定了qq真的影响我的工作效率，在非技术支持的工作日，可以使用手环的倒计时功能来限制我看QQ的频率，但是当技术支持的时间，就不能这样了，但这样也没有啥问题，就比如法师在录视频的时候，他当然也不会去回答问题，那我不回答问题当然也可以，因为我有其他的事情在某段时间内，他们的优先级是很高的，也就对应了手表的倒计时，三十分钟的倒计时可能太长了，那十分钟的倒计时还长吗？当然就不长了，法师一录课就是两个小时，难道这两个小时就没有客户吗，那当然是不可能，所以你也不必在心中对于不能非常及时的技术支持耿耿于怀，还是自以为是的责任感的原因，完全没必要呀。</p>
<p>甚至你感觉十分钟的时间也很长，但这是底线了，但仍旧可以交涉，可以定一个五分钟的倒计时，五分钟之后可以看QQ，但是不能回复客户的QQ，只可以回复同事们的QQ，等下一个五分钟之后才能回复客户的QQ，这样就很合理了。</p>
<hr />
<p>然后来思考昨天晚上的所作所为，晚上的时间我本意上也是来学习的，所以现在来反思总结也是为了更好的工作，所以我也不必心里感到愧疚，工作是为了更好的工作，而更好的工作可以获得一个更强大的我。</p>
<p>所以现在来分析一下昨天晚上的整个过程，就跟工作时候的qq一样，找到问题所在，然后寻找探索问题所在的答案呗。</p>
<p>那你最终想要的结果是怎样的呢?是上完一天班之后回家娱乐，当娱乐累了的时候，开始睡觉休息，休息够了之后发现又到了上班的时间段了，那么你说下班娱乐的意义又是什么呢？是为了明天更好的工作，呵呵，不是吗？但其实这只是你探索出来的最终答案，就仍旧以昨天晚上的所作所为做为作为示例进行分析，假如今天不需要上班，或者你没有了工作，在困意来临的时候，你还会选择去睡觉吗，很大的可能是不去睡觉的，正如老岁月在视频中说的那句话，更重要的是，我们知道不能一直放纵下去，总有一天要停下来，面对放纵之前留下了的烂摊子。发现问题所在了吗，我们知道自己不能一直放纵下去，假若我们有机会、有权利一直放纵下去，我们当然愿意一直放纵，然后就是欢迎来到美丽新世界。</p>
<p>当你没有认清楚这一点的时候，你就会在迷茫、痛苦、沉迷然后再痛苦，再沉迷，周而复始，那我究竟是要认识到什么呢？认识到我很差很差的自制力吗？那我的自制力又为何这么差呢？自制力差总归是要有原因的吧，其实经过了这么多年对自己的认识，你早就意识到这一点了，所以一般的诱惑在出现之后就能立刻分清楚，知道这就是我要面对的诱惑，就像中午下载的哔哩哔哩那样子，下载之后在认识到自己并不能真的克制之后立刻也就卸载了，但假如这是周日呢？假日这是在家里呢？你还能这么快吗？你还是不知道自己真正想要的是什么呀。虽然不知道最终的方向在哪个地方，但至少是知道自己有哪些行为是对的，哪些行为会让自己陷入长时间的沉迷之中，其实知道能让自己沉迷的事情之后也是另外一个方法。</p>
<p>早上来的时候，将手机进行了更换，所以苹果于我的意义有是什么呢，目前来看的话完全没有意义呀，不是吗，而另一个手机的意义在最开始的时候是想看看直播，然后呢，不过是一场虚无罢了，无论是看小说、刷短视频、亦或者看直播都是会上瘾的，而在之前因为离的太原，而没有累到极限而去睡觉，但现在有条件了呀，这些也都无所谓了，我可以睡到八点四十，这些都是可以的，毕竟，现在闹钟也无法叫醒我了呀，现在能叫我起床的只有要工作的闹钟了，顺其自然而已。今天晚上不应该再有小说，也不应该再有直播，其他的无所谓了，只要能正常的睡觉，其他的都无所谓，行了，该正常的工作了。</p>
<hr />
<hr />
<p>昨天根据逻辑又向后面写了几个小节，相较于之前直接讲解vim，现在的无疑是更有逻辑性了，然后继续向下面写呗。</p>
<p>既然第九节已经学习了vim了，其实用vim查看是最好的，但是呢万一有在命令行查看的需求呢，所以使用命令对文件内容进行查看也是有必要学习的,那个tail和head滚一边去吧，这都啥玩意，这不是扯淡呢吗，</p>
<blockquote>
<p>10 文件内容查看和搜索</p>
<p>​	10.1 文件内容查看：cat命令</p>
<p>​	10.2 文件内容分页查看：less命令</p>
<p>​	10.3 文件内容搜索：grep命令</p>
<p>​	10.4 查找文件：find命令</p>
</blockquote>
<p>文件的查找没问题了，我们能学习的也就这么多，接下来的权限相关的命令肯定是要讲解的，但能学习的也不多呀，只需要常用的讲解一下就好了，然后还有什么要讲解的呢？压缩和解压肯定是要讲解一下的，链接和软链接肯定也是要讲解一下的，链接和软连接要讲解的不多，所以放在下面</p>
<blockquote>
<p>11 用户和权限管理</p>
<p>​	11.1 文件权限介绍</p>
<p>​	11.2 root用户介绍</p>
<p>​	11.3 获取root权限：sudo 命令</p>
<p>​	11.4 权限修改：chmod命令</p>
</blockquote>
<blockquote>
<p>12 Linux中的快捷方式：链接</p>
<p>​	12.1 硬链接</p>
<p>​	12.2 软链接</p>
</blockquote>
<p>这个放到了前面，感觉跟cp 放一起最合适，其他感觉就没啥命令了，剩下的就没啥了也就剩下了压缩和解压，</p>
<blockquote>
<p>13 压缩和解压缩：tar命令</p>
<p>​	13.1 归档</p>
<p>​	13.2 压缩</p>
<p>​	13.3 解压缩</p>
</blockquote>
<p>这次是真没了，软件包管理本来是不想讲的，但是还是要水一节视频。</p>
<blockquote>
<p>14 软件包管理：apt命令</p>
<p>​	14.1 更新软件包列表</p>
<p>​	14.2 更新软件包</p>
<p>​	14.3 安装软件包</p>
<p>​	14.4 卸载软件包（==除此之外还需要清理不需要的依赖关系和软件包缓存==）</p>
</blockquote>
<p>目前来看要学习的命令就这么多了其他的也没啥了,就到这里吧,Linux基础到这里就也还行吧,但是现在要讲解的当然并不只是这些</p>
<blockquote>
<p>15 Shell基础1：环境变量</p>
<p>​	15.1 查看环境变量：env命令</p>
</blockquote>
<h1 id="130工作记录下"><a class="markdownIt-Anchor" href="#130工作记录下"></a> 1.30工作记录（下）</h1>
<p>==无论你想要成为一个怎样的人，千万要记住，时光在飞逝==</p>
<hr />
<p>还是那一个问题，你理想中的讲解效果是什么样子的呢？像狂神那样的吗，我想是的，但仍有一些细节我不是很清楚，所以我想要深入的了解一下狂神的讲课风格，在了解完了之后再去看一下黑马老师的讲课风格。</p>
<hr />
<p>狂神与我之间的差别：<br />
我认为狂神的视频和直播是不一样的，它自带了加速，后来又看了一下狂神其他的视频发现它也并没有加速，所以就证明狂神是切实的自己讲出来的，</p>
<hr />
<p>黑马:</p>
<p>​	我发现这个老师的风格就跟我很想，我认为黑马的课程都很趋近于底层，只有黑马接近，黑马这个一看就很流畅，一看就是演练了很多遍了，而且有自己的风格，通过字幕的方式就很好。</p>
<hr />
<p>行了，最终的风格确定了，就根据黑马老师的这个来，一个很重要的问题解决了，而里面的具体实施过程就待定了，总不能因为别人的风格就影响了自己的思路，你说对吗，现在可以安心的进行下一步了，解决了风格问题，依然已经有前行者做了一个很好的示范了，那还有什么可担心的，柴哥无所畏惧好吧。</p>
<hr />
<p>行了，继续下一步了，录视频肯定要等法师的交流了，看看法师有没有什么其他的想法，目前认为我的想法和行为无懈可击好吧。所以后面的核心出来了，其他的就是填充就好了，当然一个一个的最终也是要符合逻辑的。目前整理到了tabby的安装和使用章节，也就是说关嵌入式Linux学习的环境搭建已经完成了。然后就是命令相关的了，但在此之前我认为要讲解的是Linux的目录结构。</p>
<blockquote>
<p>7 目录结构</p>
</blockquote>
<p>现在这个时候刚刚将学习Linux的环境搭建完成，但仍旧不能直接来讲解命令，而是先来讲解目录结构，但这时候还需要命令的辅助，三个命令和ls、cd、pwd，有了这三个命令就可以辅助讲解了目录结构了，我这三个命令的排列方式并不是随便拍的</p>
<blockquote>
<p>7.1 文件和目录操作命令</p>
<p>​	7.1.1 命令的格式</p>
<p>​	7.1.2 列出文件和目录：ls命令</p>
<p>​	7.1.3 切换目录：cd命令</p>
<p>​	7.1.4 打印当前工作目录：pwd命令</p>
<p>7.2 Linux目录结构</p>
</blockquote>
<p>虽然在上一节课讲解了列出文件和目录的ls命令和切换目录的cd命令，但是实际上文件和目录操作命令还有很多，大家可以根据windows关于文件和目录的操作想一下本节视频要讲解的命令。</p>
<blockquote>
<p>8 文件和目录操作命令</p>
<p>​	8.1创建目录：mkdir 命令</p>
<p>​	8.2 创建文件：touch命令</p>
<p>​	8.3 删除目录和文件：rm 命令</p>
<p>​	8.4 复制文件和目录：cp命令</p>
<p>​	8.5 移动文件和目录：mv命令</p>
</blockquote>
<p>这些基本的文件和目录操作命令就讲解完成了，但是当然不应止于此，创建文件之后应该怎样编辑文件呢，所以我认为这个第9小节应该是vim，因为后面是有文件内容的查看的，但是文件里面什么都没有，那查看个屁呀，这不是扯淡吗</p>
<blockquote>
<p>9 文本编辑器vim的使用</p>
<p>​	9.1 vim的安装</p>
<p>​	9.2 vim的三种工作模式</p>
<p>​	9.3 光标的移动</p>
<p>​	9.4 光标的移动（进阶版）</p>
<p>​	9.5 vim文本插入</p>
<p>​	9.6 vim的保存和退出</p>
<p>​	9.7 vim文本删除</p>
<p>​	9.8 vim的复制、粘贴和剪切</p>
<p>​	9.9 撤销类命令</p>
<p>​	9.10 搜索类命令</p>
<p>​	9.11 替换类命令</p>
<p>​	9.12 窗口分割</p>
</blockquote>
<p>既然第九节已经学习了vim了，其实用vim查看是最好的，但是呢万一有在命令行查看的需求呢，所以使用命令对文件内容进行查看也是有必要学习的,那个tail和head滚一边去吧，这都啥玩意，这不是扯淡呢吗，</p>
<blockquote>
<p>10 文件内容查看和搜索</p>
<p>​	10.1 文件内容查看：cat命令</p>
<p>​	10.2 文件内容分页查看：less命令</p>
<p>​	10.3 文件内容搜索：grep命令</p>
<p>​	10.4 查找文件：find命令</p>
</blockquote>
<p>文件的查找没问题了</p>
<h1 id="130工作记录上"><a class="markdownIt-Anchor" href="#130工作记录上"></a> 1.30工作记录（上）</h1>
<p>==无论你最后要成为一个怎样的人，千万要记住，时间在飞逝==</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>QQ打开次数</th>
</tr>
</thead>
<tbody>
<tr>
<td>上午</td>
<td>4</td>
</tr>
<tr>
<td>下午</td>
<td></td>
</tr>
</tbody>
</table>
<p>昨天用这个表格，对于QQ的打开频率算是有了一些进步，在打开qq的时候会想一下，现在有没有到对应的时间，如果没有到对应的时间的话会提醒自己，有了一个准则之后就会有约束。但还是有些问题，还是忍不住的想回复，想看一下群里的消息，那应该怎样做呢，目前想的是在第二个屏幕上一直显示QQ，但是不能回复，只有等到时间到了才回复，那还有一个问题，对于这些消息是能看，还是只能看，能互相翻阅吗如果能翻阅，那是不是就回到了从前的那个样子了呢？发现还是不行，不如上面的这种次数记录。</p>
<p>这是必须要度过去的一个门槛，这个门槛度不过去那么工作的效率永远也提不上来，先来回顾一下我都做过了什么，最开始的时候是换了番茄钟，每30分钟一个轮回，但是后来发现还是管不住自己的想法，就算是戴着耳塞的时候都不行，不能控制住自己，时时刻刻那种精神上的蛊惑，让我一刻都不得安心，好像少有人走的路中有提到这个，但我忘记了解决这个问题的方法是什么了，这样的话，效率真的极其低下。</p>
<p>可你都在担忧什么呢？QQ带给你的真的可以说是没有任何的帮助，在想着万一苹果有事情找我咋办，在想着法师是不是有东西发给我，在想着是不是有客户私聊问我问题，在想着是不是有群聊里的问题需要我咋办？这些无不在牵动我的神经，怎样才能有一个好的解决办法呢？这些对我的影响真的太大了，就好比你在做数学题的时候突然被打断了，就导致你这一个数学题再也无法有刚刚的那种状态，你懂这种感觉吗，番茄钟这一解决方法已经放弃了，当我的心情被牵动的时候，那些根本就阻拦不住，所以我就换成了倒计时，换成倒计时之后也阻拦不住，这个快捷按键有影响，右下角的QQ图标也在牵动着我的心，所以我以后的模式都会是请勿打扰，只有倒计时结束之后才能看QQ，无论是谁，无论是谁他们都阻拦了我的进步，那我又为什么对于阻拦我进步的人所负责呢？当然技术支持的钱仍旧在牵动着我的心，以后每个月都有等额的钱，来花费，当然都是工作相关的，可以是买课、买书、买硬件、买装备等等，只要有利于学习的东西都可以买，每个月的钱都花出去吧，本来我打算的是不要技术支持的钱了，但想来想去发现好麻烦，只要我心里面过得去就可以了。这样想心里就舒服多了，我的心意也就通顺了很多，先尝试尝试。</p>
<p>昨天写完了五个小节的稿子，现在还差一个tabby的了，其实这些呀，都挺简单的，但是昨天晚上实际演练的时候就出现了问题，就是突然发现狂神的风格学不来呀，就是语气和语调是不对的，狂神的话就类似于日常讲话，但我这个就不太对了，这个问题很大，等写完tabby的找找问题，这就不止是讲解方式的原因了，有点难，找找问题，看看怎样解决一下。</p>
<p>如果法师找我的话，大部分的时间是直接通过口头的方式来找我，如果是果姐姐的话，我俩是面对面的，当然也会是通过面对面的方式来找我，苏姐姐更习惯于微信和我的大号，其他人的话也无所谓了，哦对，棒棒糖，以后让棒棒糖找我的微信吧，微信的消息我是乐意看的。</p>
<hr />
<hr />
<hr />
<p>写完了tabby的稿子了，晚上回家之后再录一下试试，如果仍旧是按照之前录视频的那种方式，当然可以很快的录完，昨天晚上也测试了我的设备，目前还没发现过大的问题，现在有两个事情要完成，分别是后面内容的确定以及口述方式的确定。</p>
<hr />
<hr />
<p>果然呀，有些事情只要想明白了，知道真正的原因之后就好多了，因为我想要进步，所以我在寻找我自身的问题，在寻找问题的时候，我发现工作效率低下，而且在工作中很难进入到心流状态，于是我开始深挖这里面的原因，其中工作效率低下的原因是一直想看QQ，那为什么一直想看QQ呢，是精神的谴责，是内心的希冀，是责任感的鞭挞，责任感归根结底是那100块钱而来的，但其他的呢，你以为的交流，实际上是披着天使外衣的魔鬼，在一步一步的推你走向深渊，慢性毒药，当你认识到这一点的时候，才真正的算是觉醒了，而至于责任感而来的100块钱，我并不想要，但拒绝又很过于繁琐，像我这样怕麻烦的人，以后每个月的钱都用来学习，而且我发现桌子上的表也会控制我的心绪，所以我又将表给了果姐姐，家里的那个表扔在客厅吧，时间呀，或许真的是最害人的东西呀。</p>
<hr />
<h1 id="129工作记录"><a class="markdownIt-Anchor" href="#129工作记录"></a> 1.29工作记录</h1>
<p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，并整理成网络，分享出去，与更多志同道合的朋友一起进步。==</p>
<p>==无论你想要成为一个怎样的人，千万要记住，时间在飞逝==</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>QQ打开次数</th>
</tr>
</thead>
<tbody>
<tr>
<td>上午</td>
<td>8</td>
</tr>
<tr>
<td>下午</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>先来说一下热水器的问题，当然我感觉是里面的加热管亦或者是继电器的问题，但是呢仍旧是无可避免的需要售后的问题，出钱肯定是要出钱的，但如果今天不上班的话，那损失不就更大了吗，我说的对吗？所以当今最重要的就是上好今天这一天班，还好把。</p>
<hr />
<p>目前联系的差不多了，感觉应该不会很贵，还好吧，中午这个人去的时候我看情况回一趟家吧，然后把钥匙给我弟，其他应该就没了。</p>
<hr />
<p>然后呢，今天的任务有两个，主线任务是修心，支线任务是继续写后面的稿子。</p>
<p>修心，面临的问题其实有两个，一个是无法控制的看QQ，一个是无法控制的四处点点点。</p>
<p>QQ以后就在非技术支持的时间段，通过专注时间来解决，在专注的时间内，就做专门的事情，等时间到了，可	以有五分钟的时间来四处看。而无法控制的点点点，实际上也是心不静的表现，其实也要找原因，找到问题的根本，才是真正解决一个问题的方法，其实这两个问题都是一个，不知道自己真正想要的是什么，无论是持续的看qq、还是想要打开的那些新闻、热榜，都归为一类，现在呢开始记录自己的次数，上午10次，下午15次，这是一个限制，当然因为今天是第一天，所以单纯的记录一下想要打开的次数就好了，目前我认为，虽然今天并不是强制计算的次数，但是心里已经有了相应的天平了，有了一个初步的准则，这个准则会不由自主的督促你，好像真的很有作用，那这个是不是也可以运用到你的生活中呢？</p>
<p>上面这一切其实都是在静心的前提之下的，如果能一直静心就好了，但那真的可能吗，试一试呗。</p>
<hr />
<p>大家好，这里是嵌入式Linux基础视频的第二节，在上个视频中，讲解了Linux的发展历史以及Linux所具有的优势，本节课的主要内容是对虚拟机进行介绍，这时候可能就有同学问了，我们不是要学习Linux吗，那这节课为什么要学习虚拟机呢？那是因为学习Linux需要先有一个Linux环境，而虚拟机的作用就是在windows下通过软件的方式创建一个Linux系统环境。下面对本节课要讲解的内容进行陈述，既然要使用虚拟机来创建Linux环境，那肯定需要先知道什么是虚拟机，然后了解为什么使用虚拟机，即使用虚拟机的优点.</p>
<h2 id="21-什么是虚拟机"><a class="markdownIt-Anchor" href="#21-什么是虚拟机"></a> 2.1 什么是虚拟机？</h2>
<p>虚拟机，从名字就可以看出它是一台虚拟出来的机器。与虚拟机对应的就是我们正在使用的物理计算机。一台物理机可以虚拟出来多台虚拟计算机，每台虚拟计算机都有自己的CPU、内存和操作系统，虚拟机所拥有的功能与物理计算机没有任何区别，具体可以看一下这张图，在物理计算机中通过虚拟机软件虚拟出多个虚拟机，每个虚拟机都有各自的操作系统和分配的虚拟硬件，关于虚拟机目前只需了解这些即可，然后来看为什么使用虚拟机？</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401291323524.png" alt="image-20240129132317444" /></p>
<p>虚拟机：一台虚拟出来的机器（与之对应的为物理计算机）。</p>
<p>==一台物理机可以虚拟出来多台虚拟计算机，每台虚拟计算机都有自己的CPU、内存和操作系统。==</p>
<blockquote>
<p>2.1 什么是虚拟性？</p>
<p>2.2 为什么使用虚拟机（虚拟机的优点）？</p>
</blockquote>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401291326844.png" alt="image-20240129132627768" /></p>
<h2 id="22-为什么使用虚拟机"><a class="markdownIt-Anchor" href="#22-为什么使用虚拟机"></a> 2.2 为什么使用虚拟机？</h2>
<p>wndows：简单易用，占据了桌面端绝大多数的市场（==绝大多数工作一定都是在windows操作系统上完成的==），最简单的方法是有两台物理计算机，一台装有windows操作系统、一台装有Linux操作系统，但这种方式从成本上就劝退了初学者和学生党，所以这种方式目前来看是不可取的。这时候可能就有人会提到双系统，也就是在一台物理计算机中装有两个不同的系统，在开机的时候通过BIOS进行系统之间的切换，但在实际使用中两个系统之间的切换是非常消耗时间的，其工作效率远远比不上windows系统+Linux虚拟机。综上，目前最合适的选择就是物理机安装windows操作系统，然后通过虚拟机软件在该系统上安装运行Linux操作系统的虚拟机，这里的Linux操作系统因为ui和易用性选择ubuntu操作系统。</p>
<p>至此，关于使用虚拟机的优点就讲解完成了，最后对本节视频讲解的内容进行总结，在2.1小节讲解了什么是虚拟机？虚拟机就是通过虚拟机软件虚拟出来的机器，有着自己的CPU、内存和操作系统，在2.2小节首先讲解了windows的必要性，然后列举了三种在有windows操作系统的前提下使用Linux操作系统的方法，对比之下，唯有物理机安装windows操作系统，然后通过虚拟机软件在该系统上安装运行Linux操作系统的方法最适合我们。至此，本届视频就总结完成了，会在下个小节讲解虚拟机软件VMware workstation pro的下载和安装。</p>
<hr />
<p>方法1（最简单的方法）：有两台物理计算机，一台装有windows操作系统、一台装有Linux操作系统。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401291358632.png" alt="image-20240129135830588" /></p>
<p>​	缺点：成本高，劝退学生党和初学者。</p>
<hr />
<p>方法2:双系统，在一台物理计算机中装有两个不同的系统，在开机的时候通过BIOS进行系统之间的切换。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401291407182.png" alt="image-20240129140744139" /></p>
<p>​	缺点：但在实际使用中两个系统之间的切换是非常消耗时间的，其工作效率远远比不上windows系统+Linux虚拟机。</p>
<hr />
<p>方法3:物理机安装windows操作系统，通过虚拟机软件安装运行Linux操作系统的虚拟机（因为ui和易用性这里选择ubuntu操作系统）</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401291413317.png" alt="image-20240129141357264" /></p>
<hr />
<hr />
<hr />
<hr />
<hr />
<p>大家好，这里是嵌入式Linux基础教程的第三节，在上一个视频中讲解了什么是虚拟机、以及为什么要使用虚拟机，而本小节要演示的是虚拟机软件vmware workstation pro的下载和安装。这里已经展示了详细的安装步骤，这里的笔记肯定都会发给大家，跟着笔记来就可以了，首先点击进入Vmware Workstation pro下载地址，进入Vmware Workstation官方网站之后，在该网页的最下方可以找到Vmware Workstation pro17的下载，对于虚拟机软件的版本来说，建议是越新越好，一般情况下虚拟机软件的版本都会向下兼容，等待安装包下载完成。</p>
<p>安装包下载完成之后，双击该安装包，进入安装界面，然后点击下一步。</p>
<p>然后勾选接受条款，继续点击下一步。</p>
<p>然后更改软件的安装路径，这里建议放到C盘意外的地方，修改完成之后，点击进行下一步。</p>
<p>接下来的产品更新和客户体验计划这里就保持默认即可，然后点击下一步。</p>
<p>创建桌面快捷方式和开始菜单程序文件夹也保持默认勾选，然后点击下一步。</p>
<p>最后点击安装，等待安装完成即可。</p>
<p>安装完成之后，如果有许可证可以输入许可证，没有许可证点击完成即可。没有许可证只能有30天的试用期，如果想要进行后续的使用，大家自行后续操作就行，懂得都懂。到这里vmware workstation pro 虚拟机软件的安装就完成了。会在下一小节通过刚刚安装的vmware workstation pro 虚拟机软件安装ubuntu操作系统。</p>
<hr />
<hr />
<hr />
<hr />
<hr />
<p>大家好，这里是嵌入式Linux基础教程的第四节，在上一节视频演示了虚拟机软件vmware workstation pro的下载和安装，本节视频将会演示ubuntu操作系统的获取和安装。这里已经展示了详细的安装步骤，这里的笔记肯定都会发给大家，跟着笔记来就可以了。首先点击进入ubuntu下载地址，然后点击右下角的“下载22.04.3”即可进行下载，但ubuntu官网的镜像下载可能会比较慢，所以在一般情况下都是通过国内的一些镜像网站进行下载，就比如<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/"> 清华大学开源软件镜像站</a>或者<a target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/ubuntu-releases/">中科大的开源软件镜像站</a>，这里就以清华大学开源镜像站为例进行下载演示,	从这里可以看到，最新的ubuntu版本为23.10.1，但23版本并非长期支持版本，所以我们仍旧选择22.04.03版本，点击进入之后可以看到有desktop桌面版和server服务器版两个版本供我们选择，考虑到大家都是刚接触Linux，需要图形化界面来进行简单的过度，所以这里选择desktop桌面版进行下载。</p>
<p>ubuntu系统的iso镜像下载完成之后，接下来使用Vmware workstation虚拟机软件来安装ubuntu。</p>
<p>首先打开vmware workstation pro软件，然后点击“创建新的虚拟机”</p>
<p>点击之后会进入新建虚拟机向导，这里有两个选项，一个是典型、一个是自定义，自定义里面的一些选项会更细致，所以我们这里选择自定义，然后点击下一步</p>
<p>点击之后需要选择硬件兼容性，这里保持默认最新的即可，然后点击下一步</p>
<p>点击之后会进入操作系统映像文件的选择，这里的映像文件就是刚刚下载完成的ubuntu iso文件，然后点击下一步</p>
<p>点击之后会进入安装信息设置界面，需要设置Linux系统的用户名和密码，后面在系统安装的过程中还需要再进行设置一次，设置完成之后点击下一步</p>
<p>点击之后会进入虚拟机名称和位置设置界面，修改完成之后，继续点击下一步</p>
<p>点击之后会进入处理器配置界面，这里的处理器数量和内核数量需要根据个人电脑CPU的型号来进行设置，这里填写的越高，虚拟机相应的性能也越高，当然这里的数量不能超过你实际物理机的逻辑处理器数量，可以通过任务管理器来查看自己电脑的逻辑处理器数量，设置完成之后点击下一步</p>
<p>接下来进行虚拟机内存的配置，这里的内存配置不建议超过物理机内存的百分之八十，否则会有明显的卡顿，设置完成之后点击下一步</p>
<p>点击之后会进入网络类型配置界面，这里有四种模式供我们选择，分别为桥接模式、NAT模式、仅主机模式和无网络模式，作为入门学习用户，目前我们肯定是需要虚拟机正常上网的，所以只能选择第一个桥接模式或者第二个NAT模式，两种模式的区别在于桥接模式下虚拟机会跟物理主机所在的局域网处于同一网段下，可以ping通局域网内的其他主机，而nat模式相当于将主机和虚拟机又接到了一个新的路由器上，使用一个新的网段，这时候虚拟机不能同局域网内的其他主机进行通信，当然无论是桥接模式还是nat模式都可以正常上网，目前大家只需要保证虚拟机正常上网即可，两种模式可以自由选择，我这里就选择桥接模式了，然后点击下一步</p>
<p>接下来的IO控制器类型和磁盘类型保持默认即可，磁盘选择这里选择第一个创建新虚拟机磁盘，然后点击下一步</p>
<p>点击之后会进入磁盘容量设置界面，如果仅仅是为了学习Linux基础，默认的30G的空间也就够了，但是如果想要进行后续的开发，就比如源码的编译，就需要更大的空间，看个人计算机的空间大小来分配容量即可，然后为了提高读写性能，下面选择存储为单个文件，然后点击下一步</p>
<p>接下来的磁盘文件名保持默认即可，然后点击下一步</p>
<p>至此，关于虚拟机的配置就完成了，最后点击完成即可</p>
<p>然后就会进入系统安装界面，首先是键盘布局的选择，这里保持默认的英文键盘布局即可，然后点击continue继续</p>
<p>接下来是软件的安装，我们并不需要办公软件、游戏、游戏、播放器等一系列软件，所以这里选择第二个精简系统安装，只安装web服务器和一些基础工具即可，然后点击continue继续</p>
<p>点击之后会进入，安装类型选择界面，保持默认的第一个选项即可，由于是虚拟机安装，所以这里并不会对实际的物理磁盘进行清空，点击 install now进行安装即可</p>
<p>安装过程会选择地区，这里选择上海即可，然后点击 continue继续</p>
<p>然后设置用户名称、电脑名称以及密码相关的内容，大家根据喜好自行设置即可，然后设置为自动登录，自动登录可以省去每次开机输入密码的步骤，然后点击continue继续安装</p>
<p>安装完成之后，会出现重启计算机的弹窗，重新启动系统之后，ubuntu就安装完成了。</p>
<p>至此，ubuntu系统的获取和安装就演示完成了，但这个时候的ubuntu系统语言为英文，相对于初学者并不是很友好，所以会在下个小节将ubuntu的系统语言从英文修改为中文。</p>
<hr />
<hr />
<hr />
<hr />
<hr />
<p>大家好，这里是嵌入式Linux基础教程的第五节，在上一节视频中演示了ubuntu的获取和安装，但由于安装完成的Ubuntu系统的默认语言为英文，对于我们这些初学者并不是很有友好，所以本节视频将会给大家演示如果修改系统默认语言为中文。这里已经展示了详细的安装步骤，这里的笔记肯定都会发给大家，跟着笔记来就可以了。</p>
<p>首先点击右上角的开关机按钮，找到setting设置，点击就会进入设置界面</p>
<p>然后找到地区和语言，可以看到目前的语言为英文</p>
<p>然后点击管理安装的语言</p>
<p>首先需要安装一些语言支持包，这里直接点击安装即可</p>
<p>然后将汉语从最后一位拖动到第一位，点击应用到整个系统</p>
<p>接下来重启虚拟机，虚拟机重新启动之后之后就会发现整个系统已经变成了中文了，系统在启动之后会弹出”是否保留旧名称“的弹窗，这里大家根据个人喜好设置即可，我这里选择保留旧的名称。到这里，ubuntu虚拟机就从默认的英文环境修改为了中文环境，虽然ubuntu的图形化界面对于新手十分友好，但是在实际的工作中，很少会用到图形化界面，绝大多数情况下都是通过终端来完成一系列的操作，所以一个终端软件的选择和安装也是一个必须的过程，所以会在下个视频中讲解终端软件tabby的安装和使用。</p>
<hr />
<hr />
<hr />
<hr />
<p>大家好，这里是嵌入式Linux基础教程的第6节，在上个小节中将虚拟机ubuntu从默认的英文环境修改为了中文环境，而本节视频将会讲解tabby终端软件的安装和使用。这时候可能就会有人询问了，我们为什么要使用终端软件呢？在Linux中使用命令交互的效率实际上是远远大于图形化界面的，除此之外，在实际的工作中，无论是开发板的调试还是使用公司服务器，都不会直接使用图形化界面，绝大多数情况都是使用终端软件通过SSH或者串口进行连接，所以本小节将会给大家推荐一个好用的终端软件tabby。本节视频将会分为3个部分，首先会讲解tabby的安装，r然后会在第二小节演示使用tabby通过ssh远程连接ubuntu，最后演示tabby的字体调节。</p>
<blockquote>
<p>3.1 tabby的获取和安装</p>
<p>3.2 通过ssh远程连接ubuntu</p>
<p>3.3 tabby字体调节</p>
</blockquote>
<h2 id="31-tabby的获取和安装"><a class="markdownIt-Anchor" href="#31-tabby的获取和安装"></a> 3.1 tabby的获取和安装</h2>
<p>首先来对tabby进行一下简单的介绍， Tabby是一个无限可定制的跨平台终端应用程序，适用于本地的 shell终端、串口终端、SSH终端的连接，我个人更喜欢tabby终端的窗口分割以及字体设置，相较于其他终端软件看起来更舒服。</p>
<p>在文档中已经展示了详细的 tabby安装步骤，这里的笔记肯定都会发给大家，跟着笔记来一步一步进行即可。</p>
<p>首先进入tabby软件的下载地址</p>
<h2 id="32-通过ssh远程连接ubuntu"><a class="markdownIt-Anchor" href="#32-通过ssh远程连接ubuntu"></a> 3.2 通过ssh远程连接ubuntu</h2>
<h2 id="33-tabby字体调节"><a class="markdownIt-Anchor" href="#33-tabby字体调节"></a> 3.3 tabby字体调节</h2>
<h1 id="127工作记录"><a class="markdownIt-Anchor" href="#127工作记录"></a> 1.27工作记录</h1>
<p>==无论你决定成为一个怎样的人，千万要记住，时间在飞逝==</p>
<p>目前第0节的内容已经写完了，其实后面的都很简单，我都感觉我可以明天就录完课程，哈哈，待定了，今天能写完后面的六节吗，反正今天不能，周一应该也可以。</p>
<p>突然发现，就算是写好了文档，跟讲解出来的效果也是不尽相同的，上面的只不过是黄粱一梦罢了，所以现在就该将文档与讲解的内容分隔开来，之前有过这样一个想法，那就是在讲解的过程中复现文档，但目前看来这是不可能的，就连狂神也并不是完全复现出来，不知道狂神是先写的文档还是先录的课程，我想应该是先出的文档，而后才有的教程，我是不相信有人真的这样牛，不可能什么都不备就能讲解出来的，如果换成我的话，我甚至都会斟酌每一个字，表情，语义等等，所以狂神也是先有的文档，然后根据文档的内容即兴开始的课程，我是一个初步入门的小白，我知道我并不厉害，可能也并没有人家勤奋，但是也正因为我是一张白纸，所以也就有了更多的可塑性。回归正题，既然不可能完全复现了，但课堂上的笔记必然也会是包含了绝大多数的内容，尽力即可。</p>
<hr />
<p>大家好，这里是Linux基础教程的第一节课-初识Linux，本节课可以分为三个部分，1.unix的诞生，2.GNU和Linux的发展，3.Linux的优势，相信很多人都有疑问，我们不是要讲Linux操作系统吗，这里为什么又出现了unix？可以这样说，如果没有UNIX，那Linux也就不会出现了，Linux的创作者林纳斯·托瓦兹（Linus Torvalds）正是借鉴了UNIX的设计原则和功能（并不是直接使用UNIX的源代码）设计开发出了Linux,所以本节视频会先简单讲解unix的发展历史，而GNU是一个开源项目，旨在创建一个自由、开源的类Unix操作系统，但在操作系统内核这一方面还有缺陷，正是Linux内核的加入，才真正形成了一个完整的操作系统，最后会讲解Linux操作系统的优势，而这也正是我们学习Linxu操作系统最主要的原因。</p>
<blockquote>
<p>1.unix的诞生(如果没有UNIX，那Linux也不会出现,林纳斯.托马斯正是借鉴了Unix的设计原则和功能设计开发出来的Linux)</p>
<p>2.GNU和Linux的发展（GNU是一个开源项目，旨在创建一个自由、开源的类Unix操作系统。正是Linux内核的加入，才真正形成了一个完整的操作系统）</p>
<p>3.Linux的优势（学习Linux操作系统最主要的原因）</p>
</blockquote>
<h2 id="11-unix的诞生"><a class="markdownIt-Anchor" href="#11-unix的诞生"></a> 1.1 unix的诞生</h2>
<p>现在来看第一个内容unix的诞生，在上个世纪60年代 ，美国贝尔实验室的工程师开始开发一个多用户、多任务的操作系统，然而由于该项目过于复杂，导致进展十分缓慢，贝尔实验室就退出了该项目。项目退出之后，贝尔实验室的肯.汤姆森和丹尼斯.里奇决定重新设计一个更简单、更实用的操作系统，于是在1969年，第一版的UNIX就诞生了。而在20世纪70年代，由于半导体和集成电路技术的普及，大大拉低了内存制造成本，于是C语言等高级语言的应用成为了可能，丹尼斯·里奇又着手B语言的改进，就这样我们现在熟知的C语言就诞生了，于是在此基础上肯·汤姆森和丹尼斯·里奇又对unix不断更新迭代，最终于1975年发布了Unix第6版本，第6版本的unix内核由9000行的C语言和700行的汇编语言所实现，让Unix系统的维护和修改变的容易。</p>
<hr />
<p>时间：上个世纪60年代</p>
<p>地点：美国贝尔实验室</p>
<p>目的：开发一个多用户多任务的操作系统</p>
<p>结果：由于该项目过于复杂，进展十分缓慢，贝尔实验室就退出了该项目。</p>
<hr />
<p>人物：肯.汤姆森和丹尼斯.里奇</p>
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401271507216.png" alt="image-20240127150722157" style="zoom:200%;" />
<p>目的：重新设计一个更简单、更实用的操作系统</p>
<p>结果：在1969年成功开发出了第一版的UNIX操作系统。</p>
<p>后续发展：而在20世纪70年代，由于半导体和集成电路技术的普及，大大拉低了内存制造成本，于是C语言等高级语言的应用成为了可能，丹尼斯·里奇又着手B语言的改进，就这样我们现在熟知的C语言就诞生了，于是在此基础上肯·汤姆森和丹尼斯·里奇又对unix不断更新迭代，最终于1975年发布了Unix第6版本，第6版本的unix内核由9000行的C语言和700行的汇编语言所实现，让Unix系统的维护和修改变的容易。</p>
<h2 id="12-gnu和linux的发展"><a class="markdownIt-Anchor" href="#12-gnu和linux的发展"></a> 1.2 GNU和Linux的发展</h2>
<p>然后来到第二小节GNU和Linux的发展。在20世纪70年代,末贝尔实验室的总公司AT&amp;T对UNIX操作系统的源代码的使用做出了限制，禁止将其供给学生群体使用，并收回了UNIX的版权，并不再开源，由于这一限制，广大用户和学校面临着没有操作系统可用的困境。</p>
<p>这时候一个名叫理查德·斯托曼的大佬站了出来，他对当时UNIX操作系统的私有化和限制使用感到担忧，于是决定创建一个完全由免费软件组成的类Unix计算机操作系统，这就是GNU项目。GNU项目始于1983年，GNU它是一个递归写法，意味着&quot;GNU’s Not UNIX&quot;（GNU不是UNIX），强调了GNU操作系统与UNIX的区别。GNU项目的核心是开发一系列自由软件工具，例如GNU编译器也就是我们后面会用到的GCC、GNU调试器GDB、命令行解释器GNU bash等。然而，GNU项目的发展遇到了一个重要的挑战，它缺少操作系统内核这一核心组件。</p>
<p>然后来看Linux的诞生，在1991年一个名叫林纳斯·托瓦兹（Linus Torvalds）的芬兰大学生发布了一个名为Linux的操作系统内核，Linux内核采用了类似UNIX的设计理念，具有高度的可移植性和可扩展性。最终，Linux内核与GNU项目相结合，为用户提供了一个完整而自由的操作系统，也就是我们所熟知的GNU/Linux操作系统。</p>
<p>Linux可以分为内核版本和发行版本，内核是操作系统的核心，负责管理硬件资源，并提供进程管理、内存管理等操作系统的核心功能。而发行版本是基于GNU/Linux构建的完整操作系统，包含了内核、源代码及相关应用程序。常见的发行版本有Ubuntu、Red Hat、Debian等。而由于Ubuntu的图形化界面相对于初学者更加友好，所以本套课程选用Ubuntu进行Linux的学习。</p>
<p>最后再简单陈述一下Linux的发展，在早期的时候Linux只适用于386处理器，后来经过全世界的网友的帮助，使得Linux最终能够兼容多种架构，包括x86、ARM、PowerPC等，据统计，Linux服务器占据着整个服务器市场的高达85% – 90%的份额，而数以十亿计个人手机所运行的安卓系统使用的也是Linux内核。</p>
<p>GNU/Linux操作系统的成功得益于GNU项目和Linux内核的共同努力。随着时间的推移，GNU/Linux操作系统逐渐发展壮大，并在不同领域得到广泛应用，包括个人计算机、服务器、移动设备以及嵌入式系统等。它成为了开源软件运动的重要代表之一，也促进了自由软件和开放源代码的发展。</p>
<hr />
<p>时间：20世纪70年代末</p>
<p>事情的起因：贝尔实验室的总公司AT&amp;T对UNIX操作系统的源代码的使用做出了限制，禁止将其供给学生使用，并不在开源。</p>
<p>人物：理查德.斯托曼（==对当时UNIX操作系统的私有化和限制使用感到担忧==）</p>
<p>动作：决定创建一个完全由免费软件按组成的类Unix计算机操作系统，</p>
<p>名称：GNU项目（GNU意味着&quot;GNU’s not Unix&quot;，强调了GNU和Unix的区别）</p>
<p>核心：开发一系列自由软件工具，如GNU编译器（GCC）、GNU调试器（GDB）、命令行解释器GNU bash等。</p>
<p>挑战：缺少操作系统内核这一核心组件。</p>
<hr />
<p>时间：1991年</p>
<p>人物：林纳斯.拖瓦兹</p>
<p>事件：发布了一个名为Linux的操作系统内核（采用了Unix的设计理念，具有高度的可移植性和可扩展性）</p>
<p>最终结果：Linux内核与GNU项目相结合，为用户提供了一个完整而自由的操作系统（<strong>GNU/Linux操作系统</strong>）。</p>
<hr />
<p>==Linux可以分为内核版本和发行版本。==</p>
<ul>
<li>内核版本：是操作系统的核心、负责管理硬件资源并提供进程管理、内存管理等操作系统的核心功能。</li>
<li>发行版本：是基于GNU/Linx构建的完整操作系统，包含了内核、源代码以及相关应用程序，常见的发行版本有<strong>Ubuntu</strong>、red hat、debian等。</li>
</ul>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401271618745.png" alt="image-20240127161852653" /></p>
<p>由于Ubuntu的图形化界面相对于初学者更加友好，所以本套课程选用ubuntu进行Linux的学习。</p>
<hr />
<p>==Linux的发展==</p>
<p>早期：Linux只适用于386处理器</p>
<p>发展：后来经过全世界的网友的帮助，使得Linux最终能够兼容多种架构，包括x86、ARM、PowerPC等。</p>
<p>结果：Linux服务器占据了如今整个服务器市场的高达85% – 90%的份额，而数以十亿计个人手机所运行的安卓系统使用的也是Linux内核。</p>
<h2 id="13-linux的优势"><a class="markdownIt-Anchor" href="#13-linux的优势"></a> 1.3 Linux的优势</h2>
<p>最后对Linux操作系统所具有的优势进行陈述，正是因为LInux具有其他系统所没有的优点，所以我们才能聚在这里学习Linxu基础。</p>
<p>Linux最重要的优点为开源免费，即用户可以免费获取和使用Linux而无需支付额外的费用。第二点为稳定性和可靠性，由于Linux的开源特性，Linux得到了广泛的测试、审查和改进，可以长时间运行而且不容易崩溃或故障，并且具有极高的安全性。第三点为硬件兼容性，Linux系统可以运行在多种硬件平台上，第四点为高度可定制性，用户可以根据自己的需求和偏好进行自定义配置，这使得服务器或者嵌入式设备通过定制Linux系统从而运行在各种不同的应用场景，最后一点是Linux具有很好应用生态系统，Linux开源社区提供了各种开源软件和工具，用户可以充分利用已有的软件资源，无需从头开发，除此之外Linux社区还提供了广泛的资料和支持文档，可以帮助用户轻松解决问题。</p>
<ol>
<li>
<p>免费开源：用户可以免费获取和使用Linux而无需支付额外的费用。</p>
</li>
<li>
<p>稳定性、可靠性和安全性：由于Linux的开源特性，Linux得到了广泛的测试、审查和改进，可以长时间运行而且不容易崩溃或故障，并且具有极高的安全性。</p>
</li>
<li>
<p>硬件兼容性：Linux系统可以运行在多种硬件平台上。</p>
</li>
<li>
<p>高度可定制性：用户可以根据自己的需求和偏好进行自定义配置，这使得服务器或者嵌入式设备通过定制Linux系统从而运行在各种不同的应用场景。</p>
</li>
<li>
<p>应用生态系统：Linux开源社区提供了各种开源软件和工具，用户可以充分利用已有的软件资源，无需从头开发，除此之外Linux社区还提供了广泛的资料和支持文档，可以帮助用户轻松解决问题。</p>
</li>
</ol>
<hr />
<p>到这里，嵌入式Linux基础教程中的第一节内容就讲解完成了，现在对讲解的内容进行回顾，在1.1小节中讲解了unix的诞生，贝尔实验室的肯·汤姆森和丹尼斯·里奇在1969年开发出了一种名为unix的操作系统，而我们要学习的Linux正是借鉴了Unix的设计原则和功能设计开发出来的，然后来看1.2小节GNU和Linux的发展，Unix不再开源之后理查德·斯托曼发起了一个名为GNU的项目，该项目的核心是开发一系列自由软件工具，但是因为缺少操作系统内核，所以GNU的发展遇到了障碍，在1991年林纳斯·托瓦兹发布了一个名为Linux的操作系统内核，该内核采用了类似Unix的设计理念，具有高度的可移植性和可扩展性，所以GNU项目和Linux内核相结合，形成了一个完整而自由的GNU/Linux操作系统，得益于开源的优势，Linux在全世界网友的帮助下，最终兼容了多种架构，现如今绝大多数的服务器、嵌入式设备以及手机的安卓系统所使用的都是Linux内核，最后是1.3小节 Linux的优势，Linux可以将优点总结为五个方面，分别是开源免费，与其他系统相比具有更好的稳定性、可靠性和安全性，具有硬件兼容性，可以运行在多种架构的硬件平台上，具有高度的可定制性，用户可以根据需求进行系统的自定义，从而适用于不同的应用场景，最后是Linux具有良好的应用生态，可以充分利用现有的软件资源和帮助文档，更好的进行后续的开发。</p>
<p>至此，第一节视频的总结就完成了，会在下个小节对虚拟机进行介绍，我们下个视频见。</p>
<h1 id="126工作记录"><a class="markdownIt-Anchor" href="#126工作记录"></a> 1.26工作记录</h1>
<p>==我希望用一生的时间不断学习和深入电子计算机行业的一切知识，并将其整理为网络，分享出去，与更多志同道合的朋友一起进步。==</p>
<p>==无论你最后想要成为一个怎样的人，千万要记住，时间再飞逝。==</p>
<p>昨天晚上和今天早上进行了反思，也算是找到了我焦虑的源头，那从今天开始，就重新回到Linux基础的任务上来，也不要求你继续向后写对应的内容，只是开始写前面的稿子，从行为上进行演练。只有开始之后才能真正的解决我当前的焦虑。那开始吧。</p>
<p>在工作之余，也要适当的总结，怎样才能在技术支持的时候有最好的耐心，并且不会耽误正常的工作，目前</p>
<hr />
<p>第一节视频，肯定是总领，学习大纲之类的东西，但是由于我目前也没有一个完整的章程或者一个我想象中一个较为优秀的框架，所以我本来打算是先跳过这一节的，但是刚刚又转念一想，可以直接从总领开始的，因为虽然没有一个整体的框架，但至少一大半的框架是有的，所以直接从最开始的来就行了，能写到哪里就写道哪里,而写不出来的，就是后面要填充的内容。</p>
<p>先来陈述第一个视频的大体概述，第一个问题，是只介绍linux基础要讲解的内容呢，还是要将后面的系统编程、QT、camke、makefile等内容都大致的提一下呢？目前的想法是不提，因为你自己也不确定，到底能不能讲到后面，不是吗，所以在这一小节只需要介绍本期视频讲解的内容即可。</p>
<hr />
<p>大家好，欢迎来到北京迅为电子推出的全新嵌入式Linux基础教程！在2020年，我们发布了嵌入式学习Linux入门篇，而如今四年过去了，嵌入式Linux相关的知识也日新月异，过去的内容可能已经不再适应当前的需求和趋势，所以迅为决定推陈出新，录制一个全新的、更容易让初学者所接受的Linux基础教程。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401261052117.png" alt="image-20240126105205038" /></p>
<p>本节视频是嵌入式Linux基础教程的第0节，属于整期视频的总领部分，在本节视频中会对整期视频的内容进行简单的概括，在学习之前先有一个初步的认识，从而更有利于后面的学习。</p>
<p>第一节可以总结为“初识Linux”。既然我们要学习Linxu，首先肯定要了解Linux是什么，Linux又有哪些优点，这里的优点又可以换个描述方式，也就是我们为什么要学习Linux，我们不正是因为Linux有着其他系统所不具备的优势才来学习Linxu的吗。</p>
<p>在初步认识Linux之后，我们第二节的内容为虚拟机的介绍，这时候可能就有同学问了，我们不是已经知道什么是Linux了吗，下一步不应该进行Linux的学习吗，别急，要学习Linux我们需要先有一个Linux环境，那Linux环境是怎样搭建的呢，这就要用到上面提到的虚拟机了，所以在第二小节会讲解虚拟机是什么，以及我们为什么要使用虚拟机来搭建Linux环境？</p>
<p>在了解了什么是虚拟机之后，后面当然是使用虚拟机来搭建Linux环境了，所以第三节的内容为虚拟机软件vmware workstation pro的下载和安装，紧跟着的第四节为获取并安装ubuntu操作系统，这里简单提一下ubuntu系统是Linux的常用发行版之一，有着极为友好的图形用户界面，适合早期的入门学习。</p>
<p>ubuntu系统安装完成之后，默认的系统语言为英文，对于初学者来说并不友好，所以第五节内容为修改ubuntu系统语言为中文。</p>
<p>到这里用于学习的ubuntu环境就搭建完成了，而在实际的工作中，很少会用到图形化界面，绝大多数情况下都是通过终端来完成一系列的操作，所以在第六节会给大家推荐一款名为tabby的终端软件，讲解tabby的安装和使用，tabby是我目前感觉ui、字体以及功能最优秀的一个终端软件，所以极力推荐给大家。</p>
<p>接下来就真正的进入到Linux学习阶段了，==后面的内容还在规划，等一等==</p>
<hr />
<h1 id="125-工作记录"><a class="markdownIt-Anchor" href="#125-工作记录"></a> 1.25 工作记录</h1>
<p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，并将其整理为网络，分享出去，与更多志同道合的朋友一起进步。==</p>
<p>==无论你最后想要成为一个怎样的人，千万要记住，时间在飞逝。==</p>
<hr />
<p>对于读书就先到这里了，很多思想都不是突然就明白的，而是一个循序渐进的过程，现在要做的就是对书中的内容进行整理、总结、反思和实践，最先要确定的是属于自己的、立在心中的一个目标。当然仅仅只有一个目标是不够的，你仍是要忍受外界的诱惑，脱离了外部的实际只有空想，那当时是不可能成的，所以我看到了娱乐至死，当娱乐和网络连结成了一个不可分割的事务，那整个时代又会是怎样的腐朽不堪呢，而我们个人又永远不可能脱离时代，独自活着，所以我应用屏蔽插件，尽可能的屏蔽一切有关娱乐的东西，就像这样。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401250945787.png" alt="image-20240125094550591" /></p>
<p>只有搜索，然后对于一些需要的网页，直接上对应的链接和图标，而哔哩哔哩的主页，乱花渐欲迷人眼，只要进入就会混乱，出现很多问题，除此之外，还屏蔽了搜索的历史，右边的推送，上面的传送门等等，都是用来克制娱乐化的一系列手段，如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401250952960.png" alt="image-20240125095250754" /></p>
<p>当你获取到的内容毫无用处，你还会想继续吗，接下来的是美丽新世界，所以当你真正直面自己欲望之后，你会发现那些可耻的快感并不值得你蹉跎一生。</p>
<hr />
<p>行了，然后回到工作中来，上面都是关于最近的一些认识，然后继续昨天的学习，昨天开始分析input框架的由来，但是有一些C语言的基础我还并不是很懂，所以先去学习对应的C语言知识。</p>
<hr />
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">input_handler</span> <span class="title">evdev_handler</span> =</span> &#123;</span><br><span class="line">	.event		= evdev_event,</span><br><span class="line">	.events		= evdev_events,</span><br><span class="line">	.connect	= evdev_connect,</span><br><span class="line">	.disconnect	= evdev_disconnect,</span><br><span class="line">	.legacy_minors	= <span class="literal">true</span>,</span><br><span class="line">	.minor		= EVDEV_MINOR_BASE,</span><br><span class="line">	.name		= <span class="string">&quot;evdev&quot;</span>,</span><br><span class="line">	.id_table	= evdev_ids,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> __init <span class="title function_">evdev_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> input_register_handler(&amp;evdev_handler);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>问题1： struct input_handler evdev_handler 这个结构体定义我就不是很懂，按照我昨天晚上学习的情况来看struct后面是跟的类型，就比如这个样子：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这个我懂呀Person包含name和age两个，那struct input_handler evdev_handler是啥呢？我可能知道了，我靠，这个地方我可能懂了，这个地方并不是结构体的定义，而是他喵的结构体的使用,而input_handler是已经在其他地方定义，然后在input.h中找到了他的定义，如下所示：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">input_handler</span> &#123;</span></span><br><span class="line"></span><br><span class="line">	<span class="type">void</span> *private;</span><br><span class="line"></span><br><span class="line">	<span class="type">void</span> (*event)(<span class="keyword">struct</span> input_handle *handle, <span class="type">unsigned</span> <span class="type">int</span> type, <span class="type">unsigned</span> <span class="type">int</span> code, <span class="type">int</span> value);</span><br><span class="line">	<span class="type">void</span> (*events)(<span class="keyword">struct</span> input_handle *handle,</span><br><span class="line">		       <span class="type">const</span> <span class="keyword">struct</span> input_value *vals, <span class="type">unsigned</span> <span class="type">int</span> count);</span><br><span class="line">	<span class="type">bool</span> (*filter)(<span class="keyword">struct</span> input_handle *handle, <span class="type">unsigned</span> <span class="type">int</span> type, <span class="type">unsigned</span> <span class="type">int</span> code, <span class="type">int</span> value);</span><br><span class="line">	<span class="type">bool</span> (*match)(<span class="keyword">struct</span> input_handler *handler, <span class="keyword">struct</span> input_dev *dev);</span><br><span class="line">	<span class="type">int</span> (*connect)(<span class="keyword">struct</span> input_handler *handler, <span class="keyword">struct</span> input_dev *dev, <span class="type">const</span> <span class="keyword">struct</span> input_device_id *id);</span><br><span class="line">	<span class="type">void</span> (*disconnect)(<span class="keyword">struct</span> input_handle *handle);</span><br><span class="line">	<span class="type">void</span> (*start)(<span class="keyword">struct</span> input_handle *handle);</span><br><span class="line"></span><br><span class="line">	<span class="type">bool</span> legacy_minors;</span><br><span class="line">	<span class="type">int</span> minor;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *name;</span><br><span class="line"></span><br><span class="line">	<span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">input_device_id</span> *<span class="title">id_table</span>;</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list_head</span>	<span class="title">h_list</span>;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list_head</span>	<span class="title">node</span>;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>程序示例2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">p</span> =</span> &#123;</span><br><span class="line">        .name = <span class="string">&quot;John&quot;</span>,</span><br><span class="line">        .age = <span class="number">25</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Person&#x27;s name: %s\n&quot;</span>, p.name);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Person&#x27;s age: %d\n&quot;</span>, p.age);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401251026696.png" alt="image-20240125102630642" /></p>
<p>这种方式是使用结构体初始化器，并通过成员名字来指定赋值。具体来说，这个语法使用了结构体成员的初始化器（Member Designator）来指定每个成员的赋值。</p>
<p>在这个例子中，结构体 <code>Person</code> 的变量 <code>p</code> 被初始化为一个新的 <code>Person</code> 对象。通过使用成员初始化器，可以直接指定每个成员的赋值。在花括号 <code>&#123;&#125;</code> 内，通过成员名字和赋值表达式来指定每个成员的初始值。</p>
<p>所以，这段代码的含义是创建一个名为 <code>p</code> 的 <code>Person</code> 结构体对象，其中成员 <code>name</code> 被赋值为 <code>&quot;John&quot;</code>，成员 <code>age</code> 被赋值为 <code>25</code>。这种方式可以更明确地指定每个成员的值，而不依赖于成员的定义顺序。</p>
<p>除此之外还有其他平常的赋值方法，具体如下所示：</p>
<ol>
<li>
<p>逐个赋值：可以使用点运算符 <code>.</code> 来逐个赋值结构体的成员。例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">p</span>;</span></span><br><span class="line"><span class="built_in">strcpy</span>(p.name, <span class="string">&quot;John&quot;</span>);</span><br><span class="line">p.age = <span class="number">25</span>;</span><br></pre></td></tr></table></figure>
<p>这种方式需要逐个对每个成员进行赋值。</p>
</li>
<li>
<p>使用结构体初始化器：可以在定义结构体变量时使用结构体初始化器来初始化成员。例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">p</span> =</span> &#123;<span class="string">&quot;John&quot;</span>, <span class="number">25</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>这种方式在定义结构体变量的同时给成员赋值，按照定义结构体时的成员顺序进行初始化。</p>
</li>
<li>
<p>通过指针访问成员进行赋值：可以使用指针来访问结构体的成员，并进行赋值。例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">p</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> *<span class="title">ptr</span> =</span> &amp;p;</span><br><span class="line"><span class="built_in">strcpy</span>(ptr-&gt;name, <span class="string">&quot;John&quot;</span>);</span><br><span class="line">ptr-&gt;age = <span class="number">25</span>;</span><br></pre></td></tr></table></figure>
<p>这种方式通过指针 <code>ptr</code> 访问结构体 <code>p</code> 的成员，并进行赋值。</p>
</li>
</ol>
<p>行了现在稍微懂了。</p>
<h2 id="函数指针"><a class="markdownIt-Anchor" href="#函数指针"></a> 函数指针</h2>
<p>函数指针是一种特殊的指针类型，在C语言中用于存储和调用函数的地址。函数指针允许程序在运行时动态地选择要调用的函数，从而增加了程序的灵活性和可扩展性。</p>
<p>在C语言中，函数本质上是一段代码，可以通过函数名来调用。而函数指针则允许我们将函数的地址存储在一个指针变量中，以便在需要时进行调用。</p>
<p>函数指针的声明包括以下几个要素：</p>
<ol>
<li>返回类型：指定了函数指针所指向函数的返回值的类型。</li>
<li>指针名：用于标识函数指针变量的名称。</li>
<li>参数列表：指定了函数指针所指向函数的参数类型和顺序。</li>
</ol>
<p>一般函数指针的声明形式为：<code>return_type (*pointer_name)(parameter_list)</code>。</p>
<p>下面我们将通过一个示例来详细解释函数指针的用法。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一个函数指针类型</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="title function_">int</span> <span class="params">(*Operation)</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加法函数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 减法函数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">subtract</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 乘法函数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">multiply</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 除法函数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">divide</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 声明一个函数指针变量</span></span><br><span class="line">    Operation operation;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将函数指针指向加法函数</span></span><br><span class="line">    operation = add;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用函数指针调用加法函数</span></span><br><span class="line">    <span class="type">int</span> result = operation(<span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Addition result: %d\n&quot;</span>, result);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将函数指针指向乘法函数</span></span><br><span class="line">    operation = multiply;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用函数指针调用乘法函数</span></span><br><span class="line">    result = operation(<span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Multiplication result: %d\n&quot;</span>, result);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，我们首先定义了四个函数：<code>add</code>、<code>subtract</code>、<code>multiply</code> 和 <code>divide</code>，它们分别执行加法、减法、乘法和除法操作。</p>
<p>然后，我们声明了一个函数指针类型 <code>Operation</code>，它指向一个返回类型为 <code>int</code>，参数列表为两个 <code>int</code> 类型的函数。</p>
<p>接下来，在 <code>main</code> 函数中，我们声明了一个 <code>Operation</code> 类型的函数指针变量 <code>operation</code>。</p>
<p>我们将 <code>operation</code> 指针赋值为 <code>add</code> 函数的地址，即 <code>operation = add;</code>。此时，<code>operation</code> 指向了 <code>add</code> 函数。</p>
<p>然后，我们使用函数指针调用 <code>add</code> 函数，即 <code>int result = operation(5, 3);</code>。这实际上会调用 <code>add</code> 函数并返回结果，将结果存储在 <code>result</code> 变量中。</p>
<p>同样的步骤，我们将 <code>operation</code> 指针赋值为 <code>multiply</code> 函数的地址，并使用函数指针调用 <code>multiply</code> 函数。</p>
<p>通过函数指针，我们可以在运行时根据需要选择要调用的函数，从而实现代码的动态性和灵活性。</p>
<p>需要注意的是，函数指针的类型必须与所指向函数的类型匹配。也就是说，函数指针的返回类型和参数列表必须与所指向函数的返回类型和参数列表相同或兼容。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">input_handler</span> <span class="title">evdev_handler</span> =</span> &#123;</span><br><span class="line">	.event		= evdev_event,</span><br><span class="line">	.events		= evdev_events,</span><br><span class="line">	.connect	= evdev_connect,</span><br><span class="line">	.disconnect	= evdev_disconnect,</span><br><span class="line">	.legacy_minors	= <span class="literal">true</span>,</span><br><span class="line">	.minor		= EVDEV_MINOR_BASE,</span><br><span class="line">	.name		= <span class="string">&quot;evdev&quot;</span>,</span><br><span class="line">	.id_table	= evdev_ids,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>所以evdev_event是一个函数名称，要赋值给input_handler结构体中的函数指针event，现在可能是懂了，然后继续向后学习。</p>
<h1 id="124-工作记录"><a class="markdownIt-Anchor" href="#124-工作记录"></a> 1.24 工作记录</h1>
<p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，并将其整理为网络，分享出来，与更多志同道合的朋友一起进步。==</p>
<p>==无论你最后想要成为怎样的人，千万要记住，时间在飞逝。==</p>
<p>​	挺有感触的，娱乐至死，娱乐、至死，up的一系列总结像一根根刺一样扎入我的思想，于是开始反思，开始醒悟，开始想着改变自己，但一切都不是一蹴而就的，要努力，要适应，要开始，带着新生的枝桠，向前走呀。</p>
<p>问题1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">input_handler</span> <span class="title">evdev_handler</span> =</span> &#123;</span><br><span class="line">	.event		= evdev_event,</span><br><span class="line">	.events		= evdev_events,</span><br><span class="line">	.connect	= evdev_connect,</span><br><span class="line">	.disconnect	= evdev_disconnect,</span><br><span class="line">	.legacy_minors	= <span class="literal">true</span>,</span><br><span class="line">	.minor		= EVDEV_MINOR_BASE,</span><br><span class="line">	.name		= <span class="string">&quot;evdev&quot;</span>,</span><br><span class="line">	.id_table	= evdev_ids,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> __init <span class="title function_">evdev_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> input_register_handler(&amp;evdev_handler);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>分析 input_register_handler 是一个函数，传入的是evdev_handler的地址，而evdev_handler是一个结构体，其实对于结构体相关的内容我也不是很清楚虽然我学了很多次了，但说实话真的很不好，你懂我的意思吧。</p>
<p><code>struct</code>是C语言中的关键字，用于定义自定义的数据类型，可以将多个不同类型的变量组合在一起形成一个结构体，从而创建一个包含多个成员的复合数据类型。</p>
<p><code>struct</code>是C语言的关键字，用于定义自定义的数据类型，可以将多个不同类型的变量组合在一起形成一个结构体，从而创建一个包含多个成员的符合数据结构类型。</p>
<p>结构体的定义通常包括以下几个部分：</p>
<ol>
<li><code>struct</code>关键字：用于声明一个结构体类型</li>
<li>结构体标签：用于表示结构体类型的名称，可以在定义时指定，也可以忽略</li>
<li>成员列表：定义结构体的成员，每个成员包括类型和名称</li>
</ol>
<p>结构体的定义通常包括以下几个部分：</p>
<ol>
<li><code>struct</code>关键字：用于声明一个结构体类型。</li>
<li>结构体标签：用于标识结构体类型的名称，可以在定义时指定，也可以省略。</li>
<li>成员列表：定义结构体的成员，每个成员包括类型和名称。</li>
</ol>
<p>下面是一个简单的示例，展示了如何使用<code>struct</code>定义一个包含姓名和年龄的人员信息结构体：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">struct Person &#123;</span><br><span class="line">    char name[50];</span><br><span class="line">    int age;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在上面的示例中，<code>struct</code>关键字用于定义一个名为<code>Person</code>的结构体类型。该结构体有两个成员：<code>name</code>和<code>age</code>，分别表示人员的姓名和年龄。</p>
<p>定义结构体后，就可以声明结构体变量并使用它们，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">struct Person person1;</span><br><span class="line">struct Person person2;</span><br><span class="line"></span><br><span class="line">strcpy(person1.name, &quot;John Smith&quot;);</span><br><span class="line">person1.age = 30;</span><br><span class="line"></span><br><span class="line">printf(&quot;Person 1: Name = %s, Age = %d\n&quot;, person1.name, person1.age);</span><br><span class="line"></span><br><span class="line">person2 = person1;  // 结构体变量之间可以进行赋值操作</span><br><span class="line"></span><br><span class="line">printf(&quot;Person 2: Name = %s, Age = %d\n&quot;, person2.name, person2.age);</span><br></pre></td></tr></table></figure>
<p>在上面的示例中，我们声明了两个<code>Person</code>类型的结构体变量<code>person1</code>和<code>person2</code>。然后，我们使用<code>strcpy</code>函数将字符串&quot;John Smith&quot;复制到<code>person1</code>的<code>name</code>成员中，并将30赋值给<code>person1</code>的<code>age</code>成员。最后，我们打印了<code>person1</code>和<code>person2</code>的姓名和年龄。</p>
<p>结构体变量的成员可以通过<code>.</code>运算符来访问，即<code>结构体变量名.成员名</code>。可以像访问普通变量一样访问结构体变量的成员。</p>
<p>使用结构体可以更好地组织和管理相关数据，将多个相关的数据打包在一起，方便进行传递和处理。结构体还可以嵌套定义，允许在一个结构体中包含另一个结构体作为成员，从而形成更复杂的数据结构。</p>
<h1 id="123-工作记录"><a class="markdownIt-Anchor" href="#123-工作记录"></a> 1.23 工作记录</h1>
<p>昨天请了一天的假，感觉良好，但你让我今天再重复昨天，我想我是不乐意的，昨天的问题仍旧还有很多，但作为改变的第一天，仍旧可以接受，只需要一天比一天进步就行了，然后其他的就继续慢慢的探索吧。</p>
<p>在公司遵守昨天写的那四个规定，有时间一定要注意时间，用最大的时间来等待，规定的时间看qq，手机远离，其他的等需要的时候再补充。</p>
<p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，并将其整理成网络，分享出来，与更多志同道合的朋友一起进步==</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401230923713.png" alt="image-20240123092314586" /></p>
<p>有了一个崇高的追求之后，自然而然就有了为之努力的动力，如果不能，那就是这个追求还并没有刻骨铭心。</p>
<hr />
<p>今天的任务有不少，罗列一下：</p>
<ol>
<li>年终总结</li>
<li>本周计划</li>
<li>课程完成步骤整理</li>
</ol>
<p>年终总结确实是要写一下，其实现在倒是挺困难的，年终总结我都不晓得做过啥了，工作记录啥的倒也是有，但仍旧是无法提取内容，看大致的看一下时间线。</p>
<p>上半年，一直持续到了七月一直再看ai的视频，但以目前的眼光来看，这是完全不对的，当然对于那时候的我来说确实很可以了，半年的时间如果让我沉下心来学习，其实能学好多的东西了，所以这些其实是正常水平，但我仍旧相信，我们这些人对于ai的认识还是太短浅了，无论是从认识的深度还是广度来说，都是很有问题的，还是精力分配的问题，而人们的目光总是具有一定的局限性，无论是谁，其实这些吧可以自洽就行了。</p>
<p>当然在上半年的期间还重新写了一遍系统编程的手册，对于现在的我来说，这些当然仍旧是漏洞百出，问题很大，有很多的东西现在我其实也并没有真的认识到，只能说越学习，越深入只会感觉自己越渺小，要学习的可真的太多了，打算等后面录制到系统编程这一阶段课程的时候，可以有新的认识。</p>
<p>然后就是两个月的驱动手册编写了，对于驱动这个地方，问题也挺大的，还是学习的不深入，并没有一个自己的理解，还有很多相关的知识点的认识还仅仅停留在表面上，并没有形成一个专属于自己的框架，这是后面不断努力的一个方向。</p>
<p>其他绝大多数时间都在完善ubuntu和debian文件系统的构建，这就设计到了很多的方面，包括编译脚本的完善，那些RK专属特性功能的移植，就比如GPU加速、VPU编解码、RGA 图形加速单元等等，都增长了关于系统这方面的理解，当然目前的理解仍旧还停留在表面上，现在也仅仅是知道这些特性的功能是怎样的，如何让它们在自己构建的ubuntu系统上正常使用，但是对于更深层次使用就不仅仅是这样了，无论是编解码、GPU还是RGA，要想真正的使用他们，仍有花费更多的功夫，希望明年有机会接触到这些。</p>
<hr />
<p>又一年过去了，感觉一年的时间过的真的太快了。</p>
<p>回顾过去的一年，上半年一直在学习人工智能相关的知识并录制RKNPU视频，当时还感觉做的还可以，但从现在的眼光来看，里面有问题的地方还挺多的，不论是从讲解的风格上、还是讲解的技巧上都有很多改进的地方，这也说明那时候对人工智能的认知还是不太对，无论是在深度还是广度上，都存在问题。而接下来要录制的Linux基础视频就应该用一种新的、更容易让客户接受和理解的风格。</p>
<p>除此之外，在上半年期间，还重新编写了系统编程手册，现在来看的花，系统编程的手册仍然存在许多漏洞和问题，可能当时的自己以为理解了，而实际上理解的并不够，每个阶段都有每个阶段的看法，学习的越多越感觉之前的问题越多，一点点慢慢的解决吧，等后面录制系统编程阶段的视频时，应该又能有新的认识和理解。</p>
<p>接下来，花了两个多月的时间编写驱动手册。在编写驱动手册的过程中，我也遇到了很多问题，仍旧是感觉学习的还不够深入，对于驱动的理解还没有形成一个属于完整的框架，对于很多相关知识点的认识仅限于表面，可能看到它的时候会认识，但是实际使用的时候根本想象不到还有这个内容，所以仍旧是需要后续不断努力，朝着更深入的方向学习。</p>
<p>剩下绝大部分时间都用来完善 Ubuntu 和 Debian 文件系统的构建。最主要的内容就是编译脚本的改进和移植 RK（Rockchip）平台的专属功能，编译脚本这里尽可能的写的规范，并添加详细的中文注释，方面后续文件系统构建手册的编写以及对应视频的录制，然后是一系列的特性例如 GPU 加速、VPU 编解码、RGA 图形加速单元等。这些特性方面增强了我对系统方面的理解，同样的目前对于这些的理解仍然较为表面。我现在只知道这些特性的功能是如何在自己构建的 Ubuntu 系统上正常使用它们，但要想更深入地使用编解码、GPU 或 RGA 等功能，仍需付出更多努力。希望明年有机会能更深入地探索这些领域。</p>
<p>上面就是一年完整的事件记录，其他零零散散的事情就不再陈述了。明年，我希望能在目前的基础上继续学习，加深对于上述相关知识的认识，然后整理成相应的网络，提升自己。</p>
<hr />
<p>本周的工作任务和年终总结写完了，然后就是继续整理Linux基础的后续路线了，我认为以后不管要做的是什么，都应该要符合逻辑和因果，逻辑正确才是我做人任何事情的核心，就以昨天一天的事情为例来总结，为什么昨天能请一天假呢？是因为前天有一个up主的观点深刻的影响了我，我认为能从up主这里获得救赎，但是实际上呢，白天或许真的救赎了，但是晚上的时候仍旧是出现了问题，还是自身意志力的因，将手机带出去了，并且还看了一下子小说，所以就导致浪费了两个多小时的时间，不，也不止两个小时，除了看小说的时间，还有着在电脑前刷哔哩哔哩的时间，所以目前看来意志力是有限度的，当我在家学习了一天之后。</p>
<hr />
<p>看来一下多巴胺，然后我就发现作者所看的书好像他自己的一个探索的过程呀，将自己的观点进行输出，完善自己的科学价值体系，真的就很厉害了，而我从里面要学习到的，是人家不断深入、不断探索，最终还能给人们讲出来的这种品格，这真的是人家的三观的具体体验，而我呢？还在慢慢慢慢的探索，一个道理的收获当然不仅仅是学习到了就行了，更重要的还是实际的所做所为。</p>
<hr />
<p>就这样吧，我可以确定以及肯定当前的大方向肯定是没问题的，我所说的大方向是当前的这种录视频的方式以及内容之间的逻辑性，就目前来看是没问题的，今天下午开始继续看法师的视频，然后整理，感觉法师的视频总是一些讲解的内容，目前给我的感觉是不难写，其他的待定。</p>
<h1 id="121-工作记录"><a class="markdownIt-Anchor" href="#121-工作记录"></a> 1.21 工作记录</h1>
<hr />
<hr />
<p>不好搞呀，这个压缩的这个想法就先这样吧，不是很容易，浪费一点时间就浪费一点时间吧，主要是还要改脚本，这可真的是太难了。</p>
<p>行了，玩了一天了，也该学习学习了，昨天也重申了一下学习的第一要义，而且法师也说了要了一切在于开始，只要开始了，那一切的设想就都会落在地上，必须要早日开始了，但这也仍旧不能阻拦我的开始。</p>
<hr />
<h1 id="120-工作记录"><a class="markdownIt-Anchor" href="#120-工作记录"></a> 1.20 工作记录</h1>
<p>找找问题好吧，先来简单的叙述一下当前遇到的问题吧，那就是心静不下来了，而且还找不到真正的原因,可能在过程中的我还看不清楚，但是当我不在局中的时候就看到了问题所在，在家的时候因为要看哔哩哔哩，这就导致了，有很大的一部分时间都会花在那些华丽花哨、云里雾里的哔哩哔哩首页，其实很早之前就已经察觉到了，这些首页的东西才是真正害人的东西，你永远也不知道下一个会刷出来什么东西，所以无可避免的就会一直期待着下一页的故事。所以接下来的第一个要改变的东西就是关于哔哩哔哩，既然首页会吸引你，那么就继续将哔哩哔哩的首页给屏蔽呗，这真的是一个很好的选择，而且不会分心。</p>
<p>第二个问题已经解决了其实，那就是在上班的时候会一直看手机，手机这个东西又会给人一种负反馈，而且会时时刻刻的想要看一眼，当手机不在桌子上的时候，就自然而然减少了看的欲望，所以对于我来说唯有从根源上才能解决，这里就先这样了。</p>
<p>第三个问题，现在看视频的时候，总给人一种特别快感觉，根本就沉不住气，你懂这个感觉吗，无论是王老师的视频还是哔哩哔哩上一些老师的视频，亦或者是那些短视频都已经不能真正的沉下心来看了，而且这个是无分在哪里的视频的，无论是下载好的视频，还是在线的网络视频，都有着很大的问题，而且在看的时候很容易就分心了，就比如昨天晚上的时候就一直在看小说，这就导致效率真的极其低下，当然你也是知道的，这样肯定是不对的，但仍旧是改不了这个臭毛病，现在想到的办法是无论看什么视频都要写相应的笔记，是的，无论什么，只有强制才能真的有作用，否则对于你来说，就是没有丝毫限制的，你懂吗，行了，今天的反思就这样了，然后就该开始今天的工作了，中午也不会再看哔哩哔哩了，确实很浪费时间，亦或者回个家？好像也不是不行。</p>
<hr />
<p>开始看视频了，在学一个东西之前我总是要知道要学的这个东西是什么对吧，而且不管是啥，我自己肯定也会对这个东西有一个基本的认知，就算之前没学习过，也应该会有相应的认识才对，不然为啥要学这个东西呢？今天是学习一个东西的第一个开始，肯定要应该有对应的章程才对。</p>
<ol>
<li>要学习的是什么？</li>
<li>为什么要学习它？</li>
<li>要怎样学习它？</li>
</ol>
<p>经典的三个问题，是什么、为什么以及怎么做，这三个问题真的贯穿了好多</p>
<hr />
<p>3588的触摸出现问题了，研究解决一下，但还好吧，可以听听音乐了。</p>
<p>问题解决了，是我的编译脚本出问题了，很尴尬，打包和上传又要耗费很长的时间，唉，继续回到法师的视频上面来。</p>
<hr />
<p>问题1：要学习的是什么？</p>
<p>第13期的视频名称是输入子系统，我对于输入子系统的概念还停留在最初的记忆，也就是cat /proc/bus/input/devices 我只知道可以通过这个来获取输入子系统的设备，然后在dev目录下有对应的event节点，通过hex命令可以查看对应的输入信息，其他的我就一概不知了。</p>
<p>问题2：为什么要学习输入子系统？</p>
<p>不好意思，我也不知道，其实我现在都不知道学习了这个东西之后会有什么作用，好像只是因为工作需求而完成的，当然能给我一点点的提升，而且是内在的提升，不知道具体的实际的提升，先看看吧，可能在学习的过程中，我就能知道真正的答案了。</p>
<p>问题3：要怎样学习输入子系统？</p>
<p>一切其实也只是法师的视频，除此之外也没有什么其他的方法，当然肯定是要记笔记的，没有笔记的学习其实根本就不算是学习了，你懂吗，这是昨天的时候你说的。</p>
<table>
<thead>
<tr>
<th>视频名称</th>
<th>学习前的预测</th>
</tr>
</thead>
<tbody>
<tr>
<td>总领：本期视频介绍</td>
<td>视频的总览，很重要，正好可以趁这个机会学习借鉴一下法师的风格</td>
</tr>
<tr>
<td>什么是输入子系统？</td>
<td>开篇第一节，肯定是陈述要讲解的东西是什么，有一个总览</td>
</tr>
<tr>
<td>如何确定输入设备与节点的对应关系？</td>
<td>这个我懂，我感觉是我上面描述的哪个</td>
</tr>
<tr>
<td>实践：确定输入设备对应的设备节点</td>
<td>这个我也懂，当然也只是可能懂</td>
</tr>
<tr>
<td>输入子系统框架讲解</td>
<td>讲解框架</td>
</tr>
<tr>
<td>输入子系统框架分析</td>
<td>分析框架</td>
</tr>
<tr>
<td>输入子系统关键数据结构之间关系</td>
<td>整理数据结构之间的关系</td>
</tr>
<tr>
<td>认识输入子系统源码以及裁剪</td>
<td>子系统源码和裁剪？？？？很牛</td>
</tr>
<tr>
<td>编写一个最简单的设备驱动层代码</td>
<td>编写一个输入子系统范例</td>
</tr>
<tr>
<td>通过最简单设备驱动代码分析匹配规则和流程</td>
<td>分析驱动流程</td>
</tr>
<tr>
<td>引入多对多的匹配关系</td>
<td>从名字可以看出来一对一和一对多</td>
</tr>
<tr>
<td>继续编写设备驱动层代码（理论指导）</td>
<td>继续编写驱动代码1</td>
</tr>
<tr>
<td>继续编写设备驱动层代码（实现循环上报）</td>
<td>继续编写驱动代码2</td>
</tr>
<tr>
<td>编写应用程序获取上报数据</td>
<td>应用程序1</td>
</tr>
<tr>
<td>输入子系统上报数据格式分析</td>
<td>分析数据格式</td>
</tr>
<tr>
<td>通用事件处理层驱动分析：connect函数分析</td>
<td>分析connect函数</td>
</tr>
<tr>
<td>通用事件处理层驱动分析：分配设备号</td>
<td>分配设备号</td>
</tr>
<tr>
<td>通用事件处理层驱动分析：open函数分析</td>
<td>open函数分析</td>
</tr>
<tr>
<td>设备驱动层上报数据流程分析</td>
<td>上报数据流程分析</td>
</tr>
<tr>
<td>通用事件处理层驱动分析：event函数分析-</td>
<td>event函数分析-</td>
</tr>
<tr>
<td>通用事件处理层驱动分析：read和write函数分析</td>
<td>read和write函数分析</td>
</tr>
<tr>
<td>核心层代码分析</td>
<td>核心层代码分析</td>
</tr>
<tr>
<td>实践：固定输入设备的设备节点</td>
<td>实践1</td>
</tr>
<tr>
<td>实践：固定usb设备的设备节点</td>
<td>实践2</td>
</tr>
</tbody>
</table>
<h2 id="本期视频介绍"><a class="markdownIt-Anchor" href="#本期视频介绍"></a> 本期视频介绍</h2>
<p>法师会根据这个图来讲解一下要讲解的知识，具体如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401201426425.png" alt="image-20240120142607205" /></p>
<h2 id="什么是输入子系统"><a class="markdownIt-Anchor" href="#什么是输入子系统"></a> 什么是输入子系统？</h2>
<p>input子系统顾名思义就算输入子系统，所以可以从输入设备入手， 拿什么是输入设备呢，就比如你现在敲的键盘，鼠标以及触摸屏等等。</p>
<p>输入设备的驱动是有一些共同点的，那就是这些设备都是要获取数据，然后上报给用户，所以Linux就将这些通用的代码编写好，而将那些差异化的代码留给了工程师自己来完成，从而就出现了input子系统，综上：输入子系统就是Linux专门为了输入类设备编写的一个子系统，从而规范驱动开发，降低开发难度，并且有着很高的通用性和兼容性。</p>
<h2 id="如何区分节点和设备的对应关系"><a class="markdownIt-Anchor" href="#如何区分节点和设备的对应关系"></a> 如何区分节点和设备的对应关系？</h2>
<p>设备名可以分为通用设备名和专用设备名，通用设备名可以通过名字来看出该输入设备是什么设备，而通用设备名无法通过名字看出具体的设备。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401201503990.png" alt="image-20240120150328914" /></p>
<p>可以使用cat命令来测试性查看具体的设备，如下图所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401201506102.png" alt="image-20240120150640955" /></p>
<p>也可以使用hexdump命令来二进制查看上面乱码的具体值，如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401201507669.png" alt="image-20240120150746590" /></p>
<p>查看所有输入设备的信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/bus/input/devices</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401201509216.png" alt="image-20240120150920993" /></p>
<h2 id="确定输入设备的设备节点"><a class="markdownIt-Anchor" href="#确定输入设备的设备节点"></a> 确定输入设备的设备节点</h2>
<p>这节课没啥，就不写了，这些相关的知识我已经学过了。</p>
<h2 id="输入子系统框架"><a class="markdownIt-Anchor" href="#输入子系统框架"></a> 输入子系统框架</h2>
<p>​	具体的狂徒如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401201530703.png" alt="image-20240120153016443" /></p>
<p>input子系统分为三个层次，分别为事件处理层、inpit核心层、设备驱动层。</p>
<h2 id="输入子系统框架分析-2"><a class="markdownIt-Anchor" href="#输入子系统框架分析-2"></a> 输入子系统框架分析</h2>
<p>事件处理层代码evdev.c,事件处理层代码一般不需要我们去编写，内核实现了一个通用的事件处理层代码，对应的设备节点就是event0和event1，但如果是有特殊的需求，就需要自己编写事件处理层代码了，代码所在路径为drivers/input/evdev.c。</p>
<p>evdev_init:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> __init <span class="title function_">evdev_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> input_register_handler(&amp;evdev_handler);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>evdev_handler:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">input_handler</span> <span class="title">evdev_handler</span> =</span> &#123;</span><br><span class="line">    .event = evdev_event,</span><br><span class="line">    .events = evdev_events,</span><br><span class="line">    .connect = evdev_connect,</span><br><span class="line">    .disconnect = evdev_disconnect,</span><br><span class="line">    .legacy_minors = <span class="literal">true</span>,</span><br><span class="line">    .minor = EVDEV_MINOR_BASE,</span><br><span class="line">    .name = <span class="string">&quot;evdev&quot;</span>,</span><br><span class="line">    .id_table = evdev_ids,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>input.h evdev_handler:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">input_handler</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">input_handler</span> *<span class="title">f</span>;</span></span><br><span class="line">    <span class="type">void</span> *private;</span><br><span class="line">    <span class="type">void</span> (*event)(<span class="keyword">struct</span> input_handle *handle, <span class="type">unsigned</span> <span class="type">int</span> type, <span class="type">unsigned</span> <span class="type">int</span> code, <span class="type">int</span> value);</span><br><span class="line">    <span class="type">void</span> (*events)(<span class="keyword">struct</span> input_handle *handle, <span class="type">const</span> <span class="keyword">struct</span> input_value *vals, <span class="type">unsigned</span> <span class="type">int</span> count);</span><br><span class="line">    <span class="type">bool</span> (*filter)(<span class="keyword">struct</span> input_handle *handle, <span class="type">unsigned</span> <span class="type">int</span> type, <span class="type">unsigned</span> <span class="type">int</span> code, <span class="type">int</span> value);</span><br><span class="line">    <span class="type">bool</span> (*match)(<span class="keyword">struct</span> input_handler *handler, <span class="keyword">struct</span> input_dev *dev);</span><br><span class="line">    <span class="type">int</span> (*connect)(<span class="keyword">struct</span> input_handler *handler, <span class="keyword">struct</span> input_dev *dev, <span class="type">const</span> <span class="keyword">struct</span> input_device_id *id);</span><br><span class="line">    <span class="type">void</span> (*disconnect)(<span class="keyword">struct</span> input_handle *handle);</span><br><span class="line">    <span class="type">void</span> (*start)(<span class="keyword">struct</span> input_handle *handle);</span><br><span class="line">    <span class="type">bool</span> legacy_minors;</span><br><span class="line">    <span class="type">int</span> minor;     </span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *name;</span><br><span class="line">    <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">input_device_id</span> *<span class="title">id_table</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">list_head</span> <span class="title">h_list</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">list_head</span> <span class="title">node</span>;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>f</code>: 指向其他处理器的指针（可能是父处理器）</li>
<li><code>private</code>: 用于存储私有数据的指针</li>
<li><code>event</code>: 处理输入事件的回调函数</li>
<li><code>events</code>: 处理多个输入事件的回调函数</li>
<li><code>filter</code>: 输入事件过滤器的回调函数</li>
<li><code>match</code>: 匹配输入设备与处理器的回调函数</li>
<li><code>connect</code>: 连接输入设备与处理器的回调函数</li>
<li><code>disconnect</code>: 断开输入设备与处理器的回调函数</li>
<li><code>start</code>: 启动处理器的回调函数</li>
<li><code>legacy_minors</code>: 是否使用旧的次设备号</li>
<li><code>minor</code>: 次设备号</li>
<li><code>name</code>: 处理器的名称</li>
<li><code>id_table</code>: 输入设备 ID 表格</li>
<li><code>h_list</code>: 用于链接到处理器链表的列表头</li>
<li><code>node</code>: 用于链接到处理器链表的节点</li>
</ul>
<p>input.c input_register_handler:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">input_register_handler</span><span class="params">(<span class="keyword">struct</span> input_handler *handler)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">input_dev</span> *<span class="title">dev</span>;</span></span><br><span class="line">    <span class="type">int</span> error;</span><br><span class="line"></span><br><span class="line">    error = mutex_lock_interruptible(&amp;input_mutex);</span><br><span class="line">    <span class="keyword">if</span> (error)</span><br><span class="line">        <span class="keyword">return</span> error;</span><br><span class="line"></span><br><span class="line">    INIT_LIST_HEAD(&amp;handler-&gt;h_list);</span><br><span class="line">    list_add_tail(&amp;handler-&gt;node, &amp;input_handler_list);</span><br><span class="line"></span><br><span class="line">    list_for_each_entry(dev, &amp;input_dev_list, node)</span><br><span class="line">        input_attach_handler(dev, handler);</span><br><span class="line"></span><br><span class="line">    input_wakeup_procfs_readers();</span><br><span class="line"></span><br><span class="line">    mutex_unlock(&amp;input_mutex);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>input_attach_handler</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">input_attach_handler</span><span class="params">(<span class="keyword">struct</span> input_dev *dev, <span class="keyword">struct</span> input_handler *handler)</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">input_device_id</span> *<span class="title">id</span>;</span></span><br><span class="line">    <span class="type">int</span> error;</span><br><span class="line"></span><br><span class="line">    id = input_match_device(handler, dev);</span><br><span class="line">    <span class="keyword">if</span> (!id)</span><br><span class="line">        <span class="keyword">return</span> -ENODEV;</span><br><span class="line"></span><br><span class="line">    error = handler-&gt;connect(handler, dev, id);</span><br><span class="line">    <span class="keyword">if</span> (error &amp;&amp; error != -ENODEV)</span><br><span class="line">        pr_err(<span class="string">&quot;failed to attach handler %s to device %s, error: %d\n&quot;</span>,</span><br><span class="line">               handler-&gt;name, kobject_name(&amp;dev-&gt;dev.kobj), error);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> error;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="输入子系统关键数据结构之间关系-2"><a class="markdownIt-Anchor" href="#输入子系统关键数据结构之间关系-2"></a> 输入子系统关键数据结构之间关系</h2>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401231350923.png" alt="image-20240123135050716" /></p>
<p>​	这个图法师确实是画的很好，但目前我的问题是什么，是我不清楚这些层次关系里面的调用，简单来说就是我的C语言语法有问题</p>
<h2 id="认识输入子系统源码以及裁剪"><a class="markdownIt-Anchor" href="#认识输入子系统源码以及裁剪"></a> 认识输入子系统源码以及裁剪</h2>
<p>input子系统源码路径</p>
<p>rk356x_linux/kernel/drivers/input</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401231418910.png" alt="image-20240123141841867" /></p>
<ul>
<li>apm-power.c: 提供与 APM (Advanced Power Management) 相关的输入设备接口。</li>
<li>evbug.c: 提供一个用于调试的虚拟输入设备，可以模拟按键、鼠标移动等事件。</li>
<li>evdevc 和 evdev.o: 提供通用的输入事件层，将所有输入设备的事件转化为标准化的输入事件格式，并提供给上层用户空间程序使用。</li>
<li>ff-core.c 和 ff-core.o: 提供力反馈设备的支持，允许输入设备发送力反馈信息。</li>
<li>f-memless.c 和 ff-memless.o: 提供一种无需分配内存的力反馈设备支持，可以在只能使用静态内存的系统中使用。</li>
<li>gamepot/-: 提供支持游戏控制器的驱动程序。</li>
<li>input.c 和 input.o: 提供输入子系统的初始化和事件处理等操作。</li>
<li>input-compatc 和 input-compat.h: 提供向后兼容的接口，用于支持旧版本的输入系统。</li>
<li>input-leds.c 和 inputleds.o: 提供LED指示灯设备的支持，例如在笔记本电脑键盘上的NumLock、CapsLock、ScrollLock等键。</li>
<li>input-mtc 和 input-mt.o: 提供多点触控设备的支持，如在触摸屏上使用多个手指进行操作。</li>
<li>input-polldev.c 和 input-polldev.o: 提供轮询式输入设备的支持，例如通过串口或并口接收数据的输入设备。</li>
<li>joydev.c: 提供支持游戏杆的驱动程序。</li>
<li>keyboard/-: 提供支持键盘的驱动程序。</li>
<li>matrix-keymap.c 和 matrix-keymap.o: 提供矩阵键盘的支持。</li>
<li>misc/-: 提供其他类型输入设备的驱动程序，如红外线遥控器、输入音频等。</li>
<li>mouse/ 和 mousedev.c: 提供支持鼠标的驱动程序。</li>
<li>modules.builtin 和 modules.order: 提供内核中使用的模块列表。</li>
<li>remotectl/-: 提供支持远程控制的驱动程序。</li>
<li>rmi4/-: 提供支持触控板和其他 I2C 设备的驱动程序。</li>
<li>serio/-: 提供支持通过串行端口接入的输入设备的驱动程序。</li>
</ul>
<h2 id="编写一个最简单的设备驱动层代码"><a class="markdownIt-Anchor" href="#编写一个最简单的设备驱动层代码"></a> 编写一个最简单的设备驱动层代码</h2>
<p>步骤一:</p>
<ol>
<li>创建input_dev结构体变量，使用input_allocate_device函数来动态分配输入设备结构体内存。</li>
</ol>
<p>步骤二:</p>
<ol>
<li>初始化input_dev结构体变量。</li>
<li>设置事件类型：
<ul>
<li>在头文件kernel/include/dt-bindings/input/rk-input.h中，Linux已经定义了一些事件类型的常量。</li>
<li>选择适合您设备的事件类型，并将其设置给input_dev结构体的evbit成员。</li>
</ul>
</li>
</ol>
<p>以下是已定义的事件类型：</p>
<ul>
<li>EV_SYN (0x00): 用于同步事件，表示一组输入事件的结束。</li>
<li>EV_KEY (0x01): 用于按键事件，表示按下、释放或重复一个键。</li>
<li>EV_REL (0x02): 用于相对位移事件，表示设备的相对位置变化，如鼠标的移动。</li>
<li>EV_ABS (0x03): 用于绝对位移事件，表示设备的绝对位置变化，如触摸屏的坐标。</li>
<li>EV_MSC (0x04): 用于杂项事件，包含一些特殊目的的事件类型，例如设备状态变化等。</li>
<li>EV_SW (0x05): 用于开关事件，表示开关的状态变化，如电源按钮、开合盖等。</li>
<li>EV_LED (0x11): 用于LED事件，表示LED灯的状态变化。</li>
<li>EV_SND (0x12): 用于声音事件，表示声音的播放相关事件。</li>
<li>EV_REP (0x14): 用于重复事件，表示键盘重复发送事件。</li>
<li>EV_FF (0x15): 用于力反馈事件，表示力反馈设备的输出事件。</li>
<li>EV_PWR (0x16): 用于电源事件，表示电源状态变化。</li>
<li>EV_FF_STATUS (0x17): 用于力反馈状态事件，表示力反馈设备的状态变化。</li>
<li>EV_MAX (0x1f): 输入事件类型的最大值。</li>
<li>EV_CNT: 输入事件类型的数量。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">input_dev</span> &#123;</span></span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *name;                   <span class="comment">// 设备名称</span></span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *phys;                   <span class="comment">// 设备物理地址</span></span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *uniq;                   <span class="comment">// 设备唯一标识符</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">input_id</span> <span class="title">id</span>;</span>                 <span class="comment">// 设备ID信息</span></span><br><span class="line"></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> propbit[BITS_TO_LONGS(INPUT_PROP_CNT)];   <span class="comment">// 设备属性位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> evbit[BITS_TO_LONGS(EV_CNT)];             <span class="comment">// 支持的事件类型位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> keybit[BITS_TO_LONGS(KEY_CNT)];           <span class="comment">// 支持的按键事件位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> relbit[BITS_TO_LONGS(REL_CNT)];           <span class="comment">// 支持的相对位移事件位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> absbit[BITS_TO_LONGS(ABS_CNT)];           <span class="comment">// 支持的绝对位移事件位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> mscbit[BITS_TO_LONGS(MSC_CNT)];           <span class="comment">// 支持的杂项事件位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> ledbit[BITS_TO_LONGS(LED_CNT)];           <span class="comment">// 支持的LED事件位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> sndbit[BITS_TO_LONGS(SND_CNT)];           <span class="comment">// 支持的声音事件位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> ffbit[BITS_TO_LONGS(FF_CNT)];             <span class="comment">// 支持的力反馈事件位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> swbit[BITS_TO_LONGS(SW_CNT)];             <span class="comment">// 支持的开关事件位图</span></span><br><span class="line"></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> hint_events_per_packet;                    <span class="comment">// 每个输入事件包中的事件数量的提示值</span></span><br><span class="line"></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> keycodemax;            <span class="comment">// 键值的最大值</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> keycodesize;           <span class="comment">// 键值的大小（以字节为单位）</span></span><br><span class="line">	<span class="type">void</span> *keycode;                      <span class="comment">// 键值数组指针</span></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> (*setkeycode)(<span class="keyword">struct</span> input_dev *dev,</span><br><span class="line">			  <span class="type">const</span> <span class="keyword">struct</span> input_keymap_entry *ke,</span><br><span class="line">			  <span class="type">unsigned</span> <span class="type">int</span> *old_keycode);                   <span class="comment">// 设置键值的回调函数</span></span><br><span class="line">	<span class="type">int</span> (*getkeycode)(<span class="keyword">struct</span> input_dev *dev,</span><br><span class="line">			  <span class="keyword">struct</span> input_keymap_entry *ke);                <span class="comment">// 获取键值的回调函数</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">ff_device</span> *<span class="title">ff</span>;</span>               <span class="comment">// 力反馈设备</span></span><br><span class="line"></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> repeat_key;            <span class="comment">// 重复按键的按键码</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">timer_list</span> <span class="title">timer</span>;</span>            <span class="comment">// 用于重复按键的定时器</span></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> rep[REP_CNT];                   <span class="comment">// 按键重复设置</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">input_mt</span> *<span class="title">mt</span>;</span>                <span class="comment">// 多点触控数据</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">input_absinfo</span> *<span class="title">absinfo</span>;</span>      <span class="comment">// 绝对位移事件信息</span></span><br><span class="line"></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> key[BITS_TO_LONGS(KEY_CNT)];              <span class="comment">// 当前按键状态位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> led[BITS_TO_LONGS(LED_CNT)];              <span class="comment">// 当前LED状态位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> snd[BITS_TO_LONGS(SND_CNT)];              <span class="comment">// 当前声音状态位图</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">long</span> sw[BITS_TO_LONGS(SW_CNT)];                <span class="comment">// 当前开关状态位图</span></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> (*open)(<span class="keyword">struct</span> input_dev *dev);                     <span class="comment">// 打开设备的回调函数</span></span><br><span class="line">	<span class="type">void</span> (*close)(<span class="keyword">struct</span> input_dev *dev);                   <span class="comment">// 关闭设备的回调函数</span></span><br><span class="line">	<span class="type">int</span> (*flush)(<span class="keyword">struct</span> input_dev *dev, <span class="keyword">struct</span> file *file); <span class="comment">// 刷新设备的回调函数</span></span><br><span class="line">	<span class="type">int</span> (*event)(<span class="keyword">struct</span> input_dev *dev, <span class="type">unsigned</span> <span class="type">int</span> type, <span class="type">unsigned</span> <span class="type">int</span> code, <span class="type">int</span> value); <span class="comment">// 处理事件的回调函数</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">input_handle</span> __<span class="title">rcu</span> *<span class="title">grab</span>;</span>                        <span class="comment">// 当前占用设备的input_handle指针</span></span><br><span class="line"></span><br><span class="line">	<span class="type">spinlock_t</span> event_lock;              <span class="comment">// 事件锁</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">mutex</span> <span class="title">mutex</span>;</span>                 <span class="comment">// 互斥锁</span></span><br><span class="line"></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> users;                 <span class="comment">// 设备使用计数</span></span><br><span class="line">	<span class="type">bool</span> going_away;                    <span class="comment">// 设备是否正在释放</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">device</span> <span class="title">dev</span>;</span>                  <span class="comment">// 内核设备结构体</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list_head</span> <span class="title">h_list</span>;</span>            <span class="comment">// input_handle链表</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">list_head</span> <span class="title">node</span>;</span>              <span class="comment">// 设备链表节点</span></span><br><span class="line"></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> num_vals;              <span class="comment">// 输入值的数量</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> max_vals;              <span class="comment">// 最大输入值数量</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">input_value</span> *<span class="title">vals</span>;</span>           <span class="comment">// 输入值数组</span></span><br><span class="line"></span><br><span class="line">	<span class="type">bool</span> devres_managed;                <span class="comment">// 是否由设备资源管理</span></span><br><span class="line"></span><br><span class="line">	<span class="type">ktime_t</span> timestamp[INPUT_CLK_MAX];   <span class="comment">// 时间戳数组</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>步骤三：<br />
注册<code>input_dev</code>结构体变量，完成设备的匹配工作。使用<code>input_register_device()</code>函数。</p>
<p>步骤四：<br />
上报事件。</p>
<p>步骤五：<br />
注销和释放<code>input_dev</code>，使用<code>input_free_device()</code>和<code>input_unregister_device()</code>函数。</p>
<p>下面是整理后的代码注释：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 步骤三：注册input_dev结构体变量，完成设备的匹配工作</span></span><br><span class="line">input_register_device(dev);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤四：上报事件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在适当的时机上报事件，例如按下按钮时</span></span><br><span class="line">input_event(dev, EV_KEY, BTN_LEFT, <span class="number">1</span>); <span class="comment">// 按下左键</span></span><br><span class="line">input_sync(dev); <span class="comment">// 同步事件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤五：注销和释放input_dev</span></span><br><span class="line">input_unregister_device(dev);</span><br><span class="line">input_free_device(dev);</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/input.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/module.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">input_dev</span> *<span class="title">myinput_dev</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 模块初始化函数</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">myinput_dev_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> ret;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 分配输入设备结构体</span></span><br><span class="line">    myinput_dev = input_allocate_device();</span><br><span class="line">    <span class="keyword">if</span> (myinput_dev == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        printk(<span class="string">&quot;myinput_dev_init: input_allocate_device分配输入设备失败\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置设备名称</span></span><br><span class="line">    myinput_dev-&gt;name = <span class="string">&quot;myinput_dev&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置支持的事件类型</span></span><br><span class="line">    set_bit(EV_KEY, myinput_dev-&gt;evbit);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置支持的按键事件类型</span></span><br><span class="line">    set_bit(KEY_1, myinput_dev-&gt;keybit);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注册输入设备</span></span><br><span class="line">    ret = input_register_device(myinput_dev);</span><br><span class="line">    <span class="keyword">if</span> (ret &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        printk(<span class="string">&quot;myinput_dev_init: input_register_device注册输入设备失败\n&quot;</span>);</span><br><span class="line">        <span class="keyword">goto</span> error;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">error:</span><br><span class="line">    <span class="comment">// 发生错误时释放输入设备资源</span></span><br><span class="line">    input_free_device(myinput_dev);</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模块退出函数</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">myinput_dev_exit</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 注销输入设备</span></span><br><span class="line">    input_unregister_device(myinput_dev);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module_init(myinput_dev_init);</span><br><span class="line">module_exit(myinput_dev_exit);</span><br><span class="line"></span><br><span class="line">MODULE_LICENSE(<span class="string">&quot;GPL&quot;</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">&quot;fashi&quot;</span>);</span><br><span class="line">MODULE_VERSION(<span class="string">&quot;V1.0&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="引入多对多的匹配关系"><a class="markdownIt-Anchor" href="#引入多对多的匹配关系"></a> 引入多对多的匹配关系</h2>
<h2 id="继续编写设备驱动层代码"><a class="markdownIt-Anchor" href="#继续编写设备驱动层代码"></a> 继续编写设备驱动层代码</h2>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401231615316.png" alt="image-20240123161531216" /></p>
<h2 id="编写应用程序获取上报数据"><a class="markdownIt-Anchor" href="#编写应用程序获取上报数据"></a> 编写应用程序获取上报数据</h2>
<h1 id="119工作记录"><a class="markdownIt-Anchor" href="#119工作记录"></a> 1.19工作记录</h1>
<p>在我们的底板上很是正常，一共使用了五根引脚，分别是I2C3 的 sda和scl，然后是VCC和GND，最后是有一个RES的引脚，这个引脚接到3.3v就可以了。</p>
<p>在客户的底板上使用的好像是I2C4，但这个I2C4是不是那个1.8V的呢？ 查看了一下原理图确实是1.8V的，所以改一下源码呗，试试。</p>
<h1 id="118-工作记录"><a class="markdownIt-Anchor" href="#118-工作记录"></a> 1.18 工作记录</h1>
<p>​	耳塞这个东西，还是很有用的，就比如昨天的时候，很是烦躁，但是在戴上耳机之后依然是可以安静下来的，昨天在白天的时候将黑马的课程看完了，然后开始看狂神的课程，狂神的因为是随性演讲，所以他的手书还有很大的上升空间，我可以在这个基础上来进行发挥，既有黑马的严谨和字幕，还有手书的工整和深入人心，然后精益求精加上下面的可可爱爱的进度条，这不是就很好。</p>
<p>4K分辨率下具体的信息如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">45的小人高度</span><br><span class="line"></span><br><span class="line">60的进度条高度</span><br><span class="line"></span><br><span class="line">100的字体高度</span><br><span class="line"></span><br><span class="line">进度条坐标 2090 </span><br></pre></td></tr></table></figure>
<p>目前来看所有的都是3840*2160，也可能是我的这些个屏幕都是这么大的，但现在看起来好像都是这个样子了，这样也无所谓了，知道一个具体的大小即可，然后重新实验一遍。还挺简单的，就先这样，然后继续看狂神的视频了。</p>
<hr />
<p>这样吧以后中午的时候就不看哔哩哔哩了。其实有好多东西可以看的，只是沉迷在哔哩哔哩中肯定是不行的，就比如你可以学习一下PCB，就算是这些东西也比你看哔哩哔哩强的多，你说是吧，今天中午就来重新看第一节。其他的就先无所谓了，只希望不再是看一中午的哔哩哔哩了。现在的话就先继续看狂神的Linux了。</p>
<hr />
<p>烦躁、还是烦躁，只有戴上耳塞才能冷静下来，可是为什么会烦躁呢？不是很懂，上午的时候重温了一下那个关键帧和可视化的进度条，感觉还可以，之后我讲解的时候肯定是要加上的。然后现在看完了狂神的Linux基础课程，也不能说看完吧，现在是将vim之前的一些内容都看过了，有些东西很有用，但是有些东西感觉是不需要的，而我讲的时候既要学习黑马的详细，但有些对于嵌入式工程师没有作用的命令，或者使用极其少的命令，尽可能的做删减，黑马的那个口号是什么，少一句不行，多一句没有，而我想的就是继承人家的想法。命令这个地方差不多了，然后开始整理要讲解的命令的逻辑。</p>
<hr />
<p>现在来回忆完整的逻辑，先从黑马的课程开始吧。先不看黑马的具体目录，我希望是从我的笔述中来进行回忆出来的。</p>
<p>最开始的时候是引入了硬件和软件的概念，计算机的组成原理，随后设计牵引出来了Linux的诞生。1991年一个21岁的大学生，编写出了Linux内核的0.01版，此后的三十年就迎来了Linxu发展的黄金时期，为什么学习Linux暂且先不谈，先来思考一下后续要怎样学习Linux，无论如何都是要安装ubuntu操作系统的，但是怎样安装，安装到什么地方都是问题，目前有三种安装Linux的方法，一种是在一台物理计算机上安装双系统，用到哪个系统只需在电脑启动的时候进行切换即可，第二种方法是有两台物理计算机。一台装有Linux系统，而另一台装有windows操作系统，两台电脑的成本较高，对于我们这些初学者来说，很不现实，所以就只剩下最后一种方式可选，那就是在windows操作系统当中使用虚拟机软件虚拟出来一个Linux系统，日常办公使用windwos操作系统，而学习使用虚拟机软件中的Linxu操作系统。接下来就是虚拟机软件的安装、ubuntu操作系统的安装，在安装好系统之后第一件事情我认为也是最重要的一件那就是修改为中文界面，对于初学者来说，肯定是中文界面更亲切，当然后面非常熟悉Linux操作系统之后，英文环境和中文环境这些无所谓了。再然后是tabby的安装，其实我是有一些动摇的，因为tabby的sftp的传输速率是真的慢呀，但貌似只有这一个坏处，其他的都很好，总是要给客户提供一些更好用的终端软件的，不能因循守旧，必须要尽可能的拥抱新鲜事物，从而不被时代所抛弃，本来想的是后面再也不用图形化界面了，但是在看其他大佬的视频的时候，发现在早期的时候使用图形化界面和终端相对比的方式更容易让人理解，所以我后面也会打算使用类似的方式进行讲解。在讲解tabby的时候因为要安装ssh和net-tools，所以这时候要讲解一下ubuntu终端打开的方式。</p>
<p>然后就要进入真正的操作章节了，我第一节讲解的是vim，这是第一个有疑问的地方，真的第一节就要讲vim吗，手册的那些地方当然可以不用管，这些都是通用的，所以vim这个章节是可以向后放的，但是要放到什么地方，这也是一个问题呀。</p>
<p>那就算不讲解vim，第一个要讲解的也会是Linux的目录结构，但这个地方要怎么讲呢，我认为狂神讲解的不对，肯定是不能在root模式下讲解的，就跟图形化界面一样，能少用就少用，所以是不是应该先来讲一下普通用户和特权用户，创建用户这相关的命令没什么作用，肯定是不会讲解的，在实际的使用中肯定是用不到的，所以该略过的就略过。但这个地方就讲解用户和权限是不是也不太好，因为后面会有一个专门的章节来讲解权限，多思考思考总归是没有问题的。但从这个地方确实可以引出来权限。</p>
<p>还是黑马的正确，目录结构是必须的，而每个目录存放了哪些东西，都有什么用处，这个是没有必要的。至少，目前还没这个必要讲。</p>
<h1 id="117-工作记录"><a class="markdownIt-Anchor" href="#117-工作记录"></a> 1.17 工作记录</h1>
<p>==愿先生心境永远四季如春==</p>
<p>​	昨天晚上看了一下黑马的课程，真的不错，今天继续看，目前也不需要做笔记，只需要将大体的内容了解一下即可，然后救赎我的总结，而且他的这些东西并不是全部都要看，当然也要分开，有些东西也不是给我们看的呀，有用的看一下，那些用不到的当然就算了。</p>
<hr />
<p>下午的四点半终于是将黑马的视频看完了，也大体上确定了我在后续讲解时的一些风格，从老师那里学来的是课程总览、字母、课后总结、可视化的进度条，真的很可以了，当然是不可能跟人家保持一致的，最新的ubuntu22、最新的vmware workstation，应用于嵌入式，然后用markdown的风格来写，也理所应当的要走出一个自己的一个风格。学习一下剪辑吧，熟悉一下剪映<a target="_blank" rel="noopener" href="https://chai0705.github.io/2023/09/03/0%20windows%E6%90%AD%E5%BB%BAhexo/%E3%80%82">https://chai0705.github.io/2023/09/03/0 windows搭建hexo/。</a></p>
<h1 id="116-工作记录"><a class="markdownIt-Anchor" href="#116-工作记录"></a> 1.16 工作记录</h1>
<p>==愿先生心境永远四季如春==</p>
<p>​	总算是解决了adb的问题，但是呢具体为什么会这个样子还是不清楚，而且在3588上面就很正常呀，奇怪很奇怪~，这个就先这样了，目前的问题解决了就好，而邮票孔的问题等新板子到了再说吧。</p>
<hr />
<p>所以有的客户还是很牛的，我没找到的问题客户能找到，帮了我一个很大的忙，原来问题出在ls上，我当时就盲目的信任了这个文件，就导致我根本没有在这个方面去想，行了问题解决了，终于可以回到正轨上来了，两天时间没有正常学习了，确实有很多的东西还不会呢，而且在我心里会有一些莫名的恐惧感，对于一个新兴事物的恐惧，但终究要进步的，你说是吧，所以还有两个小时，但仍是要学会记录的，我感觉量化这些东西很重要，至少再有了时间的概念之后，不会一直的想要看群，而且就算有想看的冲动之后也会有一个声音在劝导着我回头，行了，今天的感慨就先到这个地方，新的一天加油。</p>
<hr />
<p>行了，对于每家的视频，都有了一定的认识，每一家都有每一家的优点，当然了每一家也都有缺点，接下来的这些天都自己努力吧，先整体学习一下，就先学习黑马的，其实也就十个小时的视频，其他的就先向后放放。行了今天就到这里吧。</p>
<h1 id="113-工作记录"><a class="markdownIt-Anchor" href="#113-工作记录"></a> 1.13 工作记录</h1>
<p>==愿先生心境永远四季如春==</p>
<p>==所以读几遍，也不如写出来来的管用。==</p>
<p><a target="_blank" rel="noopener" href="https://wangchujiang.com/linux-command/hot.html">github开源Linux命令查询网站</a></p>
<p>昨天的时候写了半天的总结，后续的方向大致是明朗了，但里面的具体内容还没下结论，之前法师说的详细，现在理解起来又有了新的想法，那就是思想放的还是太高，根本就不知道什么是真正的小白，既不是一眼能看出来问题所在的大佬，也不是什么都不懂的小白，这种思想境界，是最尴尬的地方，不能有大佬的高瞻远瞩，也没有小白的白纸一般，那种什么都不知道的心情，所以闭门造车总是不对的，必须要借鉴其他人的录制课程的经验，然后找到其中的优点，找到自己认知的浅薄，逐渐完善。先把目前哔哩哔哩上开放的那些视频列举一下：</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1w4411B7a4?p=1&amp;vd_source=f06237b57d9754575c93eaa6db881c53">韦东山</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1vE411h7Fi?p=1&amp;vd_source=f06237b57d9754575c93eaa6db881c53">正点原子</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1n84y1i7td/?spm_id_from=333.337.search-card.all.click">黑马程序员</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1JK4y1t7io/?spm_id_from=333.337.search-card.all.click&amp;vd_source=f06237b57d9754575c93eaa6db881c53">野火</a></p>
<p>然后是狂神的docker，这个视频给了我一个很大的启发，这种教学模式就非常非常的吸引人，而且获得了很好的注意，这是链接<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1og4y1q7M4/?spm_id_from=333.337.search-card.all.click&amp;vd_source=f06237b57d9754575c93eaa6db881c53">狂神说docker</a></p>
<hr />
<p>先来看看各个家的评论，还有我的第一印象。</p>
<hr />
<h2 id="黑马"><a class="markdownIt-Anchor" href="#黑马"></a> 黑马</h2>
<h3 id="评论1"><a class="markdownIt-Anchor" href="#评论1"></a> 评论1</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401131603038.png" alt="image-20240113160322954" /></p>
<p>内容提取</p>
<ol>
<li>课程笔记写的很适合实操</li>
<li>将所有的命令进行分类讲解</li>
<li>每节课的最后都有当节课程的总结</li>
<li>每一节都有相对应的字幕</li>
</ol>
<p>学到的东西：<br />
视频要自己剪辑，之前录的视频是我根据稿子来制作的视频，本来以为这样是有问题的，但是看到黑马的视频之后发现人家讲解的确实好，无论是逻辑还是清晰程度，都比正点原子的好的多，而且我以为讲解这些个视频是不会有字幕的，因为你不知道会不会有遮挡啥的，黑马的老师就用事实告诉我，这是可以的，这一点我肯定是要学习的，还有之前了解到的那个分段视频，目前我想到的就是，我的一个视频最少分为三个部分，每一个视频的开头和结尾内容都是固定的，在开头的时候会讲本节课的内容概览，讲解一下原因和因果，在结尾的时候因为已经提前写完了手册，所以可以根据手册从上到下来重新追一下。、</p>
<p>还是之前已经理解过的那句话，付出多少努力，不一定会有对应的回报，但是不努力，肯定就不会有回报。</p>
<h3 id="评论2"><a class="markdownIt-Anchor" href="#评论2"></a> 评论2</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401131606253.png" alt="image-20240113160632208" /></p>
<p>还是那一句话，不能与新学习的小白所共情，很多时候你以为的只是你以为的，你以为你讲解的已经足够细致了，但实际上呢，往往站在小白的角度是不一样的，你既然现在能写出来，就证明你可能懂了，但到具体实施的时候可能还是不够的，尽可能的将身段放低。</p>
<h3 id="评论3"><a class="markdownIt-Anchor" href="#评论3"></a> 评论3</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401131608548.png" alt="image-20240113160811493" /></p>
<p>这句话的评论很对,不管是野火还是正点原子，他们的视频在我看起来都有问题，就连最基础的韦东山的视频都有一堆人在下面说，这个不适合基础，很不理解，目前认为韦东山的就是讲解的有一些乱，可能是迫切的想要将所有的板子融合在一起吧，所以不免有些混乱，在我讲解Linux基础的这一段时间内，是没有必要讲关于开发板相关的，而法师也说了，要讲就要脱离开发板来讲，反正在讲解Linux应用之前是没必要的，正点原子的就是根本没有经过系统的梳理，跟黑马比起来简直就是天上地下，那两百多个小时的视频都是水的吧，真的完蛋。</p>
<h3 id="评论4"><a class="markdownIt-Anchor" href="#评论4"></a> 评论4</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401131610311.png" alt="image-20240113161031265" /></p>
<p>其实还是练习的原因，我之前也是这样的，直到有一天，发现了markdown，发现了博客，才终于是改变了这一现状，之前还停留在用手写的年代，现在看起来真的是太low了，当然人都是在进步的，我没有拘束在之前旧的观念里，就已经很好了。</p>
<hr />
<h2 id="正点原子"><a class="markdownIt-Anchor" href="#正点原子"></a> 正点原子</h2>
<h3 id="评论1-2"><a class="markdownIt-Anchor" href="#评论1-2"></a> 评论1</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401131758401.png" alt="image-20240113175802351" /></p>
<p>我后面肯定是要使用这个插件的，无论是写shell脚本的时候，还是后面写系统编程手册的时候，都要用vscode插件的</p>
<h3 id="评论2-2"><a class="markdownIt-Anchor" href="#评论2-2"></a> 评论2</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401131759464.png" alt="image-20240113175919426" /></p>
<p>我不这么认为，翻车是因为没规划好，目前我的思想还没这样。</p>
<h3 id="评论3-2"><a class="markdownIt-Anchor" href="#评论3-2"></a> 评论3</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401131800220.png" alt="image-20240113180021165" /></p>
<p>哈哈，说的对，我可能带点感性，但是我也感觉他的视频很有问题，口语化太多了，这可能也是正点原子的通病，时常确实多，但真的没有必要，有些东西该讲，有些东西不该将，没有一句废话，没有一个重点遗漏，学学黑马嵌入式，才是正确的道路。</p>
<h2 id="韦东山"><a class="markdownIt-Anchor" href="#韦东山"></a> 韦东山</h2>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1w4411B7a4?p=1&amp;vd_source=f06237b57d9754575c93eaa6db881c53">韦东山</a></p>
<h3 id="评论1-3"><a class="markdownIt-Anchor" href="#评论1-3"></a> 评论1</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161625121.png" alt="image-20240116162517032" /></p>
<p>这个人我是在前面的黑马程序员那里看到过的，他的评论也很激烈，而且说的还都是实话，所以我肯定是要引以为鉴的，韦东山的跳跃的真的太多了吗，我一定不能这样。</p>
<h3 id="评论2-3"><a class="markdownIt-Anchor" href="#评论2-3"></a> 评论2</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161627002.png" alt="image-20240116162702943" /></p>
<h3 id="评论3-3"><a class="markdownIt-Anchor" href="#评论3-3"></a> 评论3</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161628691.png" alt="image-20240116162848648" /></p>
<h3 id="评论4-2"><a class="markdownIt-Anchor" href="#评论4-2"></a> 评论4</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161629140.png" alt="image-20240116162948085" /></p>
<h3 id="评论5"><a class="markdownIt-Anchor" href="#评论5"></a> 评论5</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161630269.png" alt="image-20240116163010216" /></p>
<h3 id="评论6"><a class="markdownIt-Anchor" href="#评论6"></a> 评论6</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161631721.png" alt="image-20240116163123661" /></p>
<h3 id="评论7"><a class="markdownIt-Anchor" href="#评论7"></a> 评论7</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161632156.png" alt="image-20240116163236097" /></p>
<h2 id="野火"><a class="markdownIt-Anchor" href="#野火"></a> 野火</h2>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1JK4y1t7io/?spm_id_from=333.337.search-card.all.click&amp;vd_source=f06237b57d9754575c93eaa6db881c53">野火</a></p>
<h3 id="评论1-4"><a class="markdownIt-Anchor" href="#评论1-4"></a> 评论1</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161655730.png" alt="image-20240116165507689" /></p>
<h3 id="评论2-4"><a class="markdownIt-Anchor" href="#评论2-4"></a> 评论2</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161656173.png" alt="image-20240116165650134" /></p>
<h2 id="迅为电子"><a class="markdownIt-Anchor" href="#迅为电子"></a> 迅为电子</h2>
<p>突然发现我们家的评论可真的不错呀，哈哈</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401161638766.png" alt="image-20240116163825681" /></p>
<p>继往开来，辞旧迎新，当然要做的比法师更好，也没理由不比法师好，我是真的热爱，也是真的尽力想要做的很好，所以我要加油。</p>
<p>行了，就先这样吧，然后继续我自己的学习。</p>
<h1 id="112-工作记录"><a class="markdownIt-Anchor" href="#112-工作记录"></a> 1.12 工作记录</h1>
<p>==还是戴着耳塞比较适合我，能安静很多。==</p>
<p>==少年呀，心还是不安静了呀==</p>
<p><a target="_blank" rel="noopener" href="https://edu.51cto.com/lesson/741324.html">Linux基础课程</a></p>
<p><a target="_blank" rel="noopener" href="https://edu.51cto.com/topic/1634.html">shell编程学习</a></p>
<hr />
<p>tabby的一些快捷按键我需要适应一下，得跟客户一样才行，我不能因为我的喜好而影响客户。</p>
<table>
<thead>
<tr>
<th style="text-align:center">操作</th>
<th>快捷键</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">复制</td>
<td>ctrl+shift+c</td>
</tr>
<tr>
<td style="text-align:center">粘贴</td>
<td>ctrl+shift+v 或者shift+insert</td>
</tr>
<tr>
<td style="text-align:center">全选</td>
<td>ctrl + shift +a</td>
</tr>
<tr>
<td style="text-align:center">行首</td>
<td>Home</td>
</tr>
<tr>
<td style="text-align:center">行尾</td>
<td>End</td>
</tr>
<tr>
<td style="text-align:center">跳转到上一个单词</td>
<td>ctrl + 方向左</td>
</tr>
<tr>
<td style="text-align:center">跳转到下一个单词</td>
<td>ctrl + 方向右</td>
</tr>
<tr>
<td style="text-align:center">删除上一个单词</td>
<td>ctrl+回退按键</td>
</tr>
<tr>
<td style="text-align:center">删除整行</td>
<td>ctrl+shift+回退按键</td>
</tr>
<tr>
<td style="text-align:center">删除下一个单词</td>
<td>ctrl+delect</td>
</tr>
<tr>
<td style="text-align:center">放大</td>
<td>ctrl + +</td>
</tr>
<tr>
<td style="text-align:center">缩小</td>
<td>ctrl + -</td>
</tr>
<tr>
<td style="text-align:center">重置缩放</td>
<td>ctrl+0</td>
</tr>
<tr>
<td style="text-align:center">智能复制和粘贴</td>
<td>ctrl+c</td>
</tr>
<tr>
<td style="text-align:center">搜索</td>
<td>ctrl+shift+f</td>
</tr>
<tr>
<td style="text-align:center">滑动到终端顶端</td>
<td>ctrl+pageup</td>
</tr>
<tr>
<td style="text-align:center">滑动到终端底部</td>
<td>ctrl+pagedown</td>
</tr>
<tr>
<td style="text-align:center">终端向上滑动一页</td>
<td>alt+pageup</td>
</tr>
<tr>
<td style="text-align:center">终端向下滑动一页</td>
<td>alt+pagedown</td>
</tr>
<tr>
<td style="text-align:center">打开设置</td>
<td>ctrl+,</td>
</tr>
<tr>
<td style="text-align:center">切换窗口</td>
<td>ctrl+空格</td>
</tr>
<tr>
<td style="text-align:center">显示命令选择器</td>
<td>ctrl+shift+p</td>
</tr>
<tr>
<td style="text-align:center">显示配置选择器</td>
<td>ctrl+shift+e</td>
</tr>
<tr>
<td style="text-align:center">切换全屏模式</td>
<td>F11或者alt+回车</td>
</tr>
<tr>
<td style="text-align:center">重命名标签页</td>
<td>ctrl+shift+r</td>
</tr>
<tr>
<td style="text-align:center">关闭标签页</td>
<td>ctrl+shift+w</td>
</tr>
<tr>
<td style="text-align:center">重新打开最后的标签页</td>
<td>ctrl+shift+z</td>
</tr>
<tr>
<td style="text-align:center">进入下一个标签页</td>
<td>ctrl+shift+右</td>
</tr>
<tr>
<td style="text-align:center">进入上一个标签页</td>
<td>ctrl+shift+左</td>
</tr>
<tr>
<td style="text-align:center">移动标签页</td>
<td>ctrl+shift+pageup和pagedown</td>
</tr>
<tr>
<td style="text-align:center">显示窗格标签用于调整位置</td>
<td>ctrl+shift</td>
</tr>
<tr>
<td style="text-align:center">将当前标签页所在的窗格更改为单独的标签页</td>
<td>ctrl+shift+.</td>
</tr>
<tr>
<td style="text-align:center">将所有标签页合并到当前标签页</td>
<td>ctrl+shift+,</td>
</tr>
<tr>
<td style="text-align:center">向右拆分</td>
<td>ctrl+shift+e</td>
</tr>
<tr>
<td style="text-align:center">向下拆分</td>
<td>ctrl+shift+o</td>
</tr>
</tbody>
</table>
<hr />
<p>昨天将vim的内容大致是写好了，突然不知道后续要做什么了，现在最好是继续向下规划，但是向下规划一定就是对的吗，我对这一点很是充满疑惑，所以摆在面前的路有几条呢，先来思考这个问题：</p>
<ul>
<li>继续向下完善内容<br />
目前是有了六个小节的内容，后面其实就该讲命令了，命令这里需要讲的其实挺多的，但讲解命令也要有逻辑，所有的一切都要讲逻辑和顺心意，如果下一步是整理命令的话，希望保持严谨性</li>
<li>整理全篇的讲解逻辑和开篇语。<br />
目前只是写好了对应的手册，但是呢，无论是讲解的实际逻辑还是开篇语都是没有的，在是在心中仍旧是没有一个完整的蓝图，或者一个完整的预演，都不能想象出来一个完整的画面是什么，是时候停下来看看了吗，但是一个整体的框架是不是更重要，所以这里我就开始纠结了下了</li>
</ul>
<p>还是想不出来，还是继续向下进行把，但是要做一点点的改变，本来也就是这样想的，当前面的一些基础内容搞完之后，整个教程也就定调了，法师的意思是尽可能的详细，那怎样才能被称之为详细呢？或者怎样做才能对新手、小白更友好呢？可能法师说的详细并不是我理解的那个详细，我理解的是内容的详细，而法师的意思现在我认为应该是讲解时候的详细，而且要友善，用markdown写笔记的我肯定友善呀，而且边讲边写客户听的倒也还好，而且适当的加速，不能用一倍速，这个具体的调速的倍率后面再说。</p>
<p>所以目前的整体大方向是对的，只是现在有了一个岔路，不知道先走哪一条，后走哪一条了，先整理一下逻辑吧。</p>
<p>在最开始的第一节应该是一个总览，要说都要讲哪些东西，一个总览的作用，也就是海之蓝所说的那个摸象和总览，一个好的总览总是能给人带来不一样的感受，那是不是我录视频也需要一个总览呢，目前看来是需要的。</p>
<p>其实这也是两条路，一条是内在的讲解方式，一条是宏观的内容脉络，目前内容脉络还没有理清楚，先理清楚宏观脉络。目前是进行到了vim，打算后面要讲命令，那讲完命令之后呢？你要怎么办，到这里就结束了？那总是不可能吧。现在我想看其他人都是怎样讲的？无论是韦东山、还是野火、亦或者正点原子或者王老师，他们是怎么讲解的呢？看也是看他们讲解的内容，而不是看他们各自的讲解方式，具体的一些内容还是有一些矛盾，我先来说一说我自己的想法吧，现有一个自己的想法，然后再一点点的向里面填充其他人的内容。</p>
<hr />
<p>我的想法，目前我所写完的就是我的想法，在学习一个东西之前，你总是要知道他能用来做什么吧，或者说为什么一定要学它吧，这个条件成立之后才能开始后续的内容，否则一切都是无稽之谈，然后呢，要想学这个东西总是要有相应的环境才行，所以开始进行Linux环境的搭建，这里选择vmware虚拟机加ubuntu，然后为了更友好的看打印信息，所以率先将英文修改为了中文，然后因为想尽早培养大家不依赖图形化界面的习惯，所以要寻找一个好用且好看的终端软件，所以接下来讲解了tabby的简单使用，以及ssh连接到虚拟机ubuntu。到这里基础的环境就搞完了，然后就开始真正的Linux基础的讲解了。</p>
<p>这肯定不能跟windows一样，直接图形化界面开始摸索，毕竟一开始就是贯彻的非图形化界面的思想，那没有图形界面，那在linux中要怎样进行文件的编辑呢，那就是vim，当然对于vim的介绍肯定远不止与此，具体的描述后续再说，这个不急，然后呢要讲什么，先说一下都要讲什么吧。</p>
<p>下面是chatgpt给出来的学习路线</p>
<blockquote>
<ol>
<li>了解Linux的基本概念：
<ul>
<li>了解Linux的起源和发展历史。</li>
<li>理解Linux操作系统的特点和优势，例如开源性、灵活性和安全性。</li>
</ul>
</li>
<li>安装Linux操作系统：
<ul>
<li>选择适合你的需求的Linux发行版（如Ubuntu、Fedora、Debian等），并下载安装镜像文件。</li>
<li>创建Linux安装媒介（如USB驱动器或DVD）。</li>
<li>按照安装向导的指示，将Linux操作系统安装到计算机上。</li>
</ul>
</li>
<li>掌握基本的命令行技能：
<ul>
<li>学习Linux命令行的基本语法和常用命令，如文件和目录操作、文本处理、文件权限等。</li>
<li>理解Linux文件系统的层次结构，并学会使用<code>ls</code>、<code>cd</code>、<code>pwd</code>等命令进行导航。</li>
<li>练习使用基本的文件和目录操作命令，如<code>mkdir</code>、<code>cp</code>、<code>mv</code>、<code>rm</code>等。</li>
<li>学习使用文本编辑器（如<code>vi</code>或<code>nano</code>）进行简单的文本编辑。</li>
</ul>
</li>
<li>理解Linux用户和权限管理：
<ul>
<li>学习Linux用户和用户组的概念，以及它们在系统中的作用。</li>
<li>掌握用户和用户组管理命令，如<code>useradd</code>、<code>usermod</code>、<code>groupadd</code>等。</li>
<li>了解Linux文件权限模型，包括文件所有者、文件所属组和其他用户的权限。</li>
<li>学习使用<code>chmod</code>和<code>chown</code>等命令来修改文件和目录的权限和所有者。</li>
</ul>
</li>
<li>学习软件包管理：
<ul>
<li>了解Linux软件包管理系统（如APT、DNF、YUM等）的概念和工作原理。</li>
<li>掌握软件包的安装、更新和卸载命令，如<code>apt-get</code>、<code>dnf</code>等。</li>
<li>学习使用软件包管理工具来搜索、安装和管理软件包。</li>
</ul>
</li>
<li>深入学习Shell脚本编程：
<ul>
<li>学习Shell脚本编程的基础知识，包括变量、条件语句、循环和函数等。</li>
<li>练习编写简单的Shell脚本来自动化常见的任务。</li>
</ul>
</li>
<li>了解网络配置和管理：
<ul>
<li>学习Linux网络配置的基本知识，包括IP地址、子网掩码、网关等。</li>
<li>掌握网络配置命令，如<code>ifconfig</code>、<code>ip</code>等。</li>
<li>学习使用网络诊断工具，如<code>ping</code>、<code>traceroute</code>等。</li>
</ul>
</li>
<li>学习系统监控和故障排除：
<ul>
<li>了解Linux系统监控的基本概念，如CPU、内存、磁盘使用等。</li>
<li>掌握系统监控命令，如<code>top</code>、<code>htop</code>、<code>free</code>等。</li>
<li>学习故障排除技巧，如查看日志文件、使用调试工具等。</li>
</ul>
</li>
</ol>
</blockquote>
<hr />
<p>文件互传肯定是在后面的因为里面会涉及到路径相关的内容，所以一些基础的命令绝对绝对是要讲解的。所以命令肯定是放在前面的，而命令都要讲哪些东西呢，就像哪些cat命令这些真的用的到吗，我咋认为用不到呀。</p>
<p>什么是命令？命令的通用格式是什么</p>
<ul>
<li>基本的文件和目录操作：
<ul>
<li><code>ls</code>：列出目录中的文件和子目录。01-Linux目录结构</li>
<li><code>cd</code>：切换当前工作目录。</li>
<li><code>pwd</code>：显示当前工作目录的路径。</li>
<li><code>mkdir</code>：创建新的目录。</li>
<li><code>touch</code>：创建新的空文件或更新现有文件的时间戳。</li>
<li><code>cp</code>：复制文件和目录。</li>
<li><code>mv</code>：移动文件和目录，或重命名文件和目录。</li>
<li><code>rm</code>：删除文件和目录。</li>
</ul>
</li>
<li>文件内容查看和编辑：
<ul>
<li><code>cat</code>：在终端中显示文件的内容。</li>
<li><code>more</code>或<code>less</code>：逐页显示文件的内容。</li>
<li><code>head</code>：显示文件的前几行。</li>
<li><code>tail</code>：显示文件的后几行。</li>
<li><code>grep</code>：在文件中搜索指定的模式。</li>
<li><code>vi</code>或<code>nano</code>：常用的文本编辑器，用于编辑文件。</li>
</ul>
</li>
<li>用户和权限管理：
<ul>
<li><code>sudo</code>：以超级用户权限执行命令。</li>
<li><code>useradd</code>：创建新用户。</li>
<li><code>passwd</code>：设置用户密码。</li>
<li><code>chown</code>：修改文件或目录的所有者。</li>
<li><code>chmod</code>：修改文件或目录的权限。</li>
</ul>
</li>
<li>网络相关命令：
<ul>
<li><code>ping</code>：测试与另一台计算机的网络连接。</li>
<li><code>ifconfig</code>或<code>ip</code>：查看和配置网络接口。</li>
<li><code>ssh</code>：远程登录到其他计算机。</li>
<li><code>scp</code>：在本地计算机和远程计算机之间复制文件。</li>
</ul>
</li>
<li>系统状态监控：
<ul>
<li>top：实时显示系统的整体资源使用情况，包括CPU、内存、进程等。</li>
<li>htop：类似于top命令，但提供了更多的交互式功能和信息展示。</li>
<li>ps：显示系统当前运行的进程列表。</li>
<li>kill：终止正在运行的进程。</li>
<li>free：显示系统内存的使用情况。</li>
<li>df：显示磁盘空间的使用情况。</li>
<li>du：计算文件或目录的磁盘使用量。</li>
</ul>
</li>
</ul>
<hr />
<p>windows和ubuntu之间的文件互传</p>
<ul>
<li>scp</li>
<li>sftp</li>
<li>直接拖动</li>
<li>共享文件夹</li>
<li>samba</li>
</ul>
<p>来一个可能有用的链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhi_Alanwu/article/details/131262822?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=windows%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BAubuntu%E4%B9%8B%E9%97%B4%E7%9A%84%E6%96%87%E4%BB%B6%E4%BA%92%E4%BC%A0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-131262822.142">博客</a></p>
<hr />
<hr />
<ol>
<li>Shell的概念：Shell是Linux操作系统中的命令行解释器，它接收用户输入的命令，并将其转化为操作系统可以理解的指令。学习Shell编程意味着学习如何编写一系列的Shell命令，以实现自动化和脚本化任务。</li>
<li>Shell脚本文件的创建：Shell脚本是一系列Shell命令的文本文件，通常以<code>.sh</code>为扩展名。你可以使用文本编辑器创建脚本文件，如<code>vi</code>或<code>nano</code>。</li>
<li>基本语法：
<ul>
<li>注释：使用<code>#</code>符号来添加注释，注释将被Shell忽略。</li>
<li>变量：在Shell编程中，你可以使用变量来存储和操作数据。变量名通常是大写字母，等号（=）用于给变量赋值，例如<code>name=&quot;John&quot;</code>。</li>
<li>输出：使用<code>echo</code>命令可以输出文本或变量的值到终端，例如<code>echo &quot;Hello, World!&quot;</code>或<code>echo $name</code>。</li>
<li>输入：使用<code>read</code>命令可以从终端读取用户的输入，并将其存储到一个变量中，例如<code>read name</code>。</li>
<li>命令执行：使用反引号（<code>）或</code><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo stretchy="false">)</mo><mi mathvariant="normal">‘</mi><mtext>来执行命令，并将其结果赋值给变量，例如</mtext><mi mathvariant="normal">‘</mi><mi>f</mi><mi>i</mi><mi>l</mi><mi>e</mi><mi>s</mi><mo>=</mo><mi mathvariant="normal">‘</mi><mi>l</mi><mi>s</mi><mi mathvariant="normal">‘</mi><mi mathvariant="normal">&quot;</mi><mtext>或</mtext><mi mathvariant="normal">‘</mi><mi>f</mi><mi>i</mi><mi>l</mi><mi>e</mi><mi>s</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">()`来执行命令，并将其结果赋值给变量，例如`files=`ls`&quot;或`files=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mclose">)</span><span class="mord">‘</span><span class="mord cjk_fallback">来</span><span class="mord cjk_fallback">执</span><span class="mord cjk_fallback">行</span><span class="mord cjk_fallback">命</span><span class="mord cjk_fallback">令</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">并</span><span class="mord cjk_fallback">将</span><span class="mord cjk_fallback">其</span><span class="mord cjk_fallback">结</span><span class="mord cjk_fallback">果</span><span class="mord cjk_fallback">赋</span><span class="mord cjk_fallback">值</span><span class="mord cjk_fallback">给</span><span class="mord cjk_fallback">变</span><span class="mord cjk_fallback">量</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">例</span><span class="mord cjk_fallback">如</span><span class="mord">‘</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">‘</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">s</span><span class="mord">‘</span><span class="mord">&quot;</span><span class="mord cjk_fallback">或</span><span class="mord">‘</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span></span></span>(ls)`。</li>
</ul>
</li>
<li>控制流结构：
<ul>
<li>条件语句：使用<code>if</code>语句进行条件判断，根据结果执行不同的命令块。</li>
<li>循环语句：使用<code>for</code>、<code>while</code>或<code>until</code>语句实现循环执行一系列命令的功能。</li>
</ul>
</li>
<li>函数：使用函数可以将一系列命令封装起来，并在需要时多次调用。函数有助于提高代码的重用性和可读性。</li>
<li>参数传递：你可以在运行Shell脚本时传递参数，并在脚本中访问这些参数。使用特殊变量<code>$1</code>、<code>$2</code>等来引用传递的参数。</li>
<li>文件处理：Shell编程也涉及文件的读取、写入和处理。你可以使用命令如<code>cat</code>、<code>grep</code>、``等来处理文件内容。</li>
</ol>
<hr />
<p>vmware虚拟机的网络设置</p>
<ul>
<li>桥接模式</li>
<li>nat模式</li>
<li>usb网卡</li>
<li>笔记本</li>
</ul>
<hr />
<p>假如我是一个新接触Linux的小白，我的第一步、第二步、第三步都是要学啥呢？]</p>
<p>可以多去网上看看人家录制好的课程，看一看那些大佬们是如何讲解的，都讲解了哪些内容，学习一下人们的讲课风格，学过来然后讲出去。目前看到了<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1n84y1i7td?p=11&amp;vd_source=f06237b57d9754575c93eaa6db881c53">黑马的课程</a>,讲的很是小白，我突然意识到我的层次降的还是不够低，</p>
<h1 id="111-工作记录"><a class="markdownIt-Anchor" href="#111-工作记录"></a> 1.11 工作记录</h1>
<h2 id="1更新3588源码"><a class="markdownIt-Anchor" href="#1更新3588源码"></a> 1.更新3588源码</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rk3588-evb7-lp4-v10-linux.dts </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;rk3588-evb7-lp4.dtsi&quot;</span><br><span class="line">#include &quot;rk3588-linux.dtsi&quot;</span><br><span class="line">#include &quot;topeet_rk3588_config.dtsi&quot;</span><br></pre></td></tr></table></figure>
<p>#include “rk3588-evb7-lp4.dtsi”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;rk3588.dtsi&quot;</span><br><span class="line">#include &quot;rk3588-evb.dtsi&quot;</span><br><span class="line">#include &quot;rk3588-rk806-single.dtsi&quot;</span><br><span class="line"></span><br><span class="line">#include &quot;topeet_screen_lcds.dts&quot;</span><br><span class="line">#include &quot;topeet_camera_config.dtsi&quot;</span><br></pre></td></tr></table></figure>
<h2 id="2继续写vim"><a class="markdownIt-Anchor" href="#2继续写vim"></a> 2.继续写vim</h2>
<p>第1节 vim的三种工作模式</p>
<p>第2节 光标的移动</p>
<p>第3节 光标的移动进阶版</p>
<p>第4节 vim文本插入</p>
<p>第5节 vim保存和退出</p>
<p>第6节 vim文本删除</p>
<p>第7节 vim的复制、粘贴和剪切</p>
<p>第8节 vim内容搜索</p>
<p>第9节 vim内容替换</p>
<p>第10节 标签页和窗口分割</p>
<h2 id="3总结"><a class="markdownIt-Anchor" href="#3总结"></a> 3.总结</h2>
<p>今天终于是将vim的那个文件写完了，讲解vim的文件，现在先确认一下最终的讲解路线，首先是讲解一下讲解的逻辑，</p>
<h1 id="110-工作记录"><a class="markdownIt-Anchor" href="#110-工作记录"></a> 1.10 工作记录</h1>
<p>昨天晚上和今天早上看了一下老师的视频，之前看的时候就没这个感觉，但是现在让我讲出来感觉就不一样了，当然也可能是看的次数多了，书读百遍其意自现，都有可能吧，但也确实确定了一个事情，任何一件事情，都应该要善于总结，而且最好是要讲出去，不然你可能学了也只是学了。</p>
<hr />
<p>有了一个好的想法，在视频最开始讲解演示本节视频要讲解的内容，然后在视频的结束根据写好的文档过一遍讲解过的内容。这个逻辑感觉挺好的。</p>
<hr />
<p>然后回到实际来，昨天晚上的vim多了几分内容，那个vim的文件需要内容的增加，就比如今天早上要学习的标签页、分页等等，都是需要改进的，今天的任务是确定vim的讲解文件内容，当然其实我学习的问题也不小，傲慢了，现在将那个三体的话重复一遍==弱小和无知并不是生存的障碍，傲慢才是==，确实傲慢了，就比如很看不起单词的跳转，以为只凭借上下左右移动就能万事无忧吗，还是守旧的心太强了，认为只要会这个方法，那么都可以，而实际上呢，也确实是可以的，但效率是真的弱，而且你还不知道有方法可以怎加效率，虽然你站在了巨人的肩膀上，但你的目光始终是向下的，所以你看的并不会更远，值得反思。</p>
<p>现在先根据老师的ppt来整理应该要讲解的内容。当然不能完全按照老师的来，我只是想看看我目前有什么是欠缺的，有什么是要给客户讲的，而又能怎样将内容以一个轻松的水平讲解出来。讲解先向后放，目前先去看内容。</p>
<hr />
<p>当前内容如下所示：</p>
<ul>
<li>第1讲：vim的三种工作模式</li>
<li>第2讲：移动光标</li>
<li>第3节：VIM的进入、保存和退出</li>
<li>第4节：文本编辑之删除单个字符</li>
<li>第5节：文本编辑之操作整行</li>
<li>第6节：文本编辑之插入.</li>
<li>第7节：撤消类命令</li>
<li>第8节：替换类命令</li>
<li>第9节：定位、跳转及文件状态</li>
<li>第10节：搜索类命令</li>
<li>第11节：配对括号跳转</li>
<li>第12节：替换命令</li>
<li>第13节：保存文件副本</li>
<li>第14节：复制粘贴文本</li>
<li>第15节：剪切文本</li>
<li>第16节：设置类命令的选项</li>
</ul>
<p>我先自己来填充一下上面的内容。看看我自己的熟练程度：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">- 第1讲：vim的三种工作模式</span><br><span class="line">	</span><br><span class="line">- 第2讲：移动光标</span><br><span class="line">	</span><br><span class="line">- 第3节：VIM的进入、保存和退出</span><br><span class="line">	</span><br><span class="line">- 第4节：文本编辑之删除单个字符</span><br><span class="line">	</span><br><span class="line">- 第5节：文本编辑之操作整行</span><br><span class="line">	</span><br><span class="line">- 第6节：文本编辑之插入</span><br><span class="line"></span><br><span class="line">- 第7节：撤消类命令</span><br><span class="line"></span><br><span class="line">- 第8节：替换类命令</span><br><span class="line"></span><br><span class="line">- 第9节：定位、跳转及文件状态</span><br><span class="line"></span><br><span class="line">- 第10节：搜索类命令</span><br><span class="line"></span><br><span class="line">- 第11节：配对括号跳转</span><br><span class="line"></span><br><span class="line">- 第12节：替换命令</span><br><span class="line">	</span><br><span class="line">- 第13节：保存文件副本</span><br><span class="line"></span><br><span class="line">- 第14节：复制粘贴文本</span><br><span class="line"></span><br><span class="line">- 第15节：剪切文本</span><br><span class="line"></span><br><span class="line">- 第16节：设置类命令的选项</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr />
<p>这里的vim还是不能只在这个文本里操作，还是边操作边写markdown比较好，直接操作谁看了都会懵，所以这个手册只是一个演示，实际的还是要markdown写出了。</p>
<hr />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">光标的移动 可以加上数字</span><br><span class="line"></span><br><span class="line">w: 将光标移动到下一个单词的开头</span><br><span class="line">b: 将光标移动到前一个单词的开头</span><br><span class="line">e: 将光标移动到下一个单词的词末</span><br><span class="line">单词的移动也能加上数字</span><br><span class="line"></span><br><span class="line">$: 将光标移动到当前行的行尾</span><br><span class="line">0：将光标移动到当前行的行首</span><br><span class="line"></span><br><span class="line">半屏滚动: ctrl+u/ctrl+d</span><br><span class="line">全屏滚动: ctrl+f/ctrl+b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">定位光标的位置</span><br><span class="line">zz：将光标置于屏幕的中间</span><br><span class="line">zt: 将光标移动到屏幕的顶部</span><br><span class="line">zb：将光标移动到屏幕的底部</span><br><span class="line"></span><br><span class="line">dw: 删除一个单词(从光标处到空格)</span><br><span class="line">d2w: 删除从当前光标开始处的 2 个单词</span><br><span class="line">d$: 删除从光标到一行末尾的整个文本</span><br><span class="line">d0: 删除从光标到一行开头的所有单词</span><br><span class="line"></span><br><span class="line">dd: 删除当前光标处的一整行=D</span><br><span class="line">5dd: 删除从光标开始处的 5 行代码</span><br><span class="line">dgg: 删除从光标到文本开头</span><br><span class="line">dG: 删除从光标到文本结尾</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">y: 复制，p:粘贴</span><br><span class="line">yw: 复制一个单词</span><br><span class="line">y2w: 复制 2 个单词</span><br><span class="line">y$: 复制从当前光标到行结尾的所有单词</span><br><span class="line">y0: 复制从当前光标到行首的所有单词</span><br><span class="line">yy: 复制一整行</span><br><span class="line">2yy: 复制从当前光标所在行开始的 2 行</span><br><span class="line">复制文本块</span><br><span class="line">    1.首先进入 visual 模式：v</span><br><span class="line">    2.移动光标选择文本</span><br><span class="line">    3.复制与粘贴的操作</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">标签页的新建：tabedit file/tab split</span><br><span class="line">标签页的切换: tabn/tabp</span><br><span class="line">按键：gt/gT</span><br><span class="line">标签页的关闭: tabclose 关闭当前的标签页，:tabonly</span><br><span class="line"></span><br><span class="line">分割窗口</span><br><span class="line">split/vsplit filename</span><br><span class="line">窗口间跳转</span><br><span class="line">ctrl+w w</span><br><span class="line"></span><br><span class="line">close: 关闭一个窗口</span><br><span class="line">qall: 退出所有窗口</span><br><span class="line">qall!: 放弃修改，退出所有窗口</span><br><span class="line">wqall: 保存并退出所有窗口</span><br><span class="line">wall: 保存所有窗口</span><br></pre></td></tr></table></figure>
<hr />
<hr />
<hr />
<p>还是要思考讲解vim的逻辑连贯性，不能老师写啥就写啥，或者那个教程写啥就写啥，目前的初版已经差不多了，现在来规整其中的逻辑，其实那个文件的逻辑还可以的其实，就是将内容向里面填充就行了，但是不是也不能过于复杂呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">第一节 三种模式（不需要更改）</span><br><span class="line"></span><br><span class="line">第二节 光标的移动</span><br><span class="line"></span><br><span class="line">第三节 光标的移动进阶版</span><br><span class="line">	gg</span><br><span class="line">	G</span><br><span class="line">	ctrl + g</span><br><span class="line">	w: 将光标移动到下一个单词的开头</span><br><span class="line">    b: 将光标移动到前一个单词的开头</span><br><span class="line">    e: 将光标移动到下一个单词的词末</span><br><span class="line">    单词的移动也能加上数字</span><br><span class="line"></span><br><span class="line">    %：匹配大括号、小括号、中括号从而跳转</span><br><span class="line">    $: 将光标移动到当前行的行尾</span><br><span class="line">    0：将光标移动到当前行的行首</span><br><span class="line"></span><br><span class="line">    半屏滚动: ctrl+u/ctrl+d</span><br><span class="line">    全屏滚动: ctrl+f/ctrl+b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    定位光标的位置</span><br><span class="line">    zz：将光标置于屏幕的中间</span><br><span class="line">    zt: 将光标移动到屏幕的顶部</span><br><span class="line">    zb：将光标移动到屏幕的底部</span><br><span class="line">    </span><br><span class="line">第四节 vim文本插入</span><br><span class="line"></span><br><span class="line">第五节 vim保存和退出</span><br><span class="line"></span><br><span class="line">第6节 vim文本删除</span><br><span class="line">	x 删除单个字符</span><br><span class="line"></span><br><span class="line">    dw: 删除一个单词(从光标处到空格)</span><br><span class="line">    d2w: 删除从当前光标开始处的 2 个单词</span><br><span class="line">    d$: 删除从光标到一行末尾的整个文本</span><br><span class="line">    d0: 删除从光标到一行开头的所有单词</span><br><span class="line"></span><br><span class="line">    dd: 删除当前光标处的一整行=D</span><br><span class="line">    5dd: 删除从光标开始处的 5 行代码</span><br><span class="line">    dgg: 删除从光标到文本开头</span><br><span class="line">    dG: 删除从光标到文本结尾</span><br><span class="line">    </span><br><span class="line">第7节 vim的复制、粘贴和剪切   </span><br><span class="line"></span><br><span class="line">第8节 vim内容搜索</span><br><span class="line"></span><br><span class="line">第9节 vim内容替换</span><br><span class="line"></span><br><span class="line">第10节 标签页和窗口分割</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>第1节 vim的三种工作模式</p>
<p>第2节 光标的移动</p>
<p>第3节 光标的移动进阶版</p>
<p>第4节 vim文本插入</p>
<p>第5节 vim保存和退出</p>
<p>第6节 vim文本删除</p>
<p>第7节 vim的复制、粘贴和剪切</p>
<p>第8节 vim内容搜索</p>
<p>第9节 vim内容替换</p>
<p>第10节 标签页和窗口分割</p>
<p>​</p>
<h1 id="19-工作记录"><a class="markdownIt-Anchor" href="#19-工作记录"></a> 1.9 工作记录</h1>
<p>关于unix 和Linux的发展能尽可能的简洁就简洁，现在更重要的是理清楚最终要讲解的主线以及讲课的风格。</p>
<p>再来反思一下海之蓝所说的，海之蓝的意思是先有一个整体的菜单，这样客户在学起来的时候才不会一头雾水，不然，哪怕你的细节问题处理的再好，客户不懂的欣赏那也是没有意义的，其次是你讲解的风格，目前的想法是沿用狂神老师的风格，通过笔记的方式来讲解，然后一点一点的截图。通过截图的方式写手册，这是一个很好的方式，我需要再去看一看狂神的风格，总结一下。</p>
<ul>
<li>第一节的课程大纲，简单的将整个课程要讲解的内容整体概述一下，以狂神的docker为例，他的大纲如下所示：</li>
</ul>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401091330183.png" alt="image-20240109133055121" /></p>
<p>用手将要讲解的内容敲出来,客户看的舒服，当然我讲的也舒服，我应该是达不到狂神在讲课时候的等级了，现在其实就很疑惑人们为什么能这么流利的语言不用备课就能如此牛的讲解出来呢，还是训练的问题，菜就多练。</p>
<ul>
<li>熟练运用markdown，文档内容和视频里的笔记内容不需要完全一致，甚至在视频里的笔记可以简单的写，只要你可以非常友好的讲解出来就行了，例如这个是在视频里的笔记，可以看到不能说十分的潦草吧，但是很简洁。</li>
<li><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401091355139.png" alt="image-20240109135501982" /></li>
</ul>
<p>然后来看实际笔记里的内容，具体如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401091400446.png" alt="image-20240109140007337" /></p>
<p>可以看到实际的手册资料可比视频里面讲解的时候详细的多，但是在视频里面都用通俗的语言讲解了出来。</p>
<p>目前总结的就这两个，我认为狂神老师也不应该是直接就能讲出来的，他也必然是现有的手册，而后面才有的视频，就算没有一个详细的手册也会有一个大体的框架，不然是没办法讲出来的。而我当前也是写好了手册，然后呢，就看到时候要怎样讲出来了，我的手册肯定不是稿子，这是给用户来看的，趁这个机会来真正的入门，这是一个很好的机会，希望你珍惜。</p>
<p>今天早上也说明了跟工作任务相匹配的情况下进步最快的，所以晚上要做什么，你懂了吗。</p>
<p>前面的内容差不多了，然后是不是要讲解vim了？我想应该是的，在tabby章节学习了远程SSH连接ubuntu，而我们要学习的第一个工具就是vim，apt安装就不管了。我要怎样讲解vim呢，其实vim提供了一个手册的，我目前的想法是讲这个手册进行修改，保留下我想要的部分。</p>
<h1 id="18-工作记录"><a class="markdownIt-Anchor" href="#18-工作记录"></a> 1.8 工作记录</h1>
<p>新的一周，重新开始。</p>
<p>关注度也是存在问题的，这样吧，在上班的时候定一个小规矩，只有有人@你，即下方小企鹅闪烁才会看群，其他时候不看群，这个总是可以的吧。</p>
<p>仍旧是上周没有解决的问题，</p>
<p>问题 1.Linux的发展历史</p>
<p>问题2.Linux可以在哪些设备上运行</p>
<p><strong>笨方法学Linux</strong><br />
<a target="_blank" rel="noopener" href="https://edu.51cto.com/topic/2917.html?utm_source=acrt">https://edu.51cto.com/topic/2917.html?utm_source=acrt</a></p>
<p><strong>从零开始编译、构建自己的Linux实战视频课程</strong><br />
<a target="_blank" rel="noopener" href="https://edu.51cto.com/course/9283.html">https://edu.51cto.com/course/9283.html</a></p>
<p>上面两个视频看起来都很好，感觉可以买一下，看看吧，具体问题具体分析。</p>
<h2 id="问题-1linux的发展历史"><a class="markdownIt-Anchor" href="#问题-1linux的发展历史"></a> 问题 1.Linux的发展历史</h2>
<h3 id="11-unix操作系统的历史"><a class="markdownIt-Anchor" href="#11-unix操作系统的历史"></a> 1.1 unix操作系统的历史</h3>
<p>贝尔实验室的阁楼</p>
<p>肯·汤普森(Ken Thompson) 1969年花费了三周时间写出了内部测试版本的unix。C语言创始人。</p>
<p>丹尼斯·里奇</p>
<p>道格·麦基尔罗伊 程序员和数学家，通过算法实现了很多好用的命令例如spll、diff、aph、 speak、sort、echo、tee</p>
<p>美国电话电报公司（AT&amp;T）是一家美国电信公司，创建于1877年，曾长期垄断美国长途和本地电话市场。 AT&amp;T在近20年中，曾经过多次分拆和重组。AT&amp;T是美国最大的本地和长途电话公司， 总部位于得克萨斯州圣安东尼奥。</p>
<p>起因：<br />
麻省理工大学希望对当时的兼容分时系统CTSS进行升级，作为面向大众提供计算服务的信息处理工具，这套系统叫做“MULTICS”,但是麻省理工大学的能力不足以完成这个项目，于是联合了贝尔实验室和通用电气，但由于向MULTICS添加的功能太多也过于复杂，就形成了一个四不像，于是贝尔实验室就退出了这个项目。而肯·汤普森作为贝尔实验室的一员，在退出之后仍想搞操作系统，于是在一个PDP7的古老电脑上写出了太空旅行的游戏，游戏顺利完成之后发现只差三个部分就可以实现一个新的操作系统了，三个部分分别位用来创建代码的编辑器，用来将代码转为机器语言的汇编器和内核的外层，一周写一个三周就可以实现了。于是在1969年unix诞生了。</p>
<p>然后就是肯·汤普森和丹尼斯·里奇 对unix的不断修改和优化，后面出现了不同的版本，第六版和第七版是两个重要的里程碑，分别发布于1975年和1979年，这两个版本一个是正式对外发布的版本一个是后面遍地开花的unix分叉点，C语言和C++也是在这两个版本中诞生的。</p>
<p>在unix之前，内存是非常昂贵的，2kb的内存就可以卖到1.6万美元，所以操作系统只能使用汇编语言来写，系统之间也互不兼容，直到70年代基于半导体和集成电路的新内存技术普及，才拉低了内存的制造成本，促使C语言这种高级语言的应用成为了可能 ，第6版本的unix内核就是由9000行的C语言和700行的汇编语言写成的，C语言让系统的维护和修改变的容易，也让其更方便的移植到不同的计算机上，打破了不同架构计算机操作系统互不兼容的局面，到了90年代几乎所有的CPU系统都是围绕C语言和unix来设计的。</p>
<p>1975年肯·汤普森带着unix第六版在加州大学教授操作系统课程，一位叫比尔乔伊的研究生修改了unix的本地版本，添加了一些自己的程序，包括vi编辑器，csh以及TCP/IP协议，以及至今仍在使用的TCP/IP网络接口，后来它修改的版本演化成了unix最重要的分支bsd，当时unix向高校提供免费的版权，但对于商用版本需要收取2万美元的授权费。从第七版开始，unix有了两条发展线，官方商业版本和BSD版本，BSD英文全称是Berkeley Software Distribution，即伯克利软件发布。1984年AT&amp;T即贝尔实验室的母公司，看到unix有利可图，申请了unix的商标以及发布了第一个商业版本，并指定了unix的使用标准，而bsd进行了大洗稿，对unix进行了重构，用新的代码重写了相同的功能， 还在1991年发布了不包含AT&amp;T专利材料的unix版本，从而打赢了与AT&amp;T的官司，并建立起了庞大的bsd家族，Unix的发展树，如下图所示：</p>
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401081327753.jpeg" alt="img" style="zoom:200%;" />
<p>而bsd的创作者比尔乔伊，也凭借着BSD一举创建了sun公司。</p>
<p>后来年仅21岁的芬兰大学生（linus Torvalds）因为不满足于unix的限制性许可，同样决定动手开发一个“类unix系统”，就这样Linux出现了。</p>
<p>Linux免费、开源，相较于windows更安全</p>
<p>unix是要收费的，所以Linux的应用十分广泛</p>
<h3 id="12-gun运动"><a class="markdownIt-Anchor" href="#12-gun运动"></a> 1.2 GUN运动</h3>
<p>在20世纪70年代末，AT&amp;T（美国电话电报公司）对UNIX操作系统的源代码使用做出了限制，禁止将其提供给学生群体使用。AT&amp;T收回了UNIX的版权，并不再将其开源。</p>
<p>由于这一限制，广大用户和学校面临着没有可用操作系统的困境。而GNU项目始于1983年，由理查德·斯托曼（Richard Stallman）发起。斯托曼是一位计算机科学家和软件自由活动家，他对当时UNIX操作系统的私有化和限制使用感到担忧。为了提供一个自由、开放的操作系统，他决定创建一个完全由免费软件组成的类Unix计算机操作系统，这就是GNU操作系统。</p>
<p>GNU是一个递归缩写，意味着&quot;GNU’s Not UNIX&quot;（GNU不是UNIX），强调了GNU操作系统与UNIX的区别。斯托曼的目标是创建一个功能完备的操作系统，与UNIX兼容，并保证用户的自由和权益。</p>
<p>GNU项目的核心是开发一系列自由软件工具，如GNU编译器套件（GCC）、GNU调试器（GDB）、GNU Bash（命令行解释器）等。这些工具赋予开发者和用户自由地运行、复制、学习、修改和分发软件的权利。</p>
<p>然而，GNU项目的发展遇到了一个重要的挑战：缺少一个核心组件，即操作系统内核。为了解决这个问题，自由软件基金会与芬兰学生林纳斯·托瓦兹（Linus Torvalds）合作，将Linux内核与GNU工具链结合，形成了一个完整的自由操作系统，即Linux操作系统。这个组合被广泛称为Linux，但准确来说应该是GNU/Linux。</p>
<p>Linux内核由林纳斯·托瓦兹（Linus Torvalds）在1991年发布，并成为一个免费公开的代码项目。Linux内核的开放性吸引了全球各地的开发者参与其中，共同贡献代码和改进。这使Linux成为影响最广泛的开源软件项目之一。</p>
<p>Linux内核作为操作系统的核心，为不同的开发团体（包括开源社区、企业、个人等）提供了一个基础平台。这些团体在Linux内核的基础上进行一定的修改和补充，加入图形界面（GUI）和应用等部分，形成了各种不同的Linux操作系统发行版。</p>
<p>不同的Linux发行版之间存在衍生关系，形成了几大家族，如Red Hat、Debian等。每个家族内部又衍生出一些著名的版本，如Ubuntu、openSUSE、CentOS、Red Hat Enterprise Linux、Fedora等。</p>
<p>这些Linux发行版在功能和特性上可能有所差异，但它们都共享Linux内核的基本功能和特性。它们提供了各种工具和应用程序，用于满足不同用户的需求，例如桌面操作系统、服务器操作系统、嵌入式系统等。</p>
<p>Linux发展时间线：</p>
<p><a target="_blank" rel="noopener" href="https://upload.wikimedia.org/wikipedia/commons/1/1b/Linux_Distribution_Timeline.svg">https://upload.wikimedia.org/wikipedia/commons/1/1b/Linux_Distribution_Timeline.svg</a></p>
<h3 id="linux应用领域"><a class="markdownIt-Anchor" href="#linux应用领域"></a> Linux应用领域</h3>
<p>Linux操作系统主要有三大应用领域：企业级服务器、嵌入式和个人桌面。</p>
<ol>
<li>服务器领域：Linux在企业级服务器领域的应用非常广泛。许多大型硬件厂商都支持Linux操作系统，并且大型和超大型互联网企业都在使用Linux作为服务器端的程序运行平台。Linux具有免费、稳定和高效等特点，在服务器领域得到了广泛应用。</li>
<li>嵌入式领域：近年来，Linux在嵌入式领域的应用也得到了大幅提升。它被广泛应用于机顶盒、数字电视、网络电视、手机等嵌入式设备中。Linux在嵌入式领域的优势包括稳定性、对网络的良好支持性和低成本等。</li>
<li>个人桌面领域：在个人桌面领域，Linux在过去一直面临着传统Linux界面简单、操作复杂、应用软件较少的挑战，一直被Windows所压制。然而，近年来随着Ubuntu、Fedora等优秀桌面环境的兴起以及各大硬件厂商对Linux的支持增加，Linux在个人桌面领域的市场份额逐渐增加。根据StatCounter的数据，Linux在全球桌面端的市场份额从2012年的0.85%上升至2019年的1.68%。</li>
</ol>
<h2 id="问题2-linux的硬件限制"><a class="markdownIt-Anchor" href="#问题2-linux的硬件限制"></a> 问题2 Linux的硬件限制</h2>
<p>MMU，感觉MMU的概念还比较遥远，这里就先按下不表。</p>
<p>但是上面的Linux发展历史确实可以好好的整理一下，我要如何讲解才对的，将一些重要的地方留下，而一些无关紧要的地方看情况删掉，毕竟侧重点是不一样的。关于Linux的介绍这个地方，目前看来是必须要讲解的，但是具体要怎样讲解这是一个问题，讲故事的方式，要如何才能生动呢？</p>
<h1 id="16-工作记录"><a class="markdownIt-Anchor" href="#16-工作记录"></a> 1.6 工作记录</h1>
<p>​	先来找自己的一个原因，这些天晚上都睡不着了，目前猜测的原因是早上起的太晚了，就导致晚上也不是很困，失去了之前的那种感觉了，所以问题还是出在早起这个地方，所以早起的闹钟不能没有，这个是必须的，以后提前到早上六点，一切等搬家吧。</p>
<p>搬家这个东西，我还在考虑是怎么个搬家的方法，可以明天先把一些书搬一下，但我又感觉太早了，怎么办呢，还是算了吧，今天回家规划一下最终要如何搬，搞一个详细的搬家计划，两个行李箱怎么说也能把书搬完，而至于其他的东西，慢慢的搬吧，挺好的，或者今天晚上就看着搬一下，这倒也挺好的，这样自己一点一点的搬，最省心，但目前看着货拉拉的钱，倒也很便宜，也才二百呀，我心动了，还是货拉拉吧，目前定的时间是1月21号，但前提是我需要将这些都打包好，倒也还可以把。而至于需要有多少的箱子啥的，这个待定，今天回家就先开始收拾着，不是很着急，但说的21号就21号搬完，遵守规则，买了三个箱子，感觉倒也差不多够了，没啥东西，就先这样吧，从今天回家就开始收拾，有些不需要的东西，该扔就扔吧。行了，目前就先这样吧，今天的任务是继续写基础知识的手册，新的一天加油。</p>
<hr />
<hr />
<hr />
<ul>
<li>海之蓝说的很正确，说的很对，对于一个初学者来说真正应该懂的是什么？是一些懵懵懂懂的概念，而并不是巴拉巴拉的讲几节课，其实还是没能做到与看视频的人做到共情，我列的第一节内容是为什么使用虚拟机，但客户真的能理解吗？我将这个放第一节真的合适吗？答案是显而易见的，那肯定是不合适的，海之蓝说的是对的，应该要从Linux开始介绍：</li>
</ul>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401061624608.png" alt="image-20240106162424562" /></p>
<p>虽然海之蓝说的并不全对，但至少让我认识到，当前的框架是不对的，重新理解一下，就跟为什么用虚拟机一样，虚拟机充当的角色又是什么？所以这个概念需要懂呀。目前就先解决这个问题。</p>
<ul>
<li>
<p>引言很重要，其实也就是下面提到的那个大象，先让客户将大象看一遍，随后再来介绍四肢或者，你把人蒙着眼睛，摸到的大象，和先让他看看大象再去摸，完全不一样</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401061708123.png" alt="image-20240106170802079" /></p>
</li>
<li>
<p>进度条，这个东西很重要，我认为在我的视频里必须要加上这个，<a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv27533632/">https://www.bilibili.com/read/cv27533632/</a></p>
</li>
<li>
<p>shell编程、系统编程、makefile番外</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/jaywcjlove/linux-command">https://github.com/jaywcjlove/linux-command</a>  github学习命令的一个推荐</p>
</li>
</ul>
<hr />
<hr />
<hr />
<p>问题的根本来了，也是最应该解决的一个问题，为什么要讲解Linux呢？我们为什么要学习Linux？Linux的作用是啥？究竟什么样的配置才能跑起来Linux？</p>
<h1 id="15-工作记录"><a class="markdownIt-Anchor" href="#15-工作记录"></a> 1.5 工作记录</h1>
<p>​	昨天将3588和3588邮票孔的编译手册进行了更新，看到有客户对我做的东西做出了肯定，我就会感觉到莫名的高兴：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401051400695.png" alt="image-20240105140054624" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401051402044.png" alt="image-20240105140220997" /></p>
<p>明天又要OKR了，其实这些任务倒也还好，继续整理RK3588S的手册，其实归根结底也没有啥，尤其是我将名称修改了之后，这样三个系统的截图就可以通用了，倒是可以省去很多的事情，我很喜欢，最后是那个打包脚本，极大的提高了我的镜像更新速度，感觉还好。</p>
<p>行了，闲杂事情终于是干完了，然后回归主线任务，不能一直的向后拖呀，我是怎么想的呢，一切都要循序渐进，做完一件事情之后再去做另一件事情，然后呢，也还行，今天和明天也不用技术支持，先将写好的markdown打磨一下，然后继续向后学习。</p>
<h1 id="14-工作记录"><a class="markdownIt-Anchor" href="#14-工作记录"></a> 1.4 工作记录</h1>
<p>​	行了，上午技术支持又搞了好久，这一周又马上过去了，可真的太快了，我的测试手册还有很多要写的,先把测试手册写完再说。</p>
<h1 id="13-工作记录"><a class="markdownIt-Anchor" href="#13-工作记录"></a> 1.3 工作记录</h1>
<p>一天的技术支持呀，目前感觉还行，边技术支持边学习，或者将3588的那个源码也推进一下，也不是不行，算了吧，3588的以后再说了，目前还是继续写昨天没有完成规划吧，虽然技术支持的问题有些多，昨天推完源码，今天就技术支持，整理一下问题也挺好的。</p>
<p>首先在写之前，我必须自己先掌握了对应的知识，自己都没掌握的知识，更别说给别人讲解了</p>
<p>在自己学习完成之后，首先要写根据要讲解的内容写一个第一版本的手册，用来进行学习的巩固和完善，也为后面的给用户看的手册创造一个还可以的蓝本，</p>
<ol>
<li>学习要讲解的内容</li>
<li>根据学习到的内容写第一遍的markdown手册</li>
<li>根据第一遍的markdown手册写给用户看的手册</li>
<li>录制视频</li>
</ol>
<p>上面就是一个整体的步骤，想到了一个很好的办法，我可以有两个屏幕，一个屏幕用来存放已经写好的markdown，而另一个屏幕用来存放空白的markdown，这样的话我讲解的过程中就可以直接复制相应的内容，从而对一个空白的markdown进行完善，这个想法很不错，如果我仅仅知识凭借稿子来进行推进，那可真的太弱了，我认为不应该局限于此，这里是必须要推进的一个点，总是要有进步的，你说是吗。</p>
<p>为什么使用Linux操作系统进行编译？</p>
<p>我好像一直都没明白这个问题，好像自然而然就将这个问题给遗忘了，忘记了这个才是最根本的那一个问题，无论是安装虚拟机软件vmware，还是安装ubuntu22，虚拟机的目的我知道了，为了一个电脑上搞两个系统嘛，这个Linux系统的最终目的是什么，那我平常都在Linux系统中做什么呢？</p>
<p>源码的编译  这个是大头，其他的一些操作好像也仅仅是为了源码的编译而进行打工的，更深层次的原因等等再深究。</p>
<p>应用程序的编写，其实这个也应该算是编译的另一方面的应用。</p>
<p>其他是不是就没了，好像归根结底就上面这两个实际用处，除了编译还是编译，而透过现象看本质，编译需要的是编译环境，也需要源码的支持，但这里我就不是很理解了，到底是谁依赖的谁呢？环境其实就在那个地方，源码其实是根据编译环境而进行编写出来的，编译凭借的有是什么呢？是一些编译工具、是交叉编译工具链，其他是不是也就没了，那到底是谁成就了谁呢？</p>
<p>首先来看这个问题：不能再windows下进行内核的编译吗？</p>
<p>在一般情况下，Windows 操作系统本身并不支持编译 Linux 内核。这是因为 Linux 内核的编译通常需要使用 Linux 环境中的工具链和库文件，而这些工具和库在 Windows 环境中并不直接可用。</p>
<p>但是，有几种方法可以在 Windows 下进行 Linux 内核的编译：</p>
<ol>
<li>使用虚拟机：你可以在 Windows 上安装虚拟机软件（如 VirtualBox、VMware）并创建一个运行 Linux 操作系统的虚拟机。在虚拟机中，你可以设置 Linux 开发环境并进行 Linux 内核的编译。</li>
<li>使用 Windows Subsystem for Linux（WSL）：WSL 是 Windows 10 中的一个功能，它允许在 Windows 上运行 Linux 子系统。通过启用 WSL 并安装适当的 Linux 发行版（如 Ubuntu），你可以在 Windows 上使用类似于 Linux 的环境进行内核编译。</li>
<li>使用 Docker：Docker 是一种容器化技术，它可以在 Windows 上运行包含 Linux 环境的容器。你可以使用 Docker 在 Windows 上创建一个包含 Linux 环境的容器，并在容器中进行 Linux 内核的编译。<br />
其实这些解决方法可以不看，重要的是上面那个解释为什么要使用Linxu开发环境了：==编译通常需要使用 Linux 环境中的工具链和库文件==</li>
</ol>
<p>在 Windows 环境下编译安卓或其他开发板的源码存在一些挑战和限制，主要有以下几个原因：</p>
<ol>
<li>编译工具链和依赖项：编译安卓或其他开发板的源码通常需要使用特定的编译工具链和依赖项，这些工具链和依赖项在 Windows 上可能不直接可用。例如，安卓源码编译需要使用 GNU 工具链（如 GCC、Make）、特定版本的 Java Development Kit（JDK）等，这些工具在 Windows 上需要额外配置和设置。</li>
<li>平台差异：源码编译通常依赖于底层操作系统的特性和接口。安卓源码和其他开发板的源码通常是为 Linux 或类 Unix 环境设计的，因此在 Windows 上进行编译可能会遇到平台差异的问题。例如，文件路径分隔符、环境变量、系统调用等在 Windows 和 Linux 之间有所不同，需要进行相应的适配和调整。</li>
<li>软件包管理：源码编译通常需要安装和管理各种依赖的软件包和库。在 Linux 环境中，通常使用包管理器（如 apt、yum）来管理软件包，而在 Windows 上没有类似的集中式包管理系统。这可能导致在 Windows 环境下手动安装和配置依赖项变得更加复杂和困难。</li>
</ol>
<p>我们使用Linux操作系统主要是用来进行编译的，由于开发板上使用的就是Linux操作系统，所以</p>
<h1 id="12-工作记录"><a class="markdownIt-Anchor" href="#12-工作记录"></a> 1.2 工作记录</h1>
<p>==新的一年，天天开心==</p>
<p><strong>==假如你某一天失去了生命的意义，那就去码头整点薯条吧==</strong></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401021100799.png" alt="image-20240102110028735" /></p>
<p>这是现在整理完成的，但是还是没想明白要怎样讲解出来，目前的想法是跟狂神一样，使用markdown来进行讲解，但是会遇到一些问题，现在将这些问题进行陈述，狂神的课程是以markdown为基础的，而王老师或者其他的人，也并不是完全从0开始，而是写了一个大纲，我要从零开始写markdown呢，还是写好markdown跟着markdown来讲解呢，这是一个很大很大的问题。亦或者我写一个markdown，然后讲解的时候再来一个markdown，好像这个才是最合理的。最终有没有文档其实无所谓，只要有这个markdown文件就足够了，有一个可以直接用来做对照的markdown，用于后期客户的复习，除此之外还能给我讲课提供一个很好的步骤，贯穿讲解的逻辑，当然讲课的时候不需要完全跟写好的手册一样，随心而已。</p>
<p>所以在讲课之前一定是要整理好一个能给客户看的markdown，这样就相当于文档了，也挺好的。</p>
<hr />
<hr />
<hr />
<hr />
<hr />
<p>搞了一天的3568编译脚本，哈哈还挺有成就感的，我很高兴，但是人们呢怎么可以一直在舒适区呆着呢？就像温水里的青蛙，逐渐的死去，但事实真的就是如此吗，其实相对于之前来看，现在算是舒适区吗，当然不算，所以位置是相对的呀，你说对吗，就跟中午看的那个短片动画里讲的，生活的重复，带来的并不仅仅是坏处，观点不同罢了。</p>
<p>所以接下来的日子依然要继续呀，看上面的第一段话，也写出来了未来一段路程的规划。</p>
<p>首先在写之前，我必须自己先掌握了对应的知识，自己都没掌握的知识，更别说给别人讲解了</p>
<p>在自己学习完成之后</p>
<ol>
<li>学习要讲解的内容</li>
</ol>
<h1 id="1229-工作记录"><a class="markdownIt-Anchor" href="#1229-工作记录"></a> 12.29 工作记录</h1>
<h2 id="1继续写要讲解的内容"><a class="markdownIt-Anchor" href="#1继续写要讲解的内容"></a> 1.继续写要讲解的内容</h2>
<p>终于算是将前面一小部分的内容搞定了，其实也不能说是搞定，最少是相关的内容算是搞完了，然后便是要怎样讲述出来的问题了</p>
<h2 id="2思考"><a class="markdownIt-Anchor" href="#2思考"></a> 2.思考</h2>
<p>其实现在还差的很远呢，无论是内容、方向亦或者是框架都是要完善的，甚至你连最基本的核心理念都没有搞明白，不管要做什么，最基本的那个中心点是不能变的，所以现在的目标是找到这个中心点，==这次的问题不是为什么要录制这个视频了，而是要录制的内容应该达到什么样的程度？==</p>
<p>对，这一次总结的很对，你要先确定上面的问题，这两天一直在确定前几个小节的内容，只有在有了一定的内容之后，才能有一个认识，否则你连想到这个问题的资格都没有，所以前面做的所有的东西都是有用的，前面的努力并没有白费，而当今要做的是为了看清前面的路。</p>
<p>其实我疑惑的点就在于，我要讲解到怎样的程度，还有我要以怎样的方式讲出来？其实后面这个可以等等再谈，现在的重点是要讲解到怎样的程度，如果仅仅是讲解这些最基础的东西，那么之前的那个类型的视频为什么又要替换呢？现在我已经忘记了为什么要录制这个视频的初衷，我来回忆一下把？</p>
<ol>
<li>
<p>之前的视频是以imx6ull为中心，去讲解的，而现在中心已经变了，也不能仅仅只是以3568为核心，更重要的是讲究通用性，如果不考虑通用性的话，现在的视频完全没有重新录制一遍的必要，但是通用性要到怎样的程度呢，还有相应的深度又该如何呢？</p>
<p>好难呀，找不到做这个东西的意义了，那是不是我的出发点就是错的呢，是不是这个视频不需要被替代，而仅仅只是需要一个新的视频ne</p>
</li>
</ol>
<h1 id="1228-工作记录"><a class="markdownIt-Anchor" href="#1228-工作记录"></a> 12.28 工作记录</h1>
<h2 id="1ssh学习"><a class="markdownIt-Anchor" href="#1ssh学习"></a> 1.ssh学习</h2>
<p>虽然不学习这些基础知识，我也能用，或者也能根据网上的教程配置免密登录啥的，但是我认为学习不应该仅仅止于此，还应该有自己的思考，自己的想法以及一些更深层次的学习。</p>
<h3 id="11-初识ssh"><a class="markdownIt-Anchor" href="#11-初识ssh"></a> 1.1 初识SSH</h3>
<p>SSH是一种协议标准，其目的是实现安全远程登录以及其它安全网络服务。</p>
<p>SSH仅仅是一协议标准，其具体的实现有很多，既有开源实现的OpenSSH，也有商业实现方案。使用范围最广泛的当然是开源实现OpenSSH。</p>
<h3 id="12-ssh-工作原理"><a class="markdownIt-Anchor" href="#12-ssh-工作原理"></a> 1.2 SSH 工作原理</h3>
<p>首先为什么要有SSH呢，无外乎是想要通过一种安全的方式进行安全的数据传输，当前对于数据加密的方式有两种，分别为对称加密和非对称加密.</p>
<p>所谓<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86&amp;spm=1001.2101.3001.7020">对称加密</a>，指加密解密使用同一套秘钥。如下图所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312281123576.png" alt="image-20231228112322496" /></p>
<p>对称加密的加密强度高，很难破解。但是在实际应用过程中不得不面临一个棘手的问题：如何安全的保存<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%AF%86%E9%92%A5&amp;spm=1001.2101.3001.7020">密钥</a>呢？尤其是考虑到数量庞大的Client端，很难保证密钥不被泄露。一旦一个Client端的密钥被窃据，那么整个系统的安全性也就不复存在。为了解决这个问题，非对称加密应运而生。非对称加密有两个密钥：“公钥”和“私钥”。</p>
<p>两个密钥的特性：<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%85%AC%E9%92%A5&amp;spm=1001.2101.3001.7020">公钥</a>加密后的密文，只能通过对应的私钥进行解密。而通过公钥推理出私钥的可能性微乎其微。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312281124987.png" alt="在这里插入图片描述" /></p>
<ul>
<li>1.远程Server收到Client端用户TopGun的登录请求，Server把自己的公钥发给用户。</li>
<li>2.Client使用这个公钥，将密码进行加密。</li>
<li>3.Client将加密的密码发送给Server端。</li>
<li>4.远程Server用自己的私钥，解密登录密码，然后验证其合法性。</li>
<li>5.若验证结果，给Client相应的响应。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%A7%81%E9%92%A5&amp;spm=1001.2101.3001.7020">私钥</a>是Server端独有，这就保证了Client的登录信息即使在网络传输过程中被窃据，也没有私钥进行解密，保证了数据的安全性，这充分利用了非对称加密的特性。</p>
<h2 id="3-基于口令的认证"><a class="markdownIt-Anchor" href="#3-基于口令的认证"></a> 3. 基于口令的认证</h2>
<p>SSH的publish key和private key都是自己生成的，没法公证。只能通过Client端自己对公钥进行确认。通常在第一次登录的时候，系统会出现下面提示信息：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The authenticity of host &#x27;ssh-server.example.com (12.18.429.21)&#x27; can&#x27;t be established.</span><br><span class="line"></span><br><span class="line">RSA key fingerprint is 98:2e:d7:e0:de:9f:ac:67:28:c2:42:2d:37:16:58:4d.</span><br><span class="line"></span><br><span class="line">Are you sure you want to continue connecting (yes/no)?</span><br></pre></td></tr></table></figure>
<p>上面的信息说的是：<a target="_blank" rel="noopener" href="http://xn--ssh-server-8x2p138ttxd7vypy3bii2d.example.com">无法确认主机ssh-server.example.com</a>（12.18.429.21）的真实性，不过知道它的公钥指纹，是否继续连接？</p>
<blockquote>
<p>之所以用fingerprint代替key，主要是key过于长（RSA算法生成的公钥有1024位），很难直接比较。所以，对公钥进行hash生成一个128位的指纹，这样就方便比较了。</p>
</blockquote>
<p>如果输入yes后，会出现下面信息：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Warning: Permanently added &#x27;ssh-server.example.com,12.18.429.21&#x27; (RSA) to the list of known hosts. </span><br><span class="line"></span><br><span class="line">Password: (enter password) </span><br></pre></td></tr></table></figure>
<p>该host已被确认，并被追加到文件known_hosts中，然后就需要输入密码，之后的流程就按照图1-3进行。</p>
<h2 id="4基于公钥认证"><a class="markdownIt-Anchor" href="#4基于公钥认证"></a> 4.基于公钥认证</h2>
<p>在上面介绍的登录流程中可以发现，每次登录都需要输入密码，很麻烦。SSH提供了另外一种可以免去输入密码过程的登录方式：公钥登录。流程如下：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312281129257.png" alt="img" /></p>
<ul>
<li>1.Client将自己的公钥存放在Server上，追加在文件authorized_keys中。</li>
<li>2.Server端接收到Client的连接请求后，会在authorized_keys中匹配到Client的公钥pubKey，并生成随机数R，用Client的公钥对该随机数进行加密得到pubKey®<br />
，然后将加密后信息发送给Client。</li>
<li>3.Client端通过私钥进行解密得到随机数R，然后对随机数R和本次会话的SessionKey利用MD5生成摘要Digest1，发送给Server端。</li>
<li>4.Server端会也会对R和SessionKey利用同样摘要算法生成Digest2。</li>
<li>5.Server端会最后比较Digest1和Digest2是否相同，完成认证过程。</li>
</ul>
<blockquote>
<p>在步骤1中，Client将自己的公钥存放在Server上。需要用户手动将公钥copy到server上。这就是在配置ssh的时候进程进行的操作。下图是GitHub上SSH<br />
keys设置视图：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312281129188.png" alt="img" /></p>
</blockquote>
<h2 id="5ssh实践"><a class="markdownIt-Anchor" href="#5ssh实践"></a> 5.SSH实践</h2>
<p>生成密钥操作</p>
<p>经过上面的原理分析，下面三行命令的含义应该很容易理解了：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh-keygen -t rsa -P <span class="string">&#x27;&#x27;</span> -f ~/.ssh/id_rsa</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> 0600 ~/.ssh/authorized_keys</span></span><br></pre></td></tr></table></figure>
<p>ssh-keygen是用于生产密钥的工具。</p>
<ul>
<li>-t：指定生成密钥类型（rsa、dsa、ecdsa等）</li>
<li>-P：指定passphrase，用于确保私钥的安全</li>
<li>-f：指定存放密钥的文件（公钥文件默认和私钥同目录下，不同的是，存放公钥的文件名需要加上后缀.pub）<br />
首先看下面~/.ssh中的四个文件：</li>
</ul>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312281129198.png" alt="img" /></p>
<ul>
<li>1.id_rsa：保存私钥</li>
<li>2.id_rsa.pub：保存公钥</li>
<li>3.authorized_keys：保存已授权的客户端公钥</li>
<li>4.known_hosts：保存已认证的远程主机ID（关于known_hosts详情，见文末更新内容）</li>
</ul>
<p>四个角色的关系如下图所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312281129206.png" alt="img" /></p>
<blockquote>
<p>需要注意的是：一台主机可能既是Client，也是Server。所以会同时拥有authorized_keys和known_hosts。</p>
</blockquote>
<p>登录操作</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">以用户名user，登录远程主机host</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh user@host</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地用户和远程用户相同，则用户名可省去</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh host</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SSH默认端口22，可以用参数p修改端口</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh -p 2017 user@host</span></span><br></pre></td></tr></table></figure>
<h2 id="6-总结"><a class="markdownIt-Anchor" href="#6-总结"></a> 6. 总结</h2>
<p>本文以图文方式对SSH原理进行解析（主要指<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95&amp;spm=1001.2101.3001.7020">远程登录</a>，没有涉及端口转发等功能）。同时分析了非对称加密的特性，以及在实践过程中如何对加密操作进行改进。</p>
<p><strong>下面是新增的更新：</strong></p>
<ol>
<li>known_hosts中存储的内容是什么？<br />
known_hosts中存储是已认证的远程主机host key，每个SSH Server都有一个secret, unique ID, called a host key。</li>
<li>host key何时加入known_hosts的？<br />
当我们第一次通过SSH登录远程主机的时候，Client端会有如下提示：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host key not found from the list of known hosts.</span><br><span class="line"></span><br><span class="line">Are you sure you want to continue connecting (yes/no)?</span><br></pre></td></tr></table></figure>
<p>此时，如果我们选择yes，那么该host key就会被加入到Client的known_hosts中，格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">domain name+encryption algorithm+host key</span></span><br><span class="line"></span><br><span class="line">example.hostname.com ssh-rsa AAAAB4NzaC1yc2EAAAABIwAAAQEA。。。</span><br></pre></td></tr></table></figure>
<p>​    3.为什么需要known_hosts？</p>
<p>最后探讨下为什么需要known_hosts，这个文件主要是通过Client和Server的双向认证，从而避免中间人（man-in-the-middle attack）攻击，每次Client向Server发起连接的时候，不仅仅Server要验证Client的合法性，Client同样也需要验证Server的身份，SSH client就是通过known_hosts中的host key来验证Server的身份的。</p>
<blockquote>
<p>这中方案足够安全吗？当然不，比如第一次连接一个未知Server的时候，known_hosts还没有该Server的host key，这不也可能遭到中间人攻击吗？这可能只是安全性和可操作性之间的折中吧。</p>
</blockquote>
<h2 id="2typora学习"><a class="markdownIt-Anchor" href="#2typora学习"></a> 2.typora学习</h2>
<h3 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h3>
<p>Typora 是一款轻量级 Markdown 编辑器。它与其他 Markdown 编辑器的主要区别在于采用了即时渲染技术，将写作与预览窗口相结合，为用户提供所见即所得的编辑模式。Typora 支持 Markdown 的各种基础语法，快捷键操作，是一款非常易用的 Markdown 编辑器。</p>
<p>此外，Typora 删除了预览窗口、模式切换程序、标记源代码的语法符号以及所有其他不必要的干扰，将它们替换为真正的实时预览功能，专注于内容本身。它拥有 Windows、macOS 客户端，界面简洁优美，可算作一款 Windows 下难得的好看、优美的客户端。</p>
<p>总的来说，Typora 是一款功能强大、轻便简洁的 Markdown 编辑器，适合需要写作和编辑 Markdown 文档的用户使用。</p>
<h3 id="块元素"><a class="markdownIt-Anchor" href="#块元素"></a> 块元素</h3>
<p>段落和换行符<br />
段落只是一行或多行连续的文本。在 markdown 源代码中，段落由多个空行分隔。在Typora中，您只需按下 Return 即可创建新段落。</p>
<p>按 Shift + Return 可创建单个换行符。但是，大多数 markdown 解析器将忽略单行中断，要使其他 markdown 解析器识别您的换行符，可以在行尾留下两个空格，或者插入</p>
<h3 id="标题"><a class="markdownIt-Anchor" href="#标题"></a> 标题</h3>
<p>标题在行的开头使用1-6个＃字符，对应于标题级别1-6。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 这是一级标题</span><br><span class="line"></span><br><span class="line">## 这是二级标题</span><br><span class="line"></span><br><span class="line">###### 这是六级标题</span><br></pre></td></tr></table></figure>
<p>在typora中，输入’＃’后跟标题内容，按下 <code>Return</code> 键将创建标题。</p>
<h3 id="引用文字"><a class="markdownIt-Anchor" href="#引用文字"></a> 引用文字</h3>
<p>Markdown 使用电子邮件样式&gt;字符进行块引用。它们表示为：</p>
<blockquote>
<p>这是一个有两段的块引用。这是第一段。</p>
<p>这是第二段。Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</p>
</blockquote>
<blockquote>
<p>这是另一个只有一个段落的块引用。有三个空行分隔两个块引用。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; 这是一个有两段的块引用。这是第一段。</span><br><span class="line">&gt;</span><br><span class="line">&gt; 这是第二段。Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; 这是另一个只有一个段落的块引用。有三个空行分隔两个块引用。</span><br></pre></td></tr></table></figure>
<p>在typora中，只需输入’&gt;’后跟引用内容即可生成块引用。Typora将为您插入正确的“&gt;”或换行符。通过添加额外级别的“&gt;”允许在块引用内嵌入另一个块引用。</p>
<h3 id="列表"><a class="markdownIt-Anchor" href="#列表"></a> 列表</h3>
<p>输入 <code>* list item 1</code> 将创建一个无序列表，该 <code>*</code> 符号可以替换为 <code>+</code> 或 <code>-</code>.</p>
<p>输入 <code>1. list item 1</code> 将创建一个有序列表，其 markdown 源代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## 无序列表</span><br><span class="line">*   红色</span><br><span class="line">*   绿色</span><br><span class="line">*   蓝色</span><br><span class="line"></span><br><span class="line">## 有序列表</span><br><span class="line">1.  红色</span><br><span class="line">2. 	绿色</span><br><span class="line">3.	蓝色</span><br></pre></td></tr></table></figure>
<ul>
<li>红色</li>
<li>绿色</li>
<li>蓝色</li>
</ul>
<ol>
<li>红色</li>
<li>绿色</li>
<li>蓝色</li>
</ol>
<h3 id="任务列表"><a class="markdownIt-Anchor" href="#任务列表"></a> 任务列表</h3>
<p>任务列表是标记为[ ]或[x]（未完成或完成）的项目的列表。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- [ ] 这是一个任务列表项</span><br><span class="line">- [ ] 需要在前面使用列表的语法</span><br><span class="line">- [ ] normal **formatting**, @mentions, #1234 refs</span><br><span class="line">- [ ] 未完成</span><br><span class="line">- [x] 完成</span><br></pre></td></tr></table></figure>
<ul>
<li>[ ] 这是一个任务列表项</li>
<li>[ ] 需要在前面使用列表的语法</li>
<li>[ ] normal <strong>formatting</strong>, @mentions, #1234 refs</li>
<li>[ ] 未完成</li>
<li>[x] 完成</li>
</ul>
<h3 id="栅栏式代码块"><a class="markdownIt-Anchor" href="#栅栏式代码块"></a> （栅栏式）代码块</h3>
<p>Typora仅支持 Github Flavored Markdown 中的栅栏式代码块。不支持 markdown 中的原始代码块。</p>
<p>使用栅栏式代码块很简单：输入```之后输入一个可选的语言标识符，然后按<code>return</code>键后输入代码，我们将通过语法高亮显示它：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">这是一个例子：</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">function test() &#123;</span><br><span class="line">  console.log(&quot;notice the blank line before this function?&quot;);</span><br><span class="line">&#125;</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">语法高亮：</span><br><span class="line">```ruby</span><br><span class="line">require &#x27;redcarpet&#x27;</span><br><span class="line">markdown = Redcarpet.new(&quot;Hello World!&quot;)</span><br><span class="line">puts markdown.to_html</span><br><span class="line">```</span><br></pre></td></tr></table></figure>
<p>这是一个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function test() &#123;</span><br><span class="line">  console.log(&quot;notice the blank line before this function?&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>语法高亮：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;redcarpet&#x27;</span></span><br><span class="line">markdown = <span class="title class_">Redcarpet</span>.new(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line">puts markdown.to_html</span><br></pre></td></tr></table></figure>
<h3 id="水平线"><a class="markdownIt-Anchor" href="#水平线"></a> 水平线</h3>
<p>输入 <code>***</code> 或 <code>---</code> 在空行上按 <code>return</code> 键将绘制一条水平线。</p>
<h3 id="目录-toc"><a class="markdownIt-Anchor" href="#目录-toc"></a> 目录 (TOC)</h3>
<p>输入 <code>[toc]</code> 然后按 <code>Return</code> 键将创建一个“目录”部分，自动从文档内容中提取所有标题，其内容会自动更新。</p>
<h3 id="强调斜体"><a class="markdownIt-Anchor" href="#强调斜体"></a> 强调（斜体）</h3>
<p>Markdown 将星号 (<code>*</code>) 和下划线(<code>_</code>) 视为强调的指示。用一个 <code>*</code> or <code>_</code> 包裹文本将使用HTML <code>&lt;em&gt;</code> 标签包裹文本。例如：</p>
<p><em>11111</em></p>
<p><em>11111</em></p>
<h3 id="粗体"><a class="markdownIt-Anchor" href="#粗体"></a> 粗体</h3>
<p>用两个 * 或 _ 包裹的文本将使用HTML <code>&lt;strong&gt;</code> 标签包裹，例如：</p>
<p><strong>1111</strong></p>
<p><strong>1111</strong></p>
<h3 id="删除线"><a class="markdownIt-Anchor" href="#删除线"></a> 删除线</h3>
<p>GFM通过添加语法来创建删除线文本，标准的Markdown中缺少该文本。</p>
<p><code>~~错误的文字~~</code> 变成 错误的文字。</p>
<p><s>11111</s></p>
<h3 id="下划线"><a class="markdownIt-Anchor" href="#下划线"></a> 下划线</h3>
<p>下划线由原始HTML提供支持。</p>
<p><code>&lt;u&gt;下划线&lt;/u&gt;</code> 变成 下划线</p>
<p><u>下划线</u></p>
<blockquote alt="info"><p>信息引用块</p></blockquote>
<blockquote alt="warn"><p>警告引用块</p></blockquote>
<blockquote alt="danger"><p>危险引用块</p></blockquote>
<blockquote alt="success"><p>成功引用块</p></blockquote>
<p>上面这个主题的这些还是不行，我还是没有实际用到的心。等后面再熟练的时候吧</p>
<h1 id="1227-工作记录"><a class="markdownIt-Anchor" href="#1227-工作记录"></a> 12.27 工作记录</h1>
<h2 id="1在ubuntu22上测试3568的linux编译"><a class="markdownIt-Anchor" href="#1在ubuntu22上测试3568的linux编译"></a> 1.在ubuntu22上测试3568的Linux编译</h2>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/664801947">https://zhuanlan.zhihu.com/p/664801947</a></p>
<p>不行，3568的4.19buildroot还是报错了，就这样吧，但是使用docker就非常不错。</p>
<h2 id="2学习vim"><a class="markdownIt-Anchor" href="#2学习vim"></a> 2.学习vim</h2>
<p>最近的两天晚上一直都有事情，所以也就没有学习，vim是非常非常重要的，求索之心不能停止，今天仍旧是用vimtutor来进行学习。</p>
<h3 id="第0讲-vim的四种模式"><a class="markdownIt-Anchor" href="#第0讲-vim的四种模式"></a> 第0讲 vim的四种模式</h3>
<hr />
<p>vim总共有四种模式，分别为命令模式、编辑模式、末行模式以及可视化模式。</p>
<p>当我们使用vim打开文件之后，默认就是命令模式，可以在命令模式下通过一系列的命令来完成复制、粘贴、删除、替换等复杂操作，具体的命令后面会讲解，这里</p>
<p>输入小写字母a或小写字母i即可进入编辑模式，在该模式下可以对文件的内容进行编辑，左下角显示 “插入”字符就表示在编辑模式。</p>
<p>按下ESC退出按键可以从编辑模式回退到命令模式</p>
<p>在命令模式下输入<strong>冒号</strong>(shift按键加L右边的按键，我记得我第一次学习的时候就找不到，怎么也进入不了末行模式)可以进入末行模式，末行模式可以通过输入命令进行查找、替换、保存、退出等操作。</p>
<p>在命令行模式下通过输入v可以进入可视化模式，可以做一些列选操作，等后面用到了再进行详细说明。</p>
<hr />
<p>vim总共有四种模式，分别为命令模式、编辑模式、末行模式以及可视化模式。</p>
<p>☆ 命令模式<br />
使用VIM编辑器时，默认处于命令模式。在该模式下可以移动光标位置，可以通过快捷键对文件内容进行复制、粘贴、删除等操作。</p>
<p>☆ 编辑模式<br />
在命令模式下输入小写字母a或小写字母i即可进入编辑模式，在该模式下可以对文件的内容进行编辑</p>
<p>☆ 末行模式<br />
在命令模式下输入冒号:即可进入末行模式，可以在末行输入命令来对文件进行查找、替换、保存、退出等操作</p>
<p>☆ 可视化模式<br />
在命令模式下输入冒号:即可进入末行模式可以做一些列选操作（通过方向键选择某些列的内容,类似于Windows鼠标刷黑）</p>
<h3 id="11移动光标"><a class="markdownIt-Anchor" href="#11移动光标"></a> 1.1：移动光标</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">      ** 要移动光标，请依照说明分别按下 h、j、k、l 键。 **                                            </span><br><span class="line">                                                                                                      </span><br><span class="line">      ^                                                                                               </span><br><span class="line">      k              提示： h 的键位于左边，每次按下就会向左移动。                                    </span><br><span class="line">&lt; h       l &gt;               l 的键位于右边，每次按下就会向右移动。                                    </span><br><span class="line">      j                     j 键看起来很象一支尖端方向朝下的箭头。                                    </span><br><span class="line">      v                                                                                               </span><br><span class="line">                                                                         </span><br></pre></td></tr></table></figure>
<p>==我用vim这么久都感觉这个很怪异，不是很习惯，我个人更倾向于小键盘的上下左右。==</p>
<h3 id="12-vim的进入和退出"><a class="markdownIt-Anchor" href="#12-vim的进入和退出"></a> 1.2 VIM的进入和退出</h3>
<p>第零节已经讲解过了，进入vim之后默认就是命令模式，命令模式下输入冒号，可以进入末行模式，在末行输入q就可以退出vim。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 按键(这是为了确保您处在正常模式)。                                                                 </span><br><span class="line">                                                                                                           </span><br><span class="line">2. 然后输入：                 :q! &lt;回车&gt;                   </span><br></pre></td></tr></table></figure>
<h3 id="13-文本编辑之删除"><a class="markdownIt-Anchor" href="#13-文本编辑之删除"></a> 1.3 文本编辑之删除</h3>
<p>​	在命令模式下输入x即可删除文本。</p>
<h3 id="14文本编辑之插入"><a class="markdownIt-Anchor" href="#14文本编辑之插入"></a> 1.4文本编辑之插入</h3>
<p>在命令模式下输入i即可进入编辑模式，从而开始内容的编辑。</p>
<h3 id="15文本编辑之添加"><a class="markdownIt-Anchor" href="#15文本编辑之添加"></a> 1.5文本编辑之添加</h3>
<p>在命令模式下输入a同样可以进入编辑模式，从而开始内容的编辑。</p>
<h3 id="16编辑文件"><a class="markdownIt-Anchor" href="#16编辑文件"></a> 1.6编辑文件</h3>
<p>如果在末行模式下直接使用q!退出并不会保存修改之后的内容，在末行模式下w可以保存编辑之后的内容</p>
<h3 id="21删除类命令"><a class="markdownIt-Anchor" href="#21删除类命令"></a> 2.1：删除类命令</h3>
<p>dw可以删除单个单词</p>
<h3 id="22-更多删除类命令"><a class="markdownIt-Anchor" href="#22-更多删除类命令"></a> 2.2 更多删除类命令</h3>
<p>d$表示从当前删除到末行</p>
<h3 id="23-使用计数指定动作"><a class="markdownIt-Anchor" href="#23-使用计数指定动作"></a> 2.3  使用计数指定动作</h3>
<p>数字+w表示向后跳两个单词</p>
<p>数字+e表示跳到后三个单词的末尾</p>
<p>数字0表示到行首</p>
<h3 id="24-使用计数以删除更多"><a class="markdownIt-Anchor" href="#24-使用计数以删除更多"></a> 2.4 使用计数以删除更多</h3>
<p>d + 数字 + w 删除多个单词</p>
<h3 id="25-删除整行"><a class="markdownIt-Anchor" href="#25-删除整行"></a> 2.5 删除整行</h3>
<p>数字+ dd可以删除 数字的行数</p>
<h3 id="26-撤消类命令"><a class="markdownIt-Anchor" href="#26-撤消类命令"></a> 2.6 撤消类命令</h3>
<p>u可以撤销之前的操作，单个操作、单个操作撤销</p>
<p>而大写的U可以撤销全部的操作</p>
<p>ctrl+r可以撤销掉撤销命令~</p>
<h3 id="31-置入类命令"><a class="markdownIt-Anchor" href="#31-置入类命令"></a> 3.1 置入类命令</h3>
<p>使用dd命令删除之后，里面的内容其实被保留在了一个寄存器当中，这时候使用p命令可以将该内容粘贴置入</p>
<h3 id="32-替换类命令"><a class="markdownIt-Anchor" href="#32-替换类命令"></a> 3.2 替换类命令</h3>
<p>如果想要替换某一个字母，可以使用 r + 要替换的字母即可</p>
<h3 id="33-更改类命令"><a class="markdownIt-Anchor" href="#33-更改类命令"></a> 3.3 更改类命令</h3>
<p>cw和ce都可以删除到从当前位置到单词末尾，并进入编辑模式</p>
<h3 id="34-使用c更改更多"><a class="markdownIt-Anchor" href="#34-使用c更改更多"></a> 3.4 使用c更改更多</h3>
<p>c + 数字 + 操作</p>
<p>例如c2w，表示删除俩单词，然后进入编辑模式</p>
<p>c$表示删除到末尾，然后进入编辑模式</p>
<h3 id="41-定位及文件状态"><a class="markdownIt-Anchor" href="#41-定位及文件状态"></a> 4.1 定位及文件状态</h3>
<p>输入 CTRL-G 显示当前编辑文件中当前光标所在行位置以及文件状态信息</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312271413526.png" alt="image-20231227141310437" /></p>
<p>输入大写的G会跳转到最后一行</p>
<p>输入gg会跳转到第一行</p>
<p>数字 + G 会跳转到数字指定的行</p>
<h3 id="42搜索类命令"><a class="markdownIt-Anchor" href="#42搜索类命令"></a> 4.2搜索类命令</h3>
<p>/ 加上一个字符串可以用以在当前文件中查找该字符串（也不用非要进入末行模式，之前的认知是错的）</p>
<p>要查找同上一次的字符串，只需要按 n 键。要向相反方向查找同上一次的字符串，请输入大写 N 即可</p>
<p>/是正向查找，而？是反向查找</p>
<p>要回到您之前的位置按 CTRL-O (按住 Ctrl 键不放同时按下字母 o)。重复按可以回退更多步。CTRL-I 会跳转到较新的位置</p>
<h3 id="43-配对括号的查找"><a class="markdownIt-Anchor" href="#43-配对括号的查找"></a> 4.3 配对括号的查找</h3>
<p>输入 % 可以查找配对的括号 )、]、}</p>
<p>这个命令好呀，我靠，设备树或者一个函数很长了，都找不到开始和结束，这个命令很牛</p>
<h3 id="44-替换命令"><a class="markdownIt-Anchor" href="#44-替换命令"></a> 4.4 替换命令</h3>
<p>输入 😒/old/new/g 可以替换 old 为 new</p>
<p>这里的冒号指的是在末行模式下输入，后面才是要输入的内容。</p>
<p>s/old/new 表示只替换一行第一个匹配的字符串</p>
<p>s/old/new/g 表示替换一行全部的匹配字符串</p>
<p>s/old/new/gc 表示替换之前要一一询问</p>
<p>如果在s前加上%则表示替换全文匹配的，不在局限于一行</p>
<p>%s/old/new 表示替换全文第一个匹配的字符串</p>
<p>%s/old/new/g  表示替换全文匹配的字符串</p>
<p>%s/old/new/gc 表示替换全文匹配的字符串,但是替换前需要一一询问</p>
<h3 id="51-在-vim-内执行外部命令的方法"><a class="markdownIt-Anchor" href="#51-在-vim-内执行外部命令的方法"></a> 5.1 在 VIM 内执行外部命令的方法</h3>
<p>输入 :! 然后紧接着输入一个外部命令可以执行该外部命令。</p>
<p>这里以ls命令为例进行演示，具体如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312271436078.png" alt="image-20231227143600007" /></p>
<h3 id="52-关于保存文件的更多信息"><a class="markdownIt-Anchor" href="#52-关于保存文件的更多信息"></a> 5.2 关于保存文件的更多信息</h3>
<p>之前学习的w只是用来保存当前文件，而w + 文件名称，可以将当前文本保存到新的文件</p>
<h3 id="53-一个具有选择性的保存命令"><a class="markdownIt-Anchor" href="#53-一个具有选择性的保存命令"></a> 5.3 一个具有选择性的保存命令</h3>
<p>输入v可以进入可视模式，然后移动光标，移动之间的内容就被选中了，这时如果再用5.2中的命令进行保存，保存的就仅仅是选中的内容，也使用d删除选中的内容，</p>
<h3 id="54-提取和合并文件"><a class="markdownIt-Anchor" href="#54-提取和合并文件"></a> 5.4 提取和合并文件</h3>
<p>使用 r + 文件可以提取外部文件的内容并将其插入光标处，除此之外还可以插入外部命令</p>
<p>r !ls 可以读取 ls 命令的输出，并把它放置在光标下面</p>
<h3 id="61-打开类命令"><a class="markdownIt-Anchor" href="#61-打开类命令"></a> 6.1 打开类命令</h3>
<p>输入 o 将在光标的下方打开新的一行并进入插入模式</p>
<p>输入 O 将在光标的上方打开新的一行并进入插入模式</p>
<h3 id="63-附加类命令"><a class="markdownIt-Anchor" href="#63-附加类命令"></a> 6.3 附加类命令</h3>
<p>输入 a 将可在光标之后插入文本</p>
<p>a、i 和 A 都会带您进入插入模式，惟一的区别在于字符插入的位置</p>
<h3 id="64-另外一个置换类命令的版本"><a class="markdownIt-Anchor" href="#64-另外一个置换类命令的版本"></a> 6.4 另外一个置换类命令的版本</h3>
<p>输入大写的 R 可连续替换多个字符</p>
<h3 id="65-复制粘贴文本"><a class="markdownIt-Anchor" href="#65-复制粘贴文本"></a> 6.5 复制粘贴文本</h3>
<p>使用操作符 y 复制文本，使用 p 粘贴文本</p>
<h3 id="66-设置类命令的选项"><a class="markdownIt-Anchor" href="#66-设置类命令的选项"></a> 6.6 设置类命令的选项</h3>
<p>设置可使查找或者替换可忽略大小写的选项</p>
<p>set ic  <strong>Ignore Case，忽略大小写</strong></p>
<p>要禁用忽略大小写，请输入： :set noic</p>
<p>set hlsearch可以让搜索到的内容高亮</p>
<h2 id="3讲解内容框架整理"><a class="markdownIt-Anchor" href="#3讲解内容框架整理"></a> 3.讲解内容框架整理</h2>
<p>首先一个问题我都要讲哪些内容？讲到什么程度才算合格？或者这个视频的定位是什么?找准自己的位置我认为是最重要的一点。</p>
<h3 id="第一个问题为什么要录制这个视频"><a class="markdownIt-Anchor" href="#第一个问题为什么要录制这个视频"></a> 第一个问题，为什么要录制这个视频？</h3>
<p>其实我是一个很自私的一个人，但是范围感很低，所以基本上做任何事情都乐于接受，就算不接受，很快也就转变思想了，也不知道为啥会成为这个样子，不能说好也不能说坏，但也就那个样子，有些东西也不是一朝一夕就能改变的，而且总要迈出第一步，就像书中写的那样，并不是做一个完全的计划，而是开始做一件事情，在做这件事情的同时，一步一步的弥补自己所欠缺的问题，反过来讲，你认为将一切都做好之后再开始，这样一定就算是对的吗，很多时候你以为的只是你以为的，跟实际差别其实挺大的。所以目前最正确的方法其实就是，写好一个大纲，写好一个手册，然后开始根据这个大纲适当的补充内容，最后录制出来对应的视频。</p>
<p>上午学习了一下vim，你之前自以为vim用的还可以，现在呢，你还敢这么说吗，没有见识过那些牛人，就开始飘，可实际上呢，差的真的不是一点半点，所以那句话说的对，==弱小和无知并不是生存的障碍，傲慢才是==</p>
<p>下面回归正题，录制这个视频的最根本原因还是因为我喜欢，我其实挺喜欢讲课的，将一个东西从我嘴上讲出去，我会很高兴的，有一种成就感和自豪感。并且在这个过程中我还能学习到之前忽略的一些知识，从而提高了自己。上面是从我自己的角度上出发，进行考虑的，然而呢，公司为什么要录制这个视频呢。</p>
<p>简单的说一句，是为了形成闭环的教程，如今有哪些教程了呢，其实说到底只有驱动一个，其他的东西都不行，就连驱动都还在继续搞呢，那这个Linux基础要搞成什么样呢？总不会还跟之前一样，寥寥草草的就过去了，什么都讲一遍，什么都讲不精，我是不可能这样的，那时候讲解的认知也不到位、自身的水平也不行，用我现在的眼光看四年前的视频，我会有一种成就感，可实际上呢，也仅仅是站在巨人的肩膀上作威作福罢了，终有一天你也会成为别人所踩的那个巨人，时候未到罢了。所以仍旧是把上面那句话送给你，==弱小和无知并不是生存的障碍，傲慢才是==</p>
<p>既然要做，肯定就应该做到极致，或者尽可能的做到当前的最好，就跟上次一样，现在看来，上次录制的RKNPU视频并不好，里面的一些甚至还有些问题，但是确实是当时能做到的最好了，历史的局限性，就导致了当时根本做不到，还有当时的技术水平不太行，等等，但我在进步呀，从那之后我学会了搭建网站，学会了markdown语言，后面就一直在写博客了，而且有了chatgpt，这些都是当时所没有的，所以现在也算是站在了巨人的肩膀上，所以，加油。</p>
<h3 id="第二个问题都要录制哪些内容"><a class="markdownIt-Anchor" href="#第二个问题都要录制哪些内容"></a> 第二个问题，都要录制哪些内容？</h3>
<p>最重要的一定是要有逻辑，每一节课跟每一节课之间都应该是有联系的，不能平白无故的产生，这些都应该有他们自己的联系，所以第一节课要讲解的是课程都要讲解哪些东西，或者这个东西不讲也可以，从法师的驱动视频来看第一节的内容必然要是一个整体的规划，其实也算是我最近两年学习到内容的一个整理和回顾吧，就也还行。</p>
<p>0.课程内容的框架、学习Linux基础的意义</p>
<p>1.环境的搭建</p>
<hr />
<p>vmware软件的安装</p>
<p>ubuntu22虚拟机的构建(中文环境、安装ssh)</p>
<hr />
<p>==既然要讲肯定是要最新的,环境搭建好之后换成中文，然后安装ssh，这里root允许登录开不开的吧，我发现并没有什么用==</p>
<p>==甚至就连那个wayland取消也可以不改，目前还没到那个步骤，确保文字的复制粘贴能生效就行了，关于图像化界面相关的复制，这里后面再说。==</p>
<hr />
<hr />
<p>tabby的安装和使用介绍（以后就通过ssh来连接，从而进行命令的讲解了）</p>
<p>vim 编辑器的讲解</p>
<hr />
<p>基础命令的讲解(==不急==)</p>
<p>shell编程讲解（==不急==）</p>
<hr />
<p>一点点来，先确定大方向是对的，从而一点点的努力就行了，中午读书的时候就读到了很有意义的一段话，如果当有钱之后才去修铁路，那么至今为止，世界上都不会有任何一条铁路，所以这句话就很引人思考，做任何一件事情都不能打算的很好才去做，一件事情在做之前不可能面面俱到，一切都是要开始之后才能判定，所以不可能等你做好准备，所以争取元旦来了就开始录制。</p>
<p>一个手册一个手册的写吧，先来写vmware软件的安装。</p>
<h1 id="1226-工作记录"><a class="markdownIt-Anchor" href="#1226-工作记录"></a> 12.26 工作记录</h1>
<h2 id="1编译linux镜像"><a class="markdownIt-Anchor" href="#1编译linux镜像"></a> 1.编译Linux镜像</h2>
<h2 id="2完善buildroot镜像"><a class="markdownIt-Anchor" href="#2完善buildroot镜像"></a> 2.完善buildroot镜像</h2>
<h3 id="1设置终端颜色"><a class="markdownIt-Anchor" href="#1设置终端颜色"></a> 1.设置终端颜色</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alias ls=&#x27;ls --color&#x27;</span><br><span class="line">LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:</span><br><span class="line">export LS_COLORS</span><br></pre></td></tr></table></figure>
<h3 id="2修改终端名称和密码"><a class="markdownIt-Anchor" href="#2修改终端名称和密码"></a> 2.修改终端名称和密码</h3>
<p>将终端名称设置为了topeet，密码设置为了topeet。</p>
<h3 id="3修改npu驱动版本"><a class="markdownIt-Anchor" href="#3修改npu驱动版本"></a> 3.修改NPU驱动版本</h3>
<p>将NPU驱动从0.8.2升级到了0.9.2</p>
<h3 id="4添加对应的五个测试应用"><a class="markdownIt-Anchor" href="#4添加对应的五个测试应用"></a> 4.添加对应的五个测试应用</h3>
<h1 id="1225-工作记录"><a class="markdownIt-Anchor" href="#1225-工作记录"></a> 12.25 工作记录</h1>
<h2 id="1整理构建脚本"><a class="markdownIt-Anchor" href="#1整理构建脚本"></a> 1.整理构建脚本</h2>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果输入的参数为空，则进入图形界面，否则为命令行编译</span></span><br><span class="line">if [ -z &quot;$1&quot; ]; then</span><br><span class="line">        titlestr=&quot;Choose an option&quot;</span><br><span class="line">        backtitle=&quot;iTOP-RK3588s building script, http://www.topeet.com&quot;</span><br><span class="line">        menustr=&quot;Compile image | uboot | kernel | rootfs | recovery | all | firmware |updateimg | cleanall&quot;</span><br><span class="line">        TTY_X=$(($(stty size | awk &#x27;&#123;print $2&#125;&#x27;)-6))                    # determine terminal width</span><br><span class="line">        TTY_Y=$(($(stty size | awk &#x27;&#123;print $1&#125;&#x27;)-6))                    # determine terminal height</span><br><span class="line">        </span><br><span class="line">        # 第1页选项数组，包含选项和对应的函数名</span><br><span class="line">        choose_page1+=(&quot;uboot&quot; &quot;uboot&quot;)</span><br><span class="line">        choose_page1+=(&quot;kernel&quot; &quot;kernel&quot;)</span><br><span class="line">        choose_page1+=(&quot;rootfs&quot; &quot;rootfs&quot;)</span><br><span class="line">        choose_page1+=(&quot;recovery&quot; &quot;recovery&quot;)</span><br><span class="line">        choose_page1+=(&quot;all&quot; &quot;all&quot;)</span><br><span class="line">        choose_page1+=(&quot;firmware&quot; &quot;firmware&quot;)</span><br><span class="line">        choose_page1+=(&quot;updateimg&quot; &quot;updateimg&quot;)</span><br><span class="line">        choose_page1+=(&quot;cleanall&quot; &quot;cleanall&quot;)</span><br><span class="line">        </span><br><span class="line">        # 第2页选项数组，包含选项和对应的函数名</span><br><span class="line">        choose_page2+=(&quot;buildroot&quot; &quot;buildroot&quot;)</span><br><span class="line">        choose_page2+=(&quot;debian11&quot; &quot;debian11&quot;)</span><br><span class="line">        choose_page2+=(&quot;debian12&quot; &quot;debian12&quot;)</span><br><span class="line">        choose_page2+=(&quot;ubuntu20&quot; &quot;ubuntu20&quot;)</span><br><span class="line">        choose_page2+=(&quot;ubuntu22&quot; &quot;ubuntu22&quot;)</span><br><span class="line">        </span><br><span class="line">        # 第3页选项数组，包含选项和对应的函数名</span><br><span class="line">        choose_page3+=(&quot;buildroot_update&quot; &quot;buildroot&quot;)</span><br><span class="line">        choose_page3+=(&quot;debian11_update&quot; &quot;debian11&quot;)</span><br><span class="line">        choose_page3+=(&quot;debian12_update&quot; &quot;debian12&quot;)</span><br><span class="line">        choose_page3+=(&quot;ubuntu20_update&quot; &quot;ubuntu20&quot;)</span><br><span class="line">        choose_page3+=(&quot;ubuntu22_update&quot; &quot;ubuntu22&quot;)</span><br><span class="line">        </span><br><span class="line">        OPTIONS=$(whiptail --title &quot;$&#123;titlestr&#125;&quot; --backtitle &quot;$&#123;backtitle&#125;&quot; --notags \</span><br><span class="line">                                                        --menu &quot;$&#123;menustr&#125;&quot; &quot;$&#123;TTY_Y&#125;&quot; &quot;$&#123;TTY_X&#125;&quot; $((TTY_Y - 8))  \</span><br><span class="line">                                                        --cancel-button Exit --ok-button Select &quot;$&#123;choose_page1[@]&#125;&quot; \</span><br><span class="line">                                                        3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)</span><br><span class="line">else</span><br><span class="line">        OPTIONS=&quot;$&#123;1&#125;&quot;</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">根据用户选择的选项，判断是否需要显示第2页菜单</span></span><br><span class="line">if [[ $OPTIONS == &quot;rootfs&quot; ]]; then</span><br><span class="line">    # 使用whiptail创建第二页菜单，保存用户选择的选项到变量OPTIONS中</span><br><span class="line">    OPTIONS=$(whiptail --title &quot;$&#123;titlestr&#125;&quot; --backtitle &quot;$&#123;backtitle&#125;&quot; --notags \</span><br><span class="line">                        --menu &quot;$&#123;menustr&#125;&quot; &quot;$&#123;TTY_Y&#125;&quot; &quot;$&#123;TTY_X&#125;&quot; $((TTY_Y - 8))  \</span><br><span class="line">                        --cancel-button Exit --ok-button Select &quot;$&#123;choose_page2[@]&#125;&quot; \</span><br><span class="line">                        3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo $OPTIONS</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">根据用户选择的选项，判断是否需要显示第3页菜单</span></span><br><span class="line">if [[ $OPTIONS == &quot;all&quot; ]]; then</span><br><span class="line">    # 使用whiptail创建第二页菜单，保存用户选择的选项到变量OPTIONS中</span><br><span class="line">    OPTIONS=$(whiptail --title &quot;$&#123;titlestr&#125;&quot; --backtitle &quot;$&#123;backtitle&#125;&quot; --notags \</span><br><span class="line">                        --menu &quot;$&#123;menustr&#125;&quot; &quot;$&#123;TTY_Y&#125;&quot; &quot;$&#123;TTY_X&#125;&quot; $((TTY_Y - 8))  \</span><br><span class="line">                        --cancel-button Exit --ok-button Select &quot;$&#123;choose_page3[@]&#125;&quot; \</span><br><span class="line">                        3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3)</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">根据输入的参数，设置POST_OPTIONS变量</span></span><br><span class="line">unset POST_OPTIONS</span><br><span class="line">POST_OPTIONS=&quot;$POST_OPTIONS $OPTIONS&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">导入板级配置文件</span></span><br><span class="line">[ -r &quot;$BOARD_CONFIG&quot; ] || choose_board</span><br><span class="line">source $BOARD_CONFIG</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">根据输入的参数进行选择编译</span></span><br><span class="line">for option in $POST_OPTIONS; do</span><br><span class="line">        echo &quot;processing option: $option&quot;</span><br><span class="line">        case $option in</span><br><span class="line">                all) build_all ;;</span><br><span class="line">                save) build_save ;;</span><br><span class="line">                allsave) build_allsave ;;</span><br><span class="line">                cleanall) build_cleanall ;;</span><br><span class="line">                updateimg) build_updateimg ;;</span><br><span class="line">                uboot) build_uboot ;;</span><br><span class="line">                kernel) build_kernel ;;</span><br><span class="line">                modules) build_modules ;;</span><br><span class="line">                rootfs) build_rootfs ;;</span><br><span class="line">                buildroot|debian11|debian12|ubuntu20|ubuntu22|yocto) build_rootfs $option ;;</span><br><span class="line">                recovery) build_recovery ;;</span><br><span class="line">                buildroot_update) build_buildroot_all ;;</span><br><span class="line">                debian11_update) build_debian11_all ;;</span><br><span class="line">                debian12_update) build_debian12_all ;;</span><br><span class="line">                ubuntu20_update) build_ubuntu20_all ;;</span><br><span class="line">                ubuntu22_update) build_ubuntu22_all ;;</span><br><span class="line">                info) build_info ;;</span><br><span class="line">                *) usage ;;</span><br><span class="line">        esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">build_buildroot_all() 编译buildroot所有的镜像</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">build_debian11_all() 编译debian11所有的镜像</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">build_debian12_all() 编译debian12所有的镜像</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">build_ubuntu20_all() 编译ubuntu20所有的镜像</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">build_ubuntu22_all() 编译ubuntu22所有的镜像</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="2ubuntu22-环境搭建"><a class="markdownIt-Anchor" href="#2ubuntu22-环境搭建"></a> 2.ubuntu22 环境搭建</h2>
<p>默认没有vim，所以首先安装了vim</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install vim</span><br></pre></td></tr></table></figure>
<p>然后看网上说wayland有问题，所以禁止掉wayland</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/gdm3/custom.conf</span><br></pre></td></tr></table></figure>
<p>打开WaylandEnable=false的注释，然后重启系统，果然修改了之后，可以直接拖动了，不错。然后修改一下虚拟机配置：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312251057515.png" alt="image-20231225105730434" /></p>
<p>​	上面的这三个没啥用，直接关掉，启动时连接也取消掉。然后备份一下系统，中文输入法也不用安装，反正一般都是用ssh来连接的。</p>
<p>​	重启之后先来设置ssh，我还是喜欢用ssh，设置的步骤如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装ssh 服务</span></span><br><span class="line">apt install -y openssh-server  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启sshd</span></span><br><span class="line">systemctl start sshd  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使能root用户登录</span></span><br><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line">PermitRootLogin yes</span><br></pre></td></tr></table></figure>
<p>到这里该安装的就差不多了，剩下的就让tabby来，为了确保传输速度，先加一个nat的网卡：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312251121657.png" alt="image-20231225112113607" /></p>
<p>默认连网络的ifconfig命令都没有，还要安装一下网络工具：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install net-tools</span><br></pre></td></tr></table></figure>
<p>顺手删掉这些没用的目录：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf Documents  Downloads  Music  Pictures  Public  snap  Templates  Videos</span><br></pre></td></tr></table></figure>
<p>突然感觉还得再打包一个。。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312251254299.png" alt="image-20231225125409231" /></p>
<p>nat的网段为198.具体ip为192.168.198.130，先来测试Linux，当然在测试之前要安装一些工具包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y uuid uuid-dev zlib1g-dev liblz-dev liblzo2-2 liblzo2-dev lzop \</span><br><span class="line">git curl u-boot-tools mtd-utils openjdk-8-jdk device-tree-compiler \</span><br><span class="line">gdisk m4 git gnupg flex bison gperf libsdl1.2-dev libesd-java \</span><br><span class="line">squashfs-tools build-essential zip libncurses5-dev pngcrush schedtool \</span><br><span class="line">libxml2 libxml2-utils xsltproc lzop libc6-dev g++-multilib lib32z1-dev \</span><br><span class="line">lib32ncurses-dev lib32readline-dev libswitch-perl libssl-dev unzip \</span><br><span class="line">liblz4-tool ssh make gcc libssl-dev vim expect \</span><br><span class="line">patchelf chrpath gawk texinfo diffstat binfmt-support \</span><br><span class="line">qemu-user-static live-build fakeroot cmake rsync subversion \</span><br><span class="line">sed binutils wget bzr cvs git mercurial \</span><br><span class="line">patch gzip bzip2 perl tar cpio file bc python3-pip \</span><br><span class="line">rsync android-sdk-libsparse-utils python2</span><br></pre></td></tr></table></figure>
<p>在编译内核的时候遇到了的第一个问题：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312251340418.png" alt="image-20231225134018868" /></p>
<p>​	需要将python3链接到python，具体命令如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /usr/bin/python3 /usr/bin/python</span><br></pre></td></tr></table></figure>
<p>修改之后内核编译成功。编译recovery成功。编译文件系统成功、打包完整的update镜像成功，皆大欢喜，莫得问题，编译整体时间大约为两个小时，13：30开始编译，15：30编译结束时间.</p>
<p>随后又测试了安卓，同样可以编译成功。</p>
<h1 id="1224-工作记录"><a class="markdownIt-Anchor" href="#1224-工作记录"></a> 12.24 工作记录</h1>
<p>==愿山河无恙，愿岁月静好，愿海阔天晴==</p>
<h2 id="1继续整理设备树"><a class="markdownIt-Anchor" href="#1继续整理设备树"></a> 1.继续整理设备树</h2>
<p>问题1：经过转接板的lvds屏幕都是不亮的？</p>
<p>​	问题整理，首先MIPI0和MIPI1都能正常的工作，而且对应的丝印也都是匹配的，而LVDS使用的都是MIPI0,无论是3588上还是3588S上用的都是MIPI0,而且相应的参数也都是对的，所以其实就可以不用考虑软件的问题了，目前将问题定位到了，<strong>LCD_RESET_L</strong>这个引脚上，首先来看一下3588上的修改，修改的地方如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312241419208.png" alt="image-20231224141919132" /></p>
<p>==行了问题解决了。。。==也不对。目前还是有一些问题，不知道问题在哪里，但肯定还是硬件的问题，同样的参数，同样的镜像，在3588上都能很正常的运行，现在换了一个转接板，新的10.1屏幕没啥问题了，但是其他的或多或少都有问题，这个先等等吧。</p>
<p>继续搞摄像头：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312241508751.png" alt="image-20231224150846720" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312241508650.png" alt="image-20231224150830441" /></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> CAMERA_J1  <span class="comment">//U19</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CAMERA_J2  <span class="comment">//U16</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CAMERA_J3  <span class="comment">//U7008</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> defined(CAMERA_J1)</span></span><br><span class="line">&amp;csi2_dphy0_hw &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;csi2_dphy0 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">    ports &#123;</span><br><span class="line">        <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">        <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">        port@<span class="number">0</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">            mipidphy0_in_ucam0: endpoint@<span class="number">1</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;ov5695_out_1&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;; </span><br><span class="line">            mipidphy0_in_ucam0_ov13850: endpoint@<span class="number">2</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">2</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;ov13850_out_1&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">        port@<span class="number">1</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">            csidphy0_out: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;mipi2_csi2_input&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2c3 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">    pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">    pinctrl<span class="number">-0</span> = &lt;&amp;i2c3m1_xfer&gt;;</span><br><span class="line"></span><br><span class="line">    ov5695_1: ov5695@<span class="number">36</span> &#123;</span><br><span class="line">        status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">        compatible = <span class="string">&quot;ovti,ov5695&quot;</span>;</span><br><span class="line">        reg = &lt;<span class="number">0x36</span>&gt;;</span><br><span class="line">        clocks = &lt;&amp;cru CLK_MIPI_CAMARAOUT_M3&gt;;</span><br><span class="line">        clock-names = <span class="string">&quot;xvclk&quot;</span>;</span><br><span class="line">        power-domains = &lt;&amp;power RK3588_PD_VI&gt;;</span><br><span class="line">        pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        pinctrl<span class="number">-0</span> = &lt;&amp;mipim0_camera3_clk&gt;;</span><br><span class="line">        reset-gpios = &lt;&amp;gpio0 RK_PA0 GPIO_ACTIVE_LOW&gt;;</span><br><span class="line">        pwdn-gpios = &lt;&amp;gpio1 RK_PC6 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        rockchip,camera-module-index = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">        rockchip,camera-module-facing = <span class="string">&quot;back&quot;</span>;</span><br><span class="line">        rockchip,camera-module-name = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        rockchip,camera-module-lens-name = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        port &#123;</span><br><span class="line">            ov5695_out_1: endpoint &#123;</span><br><span class="line">                remote-endpoint = &lt;&amp;mipidphy0_in_ucam0&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    ov13850_1: ov13850@<span class="number">10</span> &#123;</span><br><span class="line">        status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">        compatible = <span class="string">&quot;otvi,ov13850&quot;</span>;</span><br><span class="line">        reg = &lt;<span class="number">0x10</span>&gt;;</span><br><span class="line">        clocks = &lt;&amp;cru CLK_MIPI_CAMARAOUT_M3&gt;;</span><br><span class="line">        clock-names = <span class="string">&quot;xvclk&quot;</span>;</span><br><span class="line">        power-domains = &lt;&amp;power RK3588_PD_VI&gt;;</span><br><span class="line">        pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        pinctrl<span class="number">-0</span> = &lt;&amp;mipim0_camera3_clk&gt;;</span><br><span class="line">        reset-gpios = &lt;&amp;gpio0 RK_PA0 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        pwdn-gpios = &lt;&amp;gpio1 RK_PC6 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        rockchip,camera-module-index = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">        rockchip,camera-module-facing = <span class="string">&quot;back&quot;</span>;</span><br><span class="line">        rockchip,camera-module-name = <span class="string">&quot;CMK-CT0116&quot;</span>; <span class="comment">//&quot;ZC-OV13850R2A-V1&quot;;</span></span><br><span class="line">        rockchip,camera-module-lens-name = <span class="string">&quot;Largan-50013A1&quot;</span>; <span class="comment">//&quot;Largan-50064B31&quot;;</span></span><br><span class="line">        port &#123;</span><br><span class="line">            ov13850_out_1: endpoint &#123;</span><br><span class="line">                remote-endpoint = &lt;&amp;mipidphy0_in_ucam0_ov13850&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mipi2_csi2 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">    ports &#123;</span><br><span class="line">        <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">        <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">        port@<span class="number">0</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">            mipi2_csi2_input: endpoint@<span class="number">1</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;csidphy0_out&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">        port@<span class="number">1</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">            mipi2_csi2_output: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;cif_mipi_in2&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rkcif_mipi_lvds2 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">    port &#123;</span><br><span class="line">        cif_mipi_in2: endpoint &#123;</span><br><span class="line">            remote-endpoint = &lt;&amp;mipi2_csi2_output&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rkcif_mipi_lvds2_sditf &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">    port &#123;</span><br><span class="line">        mipi2_lvds_sditf: endpoint &#123;</span><br><span class="line">            remote-endpoint = &lt;&amp;isp0_vir1&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rkisp0_vir1 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">    port &#123;</span><br><span class="line">        <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">        <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">        isp0_vir1: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">            remote-endpoint = &lt;&amp;mipi2_lvds_sditf&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> defined(CAMERA_J2)</span></span><br><span class="line">&amp;csi2_dcphy0 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    ports &#123;</span><br><span class="line">        <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">        <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">        port@<span class="number">0</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">            mipidphy1_in_ucam0: endpoint@<span class="number">1</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;ov5695_out_2&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;; </span><br><span class="line">            mipidphy1_in_ucam0_ov13850: endpoint@<span class="number">2</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">2</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;ov13850_out_2&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        port@<span class="number">1</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">            csidcphy0_out: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;mipi0_csi2_input&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2c4 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">    pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">    pinctrl<span class="number">-0</span> = &lt;&amp;i2c4m3_xfer&gt;;</span><br><span class="line"></span><br><span class="line">    ov5695_2: ov5695@<span class="number">36</span> &#123;</span><br><span class="line">        status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">        compatible = <span class="string">&quot;ovti,ov5695&quot;</span>;</span><br><span class="line">        reg = &lt;<span class="number">0x36</span>&gt;;</span><br><span class="line">        clocks = &lt;&amp;cru CLK_MIPI_CAMARAOUT_M1&gt;;</span><br><span class="line">        clock-names = <span class="string">&quot;xvclk&quot;</span>;</span><br><span class="line">        power-domains = &lt;&amp;power RK3588_PD_VI&gt;;</span><br><span class="line">        pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        pinctrl<span class="number">-0</span> = &lt;&amp;mipim0_camera1_clk&gt;;</span><br><span class="line">        reset-gpios = &lt;&amp;gpio1 RK_PB2 GPIO_ACTIVE_LOW&gt;;</span><br><span class="line">        pwdn-gpios = &lt;&amp;gpio1 RK_PA6 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        rockchip,camera-module-index = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">        rockchip,camera-module-facing = <span class="string">&quot;back&quot;</span>;</span><br><span class="line">        rockchip,camera-module-name = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        rockchip,camera-module-lens-name = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        port &#123;</span><br><span class="line">            ov5695_out_2: endpoint &#123;</span><br><span class="line">                remote-endpoint = &lt;&amp;mipidphy1_in_ucam0&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    ov13850_2: ov13850@<span class="number">10</span> &#123;</span><br><span class="line">        status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">        compatible = <span class="string">&quot;otvi,ov13850&quot;</span>;</span><br><span class="line">        reg = &lt;<span class="number">0x10</span>&gt;;</span><br><span class="line">        clocks = &lt;&amp;cru CLK_MIPI_CAMARAOUT_M1&gt;;</span><br><span class="line">        clock-names = <span class="string">&quot;xvclk&quot;</span>;</span><br><span class="line">        power-domains = &lt;&amp;power RK3588_PD_VI&gt;;</span><br><span class="line">        pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        pinctrl<span class="number">-0</span> = &lt;&amp;mipim0_camera1_clk&gt;;</span><br><span class="line">        reset-gpios = &lt;&amp;gpio1 RK_PB2 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        pwdn-gpios = &lt;&amp;gpio1 RK_PA6 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        rockchip,camera-module-index = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">        rockchip,camera-module-facing = <span class="string">&quot;back&quot;</span>;</span><br><span class="line">        rockchip,camera-module-name = <span class="string">&quot;CMK-CT0116&quot;</span>; <span class="comment">//&quot;ZC-OV13850R2A-V1&quot;;</span></span><br><span class="line">        rockchip,camera-module-lens-name = <span class="string">&quot;Largan-50013A1&quot;</span>; <span class="comment">//&quot;Largan-50064B31&quot;;</span></span><br><span class="line">        port &#123;</span><br><span class="line">            ov13850_out_2: endpoint &#123;</span><br><span class="line">                remote-endpoint = &lt;&amp;mipidphy1_in_ucam0_ov13850&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mipi0_csi2 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    ports &#123;</span><br><span class="line">        <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">        <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">        port@<span class="number">0</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">            mipi0_csi2_input: endpoint@<span class="number">1</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;csidcphy0_out&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        port@<span class="number">1</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">            mipi0_csi2_output: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;cif_mipi_in0&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rkcif_mipi_lvds &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    port &#123;</span><br><span class="line">        cif_mipi_in0: endpoint &#123;</span><br><span class="line">            remote-endpoint = &lt;&amp;mipi0_csi2_output&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rkcif_mipi_lvds_sditf &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    port &#123;</span><br><span class="line">        mipi_lvds_sditf: endpoint &#123;</span><br><span class="line">            remote-endpoint = &lt;&amp;isp1_in1&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rkisp0_vir0 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    port &#123;</span><br><span class="line">        <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">        <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">        isp1_in1: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">            remote-endpoint = &lt;&amp;mipi_lvds_sditf&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> defined(CAMERA_J3)</span></span><br><span class="line">&amp;csi2_dcphy1 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    ports &#123;</span><br><span class="line">        <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">        <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">        port@<span class="number">0</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">            mipidphy2_in_ucam0: endpoint@<span class="number">1</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;ov5695_out_3&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;; </span><br><span class="line">            mipidphy2_in_ucam0_ov13850: endpoint@<span class="number">2</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">2</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;ov13850_out_3&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        port@<span class="number">1</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">            csidcphy1_out: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;mipi1_csi2_input&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2c1 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">    pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">    pinctrl<span class="number">-0</span> = &lt;&amp;i2c1m2_xfer&gt;;</span><br><span class="line">    ov5695_3: ov5695@<span class="number">36</span> &#123;</span><br><span class="line">        status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">        compatible = <span class="string">&quot;ovti,ov5695&quot;</span>;</span><br><span class="line">        reg = &lt;<span class="number">0x36</span>&gt;;</span><br><span class="line">        clocks = &lt;&amp;cru CLK_MIPI_CAMARAOUT_M4&gt;;</span><br><span class="line">        clock-names = <span class="string">&quot;xvclk&quot;</span>;</span><br><span class="line">        power-domains = &lt;&amp;power RK3588_PD_VI&gt;;</span><br><span class="line">        pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        pinctrl<span class="number">-0</span> = &lt;&amp;mipim0_camera4_clk&gt;;</span><br><span class="line">        reset-gpios = &lt;&amp;gpio1 RK_PA4 GPIO_ACTIVE_LOW&gt;;</span><br><span class="line">        pwdn-gpios = &lt;&amp;gpio1 RK_PA7 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        rockchip,camera-module-index = &lt;<span class="number">2</span>&gt;;</span><br><span class="line">        rockchip,camera-module-facing = <span class="string">&quot;back&quot;</span>;</span><br><span class="line">        rockchip,camera-module-name = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        rockchip,camera-module-lens-name = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        port &#123;</span><br><span class="line">            ov5695_out_3: endpoint &#123;</span><br><span class="line">                remote-endpoint = &lt;&amp;mipidphy2_in_ucam0&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    ov13850_3: ov13850@<span class="number">10</span> &#123;</span><br><span class="line">        status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">        compatible = <span class="string">&quot;otvi,ov13850&quot;</span>;</span><br><span class="line">        reg = &lt;<span class="number">0x10</span>&gt;;</span><br><span class="line">        clocks = &lt;&amp;cru CLK_MIPI_CAMARAOUT_M4&gt;;</span><br><span class="line">        clock-names = <span class="string">&quot;xvclk&quot;</span>;</span><br><span class="line">        power-domains = &lt;&amp;power RK3588_PD_VI&gt;;</span><br><span class="line">        pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        pinctrl<span class="number">-0</span> = &lt;&amp;mipim0_camera4_clk&gt;;</span><br><span class="line">        reset-gpios = &lt;&amp;gpio1 RK_PA4 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        pwdn-gpios = &lt;&amp;gpio1 RK_PA7 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        rockchip,camera-module-index = &lt;<span class="number">2</span>&gt;;</span><br><span class="line">        rockchip,camera-module-facing = <span class="string">&quot;back&quot;</span>;</span><br><span class="line">        rockchip,camera-module-name = <span class="string">&quot;CMK-CT0116&quot;</span>; <span class="comment">//&quot;ZC-OV13850R2A-V1&quot;;</span></span><br><span class="line">        rockchip,camera-module-lens-name = <span class="string">&quot;Largan-50013A1&quot;</span>; <span class="comment">//&quot;Largan-50064B31&quot;;</span></span><br><span class="line">        port &#123;</span><br><span class="line">            ov13850_out_3: endpoint &#123;</span><br><span class="line">                remote-endpoint = &lt;&amp;mipidphy2_in_ucam0_ov13850&gt;;</span><br><span class="line">                data-lanes = &lt;<span class="number">1</span> <span class="number">2</span>&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mipi1_csi2 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    ports &#123;</span><br><span class="line">        <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">        <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">        port@<span class="number">0</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">            mipi1_csi2_input: endpoint@<span class="number">1</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;csidcphy1_out&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        port@<span class="number">1</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">            <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">            <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">            mipi1_csi2_output: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">                reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">                remote-endpoint = &lt;&amp;cif_mipi_in1&gt;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rkcif_mipi_lvds1 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    port &#123;</span><br><span class="line">        cif_mipi_in1: endpoint &#123;</span><br><span class="line">            remote-endpoint = &lt;&amp;mipi1_csi2_output&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rkcif_mipi_lvds1_sditf &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    port &#123;</span><br><span class="line">        mipi1_lvds_sditf: endpoint &#123;</span><br><span class="line">            remote-endpoint = &lt;&amp;isp1_in0&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rkisp1_vir0 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">    port &#123;</span><br><span class="line">        <span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">        <span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">        isp1_in0: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">            reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">            remote-endpoint = &lt;&amp;mipi1_lvds_sditf&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312241651510.png" alt="image-20231224165105229" /></p>
<p>三个摄像头倒是可以了，但是这个显示确实不太好~~，中间的那个清楚，其他的不清楚，可是他们的配置都是一样的呀，不理解呀、不理解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gst-launch-1.0 v4l2src device=/dev/video31 ! video/x-raw,format=NV12,width=1920,height=1080, framerate=30/1 ! xvimagesink</span><br><span class="line">gst-launch-1.0 v4l2src device=/dev/video22 ! video/x-raw,format=NV12,width=1920,height=1080, framerate=30/1 ! xvimagesink</span><br><span class="line">gst-launch-1.0 v4l2src device=/dev/video11 ! video/x-raw,format=NV12,width=1920,height=1080, framerate=30/1 ! xvimagesink</span><br><span class="line"></span><br><span class="line">gst-launch-1.0 v4l2src device=/dev/video33 ! video/x-raw,format=NV12,width=640,height=480, framerate=30/1 ! xvimagesink &amp;</span><br><span class="line">gst-launch-1.0 v4l2src device=/dev/video42 ! video/x-raw,format=NV12,width=640,height=480, framerate=30/1 ! xvimagesink &amp;</span><br><span class="line">gst-launch-1.0 v4l2src device=/dev/video51 ! video/x-raw,format=NV12,width=640,height=480, framerate=30/1 ! xvimagesink &amp;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">#function build_debian11() debian11编译函数</span><br><span class="line">#function build_debian11() debian12编译函数</span><br><span class="line">#function build_debian20() ubuntu20编译函数 </span><br><span class="line">#function build_ubuntu22() ubuntu22编译函数</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># build_rootfs_buildroot() 更新buildroot</span><br><span class="line"># build_rootfs_debian11() 更新debian11</span><br><span class="line"># build_rootfs_debian12() 更新debian12</span><br><span class="line"># build_rootfs_ubuntu20()  更新ubuntu20</span><br><span class="line"># build_rootfs_ubuntu22_xfce 更新ubuntu22_xfce</span><br><span class="line"># build_rootfs_ubuntu22_gnome() 更新ubuntu22_gnome</span><br><span class="line"># build_rootfs_all() 更新全部镜像</span><br><span class="line"># clean_all() 清理</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">buildroot) build_rootfs_buildroot ;;</span><br><span class="line">debian11) build_rootfs_debian11 ;;</span><br><span class="line">debian12) build_rootfs_debian12 ;;</span><br><span class="line">ubuntu20) build_rootfs_ubuntu20 ;;</span><br><span class="line">ubuntu22_xfce) build_rootfs_ubuntu22_xfce ;;</span><br><span class="line">ubuntu22_gnome) build_rootfs_ubuntu22_gnome ;;</span><br><span class="line">all) build_rootfs_all ;;</span><br><span class="line">cleanall) clean_all ;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/%s/3588-linux/3588s-linux/g</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%s/04_LVDS_10_1_1280x800_GT9271屏幕镜像/03_LVDS_10_1_1280x800_GT9271屏幕镜像/g</span><br><span class="line">%s/05_LVDS_7_0屏幕镜像/04_LVDS_7_0屏幕镜像/g</span><br><span class="line">%s/06_MIPI0屏幕镜像/05_MIPI0屏幕镜像/g</span><br><span class="line">%s/07_MIPI1屏幕镜像/06_MIPI1屏幕镜像/g</span><br><span class="line"></span><br><span class="line">%s/topeet_screen_lcds.dts/topeet-screen-lcds.dts/g</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="1223-工作记录"><a class="markdownIt-Anchor" href="#1223-工作记录"></a> 12.23 工作记录</h1>
<h2 id="1整理设备树"><a class="markdownIt-Anchor" href="#1整理设备树"></a> 1.整理设备树</h2>
<p>​	重新确定一下设备树的形状图：<br />
最上级设备树：             topeet-rk3588-linux.dts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;topeet-rk3588.dtsi&quot;</span><br><span class="line">#include &quot;rk3588-linux.dtsi&quot;</span><br><span class="line">#include &quot;topeet-rk3588-config.dtsi&quot;</span><br></pre></td></tr></table></figure>
<p>第一级设备树  topeet-rk3588.dtsi</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;rk3588s.dtsi&quot;</span><br><span class="line">#include &quot;rk3588s-evb.dtsi&quot;</span><br><span class="line">#include &quot;rk3588s-rk806-dual.dtsi&quot;</span><br></pre></td></tr></table></figure>
<p>第一级设备树&quot;rk3588-linux.dtsi&quot;</p>
<p>第一级设备树topeet-rk3588-config.dtsi</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;topeet-screen-lcds.dts&quot;</span><br></pre></td></tr></table></figure>
<p>第二级设备树 rk3588s.dtsi</p>
<p>第二级设备树 rk3588s-evb.dtsi</p>
<p>第二级设备树 rk3588s-rk806-dual.dtsi</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">设备树级别</td>
<td style="text-align:left">设备树文件</td>
<td style="text-align:left">包含的设备树文件</td>
</tr>
<tr>
<td style="text-align:left">最上级</td>
<td style="text-align:left">topeet-rk3588-linux.dts</td>
<td style="text-align:left">topeet-rk3588.dtsi</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">rk3588-linux.dtsi</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">topeet-rk3588-config.dtsi</td>
</tr>
<tr>
<td style="text-align:left">第一级</td>
<td style="text-align:left">topeet-rk3588.dtsi</td>
<td style="text-align:left">rk3588s.dtsi</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">rk3588s-evb.dtsi</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">rk3588s-rk806-dual.dtsi</td>
</tr>
<tr>
<td style="text-align:left">第一级</td>
<td style="text-align:left">rk3588-linux.dtsi</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">第一级</td>
<td style="text-align:left">topeet-rk3588-config.dtsi</td>
<td style="text-align:left">topeet-screen-lcds.dts</td>
</tr>
<tr>
<td style="text-align:left">第二级</td>
<td style="text-align:left">rk3588s.dtsi</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">第二级</td>
<td style="text-align:left">rk3588s-evb.dtsi</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">第二级</td>
<td style="text-align:left">rk3588s-rk806-dual.dtsi</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312230944311.jpg" alt="绘图1" /></p>
<p>现在来分析其中都有哪些内容：</p>
<p>1.topeet-rk3588-linux.dts</p>
<p>topeet-rk3588-linux.dts最上级设备树内容如下所示：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/dts-v1/;                                                                                                    </span><br><span class="line">                                                                                                             </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;topeet-rk3588.dtsi&quot;</span>                                                                                </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rk3588-linux.dtsi&quot;</span>                                                                                 </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;topeet-rk3588-config.dtsi&quot;</span>                                                                         </span></span><br><span class="line">                                                                                                             </span><br><span class="line">/ &#123;                                                                                                          </span><br><span class="line">        model = <span class="string">&quot;TOPEET RK3588S LP4X V10 Board&quot;</span>;                                                             </span><br><span class="line">        compatible = <span class="string">&quot;rockchip,rk3588&quot;</span>;                                                                      </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这个是设备树的最上级，只是用来进行标明包含关系的，或者增加了model，在其下有着三个设备树，分别为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;topeet-rk3588.dtsi&quot;</span>                                                                                </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rk3588-linux.dtsi&quot;</span>                                                                                 </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;topeet-rk3588-config.dtsi&quot;</span>    </span></span><br></pre></td></tr></table></figure>
<p>topeet-rk3588.dtsi 是最主要的一个设备树、等一下将无用的设备数节点删掉，然后我再重新配置，rk3588-linux.dtsi是关于Linux的一些相关配置的，就不如调试串口等，再然后是我们底板上的一些配置文件。</p>
<p>这里先来讲解rk3588-linux.dtsi设备树</p>
<h3 id="2rk3588-linuxdtsi"><a class="markdownIt-Anchor" href="#2rk3588-linuxdtsi"></a> 2.rk3588-linux.dtsi</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: (GPL-2.0+ OR MIT)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2021 Rockchip Electronics Co., Ltd.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">/ &#123;</span><br><span class="line">	aliases &#123;</span><br><span class="line">		mmc0 = &amp;sdhci;</span><br><span class="line">		mmc1 = &amp;sdmmc;</span><br><span class="line">		mmc2 = &amp;sdio;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	chosen: chosen &#123;</span><br><span class="line">		bootargs = <span class="string">&quot;earlycon=uart8250,mmio32,0xfeb50000 console=ttyFIQ0 irqchip.gicv3_pseudo_nmi=0 rw rootwait&quot;</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	cspmu: cspmu@fd10c000 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;rockchip,cspmu&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x0</span> <span class="number">0xfd10c000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd10d000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd10e000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd10f000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd12c000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd12d000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd12e000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd12f000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	debug: debug@fd104000 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;rockchip,debug&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x0</span> <span class="number">0xfd104000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd105000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd106000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd107000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd124000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd125000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd126000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;,</span><br><span class="line">		      &lt;<span class="number">0x0</span> <span class="number">0xfd127000</span> <span class="number">0x0</span> <span class="number">0x1000</span>&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	fiq_debugger: fiq-debugger &#123;</span><br><span class="line">		compatible = <span class="string">&quot;rockchip,fiq-debugger&quot;</span>;</span><br><span class="line">		rockchip,serial-id = &lt;<span class="number">2</span>&gt;;</span><br><span class="line">		rockchip,wake-irq = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">		<span class="comment">/* If enable uart uses irq instead of fiq */</span></span><br><span class="line">		rockchip,irq-mode-enable = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">		rockchip,baudrate = &lt;<span class="number">115200</span>&gt;;  <span class="comment">/* Only 115200 and 1500000 */</span></span><br><span class="line">		interrupts = &lt;GIC_SPI <span class="number">423</span> IRQ_TYPE_LEVEL_LOW&gt;;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;uart2m0_xfer&gt;;</span><br><span class="line">		status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	firmware &#123;</span><br><span class="line">		optee: optee &#123;</span><br><span class="line">			compatible = <span class="string">&quot;linaro,optee-tz&quot;</span>;</span><br><span class="line">			method = <span class="string">&quot;smc&quot;</span>;</span><br><span class="line">			<span class="comment">//status = &quot;disabled&quot;;</span></span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	reserved-memory &#123;</span><br><span class="line">		<span class="meta">#address-cells = <span class="string">&lt;2&gt;</span>;</span></span><br><span class="line">		<span class="meta">#size-cells = <span class="string">&lt;2&gt;</span>;</span></span><br><span class="line">		ranges;</span><br><span class="line"></span><br><span class="line">		cma &#123;</span><br><span class="line">			compatible = <span class="string">&quot;shared-dma-pool&quot;</span>;</span><br><span class="line">			reusable;</span><br><span class="line">			size = &lt;<span class="number">0x0</span> (<span class="number">8</span> * <span class="number">0x100000</span>)&gt;;</span><br><span class="line">			linux,cma-<span class="keyword">default</span>;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		drm_logo: drm-logo@<span class="number">00000000</span> &#123;</span><br><span class="line">			compatible = <span class="string">&quot;rockchip,drm-logo&quot;</span>;</span><br><span class="line">			reg = &lt;<span class="number">0x0</span> <span class="number">0x0</span> <span class="number">0x0</span> <span class="number">0x0</span>&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		drm_cubic_lut: drm-cubic-lut@<span class="number">00000000</span> &#123;</span><br><span class="line">			compatible = <span class="string">&quot;rockchip,drm-cubic-lut&quot;</span>;</span><br><span class="line">			reg = &lt;<span class="number">0x0</span> <span class="number">0x0</span> <span class="number">0x0</span> <span class="number">0x0</span>&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		ramoops: ramoops@<span class="number">110000</span> &#123;</span><br><span class="line">			compatible = <span class="string">&quot;ramoops&quot;</span>;</span><br><span class="line">			reg = &lt;<span class="number">0x0</span> <span class="number">0x110000</span> <span class="number">0x0</span> <span class="number">0xf0000</span>&gt;;</span><br><span class="line">			record-size = &lt;<span class="number">0x20000</span>&gt;;</span><br><span class="line">			console-size = &lt;<span class="number">0x80000</span>&gt;;</span><br><span class="line">			ftrace-size = &lt;<span class="number">0x00000</span>&gt;;</span><br><span class="line">			pmsg-size = &lt;<span class="number">0x50000</span>&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;display_subsystem &#123;</span><br><span class="line">	memory-region = &lt;&amp;drm_logo&gt;;</span><br><span class="line">	memory-region-names = <span class="string">&quot;drm-logo&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;dfi &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;dmc &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	center-supply = &lt;&amp;vdd_ddr_s0&gt;;</span><br><span class="line">	mem-supply = &lt;&amp;vdd_log_s0&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rng &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rockchip_suspend &#123;</span><br><span class="line"></span><br><span class="line">	rockchip,sleep-mode-config = &lt;</span><br><span class="line">	       (<span class="number">0</span></span><br><span class="line">	       | RKPM_SLP_ARMOFF_DDRPD</span><br><span class="line">	       | RKPM_SLP_PMU_PMUALIVE_32K</span><br><span class="line">	       | RKPM_SLP_PMU_DIS_OSC</span><br><span class="line">	       | RKPM_SLP_32K_EXT</span><br><span class="line">	       | RKPM_SLP_PMU_DBG</span><br><span class="line">	       )</span><br><span class="line">	&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;vdd_log_s0 &#123;</span><br><span class="line">	regulator-state-mem &#123;</span><br><span class="line">		regulator-on-in-suspend;</span><br><span class="line">		regulator-suspend-microvolt = &lt;<span class="number">750000</span>&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>​	上面绝大部分都不需要我们关注，需要注意的是chosen和fiq-debugger这两个节点</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chosen: chosen &#123;</span><br><span class="line">	bootargs = <span class="string">&quot;earlycon=uart8250,mmio32,0xfeb50000 console=ttyFIQ0 irqchip.gicv3_pseudo_nmi=0 rw rootwait&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>chosen是内核挂载时候的一些参数，这里让我简单的改了一下，之前是凭借的uuid，现在让我写死了，在uboot里面</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fiq_debugger: fiq-debugger &#123;</span><br><span class="line">	compatible = <span class="string">&quot;rockchip,fiq-debugger&quot;</span>;</span><br><span class="line">	rockchip,serial-id = &lt;<span class="number">2</span>&gt;;</span><br><span class="line">	rockchip,wake-irq = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">	<span class="comment">/* If enable uart uses irq instead of fiq */</span></span><br><span class="line">	rockchip,irq-mode-enable = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">	rockchip,baudrate = &lt;<span class="number">115200</span>&gt;;  <span class="comment">/* Only 115200 and 1500000 */</span></span><br><span class="line">	interrupts = &lt;GIC_SPI <span class="number">423</span> IRQ_TYPE_LEVEL_LOW&gt;;</span><br><span class="line">	pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;uart2m0_xfer&gt;;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>上面的是打印调试串口，没啥要说的，只是最后将调试串口改为普通串口的时候有点作用，默认将1500000改为了115200。这个设备树也就没啥了。</p>
<h3 id="3topeet-rk3588-configdtsi"><a class="markdownIt-Anchor" href="#3topeet-rk3588-configdtsi"></a> 3.topeet-rk3588-config.dtsi</h3>
<p>这个是根据我们底板进行外设适配的一些内容。具体如下所示：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;topeet-screen-lcds.dts&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//蜂鸣器</span></span><br><span class="line">&amp;pwm15 &#123;</span><br><span class="line">    status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">    pinctrl<span class="number">-0</span> = &lt;&amp;pwm15m2_pins&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//有线网卡配置</span></span><br><span class="line">&amp;gmac1 &#123;</span><br><span class="line">        <span class="comment">/* Use rgmii-rxid mode to disable rx delay inside Soc */</span></span><br><span class="line">        phy-mode = <span class="string">&quot;rgmii-rxid&quot;</span>;</span><br><span class="line">        clock_in_out = <span class="string">&quot;output&quot;</span>;</span><br><span class="line"></span><br><span class="line">        snps,reset-gpio = &lt;&amp;gpio3 RK_PB7 GPIO_ACTIVE_LOW&gt;;</span><br><span class="line">        snps,reset-active-low;</span><br><span class="line">        <span class="comment">/* Reset time is 20ms, 100ms for rtl8211f */</span></span><br><span class="line">        snps,reset-delays-us = &lt;<span class="number">0</span> <span class="number">20000</span> <span class="number">100000</span>&gt;;</span><br><span class="line"></span><br><span class="line">        pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">        pinctrl<span class="number">-0</span> = &lt;&amp;gmac1_miim</span><br><span class="line">                &amp;gmac1_tx_bus2</span><br><span class="line">                &amp;gmac1_rx_bus2</span><br><span class="line">                &amp;gmac1_rgmii_clk</span><br><span class="line">                &amp;gmac1_rgmii_bus</span><br><span class="line">                &amp;gmac1_clkinout&gt;;</span><br><span class="line"></span><br><span class="line">        tx_delay = &lt;<span class="number">0x44</span>&gt;;</span><br><span class="line">        <span class="comment">/* rx_delay = &lt;0x3f&gt;; */</span></span><br><span class="line"></span><br><span class="line">        phy-handle = &lt;&amp;rgmii_phy1&gt;;</span><br><span class="line">        status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mdio1 &#123;</span><br><span class="line">        rgmii_phy1: phy@<span class="number">1</span> &#123;</span><br><span class="line">                compatible = <span class="string">&quot;ethernet-phy-ieee802.3-c22&quot;</span>;</span><br><span class="line">                reg = &lt;<span class="number">0x1</span>&gt;;</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//声卡配置</span></span><br><span class="line"></span><br><span class="line">&amp;i2c7 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	es8388: es8388@<span class="number">11</span> &#123;</span><br><span class="line">		status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">		<span class="meta">#sound-dai-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">		compatible = <span class="string">&quot;everest,es8388&quot;</span>, <span class="string">&quot;everest,es8323&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x11</span>&gt;;</span><br><span class="line">		clocks = &lt;&amp;cru I2S0_8CH_MCLKOUT&gt;;</span><br><span class="line">		clock-names = <span class="string">&quot;mclk&quot;</span>;</span><br><span class="line">		assigned-clocks = &lt;&amp;cru I2S0_8CH_MCLKOUT&gt;;</span><br><span class="line">		assigned-clock-rates = &lt;<span class="number">12288000</span>&gt;;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;i2s0_mclk&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//can</span></span><br><span class="line">&amp;can1 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	compatible = <span class="string">&quot;rockchip,canfd-1.0&quot;</span>; <span class="comment">//使用canfd</span></span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;can1m1_pins&gt;;</span><br><span class="line">	assigned-clocks = &lt;&amp;cru CLK_CAN1&gt;;</span><br><span class="line">	assigned-clock-rates = &lt;<span class="number">100000000</span>&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//485</span></span><br><span class="line">&amp;uart9 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"><span class="comment">//	dma-names = &quot;tx&quot;, &quot;rx&quot;; //使用dma传输模式</span></span><br><span class="line">	pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;uart9m2_xfer&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// rtc实时时钟</span></span><br><span class="line">&amp;i2c6 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;i2c6m0_xfer&gt;;</span><br><span class="line"></span><br><span class="line">	hym8563: hym8563@<span class="number">51</span> &#123;</span><br><span class="line">		compatible = <span class="string">&quot;haoyu,hym8563&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x51</span>&gt;;</span><br><span class="line">		<span class="meta">#clock-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">		clock-frequency = &lt;<span class="number">32768</span>&gt;;</span><br><span class="line">		clock-output-names = <span class="string">&quot;hym8563&quot;</span>;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;hym8563_int&gt;;</span><br><span class="line">		interrupt-parent = &lt;&amp;gpio0&gt;;</span><br><span class="line">		interrupts = &lt;RK_PB0 IRQ_TYPE_LEVEL_LOW&gt;;</span><br><span class="line">		wakeup-source;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// M.2 固态硬盘</span></span><br><span class="line">&amp;combphy0_ps &#123;</span><br><span class="line">        status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;pcie2x1l2 &#123;</span><br><span class="line">        status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这里目前还存在很大的问题，我打算将那些用到的外设都改过来。这里不大对，甚至连那些pinctrl的引脚等等。</p>
<h3 id="4topeet-rk3588dtsi"><a class="markdownIt-Anchor" href="#4topeet-rk3588dtsi"></a> 4.topeet-rk3588.dtsi</h3>
<p>这个文件才是真正的大头，由于我这里是直接拷贝的设备树，所以一系列的之前人家板子的配置也随之过来了，这肯定是不对的，我先看看具体内容</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: (GPL-2.0+ OR MIT)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2021 Rockchip Electronics Co., Ltd.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;dt-bindings/usb/pd.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rk3588s.dtsi&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rk3588s-evb.dtsi&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rk3588s-rk806-dual.dtsi&quot;</span></span></span><br><span class="line"></span><br><span class="line">/ &#123;</span><br><span class="line">	combophy_avdd0v85: combophy-avdd0v85 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;combophy_avdd0v85&quot;</span>;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">850000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">850000</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vdd_0v85_s0&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	combophy_avdd1v8: combophy-avdd1v8 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;combophy_avdd1v8&quot;</span>;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">1800000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">1800000</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;avcc_1v8_s0&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	es8388_sound: es8388-sound &#123;</span><br><span class="line">		status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">		compatible = <span class="string">&quot;rockchip,multicodecs-card&quot;</span>;</span><br><span class="line">		rockchip,card-name = <span class="string">&quot;rockchip-es8388&quot;</span>;</span><br><span class="line">		hp-det-gpio = &lt;&amp;gpio1 RK_PD0 GPIO_ACTIVE_LOW&gt;;</span><br><span class="line">		io-channels = &lt;&amp;saradc <span class="number">3</span>&gt;;</span><br><span class="line">		io-channel-names = <span class="string">&quot;adc-detect&quot;</span>;</span><br><span class="line">		keyup-threshold-microvolt = &lt;<span class="number">1800000</span>&gt;;</span><br><span class="line">		poll-interval = &lt;<span class="number">100</span>&gt;;</span><br><span class="line">		spk-con-gpio = &lt;&amp;gpio4 RK_PA5 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		hp-con-gpio = &lt;&amp;gpio4 RK_PA4 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		rockchip,format = <span class="string">&quot;i2s&quot;</span>;</span><br><span class="line">		rockchip,mclk-fs = &lt;<span class="number">256</span>&gt;;</span><br><span class="line">		rockchip,cpu = &lt;&amp;i2s0_8ch&gt;;</span><br><span class="line">		rockchip,codec = &lt;&amp;es8388&gt;;</span><br><span class="line">		rockchip,audio-routing =</span><br><span class="line">			<span class="string">&quot;Headphone&quot;</span>, <span class="string">&quot;LOUT1&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Headphone&quot;</span>, <span class="string">&quot;ROUT1&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Speaker&quot;</span>, <span class="string">&quot;LOUT2&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Speaker&quot;</span>, <span class="string">&quot;ROUT2&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Headphone&quot;</span>, <span class="string">&quot;Headphone Power&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Headphone&quot;</span>, <span class="string">&quot;Headphone Power&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Speaker&quot;</span>, <span class="string">&quot;Speaker Power&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Speaker&quot;</span>, <span class="string">&quot;Speaker Power&quot;</span>,</span><br><span class="line">			<span class="string">&quot;LINPUT1&quot;</span>, <span class="string">&quot;Main Mic&quot;</span>,</span><br><span class="line">			<span class="string">&quot;LINPUT2&quot;</span>, <span class="string">&quot;Main Mic&quot;</span>,</span><br><span class="line">			<span class="string">&quot;RINPUT1&quot;</span>, <span class="string">&quot;Headset Mic&quot;</span>,</span><br><span class="line">			<span class="string">&quot;RINPUT2&quot;</span>, <span class="string">&quot;Headset Mic&quot;</span>;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;hp_det&gt;;</span><br><span class="line">		play-pause-key &#123;</span><br><span class="line">			label = <span class="string">&quot;playpause&quot;</span>;</span><br><span class="line">			linux,code = &lt;KEY_PLAYPAUSE&gt;;</span><br><span class="line">			press-threshold-microvolt = &lt;<span class="number">2000</span>&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	fan: pwm-fan &#123;</span><br><span class="line">		compatible = <span class="string">&quot;pwm-fan&quot;</span>;</span><br><span class="line">		<span class="meta">#cooling-cells = <span class="string">&lt;2&gt;</span>;</span></span><br><span class="line">		pwms = &lt;&amp;pwm11 <span class="number">0</span> <span class="number">50000</span> <span class="number">0</span>&gt;;</span><br><span class="line">		cooling-levels = &lt;<span class="number">0</span> <span class="number">50</span> <span class="number">100</span> <span class="number">150</span> <span class="number">200</span> <span class="number">255</span>&gt;;</span><br><span class="line">		rockchip,temp-trips = &lt;</span><br><span class="line">			<span class="number">50000</span>	<span class="number">1</span></span><br><span class="line">			<span class="number">55000</span>	<span class="number">2</span></span><br><span class="line">			<span class="number">60000</span>	<span class="number">3</span></span><br><span class="line">			<span class="number">65000</span>	<span class="number">4</span></span><br><span class="line">			<span class="number">70000</span>	<span class="number">5</span></span><br><span class="line">		&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vbus5v0_typec: vbus5v0-typec &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vbus5v0_typec&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">5000000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">5000000</span>&gt;;</span><br><span class="line">		enable-active-high;</span><br><span class="line">		gpio = &lt;&amp;gpio1 RK_PA1 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc5v0_usb&gt;;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;typec5v_pwren&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">    vcc3v3_lcd_n: vcc3v3-lcd0-n &#123;</span><br><span class="line">        compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">        regulator-name = <span class="string">&quot;vcc3v3_lcd0_n&quot;</span>;</span><br><span class="line">        regulator-always-on;</span><br><span class="line">        regulator-boot-on;</span><br><span class="line">        enable-active-high;</span><br><span class="line">        gpio = &lt;&amp;gpio1 RK_PD2 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        vin-supply = &lt;&amp;vcc_1v8_s0&gt;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">	vcc3v3_lcd_edp: vcc3v3-lcd-edp &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc3v3_lcd_edp&quot;</span>;</span><br><span class="line">		gpio = &lt;&amp;gpio1 RK_PA5 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		enable-active-high;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		vin-supply = &lt;&amp;vcc_3v3_s3&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vcc3v3_pcie20: vcc3v3-pcie20 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc3v3_pcie20&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">3300000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">3300000</span>&gt;;</span><br><span class="line">		enable-active-high;</span><br><span class="line">		gpios = &lt;&amp;gpio4 RK_PB1 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		startup-delay-us = &lt;<span class="number">5000</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc12v_dcin&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vcc5v0_host: vcc5v0-host &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc5v0_host&quot;</span>;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">5000000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">5000000</span>&gt;;</span><br><span class="line">		enable-active-high;</span><br><span class="line">		gpio = &lt;&amp;gpio1 RK_PB1 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc5v0_usb&gt;;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;vcc5v0_host_en&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;backlight &#123;</span><br><span class="line">	pwms = &lt;&amp;pwm12 <span class="number">0</span> <span class="number">25000</span> <span class="number">0</span>&gt;;</span><br><span class="line">	power-supply = &lt;&amp;vcc3v3_lcd_edp&gt;;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;combphy0_ps &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;dp0 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;dp0_in_vp1 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;dp0_sound&#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&amp;hdptxphy0 &#123;</span><br><span class="line">	<span class="comment">/* Single Vdiff Training Table for power reduction (optional) */</span></span><br><span class="line">	training-table = /bits/ <span class="number">8</span> &lt;</span><br><span class="line">		<span class="comment">/* voltage swing 0, pre-emphasis 0-&gt;3 */</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">		<span class="comment">/* voltage swing 1, pre-emphasis 0-&gt;2 */</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">		<span class="comment">/* voltage swing 2, pre-emphasis 0-&gt;1 */</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">		<span class="comment">/* voltage swing 3, pre-emphasis 0 */</span></span><br><span class="line">		<span class="number">0x0d</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span> <span class="number">0x00</span></span><br><span class="line">	&gt;;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&amp;i2c8 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;i2c8m2_xfer&gt;;</span><br><span class="line"></span><br><span class="line">	usbc0: fusb302@<span class="number">22</span> &#123;</span><br><span class="line">		compatible = <span class="string">&quot;fcs,fusb302&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x22</span>&gt;;</span><br><span class="line">		interrupt-parent = &lt;&amp;gpio0&gt;;</span><br><span class="line">		interrupts = &lt;RK_PD3 IRQ_TYPE_LEVEL_LOW&gt;;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;usbc0_int&gt;;</span><br><span class="line">		vbus-supply = &lt;&amp;vbus5v0_typec&gt;;</span><br><span class="line">		status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">		ports &#123;</span><br><span class="line">			<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">			<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">			port@<span class="number">0</span> &#123;</span><br><span class="line">				reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">				usbc0_role_sw: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">					remote-endpoint = &lt;&amp;dwc3_0_role_switch&gt;;</span><br><span class="line">				&#125;;</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		usb_con: connector &#123;</span><br><span class="line">			compatible = <span class="string">&quot;usb-c-connector&quot;</span>;</span><br><span class="line">			label = <span class="string">&quot;USB-C&quot;</span>;</span><br><span class="line">			data-role = <span class="string">&quot;dual&quot;</span>;</span><br><span class="line">			power-role = <span class="string">&quot;dual&quot;</span>;</span><br><span class="line">			try-power-role = <span class="string">&quot;sink&quot;</span>;</span><br><span class="line">			op-sink-microwatt = &lt;<span class="number">1000000</span>&gt;;</span><br><span class="line">			sink-pdos =</span><br><span class="line">				&lt;PDO_FIXED(<span class="number">5000</span>, <span class="number">1000</span>, PDO_FIXED_USB_COMM)&gt;;</span><br><span class="line">			source-pdos =</span><br><span class="line">				&lt;PDO_FIXED(<span class="number">5000</span>, <span class="number">3000</span>, PDO_FIXED_USB_COMM)&gt;;</span><br><span class="line"></span><br><span class="line">			altmodes &#123;</span><br><span class="line">				<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">				<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">				altmode@<span class="number">0</span> &#123;</span><br><span class="line">					reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">					svid = &lt;<span class="number">0xff01</span>&gt;;</span><br><span class="line">					vdo = &lt;<span class="number">0xffffffff</span>&gt;;</span><br><span class="line">				&#125;;</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line">			ports &#123;</span><br><span class="line">				<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">				<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">				port@<span class="number">0</span> &#123;</span><br><span class="line">					reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">					usbc0_orien_sw: endpoint &#123;</span><br><span class="line">						remote-endpoint = &lt;&amp;usbdp_phy0_orientation_switch&gt;;</span><br><span class="line">					&#125;;</span><br><span class="line">				&#125;;</span><br><span class="line"></span><br><span class="line">				port@<span class="number">1</span> &#123;</span><br><span class="line">					reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">					dp_altmode_mux: endpoint &#123;</span><br><span class="line">						remote-endpoint = &lt;&amp;usbdp_phy0_dp_altmode_mux&gt;;</span><br><span class="line">					&#125;;</span><br><span class="line">				&#125;;</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;pdm0 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;pinctrl &#123;</span><br><span class="line">	headphone &#123;</span><br><span class="line">		hp_det: hp-det &#123;</span><br><span class="line">			rockchip,pins = &lt;<span class="number">1</span> RK_PD0 RK_FUNC_GPIO &amp;pcfg_pull_none&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	usb &#123;</span><br><span class="line">		vcc5v0_host_en: vcc5v0-host-en &#123;</span><br><span class="line">			rockchip,pins = &lt;<span class="number">1</span> RK_PB1 RK_FUNC_GPIO &amp;pcfg_pull_none&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	usb-typec &#123;</span><br><span class="line">		usbc0_int: usbc0-<span class="type">int</span> &#123;</span><br><span class="line">			rockchip,pins = &lt;<span class="number">0</span> RK_PD3 RK_FUNC_GPIO &amp;pcfg_pull_up&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		typec5v_pwren: typec5v-pwren &#123;</span><br><span class="line">			rockchip,pins = &lt;<span class="number">1</span> RK_PA1 RK_FUNC_GPIO &amp;pcfg_pull_none&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&amp;sdmmc &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;spdif_tx1 &#123;</span><br><span class="line">	status = <span class="string">&quot;disabled&quot;</span>;</span><br><span class="line">	pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;spdif1m1_tx&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;spdif_tx1_dc &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;spdif_tx1_sound &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;spdif_tx2 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;u2phy0_otg &#123;</span><br><span class="line">	rockchip,typec-vbus-det;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;u2phy2_host &#123;</span><br><span class="line">	phy-supply = &lt;&amp;vcc5v0_host&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;u2phy3_host &#123;</span><br><span class="line">	phy-supply = &lt;&amp;vcc5v0_host&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&amp;usbdp_phy0 &#123;</span><br><span class="line">	orientation-<span class="keyword">switch</span>;</span><br><span class="line">	svid = &lt;<span class="number">0xff01</span>&gt;;</span><br><span class="line">	sbu1-dc-gpios = &lt;&amp;gpio1 RK_PB6 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">	sbu2-dc-gpios = &lt;&amp;gpio1 RK_PB7 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line"></span><br><span class="line">	port &#123;</span><br><span class="line">		<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">		<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">		usbdp_phy0_orientation_switch: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">			reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">			remote-endpoint = &lt;&amp;usbc0_orien_sw&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		usbdp_phy0_dp_altmode_mux: endpoint@<span class="number">1</span> &#123;</span><br><span class="line">			reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">			remote-endpoint = &lt;&amp;dp_altmode_mux&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usbdrd_dwc3_0 &#123;</span><br><span class="line">	usb-role-<span class="keyword">switch</span>;</span><br><span class="line">	port &#123;</span><br><span class="line">		<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">		<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">		dwc3_0_role_switch: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">			reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">			remote-endpoint = &lt;&amp;usbc0_role_sw&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usbhost3_0 &#123;</span><br><span class="line">	status = <span class="string">&quot;disabled&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usbhost_dwc3_0 &#123;</span><br><span class="line">	status = <span class="string">&quot;disabled&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="2重新整理设备树"><a class="markdownIt-Anchor" href="#2重新整理设备树"></a> 2.重新整理设备树</h2>
<h3 id="21-最上级设备树"><a class="markdownIt-Anchor" href="#21-最上级设备树"></a> 2.1 最上级设备树</h3>
<p>topeet-rk3588-linux.dts</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: (GPL-2.0+ OR MIT)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2022 Rockchip Electronics Co., Ltd.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">/dts-v1/;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;dt-bindings/usb/pd.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rk3588s.dtsi&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rk3588s-evb.dtsi&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rk3588-rk806-single.dtsi&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rk3588-linux.dtsi&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;topeet-rk3588-config.dtsi&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#include &quot;iTop-3588s-mipi0.dts&quot;</span></span><br><span class="line"><span class="comment">//#include &quot;iTop-3588s-mipi1.dts&quot;</span></span><br><span class="line"><span class="comment">//#include &quot;iTop-3588s-dcphy0.dts&quot;</span></span><br><span class="line"><span class="comment">//#include &quot;iTop-3588s-dcphy1.dts&quot;</span></span><br><span class="line"><span class="comment">//#include &quot;iTop-3588s-dphy0.dts&quot;</span></span><br><span class="line">/ &#123;</span><br><span class="line">	model = <span class="string">&quot;TOPEET RK3588S LP4X V10 Board&quot;</span>;</span><br><span class="line">	compatible = <span class="string">&quot;rockchip,rk3588&quot;</span>;</span><br><span class="line"></span><br><span class="line">	aliases &#123;</span><br><span class="line">		hdptxhdmi0 = &amp;hdptxphy_hdmi0;</span><br><span class="line">		hdmi0 = &amp;hdmi0;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	combophy_avdd0v85: combophy-avdd0v85 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;combophy_avdd0v85&quot;</span>;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">850000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">850000</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vdd_0v85_s0&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	combophy_avdd1v8: combophy-avdd1v8 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;combophy_avdd1v8&quot;</span>;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">1800000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">1800000</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;avcc_1v8_s0&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	es8388_sound: es8388-sound &#123;</span><br><span class="line">		status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">		compatible = <span class="string">&quot;rockchip,multicodecs-card&quot;</span>;</span><br><span class="line">		rockchip,card-name = <span class="string">&quot;rockchip-es8388&quot;</span>;</span><br><span class="line">		hp-det-gpio = &lt;&amp;gpio1 RK_PC0 GPIO_ACTIVE_LOW&gt;;</span><br><span class="line">		<span class="comment">//io-channels = &lt;&amp;saradc 3&gt;;</span></span><br><span class="line">		<span class="comment">//io-channel-names = &quot;adc-detect&quot;;</span></span><br><span class="line">		<span class="comment">//keyup-threshold-microvolt = &lt;1800000&gt;;</span></span><br><span class="line">		poll-interval = &lt;<span class="number">100</span>&gt;;</span><br><span class="line">		spk-con-gpio = &lt;&amp;gpio4 RK_PA4 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		rockchip,format = <span class="string">&quot;i2s&quot;</span>;</span><br><span class="line">		rockchip,mclk-fs = &lt;<span class="number">256</span>&gt;;</span><br><span class="line">		rockchip,cpu = &lt;&amp;i2s0_8ch&gt;;</span><br><span class="line">		rockchip,codec = &lt;&amp;es8388&gt;;</span><br><span class="line">		rockchip,audio-routing =</span><br><span class="line">			<span class="string">&quot;Headphone&quot;</span>, <span class="string">&quot;LOUT1&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Headphone&quot;</span>, <span class="string">&quot;ROUT1&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Speaker&quot;</span>, <span class="string">&quot;LOUT2&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Speaker&quot;</span>, <span class="string">&quot;ROUT2&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Headphone&quot;</span>, <span class="string">&quot;Headphone Power&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Headphone&quot;</span>, <span class="string">&quot;Headphone Power&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Speaker&quot;</span>, <span class="string">&quot;Speaker Power&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Speaker&quot;</span>, <span class="string">&quot;Speaker Power&quot;</span>,</span><br><span class="line">			<span class="string">&quot;LINPUT1&quot;</span>, <span class="string">&quot;Main Mic&quot;</span>,</span><br><span class="line">			<span class="string">&quot;LINPUT2&quot;</span>, <span class="string">&quot;Main Mic&quot;</span>,</span><br><span class="line">			<span class="string">&quot;RINPUT1&quot;</span>, <span class="string">&quot;Headset Mic&quot;</span>,</span><br><span class="line">			<span class="string">&quot;RINPUT2&quot;</span>, <span class="string">&quot;Headset Mic&quot;</span>;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;hp_det&gt;;</span><br><span class="line">		play-pause-key &#123;</span><br><span class="line">			label = <span class="string">&quot;playpause&quot;</span>;</span><br><span class="line">			linux,code = &lt;KEY_PLAYPAUSE&gt;;</span><br><span class="line">			press-threshold-microvolt = &lt;<span class="number">2000</span>&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	fan: pwm-fan &#123;</span><br><span class="line">		compatible = <span class="string">&quot;pwm-fan&quot;</span>;</span><br><span class="line">		<span class="meta">#cooling-cells = <span class="string">&lt;2&gt;</span>;</span></span><br><span class="line">		pwms = &lt;&amp;pwm11 <span class="number">0</span> <span class="number">50000</span> <span class="number">0</span>&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vbus5v0_typec: vbus5v0-typec &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vbus5v0_typec&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">5000000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">5000000</span>&gt;;</span><br><span class="line">		enable-active-high;</span><br><span class="line">		gpio = &lt;&amp;gpio4 RK_PA5 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc5v0_usb&gt;;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;typec5v_pwren&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vcc3v3_lcd_n: vcc3v3-lcd0-n &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc3v3_lcd0_n&quot;</span>;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		enable-active-high;</span><br><span class="line">		gpio = &lt;&amp;gpio4 RK_PA3 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc_3v3_s0&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vcc3v3_pcie20: vcc3v3-pcie20 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc3v3_pcie20&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">3300000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">3300000</span>&gt;;</span><br><span class="line">		enable-active-high;</span><br><span class="line">		gpios = &lt;&amp;gpio4 RK_PB1 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		startup-delay-us = &lt;<span class="number">5000</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc12v_dcin&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vcc5v0_host: vcc5v0-host &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc5v0_host&quot;</span>;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">5000000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">5000000</span>&gt;;</span><br><span class="line">		enable-active-high;</span><br><span class="line">		gpio = &lt;&amp;gpio4 RK_PB5 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc5v0_usb&gt;;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;vcc5v0_host_en&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vcc_1v1_nldo_s3: vcc<span class="number">-1</span>v1-nldo-s3 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc_1v1_nldo_s3&quot;</span>;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">1100000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">1100000</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc5v0_sys&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vcc_1v8_cam_s0: vcc<span class="number">-1</span>v8-cam-s0 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc_1v8_cam_s0&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">1800000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">1800000</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc_3v3_s3&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vcc_2v8_cam_s0: vcc<span class="number">-2</span>v8-cam-s0 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc_2v8_cam_s0&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">2800000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">2800000</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc_3v3_s3&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vcc_3v3_sd_s0: vcc<span class="number">-3</span>v3-sd-s0 &#123;</span><br><span class="line">		compatible = <span class="string">&quot;regulator-fixed&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vcc_3v3_sd_s0&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">3300000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">3300000</span>&gt;;</span><br><span class="line">		gpios = &lt;&amp;gpio0 RK_PD4 GPIO_ACTIVE_LOW&gt;;</span><br><span class="line">		enable-active-low;</span><br><span class="line">		vin-supply = &lt;&amp;vcc_3v3_s3&gt;;</span><br><span class="line">			regulator-state-mem &#123;</span><br><span class="line">				regulator-off-in-suspend;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2c0 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;i2c0m2_xfer&gt;;</span><br><span class="line"></span><br><span class="line">	vdd_cpu_big0_s0: vdd_cpu_big0_mem_s0: rk8602@<span class="number">42</span> &#123;</span><br><span class="line">		compatible = <span class="string">&quot;rockchip,rk8602&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x42</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc5v0_sys&gt;;</span><br><span class="line">		regulator-compatible = <span class="string">&quot;rk860x-reg&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vdd_cpu_big0_s0&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">550000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">1050000</span>&gt;;</span><br><span class="line">		regulator-ramp-delay = &lt;<span class="number">2300</span>&gt;;</span><br><span class="line">		rockchip,suspend-voltage-selector = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-state-mem &#123;</span><br><span class="line">			regulator-off-in-suspend;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	vdd_cpu_big1_s0: vdd_cpu_big1_mem_s0: rk8603@<span class="number">43</span> &#123;</span><br><span class="line">		compatible = <span class="string">&quot;rockchip,rk8603&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x43</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc5v0_sys&gt;;</span><br><span class="line">		regulator-compatible = <span class="string">&quot;rk860x-reg&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vdd_cpu_big1_s0&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">550000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">1050000</span>&gt;;</span><br><span class="line">		regulator-ramp-delay = &lt;<span class="number">2300</span>&gt;;</span><br><span class="line">		rockchip,suspend-voltage-selector = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-state-mem &#123;</span><br><span class="line">			regulator-off-in-suspend;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2c2 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">	vdd_npu_s0: vdd_npu_mem_s0: rk8602@<span class="number">42</span> &#123;</span><br><span class="line">		compatible = <span class="string">&quot;rockchip,rk8602&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x42</span>&gt;;</span><br><span class="line">		vin-supply = &lt;&amp;vcc5v0_sys&gt;;</span><br><span class="line">		regulator-compatible = <span class="string">&quot;rk860x-reg&quot;</span>;</span><br><span class="line">		regulator-name = <span class="string">&quot;vdd_npu_s0&quot;</span>;</span><br><span class="line">		regulator-min-microvolt = &lt;<span class="number">550000</span>&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;<span class="number">950000</span>&gt;;</span><br><span class="line">		regulator-ramp-delay = &lt;<span class="number">2300</span>&gt;;</span><br><span class="line">		rockchip,suspend-voltage-selector = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">		regulator-boot-on;</span><br><span class="line">		regulator-always-on;</span><br><span class="line">		regulator-state-mem &#123;</span><br><span class="line">			regulator-off-in-suspend;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2c7 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;i2c7m0_xfer&gt;;</span><br><span class="line"></span><br><span class="line">	es8388: es8388@<span class="number">11</span> &#123;</span><br><span class="line">		status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">		<span class="meta">#sound-dai-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">		compatible = <span class="string">&quot;everest,es8388&quot;</span>, <span class="string">&quot;everest,es8323&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x11</span>&gt;;</span><br><span class="line">		clocks = &lt;&amp;cru I2S0_8CH_MCLKOUT&gt;;</span><br><span class="line">		clock-names = <span class="string">&quot;mclk&quot;</span>;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;i2s0_mclk&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2s0_8ch &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2c6 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;i2c6m3_xfer&gt;;</span><br><span class="line"></span><br><span class="line">	hym8563: hym8563@<span class="number">51</span> &#123;</span><br><span class="line">		compatible = <span class="string">&quot;haoyu,hym8563&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x51</span>&gt;;</span><br><span class="line">		<span class="meta">#clock-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">		clock-frequency = &lt;<span class="number">32768</span>&gt;;</span><br><span class="line">		clock-output-names = <span class="string">&quot;hym8563&quot;</span>;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;hym8563_int&gt;;</span><br><span class="line">		interrupt-parent = &lt;&amp;gpio0&gt;;</span><br><span class="line">		interrupts = &lt;RK_PB0 IRQ_TYPE_LEVEL_LOW&gt;;</span><br><span class="line">		wakeup-source;</span><br><span class="line">		status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	usbc0: fusb302@<span class="number">22</span> &#123;</span><br><span class="line">		compatible = <span class="string">&quot;fcs,fusb302&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x22</span>&gt;;</span><br><span class="line">		interrupt-parent = &lt;&amp;gpio0&gt;;</span><br><span class="line">		interrupts = &lt;RK_PC4 IRQ_TYPE_LEVEL_LOW&gt;;</span><br><span class="line">		pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">		pinctrl<span class="number">-0</span> = &lt;&amp;usbc0_int&gt;;</span><br><span class="line">		vbus-supply = &lt;&amp;vbus5v0_typec&gt;;</span><br><span class="line">		status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line"></span><br><span class="line">		ports &#123;</span><br><span class="line">			<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">			<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">			port@<span class="number">0</span> &#123;</span><br><span class="line">				reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">				usbc0_role_sw: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">					remote-endpoint = &lt;&amp;dwc3_0_role_switch&gt;;</span><br><span class="line">				&#125;;</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		usb_con: connector &#123;</span><br><span class="line">			compatible = <span class="string">&quot;usb-c-connector&quot;</span>;</span><br><span class="line">			label = <span class="string">&quot;USB-C&quot;</span>;</span><br><span class="line">			data-role = <span class="string">&quot;dual&quot;</span>;</span><br><span class="line">			power-role = <span class="string">&quot;dual&quot;</span>;</span><br><span class="line">			try-power-role = <span class="string">&quot;sink&quot;</span>;</span><br><span class="line">			op-sink-microwatt = &lt;<span class="number">1000000</span>&gt;;</span><br><span class="line">			sink-pdos = &lt;PDO_FIXED(<span class="number">5000</span>, <span class="number">1000</span>, PDO_FIXED_USB_COMM)&gt;;</span><br><span class="line">			source-pdos = &lt;PDO_FIXED(<span class="number">5000</span>, <span class="number">3000</span>, PDO_FIXED_USB_COMM)&gt;;</span><br><span class="line"></span><br><span class="line">			altmodes&#123;</span><br><span class="line">				<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">				<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">				altmode@<span class="number">0</span> &#123;</span><br><span class="line">					reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">					svid = &lt;<span class="number">0xff01</span>&gt;;</span><br><span class="line">					vdo = &lt;<span class="number">0xffffffff</span>&gt;;</span><br><span class="line">				&#125;;</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line">			ports &#123;</span><br><span class="line">				<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">				<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">				port@<span class="number">0</span> &#123;</span><br><span class="line">					reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line"></span><br><span class="line">					usbc0_orien_sw: endpoint &#123;</span><br><span class="line">						remote-endpoint = &lt;&amp;usbdp_phy0_orientation_switch&gt;;</span><br><span class="line">					&#125;;</span><br><span class="line">				&#125;;</span><br><span class="line"></span><br><span class="line">				port@<span class="number">1</span> &#123;</span><br><span class="line">					reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line"></span><br><span class="line">					dp_altmode_mux: endpoint &#123;</span><br><span class="line">						remote-endpoint = &lt;&amp;usbdp_phy0_dp_altmode_mux&gt;;</span><br><span class="line">					&#125;;</span><br><span class="line">				&#125;;</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* PCIE 2.0 */</span></span><br><span class="line">&amp;combphy0_ps &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;pcie2x1l2 &#123;</span><br><span class="line">	<span class="comment">//reset-gpios = &lt;&amp;gpio4 RK_PC1 GPIO_ACTIVE_HIGH&gt;;</span></span><br><span class="line">	<span class="comment">//rockchip,skip-scan-in-resume;</span></span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* end of PCIE 2.0 */</span></span><br><span class="line"></span><br><span class="line">&amp;pinctrl &#123;</span><br><span class="line">	headphone &#123;</span><br><span class="line">		hp_det: hp-det &#123;</span><br><span class="line">			rockchip,pins = &lt;<span class="number">1</span> RK_PC0 RK_FUNC_GPIO &amp;pcfg_pull_none&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	hym8563 &#123;</span><br><span class="line">		hym8563_int: hym8563-<span class="type">int</span> &#123;</span><br><span class="line">			rockchip,pins = &lt;<span class="number">0</span> RK_PB0 RK_FUNC_GPIO &amp;pcfg_pull_up&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	usb &#123;</span><br><span class="line">		vcc5v0_host_en: vcc5v0-host-en &#123;</span><br><span class="line">			rockchip,pins = &lt;<span class="number">4</span> RK_PB5 RK_FUNC_GPIO &amp;pcfg_pull_none&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	usb-typec &#123;</span><br><span class="line">		usbc0_int: usbc0-<span class="type">int</span> &#123;</span><br><span class="line">			rockchip,pins = &lt;<span class="number">0</span> RK_PC6 RK_FUNC_GPIO &amp;pcfg_pull_up&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		typec5v_pwren: typec5v-pwren &#123;</span><br><span class="line">			rockchip,pins = &lt;<span class="number">1</span> RK_PA1 RK_FUNC_GPIO &amp;pcfg_pull_none&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* BEEP */</span></span><br><span class="line">&amp;pwm1 &#123;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;pwm1m1_pins&gt;;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* end of BEEP */</span></span><br><span class="line"><span class="comment">/* gmac */</span></span><br><span class="line">&amp;gmac1 &#123;</span><br><span class="line">	<span class="comment">/* Use rgmii-rxid mode to disable rx delay inside Soc */</span></span><br><span class="line">	phy-mode = <span class="string">&quot;rgmii-rxid&quot;</span>;</span><br><span class="line">	clock_in_out = <span class="string">&quot;output&quot;</span>;</span><br><span class="line"></span><br><span class="line">	snps,reset-gpio = &lt;&amp;gpio3 RK_PB7 GPIO_ACTIVE_LOW&gt;;</span><br><span class="line">	snps,reset-active-low;</span><br><span class="line">	<span class="comment">/* Reset time is 20ms, 100ms for rtl8211f */</span></span><br><span class="line">	snps,reset-delays-us = &lt;<span class="number">0</span> <span class="number">20000</span> <span class="number">100000</span>&gt;;</span><br><span class="line"></span><br><span class="line">	pinctrl-names = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;gmac1_miim</span><br><span class="line">		&amp;gmac1_tx_bus2</span><br><span class="line">		&amp;gmac1_rx_bus2</span><br><span class="line">		&amp;gmac1_rgmii_clk</span><br><span class="line">		&amp;gmac1_rgmii_bus</span><br><span class="line">		<span class="comment">//&amp;eth1_pins</span></span><br><span class="line">		&amp;gmac1_clkinout&gt;;</span><br><span class="line"></span><br><span class="line">	tx_delay = &lt;<span class="number">0x44</span>&gt;;</span><br><span class="line">	<span class="comment">/* rx_delay = &lt;0x3f&gt;; */</span></span><br><span class="line"></span><br><span class="line">	phy-handle = &lt;&amp;rgmii_phy1&gt;;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mdio1 &#123;</span><br><span class="line">	rgmii_phy1: phy@<span class="number">1</span> &#123;</span><br><span class="line">		compatible = <span class="string">&quot;ethernet-phy-ieee802.3-c22&quot;</span>;</span><br><span class="line">		reg = &lt;<span class="number">0x1</span>&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* end of gmac */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* sd card */</span></span><br><span class="line">&amp;sdmmc &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	vmmc-supply = &lt;&amp;vcc_3v3_sd_s0&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* end of sd card */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* type-C */</span></span><br><span class="line">&amp;u2phy0_otg &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	rockchip,typec-vbus-det;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usbdp_phy0 &#123;</span><br><span class="line">	orientation-<span class="keyword">switch</span>;</span><br><span class="line">	svid = &lt;<span class="number">0xff01</span>&gt;;</span><br><span class="line">	sbu1-dc-gpios = &lt;&amp;gpio4 RK_PA0 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">	sbu2-dc-gpios = &lt;&amp;gpio4 RK_PA1 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line"></span><br><span class="line">	port &#123;</span><br><span class="line">		<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">		<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">		usbdp_phy0_orientation_switch: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">			reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">			remote-endpoint = &lt;&amp;usbc0_orien_sw&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		usbdp_phy0_dp_altmode_mux: endpoint@<span class="number">1</span> &#123;</span><br><span class="line">			reg = &lt;<span class="number">1</span>&gt;;</span><br><span class="line">			remote-endpoint = &lt;&amp;dp_altmode_mux&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usbdrd_dwc3_0 &#123;</span><br><span class="line">	dr_mode = <span class="string">&quot;otg&quot;</span>;</span><br><span class="line">	usb-role-<span class="keyword">switch</span>;</span><br><span class="line"></span><br><span class="line">	port &#123;</span><br><span class="line">		<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">		<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line"></span><br><span class="line">		dwc3_0_role_switch: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">			reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">			remote-endpoint = &lt;&amp;usbc0_role_sw&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* end of type-C */</span></span><br><span class="line"><span class="comment">/* USB 2.0 HOST */</span></span><br><span class="line">&amp;u2phy2_host &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	phy-supply = &lt;&amp;vcc5v0_host&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;u2phy3_host &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	phy-supply = &lt;&amp;vcc5v0_host&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usb_host0_ehci &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usb_host0_ohci &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usb_host1_ehci &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usb_host1_ohci &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* end of usb 2.0 */</span></span><br><span class="line"></span><br><span class="line">&amp;usbdrd_dwc3_0 &#123;</span><br><span class="line">	usb-role-<span class="keyword">switch</span>;</span><br><span class="line">	port &#123;</span><br><span class="line">		<span class="meta">#address-cells = <span class="string">&lt;1&gt;</span>;</span></span><br><span class="line">		<span class="meta">#size-cells = <span class="string">&lt;0&gt;</span>;</span></span><br><span class="line">		dwc3_0_role_switch: endpoint@<span class="number">0</span> &#123;</span><br><span class="line">			reg = &lt;<span class="number">0</span>&gt;;</span><br><span class="line">			remote-endpoint = &lt;&amp;usbc0_role_sw&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* USB 3.0 */</span></span><br><span class="line">&amp;combphy2_psu &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usbhost3_0 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usbhost_dwc3_0 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	dr_mode = <span class="string">&quot;host&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* end of USB 3.0 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* hdmi0 */</span></span><br><span class="line">&amp;hdmi0 &#123;</span><br><span class="line">	enable-gpios = &lt;&amp;gpio4 RK_PB6 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;route_hdmi0 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	connect = &lt;&amp;vp0_out_hdmi0&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;hdmi0_in_vp0 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;hdmi0_sound &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;hdptxphy_hdmi0 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2s5_8ch &#123;</span><br><span class="line">	status = <span class="string">&quot;oksy&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* end */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* RS485 */</span></span><br><span class="line">&amp;uart9 &#123;</span><br><span class="line">	status = <span class="string">&quot;okay&quot;</span>;</span><br><span class="line">	pinctrl<span class="number">-0</span> = &lt;&amp;uart9m2_xfer&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* end of RS485 */</span></span><br></pre></td></tr></table></figure>
<p>目前认为这里的有点单薄，不应该这样。</p>
<h3 id="22-一级设备树"><a class="markdownIt-Anchor" href="#22-一级设备树"></a> 2.2 一级设备树</h3>
<h4 id="221-topeet-rk3588dtsi"><a class="markdownIt-Anchor" href="#221-topeet-rk3588dtsi"></a> 2.2.1 topeet-rk3588.dtsi</h4>
<h4 id="222-rk3588-linuxdtsi"><a class="markdownIt-Anchor" href="#222-rk3588-linuxdtsi"></a> 2.2.2 rk3588-linux.dtsi</h4>
<h4 id="223-topeet-rk3588dtsi"><a class="markdownIt-Anchor" href="#223-topeet-rk3588dtsi"></a> 2.2.3 topeet-rk3588.dtsi</h4>
<h2 id="3-稳压相关的原理图"><a class="markdownIt-Anchor" href="#3-稳压相关的原理图"></a> 3 稳压相关的原理图</h2>
<h3 id="31-12v"><a class="markdownIt-Anchor" href="#31-12v"></a> 3.1 12V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231345124.png" alt="image-20231223134504054" /></p>
<h3 id="32-4v"><a class="markdownIt-Anchor" href="#32-4v"></a> 3.2 4V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231345260.png" alt="image-20231223134521195" /></p>
<h3 id="33-33-v"><a class="markdownIt-Anchor" href="#33-33-v"></a> 3.3 3.3 V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231345119.png" alt="image-20231223134534079" /></p>
<h3 id="34-5v"><a class="markdownIt-Anchor" href="#34-5v"></a> 3.4 5V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231345948.png" alt="image-20231223134553899" /></p>
<h3 id="35-18v"><a class="markdownIt-Anchor" href="#35-18v"></a> 3.5 1.8V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231346143.png" alt="image-20231223134606097" /></p>
<h3 id="36-lcd屏幕电源使能33v"><a class="markdownIt-Anchor" href="#36-lcd屏幕电源使能33v"></a> 3.6 LCD屏幕电源使能3.3V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231346823.png" alt="image-20231223134635776" /></p>
<h3 id="37-usb-20供电使能-5v"><a class="markdownIt-Anchor" href="#37-usb-20供电使能-5v"></a> 3.7 USB 2.0供电使能 5V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231348469.png" alt="image-20231223134813425" /></p>
<h3 id="38-usb30-供电使能-5v"><a class="markdownIt-Anchor" href="#38-usb30-供电使能-5v"></a> 3.8 usb3.0 供电使能 5V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231348349.png" alt="image-20231223134838302" /></p>
<h3 id="38-usb-c供电使能-5v"><a class="markdownIt-Anchor" href="#38-usb-c供电使能-5v"></a> 3.8 usb-c供电使能 5V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231349827.png" alt="image-20231223134926789" /></p>
<h3 id="39-tf卡供电使能-33v"><a class="markdownIt-Anchor" href="#39-tf卡供电使能-33v"></a> 3.9 tf卡供电使能 3.3V</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231349299.png" alt="image-20231223134956257" /></p>
<h3 id="310-摄像头供电使能-28v"><a class="markdownIt-Anchor" href="#310-摄像头供电使能-28v"></a> 3.10 摄像头供电使能 2.8V</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vcc_1v8_cam_s0: vcc-1v8-cam-s0 &#123;</span><br><span class="line">	compatible = &quot;regulator-fixed&quot;;</span><br><span class="line">	regulator-name = &quot;vcc_1v8_cam_s0&quot;;</span><br><span class="line">	regulator-min-microvolt = &lt;1800000&gt;;</span><br><span class="line">	regulator-max-microvolt = &lt;1800000&gt;;</span><br><span class="line">	vin-supply = &lt;&amp;vcc_3v3_s3&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">vcc_2v8_cam_s0: vcc-2v8-cam-s0 &#123;</span><br><span class="line">	compatible = &quot;regulator-fixed&quot;;</span><br><span class="line">	regulator-name = &quot;vcc_2v8_cam_s0&quot;;</span><br><span class="line">	regulator-min-microvolt = &lt;2800000&gt;;</span><br><span class="line">	regulator-max-microvolt = &lt;2800000&gt;;</span><br><span class="line">	vin-supply = &lt;&amp;vcc_3v3_s3&gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231350981.png" alt="image-20231223135035944" /></p>
<h3 id="311-m2固态供电-33"><a class="markdownIt-Anchor" href="#311-m2固态供电-33"></a> 3.11 M.2固态供电 3.3</h3>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312231352781.png" alt="image-20231223135235732" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">combophy_avdd0v85: combophy-avdd0v85 &#123;</span><br><span class="line">        compatible = &quot;regulator-fixed&quot;;</span><br><span class="line">        regulator-name = &quot;combophy_avdd0v85&quot;;</span><br><span class="line">        regulator-boot-on;</span><br><span class="line">        regulator-always-on;</span><br><span class="line">        regulator-min-microvolt = &lt;850000&gt;;</span><br><span class="line">        regulator-max-microvolt = &lt;850000&gt;;</span><br><span class="line">        vin-supply = &lt;&amp;vdd_0v85_s0&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">combophy_avdd1v8: combophy-avdd1v8 &#123;</span><br><span class="line">        compatible = &quot;regulator-fixed&quot;;</span><br><span class="line">        regulator-name = &quot;combophy_avdd1v8&quot;;</span><br><span class="line">        regulator-boot-on;</span><br><span class="line">        regulator-always-on;</span><br><span class="line">        regulator-min-microvolt = &lt;1800000&gt;;</span><br><span class="line">        regulator-max-microvolt = &lt;1800000&gt;;</span><br><span class="line">        vin-supply = &lt;&amp;avcc_1v8_s0&gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>删掉电源管理的这两个。</p>
<h2 id="4设备树优化规则"><a class="markdownIt-Anchor" href="#4设备树优化规则"></a> 4.设备树优化规则</h2>
<ol>
<li>电源相关的内容都放在设备树的最前面</li>
</ol>
<h1 id="1222-工作记录"><a class="markdownIt-Anchor" href="#1222-工作记录"></a> 12.22 工作记录</h1>
<h2 id="13588s适配"><a class="markdownIt-Anchor" href="#13588s适配"></a> 1.3588S适配</h2>
<h3 id="11-完善脚本注释"><a class="markdownIt-Anchor" href="#11-完善脚本注释"></a> 1.1 完善脚本注释</h3>
<p>将脚本搞好了，删除掉了一些没有必要的内容，瑞芯微提供的原版编译脚本太乱了，真的不忍直视，删掉了那些跟安全相关的内容还有那些与安全相关的内容，目前看起来就挺干净的，只是那些函数的具体意义还没理解的很清楚，有机会再去搞，目前也就先这样了。</p>
<h3 id="12整理硬件手册"><a class="markdownIt-Anchor" href="#12整理硬件手册"></a> 1.2整理硬件手册</h3>
<p>目前有疑问的地方在于是不是3588和3588S的TRM手册是不是一个呢。</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">RK3588</th>
<th>RK3588S</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td></td>
</tr>
<tr>
<td style="text-align:left">DDR</td>
<td style="text-align:left">支持LPDDR4/4X和LPDDR5 2x32Bit</td>
<td>支持LPDDR4/4X和LPDDR5 2x32Bit</td>
</tr>
<tr>
<td style="text-align:left">存储</td>
<td style="text-align:left">支持eMMC 5.1</td>
<td>支持eMMC 5.1</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">支持FSPI Flash (FSPI，路由到3个IOMUX)</td>
<td>支持FSPI Flash (FSPI，路由到2个IOMUX)</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">Micro SD卡 3.0</td>
<td>Micro SD卡 3.0</td>
</tr>
<tr>
<td style="text-align:left">USB</td>
<td style="text-align:left">1个USB3.0（与PCIE20/SATA30共享）</td>
<td>1个USB3.0（与PCIE20/SATA30共享）</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">2个USB2.0 HOST</td>
<td>2个USB2.0 HOST</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">2个USB3.1 + 2个USB2.0 OTG（两个全功能Type C）</td>
<td>1个USB3.1 + 1个USB2.0 OTG（一个全功能Type C）</td>
</tr>
<tr>
<td style="text-align:left">显示</td>
<td style="text-align:left">TYPEC/DP1.4共用，2个4通道DP1.4</td>
<td>TYPEC/DP1.4共用，1个4通道DP1.4</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">2个HDMI2.1 TX/eDP1.4</td>
<td>1个HDMI2.1 TX /eDP1.4</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">2个4通道MIPI DPHY TX/CPHY TX</td>
<td>2个4通道MIPI DPHY TX/CPHY TX</td>
</tr>
<tr>
<td style="text-align:left">相机/视频输入</td>
<td style="text-align:left">2个4通道MIPI CSI或4个2通道MIPI CSI</td>
<td>1个4通道MIPI CSI或2个2通道MIPI CSI</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">2个MIPI CPHY RX/MIPI DPHY RX</td>
<td>2个MIPI CPHY RX/MIPI DPHY RX</td>
</tr>
<tr>
<td style="text-align:left">HDMI RX</td>
<td style="text-align:left">1个4通道HDMI RX</td>
<td>N/A</td>
</tr>
<tr>
<td style="text-align:left">PCIE3.0</td>
<td style="text-align:left">2个2通道PCIe3.0</td>
<td>N/A</td>
</tr>
<tr>
<td style="text-align:left">PCIe2.0/SATA3.0/USB3.0 MUX</td>
<td style="text-align:left">3个1通道PCIe2.0</td>
<td>2个1通道PCIe2.0</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">3个SATA 3.0</td>
<td>2个SATA 3.0</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">1个USB3.0（参考USB部分）</td>
<td>1个USB3.0（参考USB部分）</td>
</tr>
<tr>
<td style="text-align:left">SARADC</td>
<td style="text-align:left">x8</td>
<td>x6</td>
</tr>
<tr>
<td style="text-align:left">SDIO</td>
<td style="text-align:left">1个SDIO，路由到2个IOMUX</td>
<td>1个SDIO，路由到1个IOMUX</td>
</tr>
<tr>
<td style="text-align:left">GMAC</td>
<td style="text-align:left">2个(GMAC0+GMAC1)</td>
<td>1个(GMAC1)</td>
</tr>
<tr>
<td style="text-align:left">I2C</td>
<td style="text-align:left">x9</td>
<td>x9</td>
</tr>
<tr>
<td style="text-align:left">PWM</td>
<td style="text-align:left">x16</td>
<td>x16</td>
</tr>
<tr>
<td style="text-align:left">UART</td>
<td style="text-align:left">x10</td>
<td>x10</td>
</tr>
<tr>
<td style="text-align:left">SPI</td>
<td style="text-align:left">x5</td>
<td>x5</td>
</tr>
<tr>
<td style="text-align:left">I2S</td>
<td style="text-align:left">x4</td>
<td>x4</td>
</tr>
<tr>
<td style="text-align:left">PDM</td>
<td style="text-align:left">x2（Data0～Data3）</td>
<td>x2（Data0～Data3）</td>
</tr>
<tr>
<td style="text-align:left">CIF</td>
<td style="text-align:left">x1（CIF0～Data15）</td>
<td>x1（CIF0～Data15）</td>
</tr>
<tr>
<td style="text-align:left">BT1120</td>
<td style="text-align:left">x1（Data0～Data15）</td>
<td>x1（Data0～Data15）</td>
</tr>
<tr>
<td style="text-align:left">CAN</td>
<td style="text-align:left">x2</td>
<td>x2</td>
</tr>
<tr>
<td style="text-align:left">SPDIF</td>
<td style="text-align:left">x2</td>
<td>x2</td>
</tr>
</tbody>
</table>
<h3 id="13-适配源码"><a class="markdownIt-Anchor" href="#13-适配源码"></a> 1.3 适配源码</h3>
<p>修改了默认的设备树，修改为了topeet-rk3588-linux.dts以及添加了对应的板级支持文件。首先列一下设备树的包含目录：<br />
第一级         topeet-rk3588-linux.dts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;rk3588-evb7-lp4.dtsi&quot;                                                                              </span><br><span class="line">#include &quot;rk3588-linux.dtsi&quot; </span><br><span class="line">#include &quot;topeet_rk3588_config.dtsi&quot;    </span><br></pre></td></tr></table></figure>
<p>第二级 rk3588-evb7-lp4.dtsi</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;rk3588.dtsi&quot;</span><br><span class="line">#include &quot;rk3588-evb.dtsi&quot;</span><br><span class="line">#include &quot;rk3588-rk806-single.dtsi&quot;</span><br><span class="line"></span><br><span class="line">#include &quot;topeet_screen_lcds.dts&quot;</span><br><span class="line">#include &quot;topeet_camera_config.dtsi&quot;</span><br></pre></td></tr></table></figure>
<p>第二级  rk3588-linux.dtsi</p>
<p>第二级 topeet_rk3588_config.dtsi</p>
<p>现如今进行修改</p>
<p>​	第一级         topeet-rk3588-linux.dts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;topeet-rk3588.dtsi&quot;</span><br><span class="line">#include &quot;rk3588-linux.dtsi&quot;</span><br><span class="line">#include &quot;topeet_rk3588_config.dtsi&quot;</span><br></pre></td></tr></table></figure>
<p>第二级  topeet-rk3588.dtsi</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;dt-bindings/usb/pd.h&quot;</span><br><span class="line">#include &quot;rk3588.dtsi&quot;</span><br><span class="line">#include &quot;rk3588-evb.dtsi&quot;</span><br><span class="line">#include &quot;rk3588-rk806-single.dtsi&quot;</span><br></pre></td></tr></table></figure>
<p>第三级 rk3588.dtsi</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;rk3588s.dtsi&quot;                                                                                      </span><br><span class="line">#include &quot;rk3588-vccio3-pinctrl.dtsi&quot;  </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&amp;hdmi0 &#123;</span><br><span class="line">        enable-gpios = &lt;&amp;gpio4 RK_PB6 GPIO_ACTIVE_HIGH&gt;;</span><br><span class="line">        status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;route_hdmi0 &#123;</span><br><span class="line">        status = &quot;okay&quot;;</span><br><span class="line">        connect = &lt;&amp;vp0_out_hdmi0&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;hdmi0_in_vp0 &#123;</span><br><span class="line">        status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;hdmi0_sound &#123;</span><br><span class="line">        status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;hdptxphy_hdmi0 &#123;</span><br><span class="line">        status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2s5_8ch &#123;</span><br><span class="line">        status = &quot;oksy&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>出现了问题，具体的打印如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br></pre></td><td class="code"><pre><span class="line">LPDDR4X, 2112MHz</span><br><span class="line">channel[0] BW=16 Col=10 Bk=8 CS0 Row=16 CS1 Row=16 CS=2 Die BW=16 Size=2048MB</span><br><span class="line">channel[1] BW=16 Col=10 Bk=8 CS0 Row=16 CS1 Row=16 CS=2 Die BW=16 Size=2048MB</span><br><span class="line">channel[2] BW=16 Col=10 Bk=8 CS0 Row=16 CS1 Row=16 CS=2 Die BW=16 Size=2048MB</span><br><span class="line">channel[3] BW=16 Col=10 Bk=8 CS0 Row=16 CS1 Row=16 CS=2 Die BW=16 Size=2048MB</span><br><span class="line">Manufacturer ID:0xff</span><br><span class="line">CH0 RX Vref:29.7%, TX Vref:22.8%,22.8%</span><br><span class="line">CH1 RX Vref:30.7%, TX Vref:22.8%,21.8%</span><br><span class="line">CH2 RX Vref:29.7%, TX Vref:21.8%,22.8%</span><br><span class="line">CH3 RX Vref:29.7%, TX Vref:23.8%,21.8%</span><br><span class="line">change to F1: 528MHz</span><br><span class="line">change to F2: 1068MHz</span><br><span class="line">change to F3: 1560MHz</span><br><span class="line">change to F0: 2112MHz</span><br><span class="line">out</span><br><span class="line">U-Boot SPL board init</span><br><span class="line">U-Boot SPL 2017.09-gc060f28d70-220414 #zyf (Apr 18 2022 - 18:13:34)</span><br><span class="line">Failed to set cpub01</span><br><span class="line">Failed to set cpub23</span><br><span class="line">unknown raw ID phN</span><br><span class="line">unrecognized JEDEC id bytes: 00, 00, 00</span><br><span class="line">Trying to boot from MMC2</span><br><span class="line">MMC: no card present</span><br><span class="line">mmc_init: -123, time 2</span><br><span class="line">spl: mmc init failed with error: -123</span><br><span class="line">Trying to boot from MMC1</span><br><span class="line">Trying fit image at 0x4000 sector</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Verified-boot: 0</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking atf-1 0x00040000 ... sha256(045b2cef29...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking uboot 0x00200000 ... sha256(91161ac802...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking fdt 0x0033d2d8 ... sha256(a4d6ae0a3e...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking atf-2 0x000f0000 ... sha256(30812190d0...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking atf-3 0xff100000 ... sha256(cb7bdbec2b...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking optee 0x08400000 ... sha256(fde0860845...) + OK</span></span></span><br><span class="line">Jumping to U-Boot(0x00200000) via ARM Trusted Firmware(0x00040000)</span><br><span class="line">Total: 174.568 ms</span><br><span class="line"></span><br><span class="line">INFO:    Preloader serial: 2</span><br><span class="line">NOTICE:  BL31: v2.3():v2.3-481-g17b41886e:derrick.huang</span><br><span class="line">NOTICE:  BL31: Built : 16:20:07, Dec  7 2022</span><br><span class="line">INFO:    spec: 0x13</span><br><span class="line">INFO:    ext 32k is valid</span><br><span class="line">INFO:    ddr: stride-en 4CH</span><br><span class="line">INFO:    GICv3 without legacy support detected.</span><br><span class="line">INFO:    ARM GICv3 driver initialized in EL3</span><br><span class="line">INFO:    valid_cpu_msk=0xff bcore0_rst = 0x0, bcore1_rst = 0x0</span><br><span class="line">INFO:    system boots from cpu-hwid-0</span><br><span class="line">INFO:    idle_st=0x21fff, pd_st=0x11fff9, repair_st=0xfff70001</span><br><span class="line">INFO:    dfs DDR fsp_params[0].freq_mhz= 2112MHz</span><br><span class="line">INFO:    dfs DDR fsp_params[1].freq_mhz= 528MHz</span><br><span class="line">INFO:    dfs DDR fsp_params[2].freq_mhz= 1068MHz</span><br><span class="line">INFO:    dfs DDR fsp_params[3].freq_mhz= 1560MHz</span><br><span class="line">INFO:    BL31: Initialising Exception Handling Framework</span><br><span class="line">INFO:    BL31: Initializing runtime services</span><br><span class="line">INFO:    BL31: Initializing BL32</span><br><span class="line">INFO:    hdmirx_handler: dma not on, ret</span><br><span class="line">I/TC: </span><br><span class="line">I/TC: OP-TEE version: 3.13.0-652-g4542e1efd #derrick.huang (gcc version 10.2.1 20201103 (GNU Toolchain for the A-profile Architecture 10.2-2020.11 (arm-10.16))) #5 2022年 09月 20日 星期二 09:41:09 CST aarch64</span><br><span class="line">I/TC: Primary CPU initializing</span><br><span class="line">I/TC: Primary CPU switching to normal world boot</span><br><span class="line">INFO:    BL31: Preparing for EL3 exit to normal world</span><br><span class="line">INFO:    Entry point address = 0x200000</span><br><span class="line">INFO:    SPSR = 0x3c9</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">U-Boot 2017.09 (Nov 07 2023 - 01:52:43 -0800)</span><br><span class="line"></span><br><span class="line">Model: TOPEET iTOP-RK3588 Board </span><br><span class="line">PreSerial: 2, raw, 0xfeb50000</span><br><span class="line">DRAM:  8 GiB</span><br><span class="line">Sysmem: init</span><br><span class="line">Relocation Offset: eda3a000</span><br><span class="line">Relocation fdt: eb9f9f98 - eb9fecc0</span><br><span class="line">CR: M/C/I</span><br><span class="line">Hotkey: ctrl+`</span><br><span class="line">mmc@fe2c0000: 1, mmc@fe2e0000: 0</span><br><span class="line">Bootdev(atags): mmc 0</span><br><span class="line">MMC0: HS200, 200Mhz</span><br><span class="line">PartType: EFI</span><br><span class="line">DM: v2</span><br><span class="line">boot mode: recovery (misc)</span><br><span class="line">FIT: no signed, no conf required</span><br><span class="line">DTB: rk-kernel.dtb</span><br><span class="line">HASH(c): OK</span><br><span class="line">I2c0 speed: 100000Hz</span><br><span class="line">vsel-gpios- not found!</span><br><span class="line">en-gpios- not found!</span><br><span class="line">vdd_cpu_big0_s0 800000 uV</span><br><span class="line">vsel-gpios- not found!</span><br><span class="line">en-gpios- not found!</span><br><span class="line">vdd_cpu_big1_s0 800000 uV</span><br><span class="line">I2c1 speed: 100000Hz</span><br><span class="line">vsel-gpios- not found!</span><br><span class="line">en-gpios- not found!</span><br><span class="line">read reg[0x03] failed, ret=-121</span><br><span class="line">Failed to get chip ID!</span><br><span class="line">spi2: RK806: 2</span><br><span class="line">ON=0x00, OFF=0x00</span><br><span class="line">vdd_gpu_s0 750000 uV</span><br><span class="line">vdd_cpu_lit_s0 750000 uV</span><br><span class="line">vdd_log_s0 750000 uV</span><br><span class="line">vdd_vdenc_s0 init 750000 uV</span><br><span class="line">vdd_ddr_s0 850000 uV</span><br><span class="line">*** Warning - bad CRC, using default environment</span><br><span class="line"></span><br><span class="line">get vp0 plane mask:0x5, primary id:2, cursor_plane:-1, from dts</span><br><span class="line">get vp1 plane mask:0xa, primary id:3, cursor_plane:-1, from dts</span><br><span class="line">get vp2 plane mask:0x140, primary id:8, cursor_plane:-1, from dts</span><br><span class="line">get vp3 plane mask:0x280, primary id:9, cursor_plane:-1, from dts</span><br><span class="line">Could not find baseparameter partition</span><br><span class="line">Model: Rockchip RK3588 EVB7 LP4 V10 Board</span><br><span class="line">Rockchip UBOOT DRM driver version: v1.0.1</span><br><span class="line">vp0 have layer nr:2[0 2 ], primary plane: 2</span><br><span class="line">vp1 have layer nr:2[1 3 ], primary plane: 3</span><br><span class="line">vp2 have layer nr:2[6 8 ], primary plane: 8</span><br><span class="line">vp3 have layer nr:2[7 9 ], primary plane: 9</span><br><span class="line">Using display timing dts</span><br><span class="line">dsi@fde20000:  detailed mode clock 90000 kHz, flags[a]</span><br><span class="line">    H: 1280 2550 2560 2880</span><br><span class="line">    V: 0800 0820 0840 0855</span><br><span class="line">bus_format: 100e</span><br><span class="line">VOP update mode to: 1280x800p37, type: MIPI0 for VP2</span><br><span class="line">VP2 set crtc_clock to 90000KHz</span><br><span class="line">VOP VP2 enable Esmart2[654x270-&gt;654x270@313x265] fmt[2] addr[0xedf04000]</span><br><span class="line">final DSI-Link bandwidth: 600000 Kbps x 4</span><br><span class="line">CLK: (uboot. arm: enter 1008000 KHz, init 1008000 KHz, kernel 0N/A)</span><br><span class="line">  b0pll 24000 KHz</span><br><span class="line">  b1pll 24000 KHz</span><br><span class="line">  lpll 24000 KHz</span><br><span class="line">  v0pll 630000 KHz</span><br><span class="line">  aupll 786431 KHz</span><br><span class="line">  cpll 1500000 KHz</span><br><span class="line">  gpll 1188000 KHz</span><br><span class="line">  npll 850000 KHz</span><br><span class="line">  ppll 1100000 KHz</span><br><span class="line">  aclk_center_root 702000 KHz</span><br><span class="line">  pclk_center_root 100000 KHz</span><br><span class="line">  hclk_center_root 396000 KHz</span><br><span class="line">  aclk_center_low_root 500000 KHz</span><br><span class="line">  aclk_top_root 594000 KHz</span><br><span class="line">  pclk_top_root 100000 KHz</span><br><span class="line">  aclk_low_top_root 396000 KHz</span><br><span class="line">Net:   eth1: ethernet@fe1c0000, eth0: ethernet@fe1b0000</span><br><span class="line">Hit key to stop autoboot(&#x27;CTRL+C&#x27;):  0 </span><br><span class="line">ANDROID: reboot reason: &quot;recovery&quot;</span><br><span class="line">optee api revision: 2.0</span><br><span class="line">TEEC: Waring: Could not find security partition</span><br><span class="line">Not AVB images, AVB skip</span><br><span class="line">No valid android hdr</span><br><span class="line">Android image load failed</span><br><span class="line">Android boot failed, error -1.</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Booting FIT Image at 0xe8c66580 with size 0x02b92a00</span></span></span><br><span class="line">Fdt Ramdisk skip relocation</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Loading kernel from FIT Image at e8c66580 ...</span></span></span><br><span class="line">   Using &#x27;conf&#x27; configuration</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Verified-boot: 0</span></span></span><br><span class="line">   Trying &#x27;kernel&#x27; kernel subimage</span><br><span class="line">     Description:  unavailable</span><br><span class="line">     Type:         Kernel Image</span><br><span class="line">     Compression:  uncompressed</span><br><span class="line">     Data Start:   0xe8c8fd80</span><br><span class="line">     Data Size:    34595328 Bytes = 33 MiB</span><br><span class="line">     Architecture: AArch64</span><br><span class="line">     OS:           Linux</span><br><span class="line">     Load Address: 0x00400000</span><br><span class="line">     Entry Point:  0x00400000</span><br><span class="line">     Hash algo:    sha256</span><br><span class="line">     Hash value:   caa128d4ee7581a89af7d4b6077a9b84ddaf8e6ae0f780782a9999f736ed2ba5</span><br><span class="line">   Verifying Hash Integrity ... sha256+ OK</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Loading ramdisk from FIT Image at e8c66580 ...</span></span></span><br><span class="line">   Using &#x27;conf&#x27; configuration</span><br><span class="line">   Trying &#x27;ramdisk&#x27; ramdisk subimage</span><br><span class="line">     Description:  unavailable</span><br><span class="line">     Type:         RAMDisk Image</span><br><span class="line">     Compression:  uncompressed</span><br><span class="line">     Data Start:   0xead8df80</span><br><span class="line">     Data Size:    10924032 Bytes = 10.4 MiB</span><br><span class="line">     Architecture: AArch64</span><br><span class="line">     OS:           Linux</span><br><span class="line">     Load Address: 0x0a200000</span><br><span class="line">     Entry Point:  unavailable</span><br><span class="line">     Hash algo:    sha256</span><br><span class="line">     Hash value:   10cee262701f35253cfa30fd26b3b20a9e534624655c4acf084fb3369702ada0</span><br><span class="line">   Verifying Hash Integrity ... sha256+ OK</span><br><span class="line">   Loading ramdisk from 0xead8df80 to 0x0a200000</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Loading fdt from FIT Image at e8c66580 ...</span></span></span><br><span class="line">   Using &#x27;conf&#x27; configuration</span><br><span class="line">   Trying &#x27;fdt&#x27; fdt subimage</span><br><span class="line">     Description:  unavailable</span><br><span class="line">     Type:         Flat Device Tree</span><br><span class="line">     Compression:  uncompressed</span><br><span class="line">     Data Start:   0xe8c66d80</span><br><span class="line">     Data Size:    167908 Bytes = 164 KiB</span><br><span class="line">     Architecture: AArch64</span><br><span class="line">     Load Address: 0x08300000</span><br><span class="line">     Hash algo:    sha256</span><br><span class="line">     Hash value:   1b28623c1b1f929584f14e4a89c37a43ec27cb6bbc6ea02df934bcee90e9a7e3</span><br><span class="line">   Verifying Hash Integrity ... sha256+ OK</span><br><span class="line">   Loading fdt from 0x08300000 to 0x08300000</span><br><span class="line">   Booting using the fdt blob at 0x08300000</span><br><span class="line">   Loading Kernel Image from 0xe8c8fd80 to 0x00400000 ... OK</span><br><span class="line">   kernel loaded at 0x00400000, end = 0x024fe200</span><br><span class="line">  &#x27;reserved-memory&#x27; cma: addr=10000000 size=8000000</span><br><span class="line">  &#x27;reserved-memory&#x27; ramoops@110000: addr=110000 size=f0000</span><br><span class="line">   Using Device Tree in place at 0000000008300000, end 000000000832bfe3</span><br><span class="line">Adding bank: 0x00200000 - 0x08400000 (size: 0x08200000)</span><br><span class="line">Adding bank: 0x09400000 - 0xf0000000 (size: 0xe6c00000)</span><br><span class="line">Adding bank: 0x100000000 - 0x200000000 (size: 0x100000000)</span><br><span class="line">Adding bank: 0x2f0000000 - 0x300000000 (size: 0x10000000)</span><br><span class="line">Total: 1222.887 ms</span><br><span class="line"></span><br><span class="line">Starting kernel ...</span><br><span class="line"></span><br><span class="line">[    1.447477] </span><br><span class="line">[    1.447477]   _______                    _   </span><br><span class="line">[    1.447477]  |__   __|                  | |  </span><br><span class="line">[    1.447477]     | | ___  _ __   ___  ___| |_ </span><br><span class="line">[    1.447477]     | |/ _ \| &#x27;_ \ / _ \/ _ \ __|</span><br><span class="line">[    1.447477]     | | (_) | |_) |  __/  __/ |_ </span><br><span class="line">[    1.447477]     |_|\___/| .__/ \___|\___|\__|</span><br><span class="line">[    1.447477]             | |                  </span><br><span class="line">[    1.447477]             |_|                  </span><br><span class="line">[    1.447477] TOPEET BOARD:iTOP-RK3588</span><br><span class="line">[    1.447477] http://www.topeetboard.com</span><br><span class="line">[    1.447477] </span><br><span class="line">[    1.447501] Linux version 5.10.110 (topeet@ubuntu) (aarch64-none-linux-gnu-gcc (GNU Toolchain for the A-profile Architecture 10.3-2021.07 (arm-10.29)) 10.3.1 20210621, GNU ld (GNU Toolchain for the A-profile Architecture 10.3-2021.07 (arm-10.29)) 2.36.1.20210621) #33 SMP Tue Jun 13 01:01:48 PDT 2023</span><br><span class="line">[    1.459317] Machine model: Rockchip RK3588 EVB7 LP4 V10 Board</span><br><span class="line">[    1.459396] earlycon: uart8250 at MMIO32 0x00000000feb50000 (options &#x27;&#x27;)</span><br><span class="line">[    1.550464] printk: bootconsole [uart8250] enabled</span><br><span class="line">[    1.558372] efi: UEFI not found.</span><br><span class="line">[    1.568127] OF: fdt: Reserved memory: failed to reserve memory for node &#x27;drm-cubic-lut@00000000&#x27;: base 0x0000000000000000, size 0 MiB</span><br><span class="line">[    1.581122] Reserved memory: created CMA memory pool at 0x0000000010000000, size 128 MiB</span><br><span class="line">[    1.589840] OF: reserved mem: initialized node cma, compatible id shared-dma-pool</span><br><span class="line">[    1.742721] Zone ranges:</span><br><span class="line">[    1.745463]   DMA      [mem 0x0000000000200000-0x00000000ffffffff]</span><br><span class="line">[    1.752079]   DMA32    empty</span><br><span class="line">[    1.755164]   Normal   [mem 0x0000000100000000-0x00000002ffffffff]</span><br><span class="line">[    1.761751] Movable zone start for each node</span><br><span class="line">[    1.766324] Early memory node ranges</span><br><span class="line">[    1.770153]   node   0: [mem 0x0000000000200000-0x00000000083fffff]</span><br><span class="line">[    1.776843]   node   0: [mem 0x0000000009400000-0x00000000efffffff]</span><br><span class="line">[    1.783586]   node   0: [mem 0x0000000100000000-0x00000001ffffffff]</span><br><span class="line">[    1.790328]   node   0: [mem 0x00000002f0000000-0x00000002ffffffff]</span><br><span class="line">[    1.797009] Initmem setup node 0 [mem 0x0000000000200000-0x00000002ffffffff]</span><br><span class="line">[    1.852644] psci: probing for conduit method from DT.</span><br><span class="line">[    1.858084] psci: PSCIv1.1 detected in firmware.</span><br><span class="line">[    1.863031] psci: Using standard PSCI v0.2 function IDs</span><br><span class="line">[    1.868664] psci: Trusted OS migration not required</span><br><span class="line">[    1.873898] psci: SMC Calling Convention v1.2</span><br><span class="line">[    1.878985] percpu: Embedded 31 pages/cpu s88424 r8192 d30360 u126976</span><br><span class="line">[    1.886109] Detected VIPT I-cache on CPU0</span><br><span class="line">[    1.890468] CPU features: detected: GIC system register CPU interface</span><br><span class="line">[    1.897358] CPU features: detected: Virtualization Host Extensions</span><br><span class="line">[    1.904000] CPU features: detected: ARM errata 1165522, 1319367, or 1530923</span><br><span class="line">[    1.911478] alternatives: patching kernel code</span><br><span class="line">[    1.916561] Built 1 zonelists, mobility grouping on.  Total pages: 2059848</span><br><span class="line">[    1.923948] Kernel command line: storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  root=PARTUUID=614e0000-0000 androidboot.verifiedbootstate=orange rw rootwait earlycon=uart8250,mmio32,0xfeb50000 console=ttyFIQ0 irqchip.gicv3_pseudo_nmi=0</span><br><span class="line">[    1.949819] Dentry cache hash table entries: 1048576 (order: 11, 8388608 bytes, linear)</span><br><span class="line">[    1.958855] Inode-cache hash table entries: 524288 (order: 10, 4194304 bytes, linear)</span><br><span class="line">[    1.967254] mem auto-init: stack:off, heap alloc:off, heap free:off</span><br><span class="line">[    1.980169] software IO TLB: mapped [mem 0x00000000e9f00000-0x00000000edf00000] (64MB)</span><br><span class="line">[    2.065382] Memory: 7965624K/8370176K available (17088K kernel code, 3448K rwdata, 6212K rodata, 6912K init, 571K bss, 273480K reserved, 131072K cma-reserved)</span><br><span class="line">[    2.080731] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=8, Nodes=1</span><br><span class="line">[    2.087834] ftrace: allocating 63833 entries in 250 pages</span><br><span class="line">[    2.200072] ftrace: allocated 250 pages with 6 groups</span><br><span class="line">[    2.205770] rcu: Hierarchical RCU implementation.</span><br><span class="line">[    2.210815] rcu:     RCU event tracing is enabled.</span><br><span class="line">[    2.215684]  Rude variant of Tasks RCU enabled.</span><br><span class="line">[    2.220509]  Tracing variant of Tasks RCU enabled.</span><br><span class="line">[    2.225708] rcu: RCU calculated value of scheduler-enlistment delay is 30 jiffies.</span><br><span class="line">[    2.239831] NR_IRQS: 64, nr_irqs: 64, preallocated irqs: 0</span><br><span class="line">[    2.248149] GICv3: GIC: Using split EOI/Deactivate mode</span><br><span class="line">[    2.253784] GICv3: 480 SPIs implemented</span><br><span class="line">[    2.257898] GICv3: 0 Extended SPIs implemented</span><br><span class="line">[    2.262697] GICv3: Distributor has no Range Selector support</span><br><span class="line">[    2.268794] GICv3: 16 PPIs implemented</span><br><span class="line">[    2.272819] GICv3: CPU0: found redistributor 0 region 0:0x00000000fe680000</span><br><span class="line">[    2.280311] ITS [mem 0xfe640000-0xfe65ffff]</span><br><span class="line">[    2.284849] ITS@0x00000000fe640000: allocated 8192 Devices @100200000 (indirect, esz 8, psz 64K, shr 0)</span><br><span class="line">[    2.294941] ITS@0x00000000fe640000: allocated 32768 Interrupt Collections @100210000 (flat, esz 2, psz 64K, shr 0)</span><br><span class="line">[    2.306090] ITS: using cache flushing for cmd queue</span><br><span class="line">[    2.311349] ITS [mem 0xfe660000-0xfe67ffff]</span><br><span class="line">[    2.315889] ITS@0x00000000fe660000: allocated 8192 Devices @100230000 (indirect, esz 8, psz 64K, shr 0)</span><br><span class="line">[    2.326058] ITS@0x00000000fe660000: allocated 32768 Interrupt Collections @100240000 (flat, esz 2, psz 64K, shr 0)</span><br><span class="line">[    2.337207] ITS: using cache flushing for cmd queue</span><br><span class="line">[    2.342621] GICv3: using LPI property table @0x0000000100250000</span><br><span class="line">[    2.349032] GIC: using cache flushing for LPI property table</span><br><span class="line">[    2.355095] GICv3: CPU0: using allocated LPI pending table @0x0000000100260000</span><br><span class="line">[    2.363022] random: get_random_bytes called from start_kernel+0x3dc/0x5c8 with crng_init=0</span><br><span class="line">[    2.484727] arch_timer: cp15 timer(s) running at 24.00MHz (phys).</span><br><span class="line">[    2.500160] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x588fe9dc0, max_idle_ns: 440795202592 ns</span><br><span class="line">[    2.511674] sched_clock: 56 bits at 24MHz, resolution 41ns, wraps every 4398046511097ns</span><br><span class="line">[    2.521408] Console: colour dummy device 80x25</span><br><span class="line">[    2.526215] Calibrating delay loop (skipped), value calculated using timer frequency.. 48.00 BogoMIPS (lpj=80000)</span><br><span class="line">[    2.537150] pid_max: default: 32768 minimum: 301</span><br><span class="line">[    2.542216] Mount-cache hash table entries: 16384 (order: 5, 131072 bytes, linear)</span><br><span class="line">[    2.550423] Mountpoint-cache hash table entries: 16384 (order: 5, 131072 bytes, linear)</span><br><span class="line">[    2.560795] rcu: Hierarchical SRCU implementation.</span><br><span class="line">[    2.566758] Platform MSI: msi-controller@fe640000 domain created</span><br><span class="line">[    2.573245] Platform MSI: msi-controller@fe660000 domain created</span><br><span class="line">[    2.579929] PCI/MSI: /interrupt-controller@fe600000/msi-controller@fe640000 domain created</span><br><span class="line">[    2.588750] PCI/MSI: /interrupt-controller@fe600000/msi-controller@fe660000 domain created</span><br><span class="line">[    2.597649] EFI services will not be available.</span><br><span class="line">[    2.602869] smp: Bringing up secondary CPUs ...</span><br><span class="line">I/TC: Secondary CPU 1 initializing</span><br><span class="line">I/TC: Secondary CPU 1 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 2 initializing</span><br><span class="line">I/TC: Secondary CPU 2 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 3 initializing</span><br><span class="line">I/TC: Secondary CPU 3 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 4 initializing</span><br><span class="line">I/TC: Secondary CPU 4 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 5 initializing</span><br><span class="line">I/TC: Secondary CPU 5 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 6 initializing</span><br><span class="line">I/TC: Secondary CPU 6 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 7 initializing</span><br><span class="line">I/TC: Secondary CPU 7 switching to normal world boot</span><br><span class="line">[    2.615960] Detected VIPT I-cache on CPU1</span><br><span class="line">[    2.615996] GICv3: CPU1: found redistributor 100 region 0:0x00000000fe6a0000</span><br><span class="line">[    2.616015] GICv3: CPU1: using allocated LPI pending table @0x0000000100270000</span><br><span class="line">[    2.616059] CPU1: Booted secondary processor 0x0000000100 [0x412fd050]</span><br><span class="line">[    2.624415] Detected VIPT I-cache on CPU2</span><br><span class="line">[    2.624446] GICv3: CPU2: found redistributor 200 region 0:0x00000000fe6c0000</span><br><span class="line">[    2.624463] GICv3: CPU2: using allocated LPI pending table @0x0000000100280000</span><br><span class="line">[    2.624503] CPU2: Booted secondary processor 0x0000000200 [0x412fd050]</span><br><span class="line">[    2.632834] Detected VIPT I-cache on CPU3</span><br><span class="line">[    2.632862] GICv3: CPU3: found redistributor 300 region 0:0x00000000fe6e0000</span><br><span class="line">[    2.632879] GICv3: CPU3: using allocated LPI pending table @0x0000000100290000</span><br><span class="line">[    2.632917] CPU3: Booted secondary processor 0x0000000300 [0x412fd050]</span><br><span class="line">[    2.641246] CPU features: detected: Spectre-v4</span><br><span class="line">[    2.641249] CPU features: detected: Spectre-BHB</span><br><span class="line">[    2.641252] Detected PIPT I-cache on CPU4</span><br><span class="line">[    2.641266] GICv3: CPU4: found redistributor 400 region 0:0x00000000fe700000</span><br><span class="line">[    2.641276] GICv3: CPU4: using allocated LPI pending table @0x00000001002a0000</span><br><span class="line">[    2.641300] CPU4: Booted secondary processor 0x0000000400 [0x414fd0b0]</span><br><span class="line">[    2.649586] Detected PIPT I-cache on CPU5</span><br><span class="line">[    2.649601] GICv3: CPU5: found redistributor 500 region 0:0x00000000fe720000</span><br><span class="line">[    2.649612] GICv3: CPU5: using allocated LPI pending table @0x00000001002b0000</span><br><span class="line">[    2.649637] CPU5: Booted secondary processor 0x0000000500 [0x414fd0b0]</span><br><span class="line">[    2.657933] Detected PIPT I-cache on CPU6</span><br><span class="line">[    2.657948] GICv3: CPU6: found redistributor 600 region 0:0x00000000fe740000</span><br><span class="line">[    2.657958] GICv3: CPU6: using allocated LPI pending table @0x00000001002c0000</span><br><span class="line">[    2.657983] CPU6: Booted secondary processor 0x0000000600 [0x414fd0b0]</span><br><span class="line">[    2.666263] Detected PIPT I-cache on CPU7</span><br><span class="line">[    2.666278] GICv3: CPU7: found redistributor 700 region 0:0x00000000fe760000</span><br><span class="line">[    2.666288] GICv3: CPU7: using allocated LPI pending table @0x00000001002d0000</span><br><span class="line">[    2.666313] CPU7: Booted secondary processor 0x0000000700 [0x414fd0b0]</span><br><span class="line">[    2.666383] smp: Brought up 1 node, 8 CPUs</span><br><span class="line">[    2.866404] SMP: Total of 8 processors activated.</span><br><span class="line">[    2.871437] CPU features: detected: Privileged Access Never</span><br><span class="line">[    2.877407] CPU features: detected: User Access Override</span><br><span class="line">[    2.883021] CPU features: detected: 32-bit EL0 Support</span><br><span class="line">[    2.888479] CPU features: detected: Common not Private translations</span><br><span class="line">[    2.895202] CPU features: detected: RAS Extension Support</span><br><span class="line">[    2.900937] CPU features: detected: Data cache clean to the PoU not required for I/D coherence</span><br><span class="line">[    2.910226] CPU features: detected: CRC32 instructions</span><br><span class="line">[    2.915692] CPU features: detected: Speculative Store Bypassing Safe (SSBS)</span><br><span class="line">[    2.923162] CPU features: detected: RCpc load-acquire (LDAPR)</span><br><span class="line">[    2.929344] CPU: All CPU(s) started at EL2</span><br><span class="line">[    2.935237] devtmpfs: initialized</span><br><span class="line">[    2.949618] Registered cp15_barrier emulation handler</span><br><span class="line">[    2.955024] Registered setend emulation handler</span><br><span class="line">[    2.959943] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 6370867519511994 ns</span><br><span class="line">[    2.970331] futex hash table entries: 2048 (order: 5, 131072 bytes, linear)</span><br><span class="line">[    2.979091] pinctrl core: initialized pinctrl subsystem</span><br><span class="line">[    2.984928] DMI not present or invalid.</span><br><span class="line">[    2.989170] NET: Registered protocol family 16</span><br><span class="line">[    2.994998] DMA: preallocated 1024 KiB GFP_KERNEL pool for atomic allocations</span><br><span class="line">[    3.002646] DMA: preallocated 1024 KiB GFP_KERNEL|GFP_DMA pool for atomic allocations</span><br><span class="line">[    3.011657] thermal_sys: Registered thermal governor &#x27;fair_share&#x27;</span><br><span class="line">[    3.011660] thermal_sys: Registered thermal governor &#x27;step_wise&#x27;</span><br><span class="line">[    3.018187] thermal_sys: Registered thermal governor &#x27;user_space&#x27;</span><br><span class="line">[    3.024528] thermal_sys: Registered thermal governor &#x27;power_allocator&#x27;</span><br><span class="line">[    3.031099] thermal thermal_zone1: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    3.046574] thermal thermal_zone2: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    3.055085] thermal thermal_zone3: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    3.063634] thermal thermal_zone4: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    3.072162] thermal thermal_zone5: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    3.080681] thermal thermal_zone6: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    3.089187] cpuidle: using governor menu</span><br><span class="line">[    3.093340] Registered FIQ tty driver</span><br><span class="line">[    3.097415] hw-breakpoint: found 6 breakpoint and 4 watchpoint registers.</span><br><span class="line">[    3.104800] ASID allocator initialised with 65536 entries</span><br><span class="line">[    3.111763] ramoops: dmesg-0 0x20000@0x0000000000110000</span><br><span class="line">[    3.117377] ramoops: console 0x80000@0x0000000000130000</span><br><span class="line">[    3.122911] ramoops: pmsg    0x50000@0x00000000001b0000</span><br><span class="line">[    3.128445] printk: console [ramoops-1] enabled</span><br><span class="line">[    3.133288] pstore: Registered ramoops as persistent store backend</span><br><span class="line">[    3.139872] ramoops: using 0xf0000@0x110000, ecc: 0</span><br><span class="line">[    3.190249] rockchip-gpio fd8a0000.gpio: probed /pinctrl/gpio@fd8a0000</span><br><span class="line">[    3.197483] rockchip-gpio fec20000.gpio: probed /pinctrl/gpio@fec20000</span><br><span class="line">[    3.204800] rockchip-gpio fec30000.gpio: probed /pinctrl/gpio@fec30000</span><br><span class="line">[    3.212052] rockchip-gpio fec40000.gpio: probed /pinctrl/gpio@fec40000</span><br><span class="line">[    3.219227] rockchip-gpio fec50000.gpio: probed /pinctrl/gpio@fec50000</span><br><span class="line">[    3.226098] rockchip-pinctrl pinctrl: probed pinctrl</span><br><span class="line">[    3.301010] raid6: neonx8   gen()  5572 MB/s</span><br><span class="line">[    3.361105] raid6: neonx8   xor()  4326 MB/s</span><br><span class="line">[    3.421203] raid6: neonx4   gen()  5713 MB/s</span><br><span class="line">[    3.481303] raid6: neonx4   xor()  4345 MB/s</span><br><span class="line">[    3.541401] raid6: neonx2   gen()  5249 MB/s</span><br><span class="line">[    3.601500] raid6: neonx2   xor()  3999 MB/s</span><br><span class="line">[    3.661596] raid6: neonx1   gen()  4429 MB/s</span><br><span class="line">[    3.721696] raid6: neonx1   xor()  3549 MB/s</span><br><span class="line">[    3.781809] raid6: int64x8  gen()  1382 MB/s</span><br><span class="line">[    3.841896] raid6: int64x8  xor()   899 MB/s</span><br><span class="line">[    3.902003] raid6: int64x4  gen()  1782 MB/s</span><br><span class="line">[    3.962098] raid6: int64x4  xor()   990 MB/s</span><br><span class="line">[    4.022188] raid6: int64x2  gen()  2487 MB/s</span><br><span class="line">[    4.082280] raid6: int64x2  xor()  1351 MB/s</span><br><span class="line">[    4.142383] raid6: int64x1  gen()  2037 MB/s</span><br><span class="line">[    4.202475] raid6: int64x1  xor()  1109 MB/s</span><br><span class="line">[    4.207031] raid6: using algorithm neonx4 gen() 5713 MB/s</span><br><span class="line">[    4.212766] raid6: .... xor() 4345 MB/s, rmw enabled</span><br><span class="line">[    4.218033] raid6: using neon recovery algorithm</span><br><span class="line">[    4.223532] fiq_debugger fiq_debugger.0: IRQ fiq not found</span><br><span class="line">[    4.229377] fiq_debugger fiq_debugger.0: IRQ wakeup not found</span><br><span class="line">[    4.235478] fiq_debugger_probe: could not install nmi irq handler</span><br><span class="line">[[    4.241983] printk: console [ttyFIQ0] enabled</span><br><span class="line">    4.241983] printk: console [ttyFIQ0] enabled</span><br><span class="line">[    4.250938] printk: bootconsole [uart8250] disabled</span><br><span class="line">[    4.250938] printk: bootconsole [uart8250] disabled</span><br><span class="line">[    4.256216] Registered fiq debugger ttyFIQ0</span><br><span class="line">[    4.256570] vcc5v0_sys: supplied by vcc12v_dcin</span><br><span class="line">[    4.256703] vcc5v0_usbdcin: supplied by vcc12v_dcin</span><br><span class="line">[    4.256828] vcc5v0_usb: supplied by vcc5v0_usbdcin</span><br><span class="line">[    4.257003] vcc_1v1_nldo_s3: supplied by vcc5v0_sys</span><br><span class="line">[    4.257193] vcc3v3_pcie30: supplied by vcc12v_dcin</span><br><span class="line">[    4.257346] vcc5v0_host: supplied by vcc5v0_usb</span><br><span class="line">[    4.257684] vbus5v0_typec: supplied by vcc5v0_usb</span><br><span class="line">[    4.258023] iommu: Default domain type: Translated </span><br><span class="line">[    4.258108] rk_iommu fdab9000.iommu: version = 2</span><br><span class="line">[    4.258487] rk_iommu fdb50800.iommu: version = 2</span><br><span class="line">[    4.258728] rk_iommu fdb60f00.iommu: version = 2</span><br><span class="line">[    4.258915] rk_iommu fdb70f00.iommu: version = 2</span><br><span class="line">[    4.259080] rk_iommu fdb90480.iommu: version = 2</span><br><span class="line">[    4.259266] rk_iommu fdba0800.iommu: version = 2</span><br><span class="line">[    4.259450] rk_iommu fdba4800.iommu: version = 2</span><br><span class="line">[    4.259655] rk_iommu fdba8800.iommu: version = 2</span><br><span class="line">[    4.259842] rk_iommu fdbac800.iommu: version = 2</span><br><span class="line">[    4.260028] rk_iommu fdbb0800.iommu: version = 2</span><br><span class="line">[    4.260221] rk_iommu fdbdf000.iommu: version = 2</span><br><span class="line">[    4.260495] rk_iommu fdbef000.iommu: version = 2</span><br><span class="line">[    4.260779] rk_iommu fdc38700.iommu: version = 2</span><br><span class="line">[    4.261063] rk_iommu fdc48700.iommu: version = 2</span><br><span class="line">[    4.261280] rk_iommu fdcb7f00.iommu: version = 2</span><br><span class="line">[    4.261455] rk_iommu fdce0800.iommu: version = 2</span><br><span class="line">[    4.261570] rk_iommu fdd97e00.iommu: version = 2</span><br><span class="line">[    4.261912] SCSI subsystem initialized</span><br><span class="line">[    4.261993] usbcore: registered new interface driver usbfs</span><br><span class="line">[    4.262009] usbcore: registered new interface driver hub</span><br><span class="line">[    4.262025] usbcore: registered new device driver usb</span><br><span class="line">[    4.262061] mc: Linux media interface: v0.10</span><br><span class="line">[    4.262073] videodev: Linux video capture interface: v2.00</span><br><span class="line">[    4.262099] pps_core: LinuxPPS API ver. 1 registered</span><br><span class="line">[    4.262103] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;</span><br><span class="line">[    4.262110] PTP clock support registered</span><br><span class="line">[    4.262373] arm-scmi firmware:scmi: SCMI Notifications - Core Enabled.</span><br><span class="line">[    4.262406] arm-scmi firmware:scmi: SCMI Protocol v2.0 &#x27;rockchip:&#x27; Firmware version 0x0</span><br><span class="line">[    4.263673] Advanced Linux Sound Architecture Driver Initialized.</span><br><span class="line">[    4.263867] Bluetooth: Core ver 2.22</span><br><span class="line">[    4.263881] NET: Registered protocol family 31</span><br><span class="line">[    4.263885] Bluetooth: HCI device and connection manager initialized</span><br><span class="line">[    4.263891] Bluetooth: HCI socket layer initialized</span><br><span class="line">[    4.263896] Bluetooth: L2CAP socket layer initialized</span><br><span class="line">[    4.263904] Bluetooth: SCO socket layer initialized</span><br><span class="line">[    4.265190] rockchip-cpuinfo cpuinfo: SoC            : 35881000</span><br><span class="line">[    4.265196] rockchip-cpuinfo cpuinfo: Serial         : 394e7c3efbc10849</span><br><span class="line">[    4.265578] clocksource: Switched to clocksource arch_sys_counter</span><br><span class="line">[    4.583217] NET: Registered protocol family 2</span><br><span class="line">[    4.583326] IP idents hash table entries: 131072 (order: 8, 1048576 bytes, linear)</span><br><span class="line">[    4.585318] tcp_listen_portaddr_hash hash table entries: 4096 (order: 5, 163840 bytes, linear)</span><br><span class="line">[    4.585411] TCP established hash table entries: 65536 (order: 7, 524288 bytes, linear)</span><br><span class="line">[    4.585759] TCP bind hash table entries: 65536 (order: 9, 2097152 bytes, linear)</span><br><span class="line">[    4.586493] TCP: Hash tables configured (established 65536 bind 65536)</span><br><span class="line">[    4.586550] UDP hash table entries: 4096 (order: 6, 393216 bytes, linear)</span><br><span class="line">[    4.586698] UDP-Lite hash table entries: 4096 (order: 6, 393216 bytes, linear)</span><br><span class="line">[    4.586904] NET: Registered protocol family 1</span><br><span class="line">[    4.587211] RPC: Registered named UNIX socket transport module.</span><br><span class="line">[    4.587217] RPC: Registered udp transport module.</span><br><span class="line">[    4.587220] RPC: Registered tcp transport module.</span><br><span class="line">[    4.587224] RPC: Registered tcp NFSv4.1 backchannel transport module.</span><br><span class="line">[    4.587602] PCI: CLS 0 bytes, default 64</span><br><span class="line">[    4.587876] Trying to unpack rootfs image as initramfs...</span><br><span class="line">[    4.876529] Freeing initrd memory: 10668K</span><br><span class="line">[    4.877308] hw perfevents: enabled with armv8_pmuv3 PMU driver, 7 counters available</span><br><span class="line">[    4.880351] Initialise system trusted keyrings</span><br><span class="line">[    4.880444] workingset: timestamp_bits=46 max_order=21 bucket_order=0</span><br><span class="line">[    4.882756] squashfs: version 4.0 (2009/01/31) Phillip Lougher</span><br><span class="line">[    4.883059] NFS: Registering the id_resolver key type</span><br><span class="line">[    4.883069] Key type id_resolver registered</span><br><span class="line">[    4.883073] Key type id_legacy registered</span><br><span class="line">[    4.883090] ntfs: driver 2.1.32 [Flags: R/O].</span><br><span class="line">[    4.883177] jffs2: version 2.</span><br></pre></td></tr></table></figure>
<p>正常的打印</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br></pre></td><td class="code"><pre><span class="line">DDR V1.09 a930779e06 typ 22/11/21-17:50:56</span><br><span class="line">LPDDR4X, 2112MHz</span><br><span class="line">channel[0] BW=16 Col=10 Bk=8 CS0 Row=16 CS1 Row=16 CS=2 Die BW=16 Size=2048MB</span><br><span class="line">channel[1] BW=16 Col=10 Bk=8 CS0 Row=16 CS1 Row=16 CS=2 Die BW=16 Size=2048MB</span><br><span class="line">channel[2] BW=16 Col=10 Bk=8 CS0 Row=16 CS1 Row=16 CS=2 Die BW=16 Size=2048MB</span><br><span class="line">channel[3] BW=16 Col=10 Bk=8 CS0 Row=16 CS1 Row=16 CS=2 Die BW=16 Size=2048MB</span><br><span class="line">Manufacturer ID:0x6</span><br><span class="line">CH0 RX Vref:31.7%, TX Vref:23.8%,22.8%</span><br><span class="line">CH1 RX Vref:33.7%, TX Vref:22.8%,23.8%</span><br><span class="line">CH2 RX Vref:32.7%, TX Vref:21.8%,20.8%</span><br><span class="line">CH3 RX Vref:31.7%, TX Vref:21.8%,21.8%</span><br><span class="line">change to F1: 528MHz</span><br><span class="line">change to F2: 1068MHz</span><br><span class="line">change to F3: 1560MHz</span><br><span class="line">change to F0: 2112MHz</span><br><span class="line">out</span><br><span class="line">U-Boot SPL board init</span><br><span class="line">U-Boot SPL 2017.09-gc060f28d70-220414 #zyf (Apr 18 2022 - 18:13:34)</span><br><span class="line">Failed to set cpub01</span><br><span class="line">Failed to set cpub23</span><br><span class="line">unknown raw ID phN</span><br><span class="line">unrecognized JEDEC id bytes: 00, 00, 00</span><br><span class="line">Trying to boot from MMC2</span><br><span class="line">MMC: no card present</span><br><span class="line">mmc_init: -123, time 2</span><br><span class="line">spl: mmc init failed with error: -123</span><br><span class="line">Trying to boot from MMC1</span><br><span class="line">Trying fit image at 0x4000 sector</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Verified-boot: 0</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking atf-1 0x00040000 ... sha256(045b2cef29...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking uboot 0x00200000 ... sha256(91161ac802...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking fdt 0x0033d2d8 ... sha256(a4d6ae0a3e...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking atf-2 0x000f0000 ... sha256(30812190d0...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking atf-3 0xff100000 ... sha256(cb7bdbec2b...) + OK</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Checking optee 0x08400000 ... sha256(fde0860845...) + OK</span></span></span><br><span class="line">Jumping to U-Boot(0x00200000) via ARM Trusted Firmware(0x00040000)</span><br><span class="line">Total: 177.167 ms</span><br><span class="line"></span><br><span class="line">INFO:    Preloader serial: 2</span><br><span class="line">NOTICE:  BL31: v2.3():v2.3-481-g17b41886e:derrick.huang</span><br><span class="line">NOTICE:  BL31: Built : 16:20:07, Dec  7 2022</span><br><span class="line">INFO:    spec: 0x1</span><br><span class="line">INFO:    ext 32k is not valid</span><br><span class="line">INFO:    ddr: stride-en 4CH</span><br><span class="line">INFO:    GICv3 without legacy support detected.</span><br><span class="line">INFO:    ARM GICv3 driver initialized in EL3</span><br><span class="line">INFO:    valid_cpu_msk=0xff bcore0_rst = 0x0, bcore1_rst = 0x0</span><br><span class="line">INFO:    system boots from cpu-hwid-0</span><br><span class="line">INFO:    idle_st=0x21fff, pd_st=0x11fff9, repair_st=0xfff70001</span><br><span class="line">INFO:    dfs DDR fsp_params[0].freq_mhz= 2112MHz</span><br><span class="line">INFO:    dfs DDR fsp_params[1].freq_mhz= 528MHz</span><br><span class="line">INFO:    dfs DDR fsp_params[2].freq_mhz= 1068MHz</span><br><span class="line">INFO:    dfs DDR fsp_params[3].freq_mhz= 1560MHz</span><br><span class="line">INFO:    BL31: Initialising Exception Handling Framework</span><br><span class="line">INFO:    BL31: Initializing runtime services</span><br><span class="line">INFO:    BL31: Initializing BL32</span><br><span class="line">INFO:    hdmirx_handler: dma not on, ret</span><br><span class="line">I/TC: </span><br><span class="line">I/TC: OP-TEE version: 3.13.0-652-g4542e1efd #derrick.huang (gcc version 10.2.1 20201103 (GNU Toolchain for the A-profile Architecture 10.2-2020.11 (arm-10.16))) #5 2022年 09月 20日 星期二 09:41:09 CST aarch64</span><br><span class="line">I/TC: Primary CPU initializing</span><br><span class="line">I/TC: Primary CPU switching to normal world boot</span><br><span class="line">INFO:    BL31: Preparing for EL3 exit to normal world</span><br><span class="line">INFO:    Entry point address = 0x200000</span><br><span class="line">INFO:    SPSR = 0x3c9</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">U-Boot 2017.09 (Nov 07 2023 - 01:52:43 -0800)</span><br><span class="line"></span><br><span class="line">Model: TOPEET iTOP-RK3588 Board </span><br><span class="line">PreSerial: 2, raw, 0xfeb50000</span><br><span class="line">DRAM:  8 GiB</span><br><span class="line">Sysmem: init</span><br><span class="line">Relocation Offset: eda3a000</span><br><span class="line">Relocation fdt: eb9f9f98 - eb9fecc0</span><br><span class="line">CR: M/C/I</span><br><span class="line">mmc@fe2c0000: 1, mmc@fe2e0000: 0</span><br><span class="line">Bootdev(atags): mmc 0</span><br><span class="line">MMC0: HS200, 200Mhz</span><br><span class="line">PartType: EFI</span><br><span class="line">DM: v2</span><br><span class="line">boot mode: None</span><br><span class="line">FIT: no signed, no conf required</span><br><span class="line">DTB: rk-kernel.dtb</span><br><span class="line">HASH(c): OK</span><br><span class="line">I2c0 speed: 100000Hz</span><br><span class="line">vsel-gpios- not found!</span><br><span class="line">en-gpios- not found!</span><br><span class="line">vdd_cpu_big0_s0 800000 uV</span><br><span class="line">vsel-gpios- not found!</span><br><span class="line">en-gpios- not found!</span><br><span class="line">vdd_cpu_big1_s0 800000 uV</span><br><span class="line">I2c1 speed: 100000Hz</span><br><span class="line">vsel-gpios- not found!</span><br><span class="line">en-gpios- not found!</span><br><span class="line">vdd_npu_s0 800000 uV</span><br><span class="line">spi2: RK806: 2</span><br><span class="line">ON=0x00, OFF=0x00</span><br><span class="line">vdd_gpu_s0 750000 uV</span><br><span class="line">vdd_cpu_lit_s0 750000 uV</span><br><span class="line">vdd_log_s0 750000 uV</span><br><span class="line">vdd_vdenc_s0 init 750000 uV</span><br><span class="line">vdd_ddr_s0 850000 uV</span><br><span class="line">*** Warning - bad CRC, using default environment</span><br><span class="line"></span><br><span class="line">Model: TOPEET RK3588S LP4X V10 Board</span><br><span class="line">CLK: (uboot. arm: enter 1008000 KHz, init 1008000 KHz, kernel 0N/A)</span><br><span class="line">  b0pll 24000 KHz</span><br><span class="line">  b1pll 24000 KHz</span><br><span class="line">  lpll 24000 KHz</span><br><span class="line">  v0pll 24000 KHz</span><br><span class="line">  aupll 786431 KHz</span><br><span class="line">  cpll 1500000 KHz</span><br><span class="line">  gpll 1188000 KHz</span><br><span class="line">  npll 850000 KHz</span><br><span class="line">  ppll 1100000 KHz</span><br><span class="line">  aclk_center_root 702000 KHz</span><br><span class="line">  pclk_center_root 100000 KHz</span><br><span class="line">  hclk_center_root 396000 KHz</span><br><span class="line">  aclk_center_low_root 500000 KHz</span><br><span class="line">  aclk_top_root 594000 KHz</span><br><span class="line">  pclk_top_root 100000 KHz</span><br><span class="line">  aclk_low_top_root 396000 KHz</span><br><span class="line">Net:   eth1: ethernet@fe1c0000</span><br><span class="line">Hit key to stop autoboot(&#x27;CTRL+C&#x27;):  0 </span><br><span class="line">ANDROID: reboot reason: &quot;(none)&quot;</span><br><span class="line">optee api revision: 2.0</span><br><span class="line">TEEC: Waring: Could not find security partition</span><br><span class="line">Not AVB images, AVB skip</span><br><span class="line">No valid android hdr</span><br><span class="line">Android image load failed</span><br><span class="line">Android boot failed, error -1.</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Booting FIT Image at 0xe96c9980 with size 0x0212f600</span></span></span><br><span class="line">Fdt Ramdisk skip relocation</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Loading kernel from FIT Image at e96c9980 ...</span></span></span><br><span class="line">   Using &#x27;conf&#x27; configuration</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Verified-boot: 0</span></span></span><br><span class="line">   Trying &#x27;kernel&#x27; kernel subimage</span><br><span class="line">     Description:  unavailable</span><br><span class="line">     Type:         Kernel Image</span><br><span class="line">     Compression:  uncompressed</span><br><span class="line">     Data Start:   0xe96f1580</span><br><span class="line">     Data Size:    34634240 Bytes = 33 MiB</span><br><span class="line">     Architecture: AArch64</span><br><span class="line">     OS:           Linux</span><br><span class="line">     Load Address: 0x00400000</span><br><span class="line">     Entry Point:  0x00400000</span><br><span class="line">     Hash algo:    sha256</span><br><span class="line">     Hash value:   e5aaf8b1b5aebef2eaecc747ad18f1b3107b680f318fbd5c8f0f5b4ffca10eae</span><br><span class="line">   Verifying Hash Integrity ... sha256+ OK</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Loading fdt from FIT Image at e96c9980 ...</span></span></span><br><span class="line">   Using &#x27;conf&#x27; configuration</span><br><span class="line">   Trying &#x27;fdt&#x27; fdt subimage</span><br><span class="line">     Description:  unavailable</span><br><span class="line">     Type:         Flat Device Tree</span><br><span class="line">     Compression:  uncompressed</span><br><span class="line">     Data Start:   0xe96ca180</span><br><span class="line">     Data Size:    160617 Bytes = 156.9 KiB</span><br><span class="line">     Architecture: AArch64</span><br><span class="line">     Load Address: 0x08300000</span><br><span class="line">     Hash algo:    sha256</span><br><span class="line">     Hash value:   9e2d4613e19b19fa536a484b769e147007e30ac6c291b1e2c78d22c3254378a4</span><br><span class="line">   Verifying Hash Integrity ... sha256+ OK</span><br><span class="line">   Loading fdt from 0x08300000 to 0x08300000</span><br><span class="line">   Booting using the fdt blob at 0x08300000</span><br><span class="line">   Loading Kernel Image from 0xe96f1580 to 0x00400000 ... OK</span><br><span class="line">   kernel loaded at 0x00400000, end = 0x02507a00</span><br><span class="line">  &#x27;reserved-memory&#x27; cma: addr=10000000 size=8000000</span><br><span class="line">  &#x27;reserved-memory&#x27; ramoops@110000: addr=110000 size=f0000</span><br><span class="line">   Using Device Tree in place at 0000000008300000, end 000000000832a368</span><br><span class="line">Adding bank: 0x00200000 - 0x08400000 (size: 0x08200000)</span><br><span class="line">Adding bank: 0x09400000 - 0xf0000000 (size: 0xe6c00000)</span><br><span class="line">Adding bank: 0x100000000 - 0x200000000 (size: 0x100000000)</span><br><span class="line">Adding bank: 0x2f0000000 - 0x300000000 (size: 0x10000000)</span><br><span class="line">Total: 835.285 ms</span><br><span class="line"></span><br><span class="line">Starting kernel ...</span><br><span class="line"></span><br><span class="line">[    1.061605] </span><br><span class="line">[    1.061605]   _______                    _   </span><br><span class="line">[    1.061605]  |__   __|                  | |  </span><br><span class="line">[    1.061605]     | | ___  _ __   ___  ___| |_ </span><br><span class="line">[    1.061605]     | |/ _ \| &#x27;_ \ / _ \/ _ \ __|</span><br><span class="line">[    1.061605]     | | (_) | |_) |  __/  __/ |_ </span><br><span class="line">[    1.061605]     |_|\___/| .__/ \___|\___|\__|</span><br><span class="line">[    1.061605]             | |                  </span><br><span class="line">[    1.061605]             |_|                  </span><br><span class="line">[    1.061605] TOPEET BOARD:iTOP-RK3588</span><br><span class="line">[    1.061605] http://www.topeetboard.com</span><br><span class="line">[    1.061605] </span><br><span class="line">[    1.061627] Linux version 5.10.110 (topeet@ubuntu) (aarch64-none-linux-gnu-gcc (GNU Toolchain for the A-profile Architecture 10.3-2021.07 (arm-10.29)) 10.3.1 20210621, GNU ld (GNU Toolchain for the A-profile Architecture 10.3-2021.07 (arm-10.29)) 2.36.1.20210621) #1 SMP Fri Dec 22 00:39:46 PST 2023</span><br><span class="line">[    1.072188] Machine model: TOPEET RK3588S LP4X V10 Board</span><br><span class="line">[    1.072262] earlycon: uart8250 at MMIO32 0x00000000feb50000 (options &#x27;&#x27;)</span><br><span class="line">[    1.163382] printk: bootconsole [uart8250] enabled</span><br><span class="line">[    1.170992] efi: UEFI not found.</span><br><span class="line">[    1.180094] OF: fdt: Reserved memory: failed to reserve memory for node &#x27;drm-logo@00000000&#x27;: base 0x0000000000000000, size 0 MiB</span><br><span class="line">[    1.192585] OF: fdt: Reserved memory: failed to reserve memory for node &#x27;drm-cubic-lut@00000000&#x27;: base 0x0000000000000000, size 0 MiB</span><br><span class="line">[    1.205599] Reserved memory: created CMA memory pool at 0x0000000010000000, size 128 MiB</span><br><span class="line">[    1.214290] OF: reserved mem: initialized node cma, compatible id shared-dma-pool</span><br><span class="line">[    1.357359] Zone ranges:</span><br><span class="line">[    1.360089]   DMA      [mem 0x0000000000200000-0x00000000ffffffff]</span><br><span class="line">[    1.366809]   DMA32    empty</span><br><span class="line">[    1.369902]   Normal   [mem 0x0000000100000000-0x00000002ffffffff]</span><br><span class="line">[    1.376619] Movable zone start for each node</span><br><span class="line">[    1.381217] Early memory node ranges</span><br><span class="line">[    1.385081]   node   0: [mem 0x0000000000200000-0x00000000083fffff]</span><br><span class="line">[    1.391865]   node   0: [mem 0x0000000009400000-0x00000000efffffff]</span><br><span class="line">[    1.398633]   node   0: [mem 0x0000000100000000-0x00000001ffffffff]</span><br><span class="line">[    1.405435]   node   0: [mem 0x00000002f0000000-0x00000002ffffffff]</span><br><span class="line">[    1.412211] Initmem setup node 0 [mem 0x0000000000200000-0x00000002ffffffff]</span><br><span class="line">[    1.465067] psci: probing for conduit method from DT.</span><br><span class="line">[    1.470531] psci: PSCIv1.1 detected in firmware.</span><br><span class="line">[    1.475512] psci: Using standard PSCI v0.2 function IDs</span><br><span class="line">[    1.481171] psci: Trusted OS migration not required</span><br><span class="line">[    1.486422] psci: SMC Calling Convention v1.2</span><br><span class="line">[    1.491483] percpu: Embedded 31 pages/cpu s88424 r8192 d30360 u126976</span><br><span class="line">[    1.498663] Detected VIPT I-cache on CPU0</span><br><span class="line">[    1.503017] CPU features: detected: GIC system register CPU interface</span><br><span class="line">[    1.509983] CPU features: detected: Virtualization Host Extensions</span><br><span class="line">[    1.516712] CPU features: detected: ARM errata 1165522, 1319367, or 1530923</span><br><span class="line">[    1.524293] alternatives: patching kernel code</span><br><span class="line">[    1.529387] Built 1 zonelists, mobility grouping on.  Total pages: 2059848</span><br><span class="line">[    1.536757] Kernel command line: storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  root=/dev/mmcblk0p6 androidboot.verifiedbootstate=orange rw rootwait earlycon=uart8250,mmio32,0xfeb50000 console=ttyFIQ0 irqchip.gicv3_pseudo_nmi=0</span><br><span class="line">[    1.562075] Dentry cache hash table entries: 1048576 (order: 11, 8388608 bytes, linear)</span><br><span class="line">[    1.571126] Inode-cache hash table entries: 524288 (order: 10, 4194304 bytes, linear)</span><br><span class="line">[    1.579541] mem auto-init: stack:off, heap alloc:off, heap free:off</span><br><span class="line">[    1.592244] software IO TLB: mapped [mem 0x00000000ec000000-0x00000000f0000000] (64MB)</span><br><span class="line">[    1.674878] Memory: 7977020K/8370176K available (17088K kernel code, 3486K rwdata, 6224K rodata, 6912K init, 571K bss, 262084K reserved, 131072K cma-reserved)</span><br><span class="line">[    1.690314] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=8, Nodes=1</span><br><span class="line">[    1.697451] ftrace: allocating 63902 entries in 250 pages</span><br><span class="line">[    1.803887] ftrace: allocated 250 pages with 6 groups</span><br><span class="line">[    1.809636] rcu: Hierarchical RCU implementation.</span><br><span class="line">[    1.814690] rcu:     RCU event tracing is enabled.</span><br><span class="line">[    1.819576]  Rude variant of Tasks RCU enabled.</span><br><span class="line">[    1.824452]  Tracing variant of Tasks RCU enabled.</span><br><span class="line">[    1.829589] rcu: RCU calculated value of scheduler-enlistment delay is 30 jiffies.</span><br><span class="line">[    1.843441] NR_IRQS: 64, nr_irqs: 64, preallocated irqs: 0</span><br><span class="line">[    1.851449] GICv3: GIC: Using split EOI/Deactivate mode</span><br><span class="line">[    1.857084] GICv3: 480 SPIs implemented</span><br><span class="line">[    1.861215] GICv3: 0 Extended SPIs implemented</span><br><span class="line">[    1.866066] GICv3: Distributor has no Range Selector support</span><br><span class="line">[    1.872214] GICv3: 16 PPIs implemented</span><br><span class="line">[    1.876315] GICv3: CPU0: found redistributor 0 region 0:0x00000000fe680000</span><br><span class="line">[    1.883849] ITS [mem 0xfe640000-0xfe65ffff]</span><br><span class="line">[    1.888424] ITS@0x00000000fe640000: allocated 8192 Devices @100200000 (indirect, esz 8, psz 64K, shr 0)</span><br><span class="line">[    1.898616] ITS@0x00000000fe640000: allocated 32768 Interrupt Collections @100210000 (flat, esz 2, psz 64K, shr 0)</span><br><span class="line">[    1.909798] ITS: using cache flushing for cmd queue</span><br><span class="line">[    1.915106] ITS [mem 0xfe660000-0xfe67ffff]</span><br><span class="line">[    1.919673] ITS@0x00000000fe660000: allocated 8192 Devices @100230000 (indirect, esz 8, psz 64K, shr 0)</span><br><span class="line">[    1.929821] ITS@0x00000000fe660000: allocated 32768 Interrupt Collections @100240000 (flat, esz 2, psz 64K, shr 0)</span><br><span class="line">[    1.941028] ITS: using cache flushing for cmd queue</span><br><span class="line">[    1.946434] GICv3: using LPI property table @0x0000000100250000</span><br><span class="line">[    1.952927] GIC: using cache flushing for LPI property table</span><br><span class="line">[    1.959082] GICv3: CPU0: using allocated LPI pending table @0x0000000100260000</span><br><span class="line">[    1.967033] random: get_random_bytes called from start_kernel+0x3dc/0x5c8 with crng_init=0</span><br><span class="line">[    2.090146] arch_timer: cp15 timer(s) running at 24.00MHz (phys).</span><br><span class="line">[    2.105085] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x588fe9dc0, max_idle_ns: 440795202592 ns</span><br><span class="line">[    2.116319] sched_clock: 56 bits at 24MHz, resolution 41ns, wraps every 4398046511097ns</span><br><span class="line">[    2.125681] Console: colour dummy device 80x25</span><br><span class="line">[    2.130358] Calibrating delay loop (skipped), value calculated using timer frequency.. 48.00 BogoMIPS (lpj=80000)</span><br><span class="line">[    2.141118] pid_max: default: 32768 minimum: 301</span><br><span class="line">[    2.146124] Mount-cache hash table entries: 16384 (order: 5, 131072 bytes, linear)</span><br><span class="line">[    2.154034] Mountpoint-cache hash table entries: 16384 (order: 5, 131072 bytes, linear)</span><br><span class="line">[    2.164090] rcu: Hierarchical SRCU implementation.</span><br><span class="line">[    2.169951] Platform MSI: msi-controller@fe640000 domain created</span><br><span class="line">[    2.176298] Platform MSI: msi-controller@fe660000 domain created</span><br><span class="line">[    2.182922] PCI/MSI: /interrupt-controller@fe600000/msi-controller@fe640000 domain created</span><br><span class="line">[    2.191567] PCI/MSI: /interrupt-controller@fe600000/msi-controller@fe660000 domain created</span><br><span class="line">[    2.200317] EFI services will not be available.</span><br><span class="line">[    2.205421] smp: Bringing up secondary CPUs ...</span><br><span class="line">I/TC: Secondary CPU 1 initializing</span><br><span class="line">I/TC: Secondary CPU 1 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 2 initializing</span><br><span class="line">I/TC: Secondary CPU 2 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 3 initializing</span><br><span class="line">I/TC: Secondary CPU 3 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 4 initializing</span><br><span class="line">I/TC: Secondary CPU 4 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 5 initializing</span><br><span class="line">I/TC: Secondary CPU 5 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 6 initializing</span><br><span class="line">I/TC: Secondary CPU 6 switching to normal world boot</span><br><span class="line">I/TC: Secondary CPU 7 initializing</span><br><span class="line">I/TC: Secondary CPU 7 switching to normal world boot</span><br><span class="line">[    2.218390] Detected VIPT I-cache on CPU1</span><br><span class="line">[    2.218423] GICv3: CPU1: found redistributor 100 region 0:0x00000000fe6a0000</span><br><span class="line">[    2.218440] GICv3: CPU1: using allocated LPI pending table @0x0000000100270000</span><br><span class="line">[    2.218485] CPU1: Booted secondary processor 0x0000000100 [0x412fd050]</span><br><span class="line">[    2.226808] Detected VIPT I-cache on CPU2</span><br><span class="line">[    2.226835] GICv3: CPU2: found redistributor 200 region 0:0x00000000fe6c0000</span><br><span class="line">[    2.226850] GICv3: CPU2: using allocated LPI pending table @0x0000000100280000</span><br><span class="line">[    2.226888] CPU2: Booted secondary processor 0x0000000200 [0x412fd050]</span><br><span class="line">[    2.235182] Detected VIPT I-cache on CPU3</span><br><span class="line">[    2.235207] GICv3: CPU3: found redistributor 300 region 0:0x00000000fe6e0000</span><br><span class="line">[    2.235222] GICv3: CPU3: using allocated LPI pending table @0x0000000100290000</span><br><span class="line">[    2.235258] CPU3: Booted secondary processor 0x0000000300 [0x412fd050]</span><br><span class="line">[    2.243552] CPU features: detected: Spectre-v4</span><br><span class="line">[    2.243555] CPU features: detected: Spectre-BHB</span><br><span class="line">[    2.243558] Detected PIPT I-cache on CPU4</span><br><span class="line">[    2.243572] GICv3: CPU4: found redistributor 400 region 0:0x00000000fe700000</span><br><span class="line">[    2.243580] GICv3: CPU4: using allocated LPI pending table @0x00000001002a0000</span><br><span class="line">[    2.243604] CPU4: Booted secondary processor 0x0000000400 [0x414fd0b0]</span><br><span class="line">[    2.251857] Detected PIPT I-cache on CPU5</span><br><span class="line">[    2.251872] GICv3: CPU5: found redistributor 500 region 0:0x00000000fe720000</span><br><span class="line">[    2.251881] GICv3: CPU5: using allocated LPI pending table @0x00000001002b0000</span><br><span class="line">[    2.251905] CPU5: Booted secondary processor 0x0000000500 [0x414fd0b0]</span><br><span class="line">[    2.260171] Detected PIPT I-cache on CPU6</span><br><span class="line">[    2.260186] GICv3: CPU6: found redistributor 600 region 0:0x00000000fe740000</span><br><span class="line">[    2.260194] GICv3: CPU6: using allocated LPI pending table @0x00000001002c0000</span><br><span class="line">[    2.260218] CPU6: Booted secondary processor 0x0000000600 [0x414fd0b0]</span><br><span class="line">[    2.268472] Detected PIPT I-cache on CPU7</span><br><span class="line">[    2.268487] GICv3: CPU7: found redistributor 700 region 0:0x00000000fe760000</span><br><span class="line">[    2.268495] GICv3: CPU7: using allocated LPI pending table @0x00000001002d0000</span><br><span class="line">[    2.268519] CPU7: Booted secondary processor 0x0000000700 [0x414fd0b0]</span><br><span class="line">[    2.268586] smp: Brought up 1 node, 8 CPUs</span><br><span class="line">[    2.464144] SMP: Total of 8 processors activated.</span><br><span class="line">[    2.469073] CPU features: detected: Privileged Access Never</span><br><span class="line">[    2.474824] CPU features: detected: User Access Override</span><br><span class="line">[    2.480385] CPU features: detected: 32-bit EL0 Support</span><br><span class="line">[    2.485816] CPU features: detected: Common not Private translations</span><br><span class="line">[    2.492382] CPU features: detected: RAS Extension Support</span><br><span class="line">[    2.498046] CPU features: detected: Data cache clean to the PoU not required for I/D coherence</span><br><span class="line">[    2.507118] CPU features: detected: CRC32 instructions</span><br><span class="line">[    2.512426] CPU features: detected: Speculative Store Bypassing Safe (SSBS)</span><br><span class="line">[    2.519696] CPU features: detected: RCpc load-acquire (LDAPR)</span><br><span class="line">[    2.525783] CPU: All CPU(s) started at EL2</span><br><span class="line">[    2.531407] devtmpfs: initialized</span><br><span class="line">[    2.544782] Registered cp15_barrier emulation handler</span><br><span class="line">[    2.550171] Registered setend emulation handler</span><br><span class="line">[    2.555044] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 6370867519511994 ns</span><br><span class="line">[    2.565476] futex hash table entries: 2048 (order: 5, 131072 bytes, linear)</span><br><span class="line">[    2.574153] pinctrl core: initialized pinctrl subsystem</span><br><span class="line">[    2.579915] DMI not present or invalid.</span><br><span class="line">[    2.584082] NET: Registered protocol family 16</span><br><span class="line">[    2.589843] DMA: preallocated 1024 KiB GFP_KERNEL pool for atomic allocations</span><br><span class="line">[    2.597540] DMA: preallocated 1024 KiB GFP_KERNEL|GFP_DMA pool for atomic allocations</span><br><span class="line">[    2.606405] thermal_sys: Registered thermal governor &#x27;fair_share&#x27;</span><br><span class="line">[    2.606407] thermal_sys: Registered thermal governor &#x27;step_wise&#x27;</span><br><span class="line">[    2.612855] thermal_sys: Registered thermal governor &#x27;user_space&#x27;</span><br><span class="line">[    2.619273] thermal_sys: Registered thermal governor &#x27;power_allocator&#x27;</span><br><span class="line">[    2.625860] thermal thermal_zone1: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    2.641190] thermal thermal_zone2: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    2.649734] thermal thermal_zone3: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    2.658262] thermal thermal_zone4: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    2.666875] thermal thermal_zone5: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    2.675383] thermal thermal_zone6: power_allocator: sustainable_power will be estimated</span><br><span class="line">[    2.683837] cpuidle: using governor menu</span><br><span class="line">[    2.688007] Registered FIQ tty driver</span><br><span class="line">[    2.692087] hw-breakpoint: found 6 breakpoint and 4 watchpoint registers.</span><br><span class="line">[    2.699410] ASID allocator initialised with 65536 entries</span><br><span class="line">[    2.706264] ramoops: dmesg-0 0x20000@0x0000000000110000</span><br><span class="line">[    2.711824] ramoops: console 0x80000@0x0000000000130000</span><br><span class="line">[    2.717435] ramoops: pmsg    0x50000@0x00000000001b0000</span><br><span class="line">[    2.722986] printk: console [ramoops-1] enabled</span><br><span class="line">[    2.727794] pstore: Registered ramoops as persistent store backend</span><br><span class="line">[    2.734378] ramoops: using 0xf0000@0x110000, ecc: 0</span><br><span class="line">[    2.781997] rockchip-gpio fd8a0000.gpio: probed /pinctrl/gpio@fd8a0000</span><br><span class="line">[    2.789138] rockchip-gpio fec20000.gpio: probed /pinctrl/gpio@fec20000</span><br><span class="line">[    2.796326] rockchip-gpio fec30000.gpio: probed /pinctrl/gpio@fec30000</span><br><span class="line">[    2.803510] rockchip-gpio fec40000.gpio: probed /pinctrl/gpio@fec40000</span><br><span class="line">[    2.810689] rockchip-gpio fec50000.gpio: probed /pinctrl/gpio@fec50000</span><br><span class="line">[    2.817684] rockchip-pinctrl pinctrl: probed pinctrl</span><br><span class="line">[    2.890564] raid6: neonx8   gen()  5852 MB/s</span><br><span class="line">[    2.950655] raid6: neonx8   xor()  4544 MB/s</span><br><span class="line">[    3.010751] raid6: neonx4   gen()  6003 MB/s</span><br><span class="line">[    3.070841] raid6: neonx4   xor()  4566 MB/s</span><br><span class="line">[    3.130936] raid6: neonx2   gen()  5514 MB/s</span><br><span class="line">[    3.191028] raid6: neonx2   xor()  4315 MB/s</span><br><span class="line">[    3.251120] raid6: neonx1   gen()  4656 MB/s</span><br><span class="line">[    3.311213] raid6: neonx1   xor()  3735 MB/s</span><br><span class="line">[    3.371315] raid6: int64x8  gen()  1461 MB/s</span><br><span class="line">[    3.431410] raid6: int64x8  xor()   935 MB/s</span><br><span class="line">[    3.491492] raid6: int64x4  gen()  1873 MB/s</span><br><span class="line">[    3.551584] raid6: int64x4  xor()  1033 MB/s</span><br><span class="line">[    3.611678] raid6: int64x2  gen()  2610 MB/s</span><br><span class="line">[    3.671768] raid6: int64x2  xor()  1418 MB/s</span><br><span class="line">[    3.731856] raid6: int64x1  gen()  2139 MB/s</span><br><span class="line">[    3.791949] raid6: int64x1  xor()  1164 MB/s</span><br><span class="line">[    3.796470] raid6: using algorithm neonx4 gen() 6003 MB/s</span><br><span class="line">[    3.802196] raid6: .... xor() 4566 MB/s, rmw enabled</span><br><span class="line">[    3.807446] raid6: using neon recovery algorithm</span><br><span class="line">[    3.812886] fiq_debugger fiq_debugger.0: IRQ fiq not found</span><br><span class="line">[    3.818727] fiq_debugger fiq_debugger.0: IRQ wakeup not found</span><br><span class="line">[    3.824837] fiq_debugger_probe: could not install nmi irq handler</span><br><span class="line">[[    3.831280] printk: console [ttyFIQ0] enabled</span><br><span class="line">    3.831280] printk: console [ttyFIQ0] enabled</span><br><span class="line">[    3.840252] printk: bootconsole [uart8250] disabled</span><br><span class="line">[    3.840252] printk: bootconsole [uart8250] disabled</span><br><span class="line">[    3.845551] Registered fiq debugger ttyFIQ0</span><br><span class="line">[    3.845876] vcc5v0_sys: supplied by vcc12v_dcin</span><br><span class="line">[    3.846001] vcc5v0_usbdcin: supplied by vcc12v_dcin</span><br><span class="line">[    3.846119] vcc5v0_usb: supplied by vcc5v0_usbdcin</span><br><span class="line">[    3.846243] vcc_1v1_nldo_s3: supplied by vcc5v0_sys</span><br><span class="line">[    3.846407] vcc5v0_host: supplied by vcc5v0_usb</span><br><span class="line">[    3.846713] vbus5v0_typec: supplied by vcc5v0_usb</span><br><span class="line">[    3.847005] iommu: Default domain type: Translated </span><br><span class="line">[    3.847084] rk_iommu fdab9000.iommu: version = 2</span><br><span class="line">[    3.847436] rk_iommu fdb50800.iommu: version = 2</span><br><span class="line">[    3.847675] rk_iommu fdb60f00.iommu: version = 2</span><br><span class="line">[    3.847854] rk_iommu fdb70f00.iommu: version = 2</span><br><span class="line">[    3.848014] rk_iommu fdb90480.iommu: version = 2</span><br><span class="line">[    3.848193] rk_iommu fdba0800.iommu: version = 2</span><br><span class="line">[    3.848370] rk_iommu fdba4800.iommu: version = 2</span><br><span class="line">[    3.848550] rk_iommu fdba8800.iommu: version = 2</span><br><span class="line">[    3.848732] rk_iommu fdbac800.iommu: version = 2</span><br><span class="line">[    3.848922] rk_iommu fdbb0800.iommu: version = 2</span><br><span class="line">[    3.849113] rk_iommu fdbdf000.iommu: version = 2</span><br><span class="line">[    3.849381] rk_iommu fdbef000.iommu: version = 2</span><br><span class="line">[    3.849654] rk_iommu fdc38700.iommu: version = 2</span><br><span class="line">[    3.849930] rk_iommu fdc48700.iommu: version = 2</span><br><span class="line">[    3.850071] rk_iommu fdd97e00.iommu: version = 2</span><br><span class="line">[    3.850379] SCSI subsystem initialized</span><br><span class="line">[    3.850456] usbcore: registered new interface driver usbfs</span><br><span class="line">[    3.850472] usbcore: registered new interface driver hub</span><br><span class="line">[    3.850487] usbcore: registered new device driver usb</span><br><span class="line">[    3.850524] mc: Linux media interface: v0.10</span><br><span class="line">[    3.850536] videodev: Linux video capture interface: v2.00</span><br><span class="line">[    3.850561] pps_core: LinuxPPS API ver. 1 registered</span><br><span class="line">[    3.850565] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;</span><br><span class="line">[    3.850572] PTP clock support registered</span><br><span class="line">[    3.850820] arm-scmi firmware:scmi: SCMI Notifications - Core Enabled.</span><br><span class="line">[    3.850852] arm-scmi firmware:scmi: SCMI Protocol v2.0 &#x27;rockchip:&#x27; Firmware version 0x0</span><br><span class="line">[    3.851918] Advanced Linux Sound Architecture Driver Initialized.</span><br><span class="line">[    3.852109] Bluetooth: Core ver 2.22</span><br><span class="line">[    3.852123] NET: Registered protocol family 31</span><br><span class="line">[    3.852126] Bluetooth: HCI device and connection manager initialized</span><br><span class="line">[    3.852144] Bluetooth: HCI socket layer initialized</span><br><span class="line">[    3.852149] Bluetooth: L2CAP socket layer initialized</span><br><span class="line">[    3.852157] Bluetooth: SCO socket layer initialized</span><br><span class="line">[    3.853425] rockchip-cpuinfo cpuinfo: SoC            : 35880000</span><br><span class="line">[    3.853431] rockchip-cpuinfo cpuinfo: Serial         : bbc04aeed2e2ceec</span><br><span class="line">[    3.853778] clocksource: Switched to clocksource arch_sys_counter</span><br><span class="line">[    4.157980] NET: Registered protocol family 2</span><br><span class="line">[    4.158088] IP idents hash table entries: 131072 (order: 8, 1048576 bytes, linear)</span><br><span class="line">[    4.159987] tcp_listen_portaddr_hash hash table entries: 4096 (order: 5, 163840 bytes, linear)</span><br><span class="line">[    4.160078] TCP established hash table entries: 65536 (order: 7, 524288 bytes, linear)</span><br><span class="line">[    4.160399] TCP bind hash table entries: 65536 (order: 9, 2097152 bytes, linear)</span><br><span class="line">[    4.161133] TCP: Hash tables configured (established 65536 bind 65536)</span><br><span class="line">[    4.161191] UDP hash table entries: 4096 (order: 6, 393216 bytes, linear)</span><br><span class="line">[    4.161332] UDP-Lite hash table entries: 4096 (order: 6, 393216 bytes, linear)</span><br><span class="line">[    4.161529] NET: Registered protocol family 1</span><br><span class="line">[    4.161834] RPC: Registered named UNIX socket transport module.</span><br><span class="line">[    4.161839] RPC: Registered udp transport module.</span><br><span class="line">[    4.161842] RPC: Registered tcp transport module.</span><br><span class="line">[    4.161845] RPC: Registered tcp NFSv4.1 backchannel transport module.</span><br><span class="line">[    4.162250] PCI: CLS 0 bytes, default 64</span><br><span class="line">[    4.163185] hw perfevents: enabled with armv8_pmuv3 PMU driver, 7 counters available</span><br><span class="line">[    4.165789] Initialise system trusted keyrings</span><br><span class="line">[    4.165874] workingset: timestamp_bits=46 max_order=21 bucket_order=0</span><br><span class="line">[    4.168091] squashfs: version 4.0 (2009/01/31) Phillip Lougher</span><br><span class="line">[    4.168367] NFS: Registering the id_resolver key type</span><br><span class="line">[    4.168378] Key type id_resolver registered</span><br><span class="line">[    4.168382] Key type id_legacy registered</span><br><span class="line">[    4.168397] ntfs: driver 2.1.32 [Flags: R/O].</span><br><span class="line">[    4.168479] jffs2: version 2.2. (NAND) © 2001-2006 Red Hat, Inc.</span><br><span class="line">[    4.168565] fuse: init (API version 7.32)</span><br><span class="line">[    4.168707] SGI XFS with security attributes, no debug enabled</span><br><span class="line">[    4.188540] NET: Registered protocol family 38</span><br><span class="line">[    4.188547] xor: measuring software checksum speed</span><br><span class="line">[    4.190018]    8regs           :  6715 MB/sec</span><br><span class="line">[    4.191130]    32regs          :  8930 MB/sec</span><br><span class="line">[    4.192065]    arm64_neon      : 10865 MB/sec</span><br><span class="line">[    4.192068] xor: using function: arm64_neon (10865 MB/sec)</span><br><span class="line">[    4.192074] Key type asymmetric registered</span><br><span class="line">[    4.192078] Asymmetric key parser &#x27;x509&#x27; registered</span><br><span class="line">[    4.192094] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 242)</span><br><span class="line">[    4.192188] io scheduler mq-deadline registered</span><br><span class="line">[    4.192194] io scheduler kyber registered</span><br><span class="line">[    4.200614] rockchip-usbdp-phy: probe of fed80000.phy failed with error -16</span><br><span class="line">[    4.202013] rk-pcie fe190000.pcie: invalid prsnt-gpios property in node</span><br><span class="line">[    4.202057] rk-pcie fe190000.pcie: no vpcie3v3 regulator found</span><br><span class="line">[    4.202189] pwm-backlight backlight: supply power not found, using dummy regulator</span><br><span class="line">[    4.202240] of_pwm_get(): can&#x27;t parse &quot;pwms&quot; property</span><br><span class="line">[    4.202245] pwm-backlight backlight: unable to request PWM</span><br><span class="line">[    4.202306] pwm-backlight: probe of backlight failed with error -2</span><br><span class="line">[    4.202332] rk-pcie fe190000.pcie: missing legacy IRQ resource</span><br><span class="line">[    4.202353] rk-pcie fe190000.pcie: IRQ msi not found</span><br><span class="line">[    4.202359] mpp_service mpp-srv: unknown mpp version for missing VCS info</span><br><span class="line">[    4.202363] mpp_service mpp-srv: probe start</span><br><span class="line">[    4.202368] rk-pcie fe190000.pcie: use outband MSI support</span><br><span class="line">[    4.202373] rk-pcie fe190000.pcie: Missing *config* reg space</span><br><span class="line">[    4.202391] rk-pcie fe190000.pcie: host bridge /pcie@fe190000 ranges:</span><br><span class="line">[    4.202417] rk-pcie fe190000.pcie:      err 0x00f4000000..0x00f40fffff -&gt; 0x00f4000000</span><br><span class="line">[    4.202437] rk-pcie fe190000.pcie:       IO 0x00f4100000..0x00f41fffff -&gt; 0x00f4100000</span><br><span class="line">[    4.202457] rk-pcie fe190000.pcie:      MEM 0x00f4200000..0x00f4ffffff -&gt; 0x00f4200000</span><br><span class="line">[    4.202473] rk-pcie fe190000.pcie:      MEM 0x0a00000000..0x0a3fffffff -&gt; 0x0a00000000</span><br><span class="line">[    4.202505] rk-pcie fe190000.pcie: Missing *config* reg space</span><br><span class="line">[    4.202542] rk-pcie fe190000.pcie: invalid resource</span><br><span class="line">[    4.203374] mpp_vdpu1 fdb51000.avsd-plus: Adding to iommu group 1</span><br><span class="line">[    4.203532] mpp_vdpu1 fdb51000.avsd-plus: probe device</span><br><span class="line">[    4.203642] mpp_vdpu1 fdb51000.avsd-plus: reset_group-&gt;rw_sem_on=0</span><br><span class="line">[    4.203650] mpp_vdpu1 fdb51000.avsd-plus: reset_group-&gt;rw_sem_on=0</span><br><span class="line">[    4.203759] mpp_vdpu1 fdb51000.avsd-plus: probing finish</span><br><span class="line">[    4.204089] mpp_vdpu2 fdb50400.vdpu: Adding to iommu group 1</span><br><span class="line">[    4.204180] mpp_vdpu2 fdb50400.vdpu: probe device</span><br><span class="line">[    4.204267] mpp_vdpu2 fdb50400.vdpu: reset_group-&gt;rw_sem_on=0</span><br><span class="line">[    4.204272] mpp_vdpu2 fdb50400.vdpu: reset_group-&gt;rw_sem_on=0</span><br><span class="line">[    4.204350] mpp_vdpu2 fdb50400.vdpu: probing finish</span><br><span class="line">[    4.204507] mpp_vepu2 jpege-ccu: probing start</span><br><span class="line">[    4.204513] mpp_vepu2 jpege-ccu: probing finish</span><br><span class="line">[    4.204622] mpp_vepu2 fdb50000.vepu: Adding to iommu group 1</span><br><span class="line">[    4.204661] mpp_vepu2 fdb50000.vepu: probing start</span><br><span class="line">[    4.204742] mpp_vepu2 fdb50000.vepu: reset_group-&gt;rw_sem_on=0</span><br><span class="line">[    4.204748] mpp_vepu2 fdb50000.vepu: reset_group-&gt;rw_sem_on=0</span><br><span class="line">[    4.204824] mpp_vepu2 fdb50000.vepu: probing finish</span><br><span class="line">[    4.204890] mpp_vepu2 fdba0000.jpege-core: Adding to iommu group 5</span><br><span class="line">[    4.204972] mpp_vepu2 fdba0000.jpege-core: probing start</span><br><span class="line">[    4.205065] mpp_vepu2 fdba0000.jpege-core: attach ccu success</span><br><span class="line">[    4.205143] mpp_vepu2 fdba0000.jpege-core: probing finish</span><br><span class="line">[    4.205212] mpp_vepu2 fdba4000.jpege-core: Adding to iommu group 6</span><br><span class="line">[    4.205291] mpp_vepu2 fdba4000.jpege-core: probing start</span><br><span class="line">[    4.205383] mpp_vepu2 fdba4000.jpege-core: attach ccu success</span><br><span class="line">[    4.205462] mpp_vepu2 fdba4000.jpege-core: probing finish</span><br><span class="line">[    4.205531] mpp_vepu2 fdba8000.jpege-core: Adding to iommu group 7</span><br><span class="line">[    4.205617] mpp_vepu2 fdba8000.jpege-core: probing start</span><br><span class="line">[    4.205715] mpp_vepu2 fdba8000.jpege-core: attach ccu success</span><br><span class="line">[    4.205796] mpp_vepu2 fdba8000.jpege-core: probing finish</span><br><span class="line">[    4.205862] mpp_vepu2 fdbac000.jpege-core: Adding to iommu group 8</span><br><span class="line">[    4.205952] mpp_vepu2 fdbac000.jpege-core: probing start</span><br><span class="line">[    4.206044] mpp_vepu2 fdbac000.jpege-core: attach ccu success</span><br><span class="line">[    4.206128] mpp_vepu2 fdbac000.jpege-core: probing finish</span><br><span class="line">[    4.206353] mpp-iep2 fdbb0000.iep: Adding to iommu group 9</span><br><span class="line">[    4.206441] mpp-iep2 fdbb0000.iep: probe device</span><br><span class="line">[    4.206554] mpp-iep2 fdbb0000.iep: allocate roi buffer failed</span><br><span class="line">[    4.206620] mpp-iep2 fdbb0000.iep: probing finish</span><br><span class="line">[    4.206787] mpp_jpgdec fdb90000.jpegd: Adding to iommu group 4</span><br><span class="line">[    4.206941] mpp_jpgdec fdb90000.jpegd: probe device</span><br><span class="line">[    4.207128] mpp_jpgdec fdb90000.jpegd: probing finish</span><br><span class="line">[    4.207461] mpp_rkvdec2 fdc30000.rkvdec-ccu: rkvdec-ccu, probing start</span><br><span class="line">[    4.207516] mpp_rkvdec2 fdc30000.rkvdec-ccu: probing finish</span><br><span class="line">[    4.207600] mpp_rkvdec2 fdc38100.rkvdec-core: Adding to iommu group 12</span><br><span class="line">[    4.207854] mpp_rkvdec2 fdc38100.rkvdec-core: rkvdec-core, probing start</span><br><span class="line">[    4.207964] mpp_rkvdec2 fdc38100.rkvdec-core: shared_niu_a is not found!</span><br><span class="line">[    4.207969] rkvdec2_init:1010: No niu aclk reset resource define</span><br><span class="line">[    4.207974] mpp_rkvdec2 fdc38100.rkvdec-core: shared_niu_h is not found!</span><br><span class="line">[    4.207977] rkvdec2_init:1013: No niu hclk reset resource define</span><br><span class="line">[    4.208003] mpp_rkvdec2 fdc38100.rkvdec-core: no regulator, devfreq is disabled</span><br><span class="line">[    4.208052] mpp_rkvdec2 fdc38100.rkvdec-core: core_mask=00010001</span><br><span class="line">[    4.208057] mpp_rkvdec2 fdc38100.rkvdec-core: attach ccu as core 0</span><br><span class="line">[    4.208199] mpp_rkvdec2 fdc38100.rkvdec-core: sram_start 0x00000000ff001000</span><br><span class="line">[    4.208203] mpp_rkvdec2 fdc38100.rkvdec-core: rcb_iova 0x00000000fff00000</span><br><span class="line">[    4.208207] mpp_rkvdec2 fdc38100.rkvdec-core: sram_size 491520</span><br><span class="line">[    4.208211] mpp_rkvdec2 fdc38100.rkvdec-core: rcb_size 1048576</span><br><span class="line">[    4.208216] mpp_rkvdec2 fdc38100.rkvdec-core: min_width 512</span><br><span class="line">[    4.208246] mpp_rkvdec2 fdc38100.rkvdec-core: probing finish</span><br><span class="line">[    4.208318] mpp_rkvdec2 fdc48100.rkvdec-core: Adding to iommu group 13</span><br><span class="line">[    4.208547] mpp_rkvdec2 fdc48100.rkvdec-core: rkvdec-core, probing start</span><br><span class="line">[    4.208654] mpp_rkvdec2 fdc48100.rkvdec-core: shared_niu_a is not found!</span><br><span class="line">[    4.208659] rkvdec2_init:1010: No niu aclk reset resource define</span><br><span class="line">[    4.208663] mpp_rkvdec2 fdc48100.rkvdec-core: shared_niu_h is not found!</span><br><span class="line">[    4.208666] rkvdec2_init:1013: No niu hclk reset resource define</span><br><span class="line">[    4.208692] mpp_rkvdec2 fdc48100.rkvdec-core: no regulator, devfreq is disabled</span><br><span class="line">[    4.208731] mpp_rkvdec2 fdc48100.rkvdec-core: core_mask=00020002</span><br><span class="line">[    4.208748] mpp_rkvdec2 fdc48100.rkvdec-core: attach ccu as core 1</span><br><span class="line">[    4.208911] mpp_rkvdec2 fdc48100.rkvdec-core: sram_start 0x00000000ff079000</span><br><span class="line">[    4.208915] mpp_rkvdec2 fdc48100.rkvdec-core: rcb_iova 0x00000000ffe00000</span><br><span class="line">[    4.208919] mpp_rkvdec2 fdc48100.rkvdec-core: sram_size 487424</span><br><span class="line">[    4.208923] mpp_rkvdec2 fdc48100.rkvdec-core: rcb_size 1048576</span><br><span class="line">[    4.208928] mpp_rkvdec2 fdc48100.rkvdec-core: min_width 512</span><br><span class="line">[    4.208957] mpp_rkvdec2 fdc48100.rkvdec-core: probing finish</span><br><span class="line">[    4.209121] mpp_rkvenc2 rkvenc-ccu: probing start</span><br><span class="line">[    4.209127] mpp_rkvenc2 rkvenc-ccu: probing finish</span><br><span class="line">[    4.209244] mpp_rkvenc2 fdbd0000.rkvenc-core: Adding to iommu group 10</span><br><span class="line">[    4.209443] mpp_rkvenc2 fdbd0000.rkvenc-core: probing start</span><br><span class="line">[    4.209459] mpp_rkvenc2 fdbd0000.rkvenc-core: link mode task capacity 8</span><br><span class="line">[    4.209595] mpp_rkvenc2 fdbd0000.rkvenc-core: attach ccu as core 0</span><br><span class="line">[    4.209678] mpp_rkvenc2 fdbd0000.rkvenc-core: probing finish</span><br><span class="line">[    4.209737] mpp_rkvenc2 fdbe0000.rkvenc-core: Adding to iommu group 11</span><br><span class="line">[    4.209951] mpp_rkvenc2 fdbe0000.rkvenc-core: probing start</span><br><span class="line">[    4.209967] mpp_rkvenc2 fdbe0000.rkvenc-core: link mode task capacity 8</span><br><span class="line">[    4.210122] mpp_rkvenc2 fdbe0000.rkvenc-core: attach ccu as core 1</span><br><span class="line">[    4.210204] mpp_rkvenc2 fdbe0000.rkvenc-core: probing finish</span><br><span class="line">[    4.210696] mpp_av1dec: Adding child /av1d@fdc70000</span><br><span class="line">[    4.210914] mpp_av1dec: register device av1d-master</span><br><span class="line">[    4.210932] mpp_av1dec av1d-master: av1_iommu_of_xlate,784</span><br><span class="line">[    4.210952] av1_iommu_probe_device,736, consumer : av1d-master, supplier : fdca0000.iommu</span><br><span class="line">[    4.210959] mpp_av1dec av1d-master: Adding to iommu group 15</span><br><span class="line">[    4.211180] mpp_av1dec av1d-master: probing start</span><br><span class="line">[    4.211367] mpp_av1dec av1d-master: probing finish</span><br><span class="line">[    4.211403] mpp_service mpp-srv: probe success</span><br><span class="line">[    4.218820] dma-pl330 fea10000.dma-controller: Loaded driver for PL330 DMAC-241330</span><br><span class="line">[    4.218829] dma-pl330 fea10000.dma-controller:       DBUFF-128x8bytes Num_Chans-8 Num_Peri-32 Num_Events-16</span><br><span class="line">[    4.219674] dma-pl330 fea30000.dma-controller: Loaded driver for PL330 DMAC-241330</span><br><span class="line">[    4.219682] dma-pl330 fea30000.dma-controller:       DBUFF-128x8bytes Num_Chans-8 Num_Peri-32 Num_Events-16</span><br><span class="line">[    4.220544] dma-pl330 fed10000.dma-controller: Loaded driver for PL330 DMAC-241330</span><br><span class="line">[    4.220552] dma-pl330 fed10000.dma-controller:       DBUFF-128x8bytes Num_Chans-8 Num_Peri-32 Num_Events-16</span><br><span class="line">[    4.220981] rockchip-pvtm fda40000.pvtm: pvtm@0 probed</span><br><span class="line">[    4.221040] rockchip-pvtm fda50000.pvtm: pvtm@1 probed</span><br><span class="line">[    4.221092] rockchip-pvtm fda60000.pvtm: pvtm@2 probed</span><br><span class="line">[    4.221144] rockchip-pvtm fdaf0000.pvtm: pvtm@3 probed</span><br><span class="line">[    4.221193] rockchip-pvtm fdb30000.pvtm: pvtm@4 probed</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s  rk3588/BoardConfig-rk3588-topeet.mk .BoardConfig.mk</span><br></pre></td></tr></table></figure>
<p>将一个文件进行软链接</p>
<h1 id="1221-工作记录"><a class="markdownIt-Anchor" href="#1221-工作记录"></a> 12.21 工作记录</h1>
<p>3588 邮票孔触摸搞完了、3588的镜像也更新完成了，没啥活了呀，今天应该是要搞3588s的硬件手册，这次直接从0开始，之前的问题可真的太大了，都不知道哪里有错误。</p>
<h2 id="1未来的规划"><a class="markdownIt-Anchor" href="#1未来的规划"></a> 1.未来的规划</h2>
<p>先像一个流水账简单的写一下我要做的事情，其实要做的事情真的挺多的，尤其是这一系列衍生出来的东西。并不是这一件事情做完就不再做了，而是有很多，先来按大的项目来分。</p>
<ol>
<li>3588S 一系列手册的编写、源码的配置</li>
<li>基础视频的录制</li>
<li>Linux驱动视频手册的编写</li>
</ol>
<h2 id="2-3588s"><a class="markdownIt-Anchor" href="#2-3588s"></a> 2. 3588S</h2>
<p>首先说一下我有疑问的地方！！！！！！</p>
<p>问题1：为什么核心板的原理图不开源呢？</p>
<p>​	可能各有各的想法，在公司的角度上应该是避免客户自己做底板，从某种意义上来说，我们其实也是客户，我们跟客户的立场其实是一致的，客户有的我们都有，客户没有的我们都没有，唯一有区别的地方在于，客户不需要写相关的手册和文档，而我们是要写文档、配置源码的，所以我会有这个抱怨，但是站在公司的角度，这个做法确实是没问题的，所以抱怨就抱怨了，后面我在做硬件复用手册的时候，看看怎样做才能更好的让客户所接受呢？而且一定要保证相应的准确率，在3568和3588上面有问题的地方就挺多的，也是当时理解不了，认知层次的问题。</p>
<p>目前有问题的地方就这一个，其他倒也还好，这是3588要搞的一些东西，具体如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312211450382.png" alt="image-20231221145051349" /></p>
<p>对于源码这件事情我认为不能随随便便的就搞了，也并不是移植一下就能搞好的，除此之外还有源码的瘦身、源码的优化等等，我继续列举我能想到的东西：</p>
<ul>
<li>无用的设备树应该删掉，现在的设备树里面有很多无用的节点，虽然他们最终并不会有效果，但是很影响后面的阅读、修改，让我来搞的话必须整理，而且要写上相关的注释，而至于git的使用，可以先等等。</li>
<li>真正的理解瑞芯微的编译脚本，一年多的时间过去了，其实你都没有真正的理解瑞芯微的脚本，有哪些是需要保留的、又有哪些是无用的，甚至还可以再美化，添加图形界面，等等都是可以的。</li>
<li>去掉Linux SDK里面那些无用的东西，有很多东西其实保留下来并没有什么用，平白无故的占地方罢了，裁剪、瘦身源码。</li>
</ul>
<p>然后是手册相关的问题，里面的一些东西是不是需要补充，有些东西是不是需要进行替换，从0搭建ubuntu开发环境是不是需要补充，问题还是很多的。</p>
<h2 id="3linux驱动手册"><a class="markdownIt-Anchor" href="#3linux驱动手册"></a> 3.Linux驱动手册</h2>
<p>之前已经写好的前面12章的手册,怎么说呢，其实倒像是为了完成而完成，那些更深层次的东西其实还差点很多，自身积累还不够，虽然也不可能在第一次就做好，但总应该尽力而为，更重要的是要有自己的思考，之前写那玩意的时候还没有搞博客，还不会写markdown，如今应该就好多了，慢慢来。</p>
<h2 id="4基础视频的录制"><a class="markdownIt-Anchor" href="#4基础视频的录制"></a> 4.基础视频的录制</h2>
<p>也不能说这个是最难的吧，但这个肯定是最心累的，录课并不是简简单单的讲两个命令就可以的，还有更多深层次的东西，就比如shell编程、Makefile脚本等一系列的内容、甚至还有那一系列ide软件的使用，环境的搭建等等，而且这些都要在一个完整的条条框框下，才能开展，总不能今天讲解这个，明天讲解那个，对吧，每一个视频跟每一个视频都不能联系在一起，这必然是不符合道理的，这些都需要一点一点的来进行规划，就先这样了，一直思考不进行任何的行动，那肯定是不行的。目前就先这样，我先去简单的认识一下3588S.</p>
<h2 id="53588s基本认识"><a class="markdownIt-Anchor" href="#53588s基本认识"></a> 5.3588s基本认识</h2>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43245753/article/details/124375165?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170314644216777224432722%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=170314644216777224432722&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-1-124375165-null-null.142%5Ev96%5Epc_search_result_base5&amp;utm_term=3588S%E5%92%8C3588&amp;spm=1018.2226.3001.4187">准备博客</a></p>
<table>
<thead>
<tr>
<th style="text-align:left">特性</th>
<th style="text-align:left">RK3588</th>
<th style="text-align:left">RK3588S</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">封装</td>
<td style="text-align:left">23*23 mm, 0.65 pitch</td>
<td style="text-align:left">17*17 mm, 0.4 pitch</td>
</tr>
<tr>
<td style="text-align:left">USB</td>
<td style="text-align:left">2 x USB3.1 + 2 x USB2.0 OTG (两组完整Typec)</td>
<td style="text-align:left">1 x USB3.1 + 1 x USB2.0 OTG (一组完整Typec)</td>
</tr>
<tr>
<td style="text-align:left">显示输出</td>
<td style="text-align:left">TYPEC/DP1.4 复用，2 x 4-lane DP1.4</td>
<td style="text-align:left">TYPEC/DP1.4 复用，1 x 4-lane DP1.4</td>
</tr>
<tr>
<td style="text-align:left">显示输出</td>
<td style="text-align:left">2 x HDMI2.1 TX / eDP1.4</td>
<td style="text-align:left">1 x HDMI2.1 TX / eDP1.4</td>
</tr>
<tr>
<td style="text-align:left">摄像头/显示输入</td>
<td style="text-align:left">MIPI CSI DPHY: 2 x 4-lanes 或 4 x 2-lanes</td>
<td style="text-align:left">MIPI CSI DPHY: 1 x 4-lanes 或 2 x 2-lanes</td>
</tr>
<tr>
<td style="text-align:left">HDMI RX</td>
<td style="text-align:left">HDMI2.0 RX</td>
<td style="text-align:left">无</td>
</tr>
<tr>
<td style="text-align:left">PCIe 3.0</td>
<td style="text-align:left">2 x 2-lanes PCIe3.0</td>
<td style="text-align:left">无</td>
</tr>
<tr>
<td style="text-align:left">PCIe 2.0/SATA 3.0/USB 3.0 复用接口</td>
<td style="text-align:left">3 × 1-lane PCIE2.0/3 组 SATA 3.0/1 x USB3.0 (USB栏已体现)</td>
<td style="text-align:left">2 × 1-lane PCIE2.0/2 组 SATA 3.0/1 x USB3.0 (USB栏已体现)</td>
</tr>
<tr>
<td style="text-align:left">SARADC</td>
<td style="text-align:left">8 个</td>
<td style="text-align:left">6 个</td>
</tr>
<tr>
<td style="text-align:left">SDIO</td>
<td style="text-align:left">一组 SDIO，IOMUX 到两个位置</td>
<td style="text-align:left">一组 SDIO，IOMUX 到一个位置</td>
</tr>
<tr>
<td style="text-align:left">GMAC</td>
<td style="text-align:left">2 组 (GMAC0 + GMAC1)</td>
<td style="text-align:left">1 组 (GMAC1)</td>
</tr>
</tbody>
</table>
<h1 id="1220-工作记录"><a class="markdownIt-Anchor" href="#1220-工作记录"></a> 12.20 工作记录</h1>
<p>问题可真的多呀,终于是将一些问题堆砌的差不多了，先总结一下。</p>
<h2 id="1更新3588镜像和源码"><a class="markdownIt-Anchor" href="#1更新3588镜像和源码"></a> 1.更新3588镜像和源码</h2>
<p>更新了这么多天了，这是真的不容易呀，但目前仍旧还是存在问题，也就是在系统版本的选择上，还存在一些争议，目前提供的都是xfce的构建，这个以后再说吧，但是这次肯定是要缓存的，这么多的镜像构建脚本，要是丢了，那可真的太难了。备份过程如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312201548741.png" alt="image-20231220154800638" /></p>
<p>等着备份完成吧。</p>
<h2 id="2重新规划目录"><a class="markdownIt-Anchor" href="#2重新规划目录"></a> 2.重新规划目录</h2>
<p>现在无论是网盘、我自己的硬盘、亦或者是nas还有网盘，都养成良好的规范习惯，目前在F盘也就是日常工作盘，里面的文件都是按日期来划分的，这样也好</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312201549937.png" alt="image-20231220154910903" /></p>
<p>这样可以直观的看到每天都做了哪些任务，反正两个T的机械硬盘肯定够用了，无论干什么都够了，除此之外我还将nas里的内容进行了规整，删掉了那些无用的资料：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312201600021.png" alt="image-20231220160048983" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312201601024.png" alt="image-20231220160138990" /></p>
<p>本来用到其他板子的概率就很低，所有这里直接放到other目录里了，在nas的根目录下还有着每个人的共享文件夹，我可以将一些有用的东西放这里。</p>
<p>最后将百度网盘里的一些资料我也进行了整理，目前也都是有相应的标号和分类，具体如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312201608873.png" alt="image-20231220160830829" /></p>
<p>具体有没有效果咱不知道，但是赏心悦目确实是。</p>
<h2 id="3编译3588-邮票孔安卓"><a class="markdownIt-Anchor" href="#3编译3588-邮票孔安卓"></a> 3.编译3588 邮票孔安卓</h2>
<p>目前客户那边的问题是，使用0826日期的源码，也根据手册修改了，屏幕能正常亮，但是触摸出现了问题，客户将镜像发到了这边，这边测试发现也是同样的问题，具体的报错如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312201615175.png" alt="image-20231220161520404" /></p>
<p>看打印感觉是设备树的配置有问题，但是奇怪的是，他的这个镜像在3588全能板子上就能用，同样的系统，同样的显示屏</p>
<h1 id="1219-工作记录"><a class="markdownIt-Anchor" href="#1219-工作记录"></a> 12.19 工作记录</h1>
<p>测试昨天编译完成的两个镜像，分别是ubuntu20 的XFCE镜像和ubuntu22的xfce镜像。</p>
<h2 id="1继续解决沾滞键问题"><a class="markdownIt-Anchor" href="#1继续解决沾滞键问题"></a> 1.继续解决沾滞键问题</h2>
<p>还是没办法解决，不知道为什么，这个先暂时搁置，目前就先这样了。</p>
<h2 id="2gnome桌面"><a class="markdownIt-Anchor" href="#2gnome桌面"></a> 2.gnome桌面</h2>
<p>其实也就无非几个库而已，大佬的构建方式也已经开源了，所以我用人家的deb包完全没有问题</p>
<h2 id="3镜像和源码的更新"><a class="markdownIt-Anchor" href="#3镜像和源码的更新"></a> 3.镜像和源码的更新</h2>
<p>首先修改我的编译脚本，添加对应的ubuntu22—gnome的。添加完成。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">XZ_OPT=&quot;-0 -T0&quot; tar -cpJvf update_rk3588.tar.xz update_rk3588</span><br></pre></td></tr></table></figure>
<p>以后压缩就用这个了。</p>
<h1 id="1218-工作记录"><a class="markdownIt-Anchor" href="#1218-工作记录"></a> 12.18 工作记录</h1>
<p>​	周六的时候重新更新了一下镜像，并且完善了3568和3588的构建脚本，但是3588目前仍旧是有一些问题，目前有问题的地方在图形化界面和MPV,其实之前的MPV也能用吧，唯一有问题的地方在于ubuntu20绿屏，其他倒是没啥.</p>
<p>==<em>现在怀疑的是某些包的问题，可是这些包在rk3568上是没问题的，那些包的唯一区别就是RGA的版本不一样，原因真的在这里吗，可能吧。</em>==现在先去看看香橙派的那些版本的镜像，看看xfce桌面的GPU版本.</p>
<h2 id="1虚拟机nat模式"><a class="markdownIt-Anchor" href="#1虚拟机nat模式"></a> 1.虚拟机nat模式</h2>
<p>现在的问题是虚拟机和主机之间的速度我还是不满意，现在的速度限制在了50-100，这个限制主要是当前内网千兆限制的，而我的电脑网卡是2500兆的.理论上的速度可以达到300M每秒，所以我将网络换为了NAT模式，具体如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312181100278.png" alt="image-20231218110016233" /></p>
<p>添加了一个网卡，将这个网卡设置为NAT模式，这样虚拟机就有两个网卡了，一个是直连，可以用来和服务器啥的通信，一个可以是走的就是我的本地回环了，也就是我的本地机器的网卡，我的网卡是2500M的速度，测试的速度如下所示</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312181054983.png" alt="image-20231218105450909" /></p>
<p>以后下载的东西就放在F盘里面了，速度也不慢，能跑满机械的速度，当然你要是想再参谋一个2T硬盘也不是不行，哈哈，没必要了。</p>
<h2 id="2ubuntu问题寻找"><a class="markdownIt-Anchor" href="#2ubuntu问题寻找"></a> 2.ubuntu问题寻找</h2>
<p>目前感觉是drm和xserver的问题，所以这里换回了之前的xserver和drm，重新编译试试。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/chromium/chromium-codecs-ffmpeg-extra_110.0.5481.4-0ubuntu1~jammy~rkmpp20230130_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/chromium/chromium-browser_110.0.5481.4-0ubuntu1~jammy~rkmpp20230130_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/chromium/chromium-browser-l10n_110.0.5481.4-0ubuntu1~jammy~rkmpp20230130_all.deb&quot;</span><br><span class="line">#dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/chromium/chromium-chromedriver_110.0.5481.4-0ubuntu1~jammy~rkmpp20230130_arm64.deb&quot;</span><br><span class="line">cp $EXTER/cache/sources/rk3588_packages_jammy/chromium/default $SDCARD/etc/chromium-browser/</span><br><span class="line"></span><br><span class="line">## for panfork</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/mali-g610-firmware_1.0.0-1_all.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libgbm1_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libgbm-dev_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libglapi-mesa_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libgl1-mesa-dri_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libegl-mesa0_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libglx-mesa0_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line"># Improve mesa performance</span><br><span class="line">echo &quot;PAN_MESA_DEBUG=gofaster&quot; &gt;&gt; $SDCARD/etc/environment</span><br></pre></td></tr></table></figure>
<p>问题可能找到了，但无法定位，只能扩大ubuntu的容量了，这个没办法，本来安装的是core，现在来安装完整的desktop镜像，这是没办法的事情，目前来看问题不大，这样也好，所有的命令都统一了，也还行吧。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get -y install ubuntu-desktop dbus-x11 xterm pulseaudio pavucontrol qtwayland5 </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mali-g610-firmware_1.0.0-1_all.deb libgbm1_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb libgbm-dev_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb  libglapi-mesa_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb libgl1-mesa-dri_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb libegl-mesa0_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb libglx-mesa0_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb</span><br></pre></td></tr></table></figure>
<h1 id="1216-工作记录"><a class="markdownIt-Anchor" href="#1216-工作记录"></a> 12.16 工作记录</h1>
<p>​	遇到的问题挺多的，但总归是要一点一点的解决的，饭要一口一口吃，路要一步一步走。</p>
<p>​	昨天将3568和3588的一键编译脚本写了一下，倒是有用，最大的一点好处就是，终于可以不用在一个一个镜像的编译了，真的浪费心神，就很无语，所有之前为什么没有去解决这个问题呢，有问题当然要解决了。</p>
<h2 id="1windows安装ssh-服务端"><a class="markdownIt-Anchor" href="#1windows安装ssh-服务端"></a> 1.windows安装ssh 服务端</h2>
<p>先说一下需求，目前呢我只能在windows拉取或者推送文件到uubntu，但是并不能在ubuntu直接拉取windows的东西，这就很不方便，所以找到了下面的方法。</p>
<p>首先找到应用。然后点击添加可选功能，如下图所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312161016732.png" alt="image-20231216101623640" /></p>
<p>​	搜索ssh，你会看到一个openssh服务端，具体如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312161017025.png" alt="image-20231216101709975" /></p>
<p>勾选之后安装即可。输入命令在PowerShell(管理员）模式下操作</p>
<p>输入命令来查看OpenSSH服务器与客户端是否安装完成，安装完成如图下所示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-WindowsCapability -Online | ? Name -like &#x27;OpenSSH*&#x27;</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312161018244.png" alt="image-20231216101857012" /></p>
<p>然后输入以下命令开启ssh，如下图所示：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net <span class="keyword">start</span> sshd</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312161019791.png" alt="image-20231216101933702" /></p>
<p>输入命令ssh localhost检查连接状态，图下所示表示连接正常</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh localhost</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312161019071.png" alt="image-20231216101957944" /></p>
<p>开机自启动SSH</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Service -Name sshd -StartupType &#x27;Automatic&#x27;</span><br></pre></td></tr></table></figure>
<p>到这里就可以了，这里的密码遇到了问题，需要重新设置一下密码，在这个地方：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312161047119.png" alt="image-20231216104719070" /></p>
<p>uubntu直接拉取windows文件内容成功如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r Administrator@192.168.1.11:F:/02_3588编译脚本/*</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312161047161.png" alt="image-20231216104745847" /></p>
<p>需要注意的是这里的盘符路径需要加个冒号，我就困扰在了这个地方，所以一直失败。</p>
<p>注：==nas的话ssh是不行的，一直检测不到盘符，就先这样把==</p>
<h2 id="2更新快速构建脚本"><a class="markdownIt-Anchor" href="#2更新快速构建脚本"></a> 2.更新快速构建脚本</h2>
<h2 id="3测试ubuntu镜像"><a class="markdownIt-Anchor" href="#3测试ubuntu镜像"></a> 3.测试ubuntu镜像</h2>
<p>从昨天开始就发现了一些问题，在3588上会卡死，但是之前就没有遇到过这个情况，我先来测试3568的，先测试的是3568的debian10，debian10 目前的问题是mpv不能调用mpp所以在使用mpv播放 1080p视频的时候，CPU会利用率过高，但是并没有出现所谓的难用的情况。<br />
然后测试了3568的ubuntu20，我的使用情况依然很流畅，最后再测试3568的uubntu22，</p>
<h1 id="1215工作记录"><a class="markdownIt-Anchor" href="#1215工作记录"></a> 12.15工作记录</h1>
<h2 id="1更新3568-源码和镜像"><a class="markdownIt-Anchor" href="#1更新3568-源码和镜像"></a> 1.更新3568 源码和镜像</h2>
<h2 id="2更新3588源码和镜像"><a class="markdownIt-Anchor" href="#2更新3588源码和镜像"></a> 2.更新3588源码和镜像</h2>
<p>​	修改：修改分区文件，默认将文件系统分区改为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CMDLINE: mtdparts=rk29xxnand:0x00002000@0x00004000(uboot),0x00002000@0x00006000(misc),0x00020000@0x00008000(b</span><br><span class="line">oot),0x00040000@0x00028000(recovery),0x00010000@0x00068000(backup),0x02e00000@0x00078000(rootfs),0x00040000@0</span><br><span class="line">x02e78000(oem),-@0x02eb8000(userdata:grow) </span><br></pre></td></tr></table></figure>
<p>默认23G</p>
<h2 id="3完善全部镜像编译的脚本"><a class="markdownIt-Anchor" href="#3完善全部镜像编译的脚本"></a> 3.完善全部镜像编译的脚本</h2>
<h3 id="31-rk3568"><a class="markdownIt-Anchor" href="#31-rk3568"></a> 3.1 rk3568</h3>
<p>首先可以进行选择，根据文件系统镜像的类型来划分，具体如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">buildroot</span><br><span class="line">debian10</span><br><span class="line">debian11</span><br><span class="line">ubuntu20</span><br><span class="line">ubuntu22</span><br><span class="line">yocto</span><br><span class="line">all</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;请选择一个选项：&quot;</span><br><span class="line">echo &quot;1. buildroot&quot;</span><br><span class="line">echo &quot;2. debian10&quot;</span><br><span class="line">echo &quot;3. debian11&quot;</span><br><span class="line">echo &quot;4. ubuntu20&quot;</span><br><span class="line">echo &quot;5. ubuntu22&quot;</span><br><span class="line">echo &quot;6. yocto&quot;</span><br><span class="line">echo &quot;7. all&quot;</span><br><span class="line"></span><br><span class="line">read -p &quot;请输入选项: &quot; choice</span><br><span class="line"></span><br><span class="line">case $choice in</span><br><span class="line">    1)</span><br><span class="line">        echo &quot;您选择了 buildroot&quot;</span><br><span class="line">        ;;</span><br><span class="line">    2)</span><br><span class="line">        echo &quot;您选择了 debian10&quot;</span><br><span class="line">        ;;</span><br><span class="line">    3)</span><br><span class="line">        echo &quot;您选择了 debian11&quot;</span><br><span class="line">        ;;</span><br><span class="line">    4)</span><br><span class="line">        echo &quot;您选择了 ubuntu20&quot;</span><br><span class="line">        ;;</span><br><span class="line">    5)</span><br><span class="line">        echo &quot;您选择了 ubuntu22&quot;</span><br><span class="line">        ;;</span><br><span class="line">    6)</span><br><span class="line">        echo &quot;您选择了 yocto&quot;</span><br><span class="line">        ;;</span><br><span class="line">    7)</span><br><span class="line">        echo &quot;您选择了 all&quot;</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        echo &quot;无效的选项&quot;</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<h1 id="1214日工作记录"><a class="markdownIt-Anchor" href="#1214日工作记录"></a> 12.14日工作记录</h1>
<h2 id="1debian系统继续更新_3588"><a class="markdownIt-Anchor" href="#1debian系统继续更新_3588"></a> 1.debian系统继续更新_3588</h2>
<p>这次直接以3568的debian11为蓝本进行修改。</p>
<p>1.修改开机启动的打印</p>
<p>2.摄像头的iqfile文件</p>
<p>3.GPU的驱动固件</p>
<p>4.RGA要改</p>
<p>5.RKAIQ要改</p>
<p>6.rkmpp-v4l2</p>
<h2 id="23588-debian12"><a class="markdownIt-Anchor" href="#23588-debian12"></a> 2.3588 debian12</h2>
<p>没问题就行</p>
<h2 id="3qt515的编译和运行"><a class="markdownIt-Anchor" href="#3qt515的编译和运行"></a> 3.qt5.15的编译和运行</h2>
<p>​	首先将提供好的ubuntu-focal-arm64.tar.xz压缩包传输到虚拟机ubuntu上，拷贝完成如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509467.png" alt="image-20231214145445998" /></p>
<p>然后使用以下命令进行解压</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -vxf ubuntu-focal-arm64.tar.xz</span><br></pre></td></tr></table></figure>
<p>解压完成之后会在生成一个build目录,如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509387.png" alt="image-20231214145526924" /></p>
<p>然后使用==cd build/binary==命令进入binary文件系统源码目录，进入之后如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509500.png" alt="image-20231214145649952" /></p>
<p>该源码就是烧写到开发板ubuntu镜像的源码，然后将要编译的qt工程放到该目录下，这里以rk3568的QLed测试为例进行编译的演示，工程拷贝完成如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509481.png" alt="image-20231214145947186" />	然后使用以下命令更改根目录到该ubuntu下，更改完成如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chroot .</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509507.png" alt="image-20231214150055553" /></p>
<p>现在根用户就切换到上面解压出的ubuntu源码目录下了。然后进入QLed命令，运行以下命令构建该QT工程的Makefile，如下图所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/qt5.15.2/bin/qmake</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509460.png" alt="image-20231214150257774" /></p>
<p>先使用以下命令来进行工程的清理,清理过程如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make clean</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509947.png" alt="image-20231214150340328" /></p>
<p>然后使用==make==命令进行工程的构建，构建过程如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509047.png" alt="image-20231214150446114" /></p>
<p>至此，qt的编译就完成了，然后将编译生成的可执行文件传输到开发板上。传输完成如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509967.png" alt="image-20231214150613802" /></p>
<p>直接运行该可执行文件即可，运行之后的打印如下所示（这些报错可以忽略，不影响实际效果）：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509998.png" alt="image-20231214150651556" /></p>
<p>QT显示效果如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141509013.png" alt="image-20231214150729348" /></p>
<h2 id="43568-源码更新"><a class="markdownIt-Anchor" href="#43568-源码更新"></a> 4.3568 源码更新</h2>
<ul>
<li>修改1：打开ch341</li>
<li>修改2：解决buildroot系统 usb键盘的问题</li>
<li>修改3：更新ubutnu和debian系统</li>
<li>修改4：解决摄像头可能顺光发绿的问题</li>
<li></li>
</ul>
<h2 id="5scp无需密码验证"><a class="markdownIt-Anchor" href="#5scp无需密码验证"></a> 5.scp无需密码验证</h2>
<p>这不就是创造需求了吗，每一次我复制本地虚拟机ubuntu的文件，或者向上推送一个文件都要输入一个命令，虽然输入命令很简单把，但是输入的多了，就会烦人，所以就去搜索了ssh免密码。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141607695.png" alt="image-20231214160739634" /></p>
<p>在机器Client上root用户执行ssh-keygen命令，生成建立安全信任关系的证书。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -b 1024 -t rsa</span><br></pre></td></tr></table></figure>
<p>我这里将密钥地址放在了/C/Users/Administrator/.ssh/id_rsa目录下，执行过程如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312141612921.png" alt="image-20231214161222875" /></p>
<p>在程序提示输入passphrase时直接输入回车，表示无证书密码。上述命令将生成私钥证书id_rsa和公钥证书id_rsa.pub，存放在用户家目录的.ssh子目录中。</p>
<p>将公钥证书id_rsa.pub复制到机器Server的root和topeet家目录的.ssh子目录中，同时将文件名更换为authorized_keys。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp.exe id_rsa.pub root@192.168.1.41:/root/.ssh/authorized_keys</span><br><span class="line">scp.exe id_rsa.pub topeet@192.168.1.41:/home/topeet/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>
<p>可以了，但是上面的那个路径是不对的，不知道为啥我这里的电脑只能为啥是在D:\cadence\Cadence\SPB_Data.ssh路径，不是很懂。。。。</p>
<h1 id="1213日工作记录"><a class="markdownIt-Anchor" href="#1213日工作记录"></a> 12.13日工作记录</h1>
<h2 id="1安卓12动画的问题"><a class="markdownIt-Anchor" href="#1安卓12动画的问题"></a> 1.安卓12动画的问题</h2>
<p>如果仅仅是那个开场动画的问题，很是简单，只需让客户简单修改一下即可，目前问题就在这里了，但是客户后面出现的,搞完了，没啥问题了，打包一下源码即可。</p>
<h2 id="2ubutnu继续更新"><a class="markdownIt-Anchor" href="#2ubutnu继续更新"></a> 2.ubutnu继续更新</h2>
<p>今天将各个版本的ubuntu整理好，终于是发现了一个很重要的知识点了。那就是为什么在目前的XFCE桌面中无论是3568还是3588都不能在图形界面显示图形显卡，但是glmark-es 的测试却没问题，这是因为在那些桌面中只支持opengl选渲染，而瑞芯微提供的arm闭源驱动里，并没有对opengl的支持，所以图形界面没有加速。这也就是为什么选用xfce桌面的理由。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312131334549.png" alt="image-20231213133404477" /></p>
<p>而XFCE是与X11集成在一起的，他们之间的联系如下：XFCE和X11之间有密切的关系，因为XFCE是一个基于X11的桌面环境。</p>
<p>X11，也称为X Window System或X，是一种用于图形用户界面（GUI）的开放标准协议和软件栈。它提供了一种在计算机显示器上绘制图形和处理用户输入的机制。X11为用户提供了一个窗口化的桌面环境，并允许多个应用程序并发运行，并与显示器、键盘和鼠标等输入设备进行交互。</p>
<p>XFCE是一个轻量级的桌面环境，旨在提供简单、快速和易于使用的用户体验。XFCE的设计目标之一是在保持低系统资源消耗的同时提供现代的桌面功能。XFCE桌面环境构建在X11之上，并使用X11协议来管理窗口、绘制图形、处理用户输入等。</p>
<p>具体地说，XFCE使用X11的客户端-服务器模型。X11服务器（也称为X服务器）运行在计算机上，负责与显示器和输入设备进行通信，并提供图形显示和用户输入处理的基本功能。XFCE作为X11的客户端运行在X服务器之上，利用X11协议与X服务器进行通信，请求绘制窗口、处理鼠标和键盘事件等。</p>
<p>通过与X11的集成，XFCE能够利用X11的功能和特性，实现窗口管理、窗口装饰、窗口移动和调整大小、多任务处理、窗口间通信等桌面环境的基本功能。</p>
<p>而现在提供的镜像都是X11的，对应的deb文件也是X11的，但因为提供的deb文件不支持opengl，所以桌面加速仍旧不支持。有个人是这样写的<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43862401/article/details/133846232?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170244697016800213045976%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=170244697016800213045976&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-133846232-null-null.142%5Ev96%5Epc_search_result_base5&amp;utm_term=3588%20gpu&amp;spm=1018.2226.3001.4187">博客</a>，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	opi官方提供了debian的xfce和kde桌面的镜像，提供了ubuntu的xfce和gnome桌面的镜像。</span><br><span class="line">以上镜像，除了gnome之外，用的GPU驱动都是arm官方的闭源驱动libmali，只支持openGL ES和openCL。由于wayland方式需要openGL支持，而openGL ES仅仅是openGL的子集，所以官方驱动其实并不支持wayland方式。也就是说，使用官方驱动的镜像都只能使用xorg的显示服务器。</span><br><span class="line"></span><br><span class="line">有困难就会有人解决，据网友willzen所说，有大佬做了rk3588的开源GPU驱动panfrost，这个驱动支持完整的openGL，opi官方就是用的这个开源驱动去做的gnome桌面，但由于这个开源驱动不支持openCL(或者说有bug，反正就是不支持xorg)，所以也只能选择wayland的显示方式，如果选xorg则会出问题。</span><br><span class="line">总结：</span><br><span class="line">	官方闭源驱动——支持openGL ES和openCL——只能使用xorg显示服务器</span><br><span class="line">	某开源驱动——支持完整的openGL但不支持openCL——只能使用wayland显示服务器</span><br></pre></td></tr></table></figure>
<p>我还是不懂呀，先这样吧，对于这个层面的理解确实不多呀，先更新了全部的镜像再说。gnome的就先这样子，现在先去搞debian的</p>
<h2 id="3debian镜像的更新"><a class="markdownIt-Anchor" href="#3debian镜像的更新"></a> 3.debian镜像的更新</h2>
<p>debian10仍旧以ubuntu20的构建脚本为蓝本进行修改</p>
<p>修改1：打包的名称 共有三个地方</p>
<p>修改2：构建需要的镜像源 两个地方</p>
<p>修改3：xfce桌面安装task-xfce-minimal</p>
<p>修改4：删掉默认的ffmpeg，debian10</p>
<p>debian11仍旧以ubuntu22的构建脚本为蓝本进行修改</p>
<p>修改1：打包的名称 共有三个地方</p>
<p>修改2：构建需要的镜像源 两个地方</p>
<p>修改3：xfce桌面安装task-xfce-minimal</p>
<p>修改4：删掉默认的ffmpeg，debian10</p>
<h1 id="1212日工作记录"><a class="markdownIt-Anchor" href="#1212日工作记录"></a> 12.12日工作记录</h1>
<h2 id="1nfc问题"><a class="markdownIt-Anchor" href="#1nfc问题"></a> 1.nfc问题</h2>
<p>在昨天晚上下班前将客户的底板进行了简单的焊接修改，将原本的NFC模块取下来，然后将昨天邮寄过来的模块进行更换，发现问题依旧，所以现在排除了模块的问题，然后更换了一个I2C数据线，发现问题还是，这也就排除了I2C的问题，然后IRQ引脚也修改过了，另外两个功能IO也测试过了，都可以正常的使用，那问题可就太奇怪了，不知道问题出在哪里了~~，现在板子已经邮寄回去了，等之后有结果了再说吧。</p>
<h2 id="2安卓12-动画问题"><a class="markdownIt-Anchor" href="#2安卓12-动画问题"></a> 2.安卓12 动画问题</h2>
<p>昨天下午已经找到问题了，但是现在要在客户的源码上来进行，客户的源码总共是遇到了两个问题，第一个是解压的问题，具体打印如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312121631914.png" alt="image-20231212163100645" /></p>
<p>这里要选择SA，然后是第二个，报了一堆不相干的错误，但不知道为啥会这样，但幸好有其他人遇到过所以也就还好，解决方法如下所示：<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312121631420.png" alt="image-20231212163152391" /></p>
<p>修改完成之后，源码就可以正常编译了，在编译之前还需要根据昨天写的手册将开机动画进行删除，步骤如下所示：测试发现，经过上面修改之后会在开机之后仍旧先加载到桌面，随后才进入相应的app，又经过测试发现这是开机动画的影响，所以仍旧需要下面的操作关掉启动中的动画。</p>
<p><strong>步骤一：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim frameworks/base/services/core/java/com/android/server/wm/ActivityRecord.java</span><br></pre></td></tr></table></figure>
<p>在onWindowsDrawn方法的最后添加下面的内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解锁后退出开机动画</span></span><br><span class="line"><span class="comment">// phoebe add for exit bootanim start</span></span><br><span class="line"><span class="keyword">if</span> (isHomeIntent(intent) &amp;&amp; shortComponentName != <span class="literal">null</span> &amp;&amp; !shortComponentName.contains(<span class="string">&quot;FallbackHome&quot;</span>)) &#123;</span><br><span class="line">    SystemProperties.set(<span class="string">&quot;service.bootanim.exit&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">    android.util.Log.e(<span class="string">&quot;ActivityRecord&quot;</span>, <span class="string">&quot;real home.....&quot;</span> + shortComponentName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">IBinder</span> <span class="variable">surfaceFlinger</span> <span class="operator">=</span> ServiceManager.getService(<span class="string">&quot;SurfaceFlinger&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (surfaceFlinger != <span class="literal">null</span>) &#123;</span><br><span class="line">            Slog.i(TAG_WM, <span class="string">&quot;******* TELLING SURFACE FLINGER WE ARE BOOTED!&quot;</span>);</span><br><span class="line">            <span class="type">Parcel</span> <span class="variable">data</span> <span class="operator">=</span> Parcel.obtain();</span><br><span class="line">            data.writeInterfaceToken(<span class="string">&quot;android.ui.ISurfaceComposer&quot;</span>);</span><br><span class="line">            surfaceFlinger.transact(IBinder.FIRST_CALL_TRANSACTION, <span class="comment">// BOOT_FINISHED</span></span><br><span class="line">                    data, <span class="literal">null</span>, <span class="number">0</span>);</span><br><span class="line">            data.recycle();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (RemoteException ex) &#123;</span><br><span class="line">        Slog.e(TAG, <span class="string">&quot;Boot completed: SurfaceFlinger is dead!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// phoebe add for exit bootanim end</span></span><br></pre></td></tr></table></figure>
<p><strong>步骤2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim frameworks/base/services/core/java/com/android/server/wm/WindowManagerService.java</span><br></pre></td></tr></table></figure>
<p>注释以下内容：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111443061.png" alt="image-20231211144308708" /></p>
<p><strong>步骤3：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim packages/apps/Settings/src/com/android/settings/FallbackHome.java</span><br></pre></td></tr></table></figure>
<p>注释掉下面的内容：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111445364.png" alt="image-20231211144520230" /></p>
<p>随后编译重新烧写即可：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">source javaenv.sh </span><br><span class="line">java -version </span><br><span class="line">lunch rk3588_s-userdebug</span><br><span class="line">./build.sh -AUCKu</span><br></pre></td></tr></table></figure>
<p>至此，嘉丰伟业的也就解决了。</p>
<h2 id="33568和3588-ubutnu22"><a class="markdownIt-Anchor" href="#33568和3588-ubutnu22"></a> 3.3568和3588 ubutnu22</h2>
<p>昨天其实也在搞，但也仅仅是高了一点点，</p>
<h1 id="1211日工作记录"><a class="markdownIt-Anchor" href="#1211日工作记录"></a> 12.11日工作记录</h1>
<h2 id="1继续研究安卓启动的那个问题"><a class="markdownIt-Anchor" href="#1继续研究安卓启动的那个问题"></a> 1.继续研究安卓启动的那个问题</h2>
<p>问题描述：客户要修改默认的launcher,根据安卓11的修改方式修改之后，发现确实跟客户的描述相同，会先进入默认的桌面：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111257275.png" alt="image-20231211125659596" /></p>
<p>目前来看要解决这个问题我并没有什么好的方法，问题1 为什么同样的方法在安卓11就可以在安卓12就不行呢？我找到的可能的原因是这样的：<br />
<strong>12</strong>带来的一个巨大的变化之一就是导航栏从SystemUI整合到了Launcher3QuickStep，众所周知, 曾经的<strong>SystemUI</strong>才是导航栏的拥有者, 把导航栏交给Launcher这意味着, 以后的Launcher, 不是你想动就能动的了.要替换Launcher的就好好考虑清楚了。</p>
<ol>
<li><strong>移除默认Launcher</strong>：
<ul>
<li>在<code>PRODUCT_PACKAGES</code>中确保没有包含任何默认的Launcher（如<code>Launcher3</code>, <code>Launcher3QuickStep</code>等）。</li>
<li>检查<code>device.mk</code>或类似的设备特定的make文件，确保它们没有包含默认的Launcher。</li>
</ul>
</li>
<li><strong>修改Intent Filter</strong>：
<ul>
<li>确保你的应用的<code>AndroidManifest.xml</code>中声明了正确的intent filters，使其成为默认的Home应用。</li>
</ul>
</li>
<li><strong>更新系统级配置文件</strong>：
<ul>
<li>修改像<code>handheld_system_ext.mk</code>或<code>handheld_product.mk</code>这样的文件，确保你的应用被包括在内，并且没有其他Launcher被包括。</li>
</ul>
</li>
<li><strong>检查启动器覆盖</strong>：
<ul>
<li>确保在你的<code>Android.mk</code>文件中，<code>LOCAL_OVERRIDES_PACKAGES</code>正确地覆盖了所有默认的Launcher应用。</li>
</ul>
</li>
</ol>
<p>操作1：</p>
<p>​	将这些都修改回去了，然后只是没改回去默认添加的apk，但是仍旧是一样的效果，那这是为什么呢，是不是就代表我并没有完全屏蔽Launcher呢</p>
<p>操作2： 删掉3588-android12/packages/apps下的Launcher3，得到的现象是一样的，这证明跟Launcher3无关</p>
<p>操作3：在上面的基础上删掉了和默认自启动的app，卡在了正在启动的动画，目前认为是这里的问题：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frameworks/base/services/core/java/com/android/server/wm/ActivityRecord.java</span><br></pre></td></tr></table></figure>
<p>在onWindowsDrawn方法的最后添加下面的内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解锁后退出开机动画</span></span><br><span class="line"><span class="comment">// phoebe add for exit bootanim start</span></span><br><span class="line"><span class="keyword">if</span> (isHomeIntent(intent) &amp;&amp; shortComponentName != <span class="literal">null</span> &amp;&amp; !shortComponentName.contains(<span class="string">&quot;FallbackHome&quot;</span>)) &#123;</span><br><span class="line">    SystemProperties.set(<span class="string">&quot;service.bootanim.exit&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">    android.util.Log.e(<span class="string">&quot;ActivityRecord&quot;</span>, <span class="string">&quot;real home.....&quot;</span> + shortComponentName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">IBinder</span> <span class="variable">surfaceFlinger</span> <span class="operator">=</span> ServiceManager.getService(<span class="string">&quot;SurfaceFlinger&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (surfaceFlinger != <span class="literal">null</span>) &#123;</span><br><span class="line">            Slog.i(TAG_WM, <span class="string">&quot;******* TELLING SURFACE FLINGER WE ARE BOOTED!&quot;</span>);</span><br><span class="line">            <span class="type">Parcel</span> <span class="variable">data</span> <span class="operator">=</span> Parcel.obtain();</span><br><span class="line">            data.writeInterfaceToken(<span class="string">&quot;android.ui.ISurfaceComposer&quot;</span>);</span><br><span class="line">            surfaceFlinger.transact(IBinder.FIRST_CALL_TRANSACTION, <span class="comment">// BOOT_FINISHED</span></span><br><span class="line">                    data, <span class="literal">null</span>, <span class="number">0</span>);</span><br><span class="line">            data.recycle();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (RemoteException ex) &#123;</span><br><span class="line">        Slog.e(TAG, <span class="string">&quot;Boot completed: SurfaceFlinger is dead!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// phoebe add for exit bootanim end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frameworks/base/services/core/java/com/android/server/wm/WindowManagerService.java</span><br></pre></td></tr></table></figure>
<p>注释以下内容：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111443061.png" alt="image-20231211144308708" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">packages/apps/Settings/src/com/android/settings/FallbackHome.java</span><br></pre></td></tr></table></figure>
<p>注释掉下面的内容：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111445364.png" alt="image-20231211144520230" /></p>
<p>测试发现确实是桌面动画引起来的，经过上面的操作，发现测试没有问题，就先这样了，下面继续去搞那个客户的。</p>
<h2 id="2nfc继续搞"><a class="markdownIt-Anchor" href="#2nfc继续搞"></a> 2.nfc继续搞</h2>
<p>客户发来了一个外设模块，这里总共是八根线，现在来确定一下对应关系</p>
<table>
<thead>
<tr>
<th>网络标号</th>
<th>引脚名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>SCK</td>
<td>I2C3_SDA_M0</td>
</tr>
<tr>
<td>SDA</td>
<td>I2C3_SCL_M0</td>
</tr>
<tr>
<td>IRQ</td>
<td>GPIO1_PB0</td>
</tr>
<tr>
<td>VEN</td>
<td>GPIO1_PB1</td>
</tr>
<tr>
<td>DWL</td>
<td>GPIO1_PB2</td>
</tr>
<tr>
<td>PVDD</td>
<td>3.3</td>
</tr>
<tr>
<td>GND</td>
<td>GND</td>
</tr>
<tr>
<td>VBAT</td>
<td>3.3</td>
</tr>
</tbody>
</table>
<p>连接好之后，用源码和他们的设备树进行测试，测试结果如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111614666.png" alt="image-20231211161423617" /></p>
<p>读卡结果如上图所示：</p>
<p>GPIO读卡前的状态如下</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111614612.png" alt="image-20231211161402479" /></p>
<table>
<thead>
<tr>
<th>IRQ</th>
<th>GPIO1_PB0</th>
<th>低</th>
</tr>
</thead>
<tbody>
<tr>
<td>VEN</td>
<td>GPIO1_PB1</td>
<td>高</td>
</tr>
<tr>
<td>DWL</td>
<td>GPIO1_PB2</td>
<td>低</td>
</tr>
</tbody>
</table>
<p>在读取到之后</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111616995.png" alt="image-20231211161655924" /></p>
<table>
<thead>
<tr>
<th>IRQ</th>
<th>GPIO1_PB0</th>
<th>高</th>
</tr>
</thead>
<tbody>
<tr>
<td>VEN</td>
<td>GPIO1_PB1</td>
<td>高</td>
</tr>
<tr>
<td>DWL</td>
<td>GPIO1_PB2</td>
<td>低</td>
</tr>
</tbody>
</table>
<p>状态确实发生了变化，现在来看客户底板的那三个引脚。</p>
<table>
<thead>
<tr>
<th>IRQ</th>
<th>DVP_PWREN0_H_GPIO0_B0</th>
</tr>
</thead>
<tbody>
<tr>
<td>VEN</td>
<td>VGA_HPDIN_GPIO0_C0</td>
</tr>
<tr>
<td>DWL</td>
<td>PWM_FAN  ==LCD1_PWREN_H_GPIO0_C5==</td>
</tr>
</tbody>
</table>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111628051.png" alt="image-20231211162845031" /></p>
<p>然后开始修改设备树。</p>
<p><strong>步骤1：GPIO0_B0复用取消</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rk3568.dtsi</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111650958.png" alt="image-20231211165003826" /></p>
<p><strong>步骤2 取消GPIO0_C0复用</strong></p>
<p>只在使用VGA的情况下有用到，这里忽略即可</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111651872.png" alt="image-20231211165155832" /></p>
<p><strong>步骤3 取消GPIO0_C5复用</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rk3568-evb.dtsi</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111653619.png" alt="image-20231211165306410" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111654010.png" alt="image-20231211165453957" /></p>
<p>启动之后，电平如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111704962.png" alt="image-20231211170442788" /></p>
<h1 id="129日工作记录"><a class="markdownIt-Anchor" href="#129日工作记录"></a> 12.9日工作记录</h1>
<h2 id="1继续ubuntu优化脚本"><a class="markdownIt-Anchor" href="#1继续ubuntu优化脚本"></a> 1.继续ubuntu优化脚本</h2>
<p>ubuntu的优化倒是搞完了，每个步骤我都写了详细的中问注释，如下所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312090927358.png" alt="image-20231209092704590" /></p>
<p>但在这个过程中依然是有了一些想法，让我感觉有些疑惑。现在的ubuntu20 的大体框架以及出来了。</p>
<h2 id="23588-ubuntu20"><a class="markdownIt-Anchor" href="#23588-ubuntu20"></a> 2.3588 ubuntu20</h2>
<p>这次直接以3568的uubntu20为蓝本进行修改。</p>
<p>1.修改开机启动的打印</p>
<p>2.摄像头的iqfile文件</p>
<p>3.GPU的驱动固件</p>
<p>4.RGA要改</p>
<p>5.RKAIQ要改</p>
<p>6.rkmpp-v4l2</p>
<p>ubuntu22 debian11 debian12</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">chmod 0666 /dev/mpp_service</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;type=dec&quot;</span><br><span class="line">    echo &quot;codecs=VP8:VP9:H.264:H.265:AV1&quot;</span><br><span class="line">    echo &quot;max-width=7680&quot;</span><br><span class="line">    echo &quot;max-height=4320&quot;</span><br><span class="line">&#125; &gt; /dev/video-dec0</span><br><span class="line">echo enc &gt; /dev/video-enc0</span><br><span class="line">chmod 0660 /dev/video-*</span><br><span class="line">chown root:video /dev/video-*</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod 0666 /dev/mpp_service</span><br><span class="line">echo dec &gt; /dev/video-dec0</span><br><span class="line">echo enc &gt; /dev/video-enc0</span><br><span class="line">chmod 0660 /dev/video-*</span><br><span class="line">chown root:video /dev/video-*</span><br></pre></td></tr></table></figure>
<p>7.pulse 要改</p>
<h2 id="33588-邮票孔安卓12替换launcher"><a class="markdownIt-Anchor" href="#33588-邮票孔安卓12替换launcher"></a> 3.3588 邮票孔安卓12替换launcher</h2>
<h3 id="1取消原生桌面"><a class="markdownIt-Anchor" href="#1取消原生桌面"></a> 1.取消原生桌面：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">build/make/target/product/handheld_system_ext.mk</span><br><span class="line">Launcher3QuickStep</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312091555769.png" alt="image-20231209155544647" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3588-android12/device/rockchip/common/device.mk</span><br><span class="line">PRODUCT_PACKAGES += Launcher3QuickStepGo</span><br><span class="line">Launcher3QuickStep</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312091544722.png" alt="image-20231209154408563" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">device/generic/common/mgsi/mgsi_product.mk</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312091546515.png" alt="image-20231209154601429" /></p>
<h3 id="2内置app并设置成launcher"><a class="markdownIt-Anchor" href="#2内置app并设置成launcher"></a> 2.内置app并设置成launcher</h3>
<p>在安卓源码下的packages\apps下创建文件夹（名称必须和APK同名），并把apk放进创建的文件夹里面去。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312091556137.jpg" alt="img" /></p>
<p>在创建的文件夹下创建一个Android.mk文件，内容:</p>
<figure class="highlight mk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">LOCAL_PATH := <span class="variable">$(<span class="built_in">call</span> my-<span class="built_in">dir</span>)</span></span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(CLEAR_VARS)</span></span><br><span class="line">LOCAL_MODULE := hmkq3568s_code_37_1.0.17_11_28_20_38_47</span><br><span class="line">LOCAL_MODULE_TAGS := optional</span><br><span class="line">LOCAL_SRC_FILES := <span class="variable">$(LOCAL_MODULE)</span>.apk</span><br><span class="line">LOCAL_MODULE_CLASS := APPS</span><br><span class="line">LOCAL_MODULE_SUFFIX := <span class="variable">$(COMMON_ANDROID_PACKAGE_SUFFIX)</span></span><br><span class="line">LOCAL_PRIVILEGED_MODULE :=true</span><br><span class="line">LOCAL_OVERRIDES_PACKAGES := Home Launcher2 Launcher3 Launcher3QuickStep   </span><br><span class="line">LOCAL_CERTIFICATE := platform</span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(BUILD_PREBUILT)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312091559307.png" alt="image-20231209155950136" /></p>
<h3 id="3将内置的app设置成launcher"><a class="markdownIt-Anchor" href="#3将内置的app设置成launcher"></a> 3.将内置的app设置成launcher</h3>
<p>打开安卓源码下的这个文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3588-android12/build/make/target/product/handheld_product.mk</span><br></pre></td></tr></table></figure>
<p>将自己的app加到PRODUCT_PACKAGES列表</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312091601937.png" alt="image-20231209160141718" /></p>
<h3 id="4删掉开机动画"><a class="markdownIt-Anchor" href="#4删掉开机动画"></a> 4.删掉开机动画</h3>
<p>测试发现，经过上面修改之后会在开机之后仍旧先加载到桌面，随后才进入相应的app，又经过测试发现这是开机动画的影响，所以仍旧需要下面的操作关掉启动中的动画。</p>
<p><strong>步骤一：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim frameworks/base/services/core/java/com/android/server/wm/ActivityRecord.java</span><br></pre></td></tr></table></figure>
<p>在onWindowsDrawn方法的最后添加下面的内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解锁后退出开机动画</span></span><br><span class="line"><span class="comment">// phoebe add for exit bootanim start</span></span><br><span class="line"><span class="keyword">if</span> (isHomeIntent(intent) &amp;&amp; shortComponentName != <span class="literal">null</span> &amp;&amp; !shortComponentName.contains(<span class="string">&quot;FallbackHome&quot;</span>)) &#123;</span><br><span class="line">    SystemProperties.set(<span class="string">&quot;service.bootanim.exit&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">    android.util.Log.e(<span class="string">&quot;ActivityRecord&quot;</span>, <span class="string">&quot;real home.....&quot;</span> + shortComponentName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">IBinder</span> <span class="variable">surfaceFlinger</span> <span class="operator">=</span> ServiceManager.getService(<span class="string">&quot;SurfaceFlinger&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (surfaceFlinger != <span class="literal">null</span>) &#123;</span><br><span class="line">            Slog.i(TAG_WM, <span class="string">&quot;******* TELLING SURFACE FLINGER WE ARE BOOTED!&quot;</span>);</span><br><span class="line">            <span class="type">Parcel</span> <span class="variable">data</span> <span class="operator">=</span> Parcel.obtain();</span><br><span class="line">            data.writeInterfaceToken(<span class="string">&quot;android.ui.ISurfaceComposer&quot;</span>);</span><br><span class="line">            surfaceFlinger.transact(IBinder.FIRST_CALL_TRANSACTION, <span class="comment">// BOOT_FINISHED</span></span><br><span class="line">                    data, <span class="literal">null</span>, <span class="number">0</span>);</span><br><span class="line">            data.recycle();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (RemoteException ex) &#123;</span><br><span class="line">        Slog.e(TAG, <span class="string">&quot;Boot completed: SurfaceFlinger is dead!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// phoebe add for exit bootanim end</span></span><br></pre></td></tr></table></figure>
<p><strong>步骤2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim frameworks/base/services/core/java/com/android/server/wm/WindowManagerService.java</span><br></pre></td></tr></table></figure>
<p>注释以下内容：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111443061.png" alt="image-20231211144308708" /></p>
<p><strong>步骤3：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim packages/apps/Settings/src/com/android/settings/FallbackHome.java</span><br></pre></td></tr></table></figure>
<p>注释掉下面的内容：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312111445364.png" alt="image-20231211144520230" /></p>
<p>随后编译重新烧写即可：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">source javaenv.sh </span><br><span class="line">java -version </span><br><span class="line">lunch rk3588_s-userdebug</span><br><span class="line">./build.sh -AUCKu</span><br></pre></td></tr></table></figure>
<p>学到了一个scp命令，我发现这样还挺快：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp chai@192.168.1.123:/home/chai/Android/3588-android12/rockdev/Image-rk3588_s/update.img /e/01_烧写工具/RKDevTool_Release_v2.84/RKDevTool_Release_v2.84</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312091735220.png" alt="image-20231209173511174" /></p>
<h2 id="4ubuntu22"><a class="markdownIt-Anchor" href="#4ubuntu22"></a> 4.ubuntu22</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">## for panfork</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/mali-g610-firmware_1.0.0-1_all.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libgbm1_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libgbm-dev_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libglapi-mesa_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libgl1-mesa-dri_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libegl-mesa0_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line">dpkg_install_deb_chroot &quot;$EXTER/cache/sources/rk3588_packages_jammy/mesa/libglx-mesa0_23.0~panfork~csf~git221210.120202c6757~j+3_arm64.deb&quot;</span><br><span class="line"># Improve mesa performance</span><br><span class="line">echo &quot;PAN_MESA_DEBUG=gofaster&quot; &gt;&gt; $SDCARD/etc/environment</span><br></pre></td></tr></table></figure>
<h3 id=""><a class="markdownIt-Anchor" href="#"></a> </h3>
<h1 id="128日工作记录"><a class="markdownIt-Anchor" href="#128日工作记录"></a> 12.8日工作记录</h1>
<h2 id="1nfc适配"><a class="markdownIt-Anchor" href="#1nfc适配"></a> 1.nfc适配</h2>
<p>今天先将这个客户的nfc内容进行一下整理：</p>
<p>==已知条件==：</p>
<ol>
<li>
<p>客户在我们的底板上移植测试成功了NFC，并且提供了在七寸LVDS上测试成功的源码，客户的测试结果如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312081000024.png" alt="image-20231208100057538" /></p>
</li>
<li>
<p>4.3寸屏幕的源码，触摸和镜像进行翻转，适配了5寸屏</p>
</li>
</ol>
<p>总结：我适配的4.3寸屏幕只对设备树进行了修改，按道理来说是不可能存在问题的，没办法了，目前我认为问题出在irq上，其他的问题还好。先去做我的deb包吧。</p>
<h2 id="2ubuntu22-deb包的制作"><a class="markdownIt-Anchor" href="#2ubuntu22-deb包的制作"></a> 2.ubuntu22 deb包的制作</h2>
<p>其实ubuntu20也需要重新做，但是也还好吧，就这样吧，目前的想法是能用就行，而且要能复现出来。</p>
<p>步骤一：先整理ubuntu20 的构建文件，后面的一切都要以ubuntu20 为蓝本</p>
<h1 id="126日工作记录"><a class="markdownIt-Anchor" href="#126日工作记录"></a> 12.6日工作记录</h1>
<h2 id="1docker镜像的构建"><a class="markdownIt-Anchor" href="#1docker镜像的构建"></a> 1.docker镜像的构建</h2>
<p>先将所有的docker镜像制作完成。</p>
<p>rk3568</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker build -f Dockerfile -t ubuntu20_rk3568 .</span><br><span class="line">docker build -f Dockerfile -t ubuntu22_rk3568 .</span><br><span class="line">docker build -f Dockerfile -t debian10_rk3568 .</span><br><span class="line">docker build -f Dockerfile -t debian11_rk3568 .</span><br><span class="line">docker build -f Dockerfile -t debian12_rk3568 .</span><br></pre></td></tr></table></figure>
<p>rk3588</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker build -f Dockerfile -t ubuntu20_rk3588 .</span><br><span class="line">docker build -f Dockerfile -t ubuntu22_rk3588 .</span><br><span class="line">docker build -f Dockerfile -t debian11_rk3588 .</span><br><span class="line">docker build -f Dockerfile -t debian12_rk3588 .</span><br></pre></td></tr></table></figure>
<p>打包docker</p>
<p>rk3568</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker save -o ubuntu20_rk3568.tar.gz ubuntu20_rk3568</span><br><span class="line">docker save -o ubuntu22_rk3568.tar.gz ubuntu22_rk3568</span><br><span class="line">docker save -o debian10_rk3568.tar.gz debian10_rk3568</span><br><span class="line">docker save -o debian11_rk3568.tar.gz debian11_rk3568</span><br><span class="line">docker save -o debian12_rk3568.tar.gz debian12_rk3568</span><br></pre></td></tr></table></figure>
<p>rk3588</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker save -o ubuntu20_rk3588.tar.gz ubuntu20_rk3588</span><br><span class="line">docker save -o ubuntu22_rk3588.tar.gz ubuntu22_rk3588</span><br><span class="line">docker save -o debian11_rk3588.tar.gz debian11_rk3588</span><br><span class="line">docker save -o debian12_rk3588.tar.gz debian12_rk3588</span><br></pre></td></tr></table></figure>
<p>搞成zip的压缩</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">zip ubuntu20.zip ubuntu20_rk3568.tar.gz</span><br><span class="line">zip ubuntu22.zip ubuntu22_rk3568.tar.gz</span><br><span class="line">zip debian10.zip debian10_rk3568.tar.gz</span><br><span class="line">zip debian11.zip debian11_rk3568.tar.gz</span><br><span class="line">zip debian12.zip debian12_rk3568.tar.gz</span><br><span class="line"></span><br><span class="line">zip ubuntu20.zip ubuntu20_rk3588.tar.gz</span><br><span class="line">zip ubuntu22.zip ubuntu22_rk3588.tar.gz</span><br><span class="line">zip debian11.zip debian11_rk3588.tar.gz</span><br><span class="line">zip debian12.zip debian12_rk3588.tar.gz</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">目录列表</span></span><br><span class="line">directories=(&quot;01_debian10&quot; &quot;02_debian11&quot; &quot;03_debian12&quot; &quot;04_ubuntu20&quot; &quot;05_ubuntu22&quot;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">循环处理每个目录</span></span><br><span class="line">for dir in &quot;$&#123;directories[@]&#125;&quot;</span><br><span class="line">do</span><br><span class="line">    zip -r &quot;$&#123;dir&#125;.zip&quot; &quot;$dir&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">目录列表</span></span><br><span class="line">directories=(&quot;01_debian11&quot; &quot;02_debian12&quot; &quot;03_ubuntu20&quot; &quot;04_ubuntu22&quot;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">循环处理每个目录</span></span><br><span class="line">for dir in &quot;$&#123;directories[@]&#125;&quot;</span><br><span class="line">do</span><br><span class="line">    zip -r &quot;$&#123;dir&#125;.zip&quot; &quot;$dir&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>行了，现在的docker镜像算是搞完了，然后就开始搞ubuntu22了。</p>
<h2 id="2ubuntu22-deb包的构建"><a class="markdownIt-Anchor" href="#2ubuntu22-deb包的构建"></a> 2.ubuntu22 deb包的构建</h2>
<h1 id="125日工作记录"><a class="markdownIt-Anchor" href="#125日工作记录"></a> 12.5日工作记录</h1>
<h2 id="1-内核驱动程序"><a class="markdownIt-Anchor" href="#1-内核驱动程序"></a> 1 内核驱动程序</h2>
<p>NFC Android堆栈使用nxpnfc内核驱动程序与NXP NCI NFC控制器进行通信。该驱动程序可以从以下存储库获取：<a target="_blank" rel="noopener" href="https://github.com/NXPNFCLinux/nxpnfc%E3%80%82">https://github.com/NXPNFCLinux/nxpnfc。</a></p>
<h3 id="11-驱动程序详细信息"><a class="markdownIt-Anchor" href="#11-驱动程序详细信息"></a> 1.1 驱动程序详细信息</h3>
<p>nxpnfc内核驱动程序通过I2C或SPI物理接口提供与NFC控制器的通信。当加载到内核时，该驱动程序通过名为/dev/nxpnfc的设备节点公开与NFC控制器的接口。该内核驱动程序与广泛范围的NXP NFC控制器兼容，源代码中解释了特定的NXP引用。提供的源代码允许根据内核配置构建I2C和SPI版本的内核驱动程序。</p>
<h3 id="12-获取源代码"><a class="markdownIt-Anchor" href="#12-获取源代码"></a> 1.2 获取源代码</h3>
<p>将nxpnfc存储库克隆到内核目录中，替换现有的实现：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf drivers/nfc</span><br><span class="line">git clone https://github.com/NXPNFCLinux/nxpnfc.git drivers/nfc</span><br></pre></td></tr></table></figure>
<p>这将在drivers/nfc文件夹中包含以下文件：<br />
• <a target="_blank" rel="noopener" href="http://README.md">README.md</a>：存储库信息<br />
• Makefile：驱动程序主要的Makefile文件<br />
• Kconfig：驱动程序的配置文件<br />
• LICENSE：驱动程序的许可条款<br />
• i2c_devicetree.txt：I2C设备树定义示例<br />
• spi_devicetree.txt：SPI设备树定义示例<br />
• nfc子文件夹包含：</p>
<p>Makefile：</p>
<p>common.c：通用驱动程序实现</p>
<p>common.h：通用驱动程序接口定义</p>
<p>i2c.c：特定于I2C的驱动程序实现</p>
<p>i2c.h：特定于I2C的驱动程序接口定义</p>
<p>spi.c：特定于SPI的驱动程序实现</p>
<p>spi.h：特定于SPI的驱动程序接口定义</p>
<p>为了方便这里已经将拉取好的下载了下来，如下图所示：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041530293.png" alt="image-20231204153016150" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041701347.png" alt="image-20231204170159295" /></p>
<h3 id="13-将驱动程序包含到内核中"><a class="markdownIt-Anchor" href="#13-将驱动程序包含到内核中"></a> 1.3 将驱动程序包含到内核中</h3>
<p>将驱动程序包含到内核中，并在设备启动时加载，需要使用设备树。在根据下面的示例更新设备树定义后，必须重新构建与平台相关的设备树。</p>
<h4 id="131-i2c版本"><a class="markdownIt-Anchor" href="#131-i2c版本"></a> 1.3.1 I2C版本</h4>
<p>根据平台上硬件集成情况，必须根据I2C地址（以下示例中为0x28）和GPIO分配进行适配。<br />
以下是要添加到平台设备树文件（.dts文件，例如位于kernel/arch/arm64/boot/dts/rockchip内核子文件夹下的arm平台）的定义示例。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rk3568-evb1-ddr4-v10.dts</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&amp;i2c1 &#123;</span><br><span class="line">    status = &quot;okay&quot;;</span><br><span class="line">        nxpnfc: nxpnfc@28 &#123;</span><br><span class="line">        compatible = &quot;nxp,nxpnfc&quot;;</span><br><span class="line">        status = &quot;ok&quot;;</span><br><span class="line">        reg = &lt;0x28&gt;;</span><br><span class="line">        clock-frequency = &lt;100000&gt;;</span><br><span class="line">        nxp,nxpnfc-irq = &lt;&amp;gpio0 RK_PB0 0&gt;;  8</span><br><span class="line">        nxp,nxpnfc-ven = &lt;&amp;gpio0 RK_PC0 0&gt;; 16</span><br><span class="line">        nxp,nxpnfc-fw-dwnld = &lt;&amp;gpio0 RK_PC5 0&gt;;  21</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041600994.png" alt="image-20231204160009875" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041702556.png" alt="image-20231204170250260" /></p>
<p>修改1：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041732985.png" alt="image-20231204173221891" /></p>
<p>这个时钟和0_B0复用，所以这里注释掉。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041738199.png" alt="image-20231204173858951" /></p>
<p>0C5这里也注释掉</p>
<h4 id="132-spi版本忽略"><a class="markdownIt-Anchor" href="#132-spi版本忽略"></a> 1.3.2 SPI版本(忽略)</h4>
<p>根据平台上硬件集成情况，必须根据SPI句柄（以下示例中为0）和GPIO分配进行适配。<br />
以下是要添加到平台设备树文件（.dts文件，例如位于arch/arm/boot/dts内核子文件夹下的arm平台）的定义示例。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">spi2: spi@ffd68000 &#123;</span><br><span class="line">...</span><br><span class="line">    status = &quot;ok&quot;;</span><br><span class="line">    nxpnfc@0 &#123;</span><br><span class="line">    compatible = &quot;nxp,nxpnfc&quot;;</span><br><span class="line">    reg = &lt;0&gt;;</span><br><span class="line">    nxp,nxpnfc-irq = &lt;&amp;gpio26 0 0&gt;;</span><br><span class="line">    nxp,nxpnfc-ven = &lt;&amp;gpio26 2 0&gt;;</span><br><span class="line">    nxp,nxpnfc-fw-dwnld = &lt;&amp;gpio26 4 0&gt;;</span><br><span class="line">    spi-max-frequency = &lt;7000000&gt;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="14-构建驱动程序"><a class="markdownIt-Anchor" href="#14-构建驱动程序"></a> 1.4 构建驱动程序</h3>
<p>通过menuconfig过程将目标驱动程序（I2C或SPI版本）包含到构建中，作为内置（&lt;*&gt;）：<br />
设备驱动程序 —&gt;<br />
&lt; &gt; NXP-NFCC的NFC I2C从设备驱动程序<br />
&lt; &gt; NXP-NFCC的NFC SPI从设备驱动程序<br />
重新构建完整的内核，驱动程序将包含在内核映像中。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041705357.png" alt="image-20231204170504309" /></p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041705468.png" alt="image-20231204170547198" /></p>
<h2 id="2-android-11"><a class="markdownIt-Anchor" href="#2-android-11"></a> 2 Android 11</h2>
<p>以下步骤是基于NXP在<a target="_blank" rel="noopener" href="https://github.com/NXPNFCLinux/">https://github.com/NXPNFCLinux/</a> nxpnfc_android11存储库中提供的Android NFC交付内容。当前发布版本基于Android AOSP版本11.0.0_r3，移植到其他Android 11子版本可能需要对API进行轻微调整（在编译时检测到）。</p>
<h3 id="21-第一步获取nxp的android-nfc交付内容"><a class="markdownIt-Anchor" href="#21-第一步获取nxp的android-nfc交付内容"></a> 2.1 第一步：获取NXP的Android NFC交付内容</h3>
<p>将存储库克隆到AOSP源代码目录中：\</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/NXPNFCLinux/nxpnfc_android11.git &#123;ANDROID_BUILD_TOP&#125;/vendor/nxp/nfc</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041604754.png" alt="image-20231204160454621" /></p>
<h3 id="22-第二步安装nxp-nci交付内容"><a class="markdownIt-Anchor" href="#22-第二步安装nxp-nci交付内容"></a> 2.2 第二步：安装NXP-NCI交付内容</h3>
<p>运行安装脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vendor/nxp/nfc/install_NFC.sh</span><br></pre></td></tr></table></figure>
<p>这将执行以下操作：<br />
• 对AOSP system/nfc实现进行修补，以添加PN7160的特定支持<br />
• 对AOSP hardware/nxp/nfc实现进行修补，以添加PN7160的特定支持<br />
• 对AOSP packages/apps/Nfc文件夹进行修补，以添加对PN7160扩展的支持<br />
• 对AOSP frameworks/base定义进行修补，以添加特定API<br />
• 对AOSP frameworks/native定义进行修补，以添加特定权限<br />
• 对vendor/nxp文件夹进行修补，以添加T4T NDEF模拟的特定API</p>
<h3 id="23-第3步将nfc添加到构建中"><a class="markdownIt-Anchor" href="#23-第3步将nfc添加到构建中"></a> 2.3 第3步：将NFC添加到构建中</h3>
<p><a target="_blank" rel="noopener" href="http://xn--device-200k.mk">在device.mk</a> makefile（例如device/brand/platform/device.mk）中，包含特定的makefile：<br />
$(call inherit-product, vendor/nxp/nfc/device-nfc.mk)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rk_android11.0_sdk/device/rockchip/rk356x/device.mk</span><br><span class="line">$(call inherit-product, vendor/nxp/nfc/device-nfc.mk)</span><br></pre></td></tr></table></figure>
<p>在BoardConfig.mk文件中（例如device/brand/platform/BoardConfig.mk），包含特定的makefile<br />
-include vendor/nxp/nfc/BoardConfigNfc.mk</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rk_android11.0_sdk/device/rockchip/rk356x/BoardConfig.mk</span><br><span class="line">-include vendor/nxp/nfc/BoardConfigNfc.mk</span><br></pre></td></tr></table></figure>
<h3 id="24-第4步添加固件库"><a class="markdownIt-Anchor" href="#24-第4步添加固件库"></a> 2.4 第4步：添加固件库</h3>
<p>Android NFC堆栈集成了对NFC控制器固件的支持。为了允许更新机制，更新的固件版本必须以库（或二进制）的形式包含在目标设备上。NXP的NFC控制器固件的Arm架构库通过专用存储库<a target="_blank" rel="noopener" href="https://github.com/NXP/nfc-NXPNFCC_FW">https://github.com/NXP/nfc-NXPNFCC_FW</a> 提供。<br />
使用以下命令从存储库中检索PN7160固件库文件，并放置在专用子文件夹中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wget -r -np -nd -P $&#123;ANDROID_BUILD_TOP&#125;/vendor/nxp/pn7160/firmware/64-bit/ https://github.com/NXP/nfc-NXPNFCC_FW/tree/master/InfraFW/pn7160/64-bit/libpn7160_fw.so</span><br><span class="line">$ wget -r -np -nd -P $&#123;ANDROID_BUILD_TOP&#125;/vendor/nxp/pn7160/firmware/32-bit/ https://github.com/NXP/nfc-NXPNFCC_FW/tree/master/InfraFW/pn7160/32-bit/libpn7160_fw.so</span><br></pre></td></tr></table></figure>
<p>nxp目录解压即可：</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202312041614227.png" alt="image-20231204161416163" />这将创建包含32位和64位Arm架构库的vendor/nxp/pn7160/firmware子文件夹。这些库将在构建Android映像时包含在映像中（在vendor/nxp/nfc/device-nfc.mk中定义)。</p>
<h3 id="25-第5步构建和安装nfc"><a class="markdownIt-Anchor" href="#25-第5步构建和安装nfc"></a> 2.5 第5步：构建和安装NFC</h3>
<p>将Android映像构建并刷入目标设备（引导映像必须包含内核驱动程序，如第4节所述）。</p>
<h3 id="26-第6步验证nfc功能"><a class="markdownIt-Anchor" href="#26-第6步验证nfc功能"></a> 2.6 第6步：验证NFC功能</h3>
<p>在Android的“设置”菜单中，检查NFC是否打开。NFC功能应该已经启动，可以用于发现NFC标签或与远程NFC设备交换数据。<br />
要进一步测试NFC读取器功能，可以从Google Play商店免费下载NXP的NFC TagInfo和NFC TagWriter这两个应用程序。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-08_shell编程学习/2 shell编程第二次学习"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/02/02/08_shell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/2%20shell%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%AD%A6%E4%B9%A0/"
    >shell编程 第二次学习</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/02/02/08_shell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/2%20shell%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time datetime="2024-02-02T12:00:19.000Z" itemprop="datePublished">2024-02-02</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/shell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/">shell编程学习</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>​	之前已经学过一次了，但是呢自我感觉还是什么都不会，怎么会这样呢？感觉是并没有真正的理解，以及没有进行足够多的训练，应该等我讲起来的时候，应该就会好很多。</p>
<h1 id="shell基础知识"><a class="markdownIt-Anchor" href="#shell基础知识"></a> shell基础知识</h1>
<h2 id="1-shell基础"><a class="markdownIt-Anchor" href="#1-shell基础"></a> 1 shell基础</h2>
<p>​	常见的shell解释器</p>
<ol>
<li>bash</li>
<li>sh</li>
<li>csh</li>
<li>tcsh</li>
</ol>
<p>解释器负责将用户的指令翻译为内核可以识别的指令</p>
<p>通过usermod 和chsh可以更改登录shell</p>
<h2 id="2-bash特性"><a class="markdownIt-Anchor" href="#2-bash特性"></a> 2 bash特性</h2>
<p>快捷键、TAB补全</p>
<p>命令历史（history）</p>
<p>命令别名（aliase）</p>
<p>标准输入与输出重定向（&gt;、 &gt;&gt;、2&gt;、2&gt;&gt;、&amp;&gt;）</p>
<p>管道</p>
<h2 id="2-脚本设计和运行"><a class="markdownIt-Anchor" href="#2-脚本设计和运行"></a> 2 脚本设计和运行</h2>
<h2 id="3-变量"><a class="markdownIt-Anchor" href="#3-变量"></a> 3 变量</h2>
<h2 id="4-变量扩展应用"><a class="markdownIt-Anchor" href="#4-变量扩展应用"></a> 4 变量扩展应用</h2>
<h2 id="5-shell中的运算"><a class="markdownIt-Anchor" href="#5-shell中的运算"></a> 5 shell中的运算</h2>
<h2 id="6-综合案例"><a class="markdownIt-Anchor" href="#6-综合案例"></a> 6 综合案例</h2>
<h1 id="判断和循环语句"><a class="markdownIt-Anchor" href="#判断和循环语句"></a> 判断和循环语句</h1>
<h1 id="函数与终端-字符串处理"><a class="markdownIt-Anchor" href="#函数与终端-字符串处理"></a> 函数与终端、字符串处理</h1>
<h1 id="正则表达式-sed文本编辑器"><a class="markdownIt-Anchor" href="#正则表达式-sed文本编辑器"></a> 正则表达式 SED文本编辑器</h1>
<h1 id="awk数据过滤和数据分析"><a class="markdownIt-Anchor" href="#awk数据过滤和数据分析"></a> AWK数据过滤和数据分析</h1>
<h1 id="脚本综合案例"><a class="markdownIt-Anchor" href="#脚本综合案例"></a> 脚本综合案例</h1>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-01_生活/02_反思 (24年1月及之前)"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/01/31/01_%E7%94%9F%E6%B4%BB/02_%E5%8F%8D%E6%80%9D%20(24%E5%B9%B41%E6%9C%88%E5%8F%8A%E4%B9%8B%E5%89%8D)/"
    >反思(24年1月及之前)</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/01/31/01_%E7%94%9F%E6%B4%BB/02_%E5%8F%8D%E6%80%9D%20(24%E5%B9%B41%E6%9C%88%E5%8F%8A%E4%B9%8B%E5%89%8D)/" class="article-date">
  <time datetime="2024-01-31T13:26:56.000Z" itemprop="datePublished">2024-01-31</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  Here's something encrypted, password is required to continue reading. 
      <a class="article-more-link" href="/2024/01/31/01_%E7%94%9F%E6%B4%BB/02_%E5%8F%8D%E6%80%9D%20(24%E5%B9%B41%E6%9C%88%E5%8F%8A%E4%B9%8B%E5%89%8D)/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-08_shell编程学习/5 Linux基础"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/01/30/08_shell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/5%20Linux%E5%9F%BA%E7%A1%80/"
    >Linux基础</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/01/30/08_shell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/5%20Linux%E5%9F%BA%E7%A1%80/" class="article-date">
  <time datetime="2024-01-30T13:57:19.000Z" itemprop="datePublished">2024-01-30</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/shell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/">shell编程学习</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，并将其整理成网络，并分享出去，与更多志同道合的人共同进步==</p>
<p>==无论你最终要成为一个怎样的人，蛋清千万记住，时光在飞逝==</p>
<h1 id="linux-目录结构"><a class="markdownIt-Anchor" href="#linux-目录结构"></a> Linux 目录结构</h1>
<h2 id="11-linux目录结构"><a class="markdownIt-Anchor" href="#11-linux目录结构"></a> 1.1 Linux目录结构</h2>
<p>​	在Linux系统中，文件系统采用了树型结构，以一个称为根目录的起始点开始，所有文件和目录都位于根目录之下。根目录在Linux中表示为<code>/</code>（斜线），是整个文件系统的顶级目录。从根目录向下，可以创建更多的目录和文件，形成一个层次结构。</p>
<p>​	在Windows系统中，每个逻辑驱动器通常会被分配一个盘符，如C盘、D盘、E盘等。每个盘符可以拥有自己的根目录和文件系统。这使得在Windows系统中可以直接访问不同的逻辑驱动器，并且它们之间是相互独立的。</p>
<h2 id="12-linux路径描述方式"><a class="markdownIt-Anchor" href="#12-linux路径描述方式"></a> 1.2 Linux路径描述方式</h2>
<p>​	在Linux系统中，路径之间的层级关系使用斜线（/）来表示。例如，<code>/home/user/Documents</code> 表示位于根目录下的 <code>home</code> 目录中的 <code>user</code> 目录中的 <code>Documents</code> 目录。</p>
<p>在Windows系统中，路径之间的层级关系使用反斜线（\）来表示。例如，<code>C:\Users\Username\Documents</code> 表示位于 C 盘下的 <code>Users</code> 目录中的 <code>Username</code> 目录中的 <code>Documents</code> 目录。</p>
<p>在Linux系统中，斜线（/）具有以下含义：</p>
<ol>
<li>根目录：当斜线（/）出现在路径的开头时，表示根目录。根目录是整个文件系统的顶级目录，是文件系统的起点。所有其他目录和文件都位于根目录之下。例如，<code>/home/user/Documents</code> 表示位于根目录的 <code>home</code> 目录中的 <code>user</code> 目录中的 <code>Documents</code> 目录。</li>
<li>层次关系：当斜线（/）出现在路径的中间或末尾时，表示路径中不同层级之间的关系。斜线用于分隔不同的目录或文件名，并表示它们之间的层次关系。例如，<code>/home/user/Documents</code> 中的斜线表示 <code>home</code> 目录位于根目录下，<code>user</code> 目录位于 <code>home</code> 目录下，<code>Documents</code> 目录位于 <code>user</code> 目录下。</li>
</ol>
<h1 id="相对路径绝对路径"><a class="markdownIt-Anchor" href="#相对路径绝对路径"></a> 相对路径绝对路径</h1>
<p>绝对路径是一种路径写法，它以根目录作为起点来描述文件或目录的位置。绝对路径始终以斜线（/）开头。通过绝对路径，您可以准确地指定文件或目录在文件系统中的位置，不受当前工作目录的影响。例如，<code>/home/user/Documents/file.txt</code> 是一个绝对路径，它从根目录开始，描述了文件 <code>file.txt</code> 在 <code>Documents</code> 目录中的位置。</p>
<p>相对路径是另一种路径写法，它以当前工作目录为起点来描述文件或目录的位置。相对路径不以斜线开头，而是从当前工作目录开始描述路径的层级关系。相对路径的解析依赖于当前工作目录的位置。例如，如果当前工作目录是 <code>/home/user</code>，那么相对路径 <code>Documents/file.txt</code> 表示文件 <code>file.txt</code> 在 <code>Documents</code> 目录中的位置，而该目录位于当前工作目录下的 <code>user</code> 目录中。</p>
<p>相对路径的优势在于更加简洁，不需要显式地指定根目录。它适用于当前工作目录已知的情况，并且可以相对于当前位置快速定位文件或目录。</p>
<p>总结起来，绝对路径以根目录为起点，以斜线开头来描述文件或目录的位置。相对路径以当前工作目录为起点，不以斜线开头来描述文件或目录的位置，路径描述相对于当前位置。</p>
<h1 id="特殊路径符"><a class="markdownIt-Anchor" href="#特殊路径符"></a> 特殊路径符</h1>
<ol>
<li>
<p><code>.</code> （点）：表示当前目录。使用单个点表示当前所在的目录。例如，<code>./file.txt</code> 表示当前目录下的文件 <code>file.txt</code>。</p>
</li>
<li>
<p><code>..</code> （点点）：表示上一级目录。使用两个点表示当前目录的父目录。例如，<code>../dir/file.txt</code> 表示当前目录的上一级目录中的 <code>dir</code> 目录下的文件 <code>file.txt</code>。</p>
</li>
<li>
<p><code>~</code> （波浪线）：表示当前用户的主目录。波浪线后面可以跟其他路径来表示主目录下的子目录或文件。例如，<code>~/Documents</code> 表示当前用户主目录下的 <code>Documents</code> 目录。</p>
</li>
<li>
<p><code>/</code> （斜线）：表示根目录。根目录是整个文件系统的顶级目录。以斜线开头的路径表示从根目录开始的绝对路径。例如，<code>/usr/bin</code> 表示根目录下的 <code>usr</code> 目录中的 <code>bin</code> 目录。</p>
</li>
<li>
<p><code>-</code> （短横线）：表示前一个工作目录。使用短横线可以回到上一个工作目录。这在需要快速切换目录时很有用。</p>
<h1 id="普通用户和系统管理员用户"><a class="markdownIt-Anchor" href="#普通用户和系统管理员用户"></a> 普通用户和系统管理员用户</h1>
<ol>
<li>
<p>在 Linux 系统中，root 用户和普通用户是两种不同的用户身份。下面详细讲解它们的区别和特点：</p>
<ol>
<li>Root 用户：
<ul>
<li>超级用户：root 用户是系统的超级用户，也称为管理员用户。它拥有系统中的最高权限，可以执行所有操作，包括修改系统配置、安装软件、管理用户和文件等。</li>
<li>UID 和 GID：root 用户的用户标识号（UID）和组标识号（GID）都为 0。</li>
<li>根目录：root 用户的主目录为根目录（/），在大多数 Linux 发行版中，其主目录路径为 “/root”。</li>
<li>安全性注意：由于 root 用户具有最高权限，使用 root 用户时需要谨慎操作。推荐使用 sudo 命令以普通用户身份执行需要特权的任务，以提高系统安全性。</li>
<li>特权访问：root 用户可以直接登录系统，或通过其他用户登录后切换到 root 用户。默认情况下，远程登录方式禁止直接使用 root 用户登录。</li>
</ul>
</li>
<li>普通用户：
<ul>
<li>一般权限：普通用户是系统中除 root 用户以外的用户。它们具有有限的权限，并受到权限限制，无法执行对系统关键部分的修改和访问。</li>
<li>UID 和 GID：普通用户具有非零的用户标识号（UID）和组标识号（GID），用于唯一标识用户和分配权限。</li>
<li>主目录：每个普通用户都有一个主目录，用于存储其个人文件和配置。主目录的路径通常是 “/home/username”，其中 “username” 是用户的用户名。</li>
<li>限制：普通用户受到许多权限限制，例如无法修改系统配置、安装软件包或访问其他用户的私有文件等。这些限制增加了系统的安全性，防止误操作和恶意行为。</li>
</ul>
</li>
</ol>
<p>总结起来，root 用户是系统的超级用户，具有最高权限和特权，能够执行所有操作。普通用户是系统中的常规用户，受到权限限制，无法执行对系统关键部分的修改和访问。使用 root 用户需要谨慎，而普通用户则更适合日常任务和常规操作，以增加系统安全性。</p>
<h1 id="su和exit"><a class="markdownIt-Anchor" href="#su和exit"></a> su和exit</h1>
</li>
</ol>
</li>
</ol>
<p>su命令是用于在 Linux 系统中切换用户的命令，它允许当前用户切换到其他用户账户，包括 root 用户。而exit命令用于退出当前用户的登录会话。</p>
<p>以下是对su命令和exit命令的详细解释：</p>
<ol>
<li>su命令：
<ul>
<li>语法：su [-] [用户名]</li>
<li>
<ul>
<li>符号是可选的，表示是否在切换用户后加载目标用户的环境变量。如果使用 - 符号，会加载目标用户的环境变量，包括其配置文件（如 .bashrc）中定义的环境变量。如果不使用 - 符号，则不会加载环境变量。</li>
</ul>
</li>
<li>用户名参数是要切换到的目标用户的用户名。如果省略用户名，su 命令默认切换到 root 用户。</li>
<li>在切换用户时，如果当前用户不是 root 用户，通常需要输入目标用户的密码。只有在当前用户是 root 用户时，才可以直接切换到其他用户而无需密码。</li>
</ul>
</li>
<li>exit命令：
<ul>
<li>exit命令用于退出当前用户的登录会话或终端窗口。</li>
<li>当使用 su 命令切换到其他用户时，可以使用 exit 命令返回到之前的用户。执行 exit 命令后，会关闭当前用户的登录会话或终端窗口，并回到上一个用户的会话或窗口。</li>
<li>另外，可以使用快捷键 Ctrl + D 来执行与 exit 命令相同的操作，即退出当前用户的登录会话。</li>
</ul>
</li>
</ol>
<p>需要注意的是，su 命令和 exit 命令都需要在命令行中使用，而不是在图形界面中使用。su 命令要求输入目标用户的密码，而 exit 命令不需要任何参数，直接执行即可退出当前用户的登录会话。这些命令在管理 Linux 系统时非常有用，可以在不同的用户之间切换，以便执行特定的任务和操作。</p>
<h1 id="sudo命令"><a class="markdownIt-Anchor" href="#sudo命令"></a> sudo命令</h1>
<p>sudo命令是在 Linux 系统中用于临时以 root 身份执行命令的工具。它允许普通用户在执行需要特权的操作时，临时获取 root 用户的权限，而无需切换到 root 用户。</p>
<p>以下是对sudo命令的详细解释：</p>
<ol>
<li>语法：sudo 其他命令
<ul>
<li>其他命令是要以 root 权限执行的实际命令。在其他命令之前添加 sudo 前缀，即可为该命令临时赋予 root 用户的权限。</li>
<li>举例来说，如果要以 root 权限安装软件包，可以使用命令 sudo apt install package-name。</li>
</ul>
</li>
<li>配置 sudo 认证：
<ul>
<li>并非所有用户都有权使用 sudo 命令。在 Linux 系统中，需要配置 sudo 来授权普通用户使用该命令。</li>
<li>在配置 sudo 时，可以为特定的用户或用户组分配 sudo 认证。</li>
<li>sudo 配置文件位于 /etc/sudoers，可以使用 visudo 命令来编辑该文件，visudo 命令会检查 sudoers 文件的语法错误。</li>
<li>在 sudoers 文件中，可以使用特定的语法为用户或用户组添加授权，例如：
<ul>
<li>user1 ALL=(ALL) ALL：为 user1 用户授予所有命令的 sudo 权限。</li>
<li>%group1 ALL=(ALL) ALL：为 group1 用户组授予所有命令的 sudo 权限。</li>
</ul>
</li>
</ul>
</li>
<li>sudo 命令的工作方式：
<ul>
<li>当用户使用 sudo 执行命令时，系统会要求用户输入自己的密码进行身份验证。这是为了确保执行特权操作的用户是经过授权的。</li>
<li>默认情况下，sudo 会在一段时间内缓存用户的密码，以便在此期间内执行多次 sudo 命令时无需重复输入密码。</li>
<li>sudo 还提供了一些选项，例如：
<ul>
<li>-i：以 root 用户的身份登录并获取 root 用户的环境变量。</li>
<li>-u user：以指定用户的身份执行命令。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="查看-linux-文件的权限管控信息"><a class="markdownIt-Anchor" href="#查看-linux-文件的权限管控信息"></a> 查看 Linux 文件的权限管控信息</h1>
<p>​	在 Linux 系统中，可以使用 ls 命令结合选项来查看文件的权限管控信息。ls 命令用于列出目录中的文件和子目录，并显示其相关属性。</p>
<ul>
<li>语法：ls -l [文件或目录]</li>
<li>-l 选项指示 ls 命令以长格式显示文件信息，包括权限、所有者、组、大小、时间戳等。</li>
<li>文件或目录参数是要查看权限信息的文件或目录的路径。如果省略该参数，默认为当前目录。</li>
</ul>
<p>输出结果中权限信息由 10 个字符组成，分别表示文件类型和文件权限。前三个字符表示所有者权限，接下来三个字符表示所属组权限，最后三个字符表示其他用户权限。</p>
<h1 id="读-写-执行三种权限的含义"><a class="markdownIt-Anchor" href="#读-写-执行三种权限的含义"></a> 读、写、执行三种权限的含义</h1>
<p>​	在 Linux 系统中，每个文件都有三种基本权限：读取权限、写入权限和执行权限。</p>
<ul>
<li>读取权限（r）：读取权限允许用户查看文件的内容。对于目录来说，读取权限允许用户列出目录中的文件和子目录。</li>
<li>写入权限（w）：写入权限允许用户修改文件的内容、重命名文件或删除文件。对于目录来说，写入权限允许用户在目录中创建、删除或重命名文件和子目录。</li>
<li>执行权限（x）：执行权限允许用户执行可执行文件、脚本或进入目录。</li>
</ul>
<p>权限字符的含义：</p>
<ul>
<li>r 表示读取权限，用数字 4 表示。</li>
<li>w 表示写入权限，用数字 2 表示。</li>
<li>x 表示执行权限，用数字 1 表示。</li>
<li>“-” 表示没有相应的权限。</li>
</ul>
<p>在权限字符的表示中，可以使用数字表示权限组合。例如，rwx 表示读取、写入和执行权限的组合，其数字表示为 7。r-x 表示具有读取和执行权限，但没有写入权限，其数字表示为 5。</p>
<p>通过对文件和目录设置适当的权限，可以实现对系统资源的安全管控。正确设置权限可以保护重要文件的机密性、完整性和可用性，并防止未经授权的访问和修改。</p>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401312251927.png" alt="image-20240131225129893" /></p>
<ul>
<li>第一个字符（-、d、l）表示文件类型：
<ul>
<li>“-” 表示普通文件。</li>
<li>“d” 表示目录（文件夹）。</li>
<li>“l” 表示符号链接（软链接）。</li>
</ul>
</li>
<li>剩下的九个字符表示权限，按照权限分为三组：
<ol>
<li>所属用户权限（User）：
<ul>
<li>第一个字符表示所属用户对文件或目录的权限：
<ul>
<li>“r” 表示具有读取权限。</li>
<li>“-” 表示没有读取权限。</li>
</ul>
</li>
<li>第二个字符表示所属用户对文件或目录的写入权限：
<ul>
<li>“w” 表示具有写入权限。</li>
<li>“-” 表示没有写入权限。</li>
</ul>
</li>
<li>第三个字符表示所属用户对文件或目录的执行权限：
<ul>
<li>“x” 表示具有执行权限。</li>
<li>“-” 表示没有执行权限。</li>
</ul>
</li>
</ul>
</li>
<li>所属用户组权限（Group）：
<ul>
<li>第四个字符表示所属用户组对文件或目录的权限，含义与所属用户权限相同。</li>
<li>第五个字符表示所属用户组对文件或目录的写入权限。</li>
<li>第六个字符表示所属用户组对文件或目录的执行权限。</li>
</ul>
</li>
<li>其他用户权限（Other）：
<ul>
<li>第七个字符表示其他用户对文件或目录的权限。</li>
<li>第八个字符表示其他用户对文件或目录的写入权限。</li>
<li>第九个字符表示其他用户对文件或目录的执行权限。</li>
</ul>
</li>
</ol>
</li>
</ul>
<p>这种权限字符的排列顺序是：文件类型 + 所属用户权限 + 所属用户组权限 + 其他用户权限。</p>
<p>权限字符 “r”、“w” 和 “x” 分别表示读取、写入和执行权限。“-” 表示没有相应的权限。</p>
<p>通过读取这些权限字符，可以了解特定文件或目录对不同用户的访问权限。正确设置这些权限可以确保文件和目录的安全性和可访问性。</p>
<p>分享</p>
<p>rwx是UNIX和类UNIX系统中用于表示文件或目录权限的符号。它是由三个字符组成，分别代表读权限（r），写权限（w）和执行权限（x）。</p>
<ul>
<li>r（读权限）表示允许用户读取文件的内容或查看目录中的文件列表。对于文件来说，这意味着可以读取文件的内容；对于目录来说，这意味着可以列出目录中的文件。</li>
<li>w（写权限）表示允许用户修改文件的内容或在目录中创建、删除和重命名文件。对于文件来说，这意味着可以修改文件的内容；对于目录来说，这意味着可以在目录中进行写操作。</li>
<li>x（执行权限）表示允许用户执行文件或将工作目录更改为目录。对于文件来说，这意味着可以将文件作为可执行程序来运行；对于目录来说，这意味着可以进入该目录并在其中执行操作。</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
    <article
  id="post-05_C语言高级学习/04_C语言补弱"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2024/01/24/05_C%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7%E5%AD%A6%E4%B9%A0/04_C%E8%AF%AD%E8%A8%80%E8%A1%A5%E5%BC%B1/"
    >C语言补弱</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/01/24/05_C%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7%E5%AD%A6%E4%B9%A0/04_C%E8%AF%AD%E8%A8%80%E8%A1%A5%E5%BC%B1/" class="article-date">
  <time datetime="2024-01-24T01:30:19.000Z" itemprop="datePublished">2024-01-24</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/C%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7%E5%AD%A6%E4%B9%A0/">C语言高级学习</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>==我希望用一生的时间不断学习和深入电子计算机相关的一切知识，并将其整理成网络，并分享出去，与更多志同道合的人共同进步==</p>
<p>==无论你最终要成为一个怎样的人，蛋清千万记住，时光在飞逝==</p>
<h1 id="结构体"><a class="markdownIt-Anchor" href="#结构体"></a> 结构体</h1>
<p>​</p>
<p><code>struct</code>是C语言中的关键字，用于定义自定义的数据类型，可以将多个不同类型的变量组合在一起形成一个结构体，从而创建一个包含多个成员的复合数据类型。</p>
<p>结构体的定义通常包括以下几个部分：</p>
<ol>
<li><code>struct</code>关键字：用于声明一个结构体类型。</li>
<li>结构体标签：用于标识结构体类型的名称，可以在定义时指定，也可以省略。</li>
<li>成员列表：定义结构体的成员，每个成员包括类型和名称。</li>
</ol>
<p>下面是一个简单的示例，展示了如何使用<code>struct</code>定义一个包含姓名和年龄的人员信息结构体：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在上面的示例中，<code>struct</code>关键字用于定义一个名为<code>Person</code>的结构体类型。该结构体有两个成员：<code>name</code>和<code>age</code>，分别表示人员的姓名和年龄。</p>
<p>定义结构体后，就可以声明结构体变量并使用它们，如下所示：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">person1</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">person2</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">strcpy</span>(person1.name, <span class="string">&quot;John Smith&quot;</span>);</span><br><span class="line">person1.age = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Person 1: Name = %s, Age = %d\n&quot;</span>, person1.name, person1.age);</span><br><span class="line"></span><br><span class="line">person2 = person1;  <span class="comment">// 结构体变量之间可以进行赋值操作</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Person 2: Name = %s, Age = %d\n&quot;</span>, person2.name, person2.age);</span><br></pre></td></tr></table></figure>
<p>在上面的示例中，我们声明了两个<code>Person</code>类型的结构体变量<code>person1</code>和<code>person2</code>。然后，我们使用<code>strcpy</code>函数将字符串&quot;John Smith&quot;复制到<code>person1</code>的<code>name</code>成员中，并将30赋值给<code>person1</code>的<code>age</code>成员。最后，我们打印了<code>person1</code>和<code>person2</code>的姓名和年龄。</p>
<p>结构体变量的成员可以通过<code>.</code>运算符来访问，即<code>结构体变量名.成员名</code>。可以像访问普通变量一样访问结构体变量的成员。</p>
<p>使用结构体可以更好地组织和管理相关数据，将多个相关的数据打包在一起，方便进行传递和处理。结构体还可以嵌套定义，允许在一个结构体中包含另一个结构体作为成员，从而形成更复杂的数据结构。</p>
<p>示例代码1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> *name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line">    </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">person1</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Person</span> <span class="title">person2</span>;</span></span><br><span class="line"></span><br><span class="line">    person1.name = <span class="string">&quot;John Smith&quot;</span>;</span><br><span class="line">    person1.age = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Person 1: Name = %s, Age = %d\n&quot;</span>, person1.name, person1.age);</span><br><span class="line">    </span><br><span class="line">    person2 = person1;  <span class="comment">// 结构体变量之间可以进行赋值操作</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Person 2: Name = %s, Age = %d\n&quot;</span>, person2.name, person2.age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>问题1：</p>
<p>​	上面结构体中的name用来存放一个人的名字，那请问为什么可以这样写，这样写为什么可以成立呢？</p>
<p>​	学习例程1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> c = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, c);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>打印为正常的字符：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401242202460.png" alt="image-20240124220211404" /></p>
<p>从上可以 得到，char类型定义的是单个字符，而事实上每个字符对应的都是相对应的数字罢了，可以看下面的学习示例</p>
<p>学习示例2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> c = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line">    <span class="type">int</span> d = <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;c = %c\n&quot;</span>, c);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;d = %c\n&quot;</span>, d);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401242204555.png" alt="image-20240124220450510" /></p>
<p>​	这次看到了吧，其实不管是int 类型的还是char类型的，最终凭靠的还是对应的printf，这些都是无所谓的。那字符串是怎样的呢？</p>
<p>学习示例3：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> string1[<span class="number">50</span>] = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, string1);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>​	这是一个最简单的字符串打印，实际上呢，字符串也就是一个一个字符的组合罢了，以\0结尾，字符串的大小为数组长度减一，然后看更详细的一个案例：</p>
<p>学习示例4：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> string1[<span class="number">50</span>] = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, string1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, string1[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, string1[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, string1[<span class="number">2</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, string1[<span class="number">3</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, string1[<span class="number">4</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, string1[<span class="number">5</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, string1[<span class="number">6</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, string1[<span class="number">7</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401242213481.png" alt="image-20240124221312434" /></p>
<p>​	同样的，这些也不外乎是一些对应的ascll码值而已，但那个char *的是怎样的呢，目前还是不懂。</p>
<p>示例代码4</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> *<span class="built_in">string</span>;</span><br><span class="line">    <span class="built_in">string</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, <span class="built_in">string</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>​	这里的string是一个指针变量，它其实只是一个地址而已，而&quot;this is a string&quot;这个字符串实际上存储在了其他的区域，这里的赋值实际意义上是将这个字符串存储位置的首地址给了string，string本身也就是一个指针变量，指针变量就是专门用于存放数据地址的，现在我应该是懂了。</p>
<p>问题2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person person1;</span><br><span class="line">Person person2;</span><br></pre></td></tr></table></figure>
<p>​	在上面的代码中不能直接这样来创建person1和person2这两个变量吗，答案是不能，对应的打印信息如下所示：<br />
<img src="https://chai-1301855619.cos.ap-beijing.myqcloud.com/202401242233006.png" alt="image-20240124223346726" />	在 C 语言中，结构体类型必须要使用 <code>struct</code> 关键字来定义，然后可以使用定义的结构体类型来创建相应的变量。</p>
<p>​	如果想上面那样子定义就需要用到结构体了，例如可以这样修改：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> *name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125; Person;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Person person1;</span><br><span class="line">    Person person2;</span><br><span class="line"></span><br><span class="line">    person1.name = <span class="string">&quot;John Smith&quot;</span>;</span><br><span class="line">    person1.age = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Person 1: Name = %s, Age = %d\n&quot;</span>, person1.name, person1.age);</span><br><span class="line"></span><br><span class="line">    person2 = person1;  <span class="comment">// 结构体变量之间可以进行赋值操作</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Person 2: Name = %s, Age = %d\n&quot;</span>, person2.name, person2.age);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="typedef-别名"><a class="markdownIt-Anchor" href="#typedef-别名"></a> typedef 别名</h1>
<p><code>typedef</code> 是 C 语言中的一个关键字，用于为已有的数据类型创建新的别名。通过 <code>typedef</code>，我们可以为现有的数据类型赋予一个新的名称，以便在程序中更方便地使用。</p>
<p><code>typedef</code> 的语法如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> &lt;existing_data_type&gt; &lt;new_alias&gt;;</span><br></pre></td></tr></table></figure>
<p>其中，<code>existing_data_type</code> 是现有的数据类型，可以是基本的数据类型（如 <code>int</code>、<code>float</code>、<code>char</code> 等）或自定义的数据类型（如结构体、枚举等），<code>new_alias</code> 是我们为该数据类型创建的新的别名。</p>
<p>使用 <code>typedef</code> 的主要优点是提高代码的可读性和可维护性。通过为数据类型创建别名，我们可以在代码中使用更具有描述性的名称，从而使代码更易于理解。</p>
<p>以下是一些 <code>typedef</code> 的示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> Integer;</span><br></pre></td></tr></table></figure>
<p>这个例子中，我们为 <code>int</code> 类型创建了一个新的别名 <code>Integer</code>。现在，我们可以使用 <code>Integer</code> 来定义整型变量，就像使用 <code>int</code> 一样：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer num = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p>另一个常见的应用是在定义结构体时使用 <code>typedef</code>，以便在创建结构体变量时不需要每次都加上 <code>struct</code> 关键字。例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> *name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125; Person;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们为匿名的结构体类型创建了别名 <code>Person</code>。现在，我们可以直接使用 <code>Person</code> 来定义结构体变量，而不需要每次都写 <code>struct</code> 关键字：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person person1;</span><br></pre></td></tr></table></figure>
<p><code>typedef</code> 还可以用于创建函数指针类型的别名，以简化复杂的函数指针声明。例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="title function_">int</span> <span class="params">(*MathOperation)</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们为接受两个整数参数并返回一个整数的函数指针类型创建了别名 <code>MathOperation</code>。现在，我们可以使用 <code>MathOperation</code> 来声明函数指针变量，而不需要每次都写出完整的函数指针声明：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MathOperation add;</span><br></pre></td></tr></table></figure>
<p>总结起来，<code>typedef</code> 允许我们为已有的数据类型创建新的别名，提高代码的可读性和可维护性。通过使用 <code>typedef</code>，我们可以在代码中使用更具有描述性的名称，使代码更易于理解和维护。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
   
  
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2024
        <i class="ri-heart-fill heart_icon"></i> chai
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="热爱学习的未来酱"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E7%94%9F%E6%B4%BB">生活</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E7%91%9E%E8%8A%AF%E5%BE%AE">瑞芯微</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/Linux%E5%AD%A6%E4%B9%A0">Linux学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E8%AF%BB%E4%B9%A6">读书</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/C%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7%E5%AD%A6%E4%B9%A0">C语言高级学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95">工作记录</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7">小技巧</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/shell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0">shell编程学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/PCB%E5%AD%A6%E4%B9%A0">PCB学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%AD%A6%E4%B9%A0">音视频学习</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=22707008&auto=0&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
    

  </div>
</body>

</html>